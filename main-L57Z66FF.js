import{a as Kt,b as Yt,c as Qt,d as Xt,e as Z,f as Ie,g as Zt,h as ye}from"./chunk-XTZV5LFA.js";import{$a as Ut,$b as Fe,$c as J,Ac as _i,Ba as H,Bc as yi,Cc as vi,Dc as xi,Ea as u,Ec as Si,Fc as nt,Gc as bi,Ha as Vt,Hc as wi,Ic as Pi,Kb as zt,L as Dt,Lb as ie,Lc as me,Mb as Q,Mc as Ci,Nb as Je,Nc as Re,O as Gt,Oa as vt,Ob as qt,Oc as O,Pa as m,Pb as X,Pc as Ei,Q as B,Qa as i,Qc as W,R as Rt,Ra as t,Rc as Y,Sa as g,Sc as G,Ta as Qe,Tc as Ti,Ua as Xe,Ub as et,Uc as oe,V as v,Va as xt,Vb as le,Vc as Ue,W as x,Wa as Ft,Wb as ne,Wc as V,X as Ye,Xa as Wt,Xb as ve,Xc as Be,Y as Nt,Ya as M,Yb as xe,Yc as be,Za as A,Zb as ae,Zc as R,_a as c,_b as Se,a as j,ab as Le,ac as Me,b as se,bb as N,bc as ke,c as k,cb as ue,cc as Ae,da as je,db as r,dc as tt,eb as p,ec as We,fb as b,fc as it,gb as q,gc as re,hb as De,hc as Jt,ib as E,ic as ei,j as At,jb as T,jc as ti,kb as I,kc as ii,lb as Ze,lc as ni,mb as Bt,mc as ai,nb as St,nc as ri,oa as z,ob as $t,oc as oi,pa as Lt,pb as ce,pc as si,q as Ke,qb as Ge,qc as li,ra as o,rb as Ve,rc as di,sb as Ht,sc as ci,tc as mi,ub as jt,uc as ze,va as te,vc as pi,w as Ot,wc as gi,xc as ui,yc as fi,zc as hi}from"./chunk-JMQVBRUG.js";function qi(n,a){if(n&1&&(i(0,"div",5)(1,"div",19),r(2),t()()),n&2){let e=c();o(2),b(" ",e.errorMessage," ")}}var at=class n{authService=B(J);router=B(Z);username="";password="";errorMessage="";login(){if(this.username===""){this.errorMessage="Please enter your username";return}if(this.password===""){this.errorMessage="Please enter your password";return}this.errorMessage="",this.authService.login(this.username,this.password).then(()=>{this.router.navigate(["/dashboard"]),this.username="",this.password="",this.errorMessage=""}).catch(a=>{console.error("Login failed:",a),a.code==="auth/user-not-found"?this.errorMessage="Username not found. Please check your username or register for a new account.":a.code==="auth/wrong-password"?this.errorMessage="Incorrect password. Please try again.":a.code==="auth/invalid-email"?this.errorMessage="Invalid email format.":a.message==="Username not found"?this.errorMessage="Username not found. Please check your username or register for a new account.":this.errorMessage="Login failed: "+a.message})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-login"]],decls:29,vars:3,consts:[[1,"container-fluid"],[1,"row","justify-content-center","mt-3","mt-md-5"],[1,"col-12","col-sm-8","col-md-6","col-lg-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["class","mb-3",4,"ngIf"],["for","username",1,"form-label"],["type","text","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row","mt-3"],[1,"col-12","col-md-6","mb-2","mb-md-0"],["routerLink","/register",2,"text-decoration","none"],[1,"text-danger"],[1,"col-12","col-md-6"],["routerLink","/forgot-password",1,"text-dark",2,"text-decoration","none"],["role","alert",1,"alert","alert-danger"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form")(6,"div",5)(7,"h4",6),r(8,"Login"),t()(),u(9,qi,3,1,"div",7),i(10,"div",5)(11,"label",8),r(12,"Username"),t(),i(13,"input",9),I("ngModelChange",function(d){return T(s.username,d)||(s.username=d),d}),t()(),i(14,"div",5)(15,"label",10),r(16,"Password"),t(),i(17,"input",11),I("ngModelChange",function(d){return T(s.password,d)||(s.password=d),d}),t()(),i(18,"button",12),A("click",function(){return s.login()}),r(19," Login "),t(),i(20,"div",13)(21,"div",14)(22,"a",15),r(23,"Need Account? "),i(24,"span",16),r(25,"Register"),t()()(),i(26,"div",17)(27,"a",18),r(28,"Forgot Password? "),t()()()()()()()()()),e&2&&(o(9),m("ngIf",s.errorMessage),o(4),E("ngModel",s.username),o(4),E("ngModel",s.password))},dependencies:[X,Q,re,Se,le,ne,ve,ae,xe,ye,Ie],styles:[".container-fluid[_ngcontent-%COMP%]{background:#f8f9fa;min-height:100vh}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 8px 25px #0000001a}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.btn[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1.5rem;font-weight:500;transition:all .2s ease}.btn-info[_ngcontent-%COMP%]{background:#0d6efd;border-color:#0d6efd;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#0b5ed7;border-color:#0a58ca;transform:translateY(-1px)}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-dark[_ngcontent-%COMP%]{color:#495057!important}a[_ngcontent-%COMP%]{text-decoration:none;transition:color .2s ease}a[_ngcontent-%COMP%]:hover{color:#0d6efd!important}"]})};function Ki(n,a){n&1&&(i(0,"div",39),g(1,"div",40),i(2,"p",41),r(3,"Loading games..."),t()())}function Yi(n,a){n&1&&(i(0,"div",42),g(1,"i",43),i(2,"p",5),r(3,"No games scheduled for today"),t()())}function Qi(n,a){if(n&1){let e=M();i(0,"div",50)(1,"button",51),A("click",function(){v(e);let l=c(2);return x(l.previousGame())}),g(2,"i",52),t(),i(3,"button",53),A("click",function(){v(e);let l=c(2);return x(l.nextGame())}),g(4,"i",54),t()()}}function Xi(n,a){if(n&1&&(i(0,"div",71)(1,"span",72),r(2),t()()),n&2){let e=c().ngIf;o(),N("live",e.period&&e.period!=="Final")("final",e.period==="Final"),o(),b(" ",e.period||"Live"," ")}}function Zi(n,a){if(n&1&&g(0,"img",73),n&2){let e=c().ngIf;m("src",e.awayTeamLogo,z)("alt",e.awayTeam)}}function Ji(n,a){n&1&&(i(0,"div",74)(1,"span",75),r(2,"VS"),t()())}function en(n,a){if(n&1&&(i(0,"div",76)(1,"div",77)(2,"span",78),r(3),t(),i(4,"span",79),r(5,"-"),t(),i(6,"span",80),r(7),t()()()),n&2){let e=c().ngIf;o(3),p(e.awayScore||0),o(4),p(e.homeScore||0)}}function tn(n,a){if(n&1&&g(0,"img",73),n&2){let e=c().ngIf;m("src",e.homeTeamLogo,z)("alt",e.homeTeam)}}function nn(n,a){if(n&1&&(i(0,"div",55)(1,"div",56)(2,"div",57)(3,"span",58),r(4),t(),i(5,"span",59),r(6),t()(),u(7,Xi,3,5,"div",60),t(),i(8,"div",61)(9,"div",62),u(10,Zi,1,2,"img",63),i(11,"div",64)(12,"div",65),r(13),t(),i(14,"div",66),r(15,"Away"),t()()(),i(16,"div",67),u(17,Ji,3,0,"div",68)(18,en,8,2,"div",69),t(),i(19,"div",70)(20,"div",64)(21,"div",65),r(22),t(),i(23,"div",66),r(24,"Home"),t()(),u(25,tn,1,2,"img",63),t()()()),n&2){let e=a.ngIf,s=c(2);o(4),b("Week ",e.week),o(2),p(e.day),o(),m("ngIf",s.hasScore(e)),o(3),m("ngIf",e.awayTeamLogo),o(3),p(e.awayTeam),o(4),m("ngIf",!s.hasScore(e)),o(),m("ngIf",s.hasScore(e)),o(4),p(e.homeTeam),o(3),m("ngIf",e.homeTeamLogo)}}function an(n,a){if(n&1){let e=M();i(0,"button",83),A("click",function(){let l=v(e).index,d=c(3);return x(d.goToGame(l))}),t()}if(n&2){let e=a.index,s=c(3);N("active",e===s.currentGameIndex)}}function rn(n,a){if(n&1&&(i(0,"div",81),u(1,an,1,2,"button",82),t()),n&2){let e=c(2);o(),m("ngForOf",e.todaysGames)}}function on(n,a){if(n&1&&(i(0,"div",84)(1,"small",85),g(2,"i",86),r(3),t()()),n&2){let e=c(2);o(3),b(" Auto-rotating every ",e.autoRotateInterval/1e3," seconds ")}}function sn(n,a){if(n&1){let e=M();i(0,"div",44),u(1,Qi,5,0,"div",45),i(2,"div",46),A("click",function(){v(e);let l=c();return x(l.navigateToSpecificGame())}),u(3,nn,26,9,"div",47),t(),u(4,rn,2,1,"div",48)(5,on,4,1,"div",49),t()}if(n&2){let e=c();o(),m("ngIf",e.todaysGames.length>1),o(2),m("ngIf",e.todaysGames[e.currentGameIndex]),o(),m("ngIf",e.todaysGames.length>1),o(),m("ngIf",e.todaysGames.length>1)}}function ln(n,a){n&1&&(i(0,"div",39),g(1,"div",87),i(2,"p",41),r(3,"Loading users..."),t()())}function dn(n,a){n&1&&(i(0,"div",42),g(1,"i",88),i(2,"p",5),r(3,"No users found"),t()())}function cn(n,a){if(n&1&&(i(0,"div",97)(1,"small",85),r(2),t()()),n&2){let e=c(2).$implicit;o(2),p(e.player.teamName)}}function mn(n,a){if(n&1&&(i(0,"div",92)(1,"small",94),g(2,"i",95),r(3),t(),u(4,cn,3,1,"div",96),t()),n&2){let e=c().$implicit;o(3),De(" ",e.player.firstName," ",e.player.lastName," (",e.player.position,") "),o(),m("ngIf",e.player.teamName)}}function pn(n,a){if(n&1&&(i(0,"div",89)(1,"div",90),r(2),t(),i(3,"div",91)(4,"h6",92),r(5),t(),u(6,mn,5,4,"div",93),i(7,"small",85),r(8),t()()()),n&2){let e=a.$implicit,s=c();o(2),b(" ",e.displayName.charAt(0)||"U"," "),o(3),p(e.displayName),o(),m("ngIf",e.player),o(2),b("Joined ",s.getTimeAgo(e.createdDate))}}function gn(n,a){n&1&&(i(0,"div",39),g(1,"div",98),i(2,"p",41),r(3,"Loading transactions..."),t()())}function un(n,a){n&1&&(i(0,"div",42),g(1,"i",99),i(2,"p",5),r(3,"No recent transactions"),t()())}function fn(n,a){if(n&1&&g(0,"img",114),n&2){let e=c(2).$implicit;m("src",e.tradeData.fromTeam.logo,z)("alt",e.tradeData.fromTeam.name)}}function hn(n,a){if(n&1&&(i(0,"div",115),r(1),t()),n&2){let e=a.$implicit;o(),b(" ",e," ")}}function _n(n,a){if(n&1&&g(0,"img",114),n&2){let e=c(2).$implicit;m("src",e.tradeData.toTeam.logo,z)("alt",e.tradeData.toTeam.name)}}function yn(n,a){if(n&1&&(i(0,"div",115),r(1),t()),n&2){let e=a.$implicit;o(),b(" ",e," ")}}function vn(n,a){if(n&1&&(i(0,"div",103)(1,"div",104)(2,"h6",5),r(3),t(),i(4,"small",85),r(5),t()(),i(6,"div",105)(7,"div",106),u(8,fn,1,2,"img",107),i(9,"div",108),r(10),t(),i(11,"div",109)(12,"small",110),r(13,"Traded:"),t(),u(14,hn,2,1,"div",111),t()(),i(15,"div",112),g(16,"i",113),t(),i(17,"div",106),u(18,_n,1,2,"img",107),i(19,"div",108),r(20),t(),i(21,"div",109)(22,"small",110),r(23,"Traded:"),t(),u(24,yn,2,1,"div",111),t()()()()),n&2){let e=c().$implicit,s=c();o(3),p(e.description),o(2),p(s.getTimeAgo(e.timestamp)),o(3),m("ngIf",e.tradeData.fromTeam.logo),o(2),p(e.tradeData.fromTeam.name),o(4),m("ngForOf",e.tradeData.offeredPlayers),o(4),m("ngIf",e.tradeData.toTeam.logo),o(2),p(e.tradeData.toTeam.name),o(4),m("ngForOf",e.tradeData.requestedPlayers)}}function xn(n,a){if(n&1&&g(0,"img",121),n&2){let e=c(2).$implicit;m("src",e.teamLogo,z)("alt",e.teamName)}}function Sn(n,a){if(n&1&&g(0,"i"),n&2){let e=c(2).$implicit,s=c();ue(s.getTransactionIcon(e.type)+" "+s.getTransactionColor(e.type))}}function bn(n,a){if(n&1&&(i(0,"div",116)(1,"div",117)(2,"div",118),u(3,xn,1,2,"img",119)(4,Sn,1,2,"i",120),t(),i(5,"div",91)(6,"p",92),r(7),t(),i(8,"small",85),r(9),t()()()()),n&2){let e=c().$implicit,s=c();o(3),m("ngIf",e.teamLogo),o(),m("ngIf",!e.teamLogo),o(3),p(e.description),o(2),p(s.getTimeAgo(e.timestamp))}}function wn(n,a){if(n&1&&(i(0,"div",100),u(1,vn,25,8,"div",101)(2,bn,10,4,"div",102),t()),n&2){let e=a.$implicit;o(),m("ngIf",e.type==="trade"&&e.tradeData),o(),m("ngIf",e.type!=="trade")}}var rt=class n{constructor(a,e,s){this.authService=a;this.firestore=e;this.router=s}user=null;userSub;today=new Date;newestUsers=[];recentTransactions=[];todaysGames=[];loadingUsers=!1;loadingTransactions=!1;loadingGames=!1;currentGameIndex=0;autoRotateTimer;ROTATION_INTERVAL=3e3;totalUsers=0;totalActivePlayers=0;totalTeams=0;currentLeagueSeason=1;ngOnInit(){return k(this,null,function*(){this.userSub=this.authService.currentUser.subscribe(a=>{this.user=a}),yield this.loadTodaysGames(),yield this.loadDashboardStats(),setTimeout(()=>{this.loadNewestUsers(),this.loadRecentTransactions()},100),this.startAutoRotation()})}ngOnDestroy(){this.userSub&&this.userSub.unsubscribe(),this.stopAutoRotation()}startAutoRotation(){this.stopAutoRotation(),this.todaysGames.length>1?(console.log(`\u{1F3A0} Starting carousel rotation: ${this.todaysGames.length} games, ${this.ROTATION_INTERVAL}ms interval`),this.autoRotateTimer=setInterval(()=>{let a=this.currentGameIndex;this.nextGame(),console.log(`\u{1F504} Carousel rotated from game ${a} to game ${this.currentGameIndex}`)},this.ROTATION_INTERVAL)):console.log(`\u{1F3A0} Not starting carousel rotation: only ${this.todaysGames.length} game(s)`)}stopAutoRotation(){this.autoRotateTimer&&(console.log("\u23F9\uFE0F Stopping carousel auto-rotation"),clearInterval(this.autoRotateTimer),this.autoRotateTimer=null)}nextGame(){this.todaysGames.length>1&&(this.currentGameIndex=(this.currentGameIndex+1)%this.todaysGames.length)}previousGame(){this.todaysGames.length>1&&(this.currentGameIndex=this.currentGameIndex===0?this.todaysGames.length-1:this.currentGameIndex-1,this.startAutoRotation())}goToGame(a){a>=0&&a<this.todaysGames.length&&(this.currentGameIndex=a,this.startAutoRotation())}navigateToSpecificGame(){let a=this.todaysGames[this.currentGameIndex];a&&a.gameId&&a.homeTeamId?this.router.navigate(["/games",a.homeTeamId,a.gameId]):this.router.navigate(["/games"])}loadNewestUsers(){return k(this,null,function*(){this.loadingUsers=!0;try{let a=O(this.firestore,"users"),e=V(a,oe(10)),d=(yield G(e)).docs.map(f=>{let y=f.data(),D=y.createdAt||new Date(parseInt(f.id.substring(0,8),16)*1e3);return{id:f.id,displayName:y.displayName||"Unknown User",email:y.email||"",createdDate:D,player:void 0}}).sort((f,y)=>{let D=f.createdDate instanceof Date?f.createdDate:new Date(f.createdDate);return(y.createdDate instanceof Date?y.createdDate:new Date(y.createdDate)).getTime()-D.getTime()}).slice(0,5),_=d.map(f=>f.id),h=V(O(this.firestore,"players"),R("userId","in",_),R("status","==","active")),C=yield G(h),w=new Map;C.docs.forEach(f=>{let y=f.data();w.set(y.userId,{firstName:y.firstName||"",lastName:y.lastName||"",position:y.position||"",teamId:y.teamId})});let S=Array.from(new Set(Array.from(w.values()).map(f=>f.teamId).filter(f=>f&&f!=="none"))),P=new Map;if(S.length>0)for(let f=0;f<S.length;f+=10){let y=S.slice(f,f+10),D=V(O(this.firestore,"teams"),R("__name__","in",y));(yield G(D)).docs.forEach(F=>{let $=F.data();P.set(F.id,`${$.city} ${$.mascot}`)})}this.newestUsers=d.map(f=>{let y=w.get(f.id);if(y){let D=y.teamId&&y.teamId!=="none"&&P.get(y.teamId)||"Free Agent";f.player=se(j({},y),{teamName:D})}return f})}catch(a){console.error("Error loading newest users:",a)}finally{this.loadingUsers=!1}})}loadRecentTransactions(){return k(this,null,function*(){this.loadingTransactions=!0;try{let a=[],e=new Map,s=new Map,l=S=>k(this,null,function*(){if(e.has(S))return e.get(S);try{let P=W(this.firestore,`teams/${S}`),f=yield Y(P);if(f.exists()){let y=f.data(),D={name:`${y.city} ${y.mascot}`,logo:y.logoUrl||""};return e.set(S,D),D}}catch(P){console.error("Error loading team:",P)}return{name:"Unknown Team",logo:""}}),d=S=>k(this,null,function*(){if(s.has(S))return s.get(S);try{let P=W(this.firestore,`players/${S}`),f=yield Y(P);if(f.exists()){let y=f.data(),D=`${y.firstName} ${y.lastName}`;return s.set(S,D),D}}catch(P){console.error("Error loading player:",P)}return"Unknown Player"}),_=new Date;_.setDate(_.getDate()-30);let h=O(this.firestore,"players"),C=V(h,R("status","==","active"),oe(20)),w=yield G(C);for(let S of w.docs){let P=O(this.firestore,`players/${S.id}/history`),f=V(P,Ue("timestamp","desc"),oe(2)),y=yield G(f);for(let D of y.docs){let L=D.data();if((L.timestamp?.toDate?.()||new Date(L.timestamp))<_)continue;let $=S.data();if(["signed","traded","retired"].includes(L.action)){let U="",ee={name:"",logo:""},K=`${$.firstName} ${$.lastName}`;switch(L.teamId&&L.teamId!=="none"&&(ee=yield l(L.teamId)),L.action){case"signed":U=`${K} signed with ${ee.name||"a team"}`;break;case"traded":U=`${K} was traded to ${ee.name||"a team"}`;break;case"retired":U=`${K} announced retirement`;break}a.push({id:D.id,type:L.action,description:U,timestamp:L.timestamp,playersInvolved:[S.id],teamLogo:ee.logo,teamName:ee.name})}}}try{let S=O(this.firestore,"tradeOffers"),P=V(S,R("status","==","approved"),Ue("timestamp","desc"),oe(5)),f=yield G(P);for(let y of f.docs){let D=y.data();if((D.timestamp?.toDate?.()||new Date(D.timestamp))<_)continue;let[F,$]=yield Promise.all([l(D.fromTeamId),l(D.toTeamId)]),U=[],ee=[],K=[...D.playersOffered||[],...D.playersRequested||[]],he=K.map(ge=>d(ge)),_e=yield Promise.all(he),Pe=(D.playersOffered||[]).length;for(let ge=0;ge<Pe;ge++)U.push(_e[ge]);for(let ge=Pe;ge<_e.length;ge++)ee.push(_e[ge]);let Oe=`Trade completed between ${F.name} and ${$.name}`;a.push({id:y.id,type:"trade",description:Oe,timestamp:D.timestamp,playersInvolved:K,teamLogo:F.logo,teamName:F.name,tradeData:{fromTeam:F,toTeam:$,offeredPlayers:U,requestedPlayers:ee}})}}catch(S){console.error("Error loading trade transactions:",S)}this.recentTransactions=a.sort((S,P)=>{let f=S.timestamp?.toDate?.()||new Date(S.timestamp);return(P.timestamp?.toDate?.()||new Date(P.timestamp)).getTime()-f.getTime()}).slice(0,5)}catch(a){console.error("Error loading recent transactions:",a)}finally{this.loadingTransactions=!1}})}loadTodaysGames(){return k(this,null,function*(){this.loadingGames=!0;try{let a=W(this.firestore,"gameScheduleSettings/current"),e=yield Y(a);if(!e.exists()){console.log("\u274C No game schedule settings found"),this.todaysGames=[],this.loadingGames=!1;return}let s=e.data(),l=s.season||1,d=s.week||1,_=s.day||"D1";console.log(`\u{1F3AE} Loading games for Season ${l}, Week ${d}, ${_}`);let h=O(this.firestore,"games"),C=V(h,R("season","==",l),R("week","==",d),R("day","==",_),oe(10)),w=yield G(C);console.log(`\u{1F4CA} Found ${w.docs.length} games matching criteria`);let S=new Set;w.docs.forEach(f=>{let y=f.data();S.add(y.homeTeamId),S.add(y.awayTeamId)});let P=new Map;if(S.size>0){let f=Array.from(S);for(let y=0;y<f.length;y+=10){let D=f.slice(y,y+10),L=V(O(this.firestore,"teams"),R("__name__","in",D));(yield G(L)).docs.forEach($=>{let U=$.data();P.set($.id,{name:`${U.city} ${U.mascot}`,logo:U.logoUrl||""})})}}this.todaysGames=w.docs.map(f=>{let y=f.data(),D=P.get(y.homeTeamId)||{name:"Unknown Team",logo:""},L=P.get(y.awayTeamId)||{name:"Unknown Team",logo:""};return{gameId:f.id,homeTeam:D.name,awayTeam:L.name,homeTeamId:y.homeTeamId,awayTeamId:y.awayTeamId,homeTeamLogo:D.logo,awayTeamLogo:L.logo,week:y.week,day:y.day,time:y.time||"TBD",homeScore:y.homeScore,awayScore:y.awayScore,period:y.period}}),this.currentGameIndex=0,console.log(`\u{1F3AE} Loaded ${this.todaysGames.length} games for Season ${l}, Week ${d}, ${_}`),this.startAutoRotation()}catch(a){console.error("Error loading today's games:",a),this.todaysGames=[]}finally{this.loadingGames=!1}})}getTimeAgo(a){let e=a?.toDate?.()||new Date(a),l=new Date().getTime()-e.getTime(),d=Math.floor(l/(1e3*60*60)),_=Math.floor(d/24);return _>0?`${_} day${_>1?"s":""} ago`:d>0?`${d} hour${d>1?"s":""} ago`:"Less than an hour ago"}getTransactionIcon(a){switch(a){case"trade":return"fas fa-exchange-alt";case"signing":return"fas fa-pen-nib";case"retirement":return"fas fa-medal";default:return"fas fa-info-circle"}}getTransactionColor(a){switch(a){case"trade":return"text-primary";case"signing":return"text-success";case"retirement":return"text-warning";default:return"text-muted"}}hasScore(a){return a.homeScore!==void 0&&a.homeScore!==null||a.awayScore!==void 0&&a.awayScore!==null}get autoRotateInterval(){return this.ROTATION_INTERVAL}loadDashboardStats(){return k(this,null,function*(){try{let[a,e,s,l]=yield Promise.all([G(V(O(this.firestore,"users"),oe(1e3))),G(V(O(this.firestore,"players"),R("status","==","active"),oe(1e3))),G(V(O(this.firestore,"teams"),oe(100))),Y(W(this.firestore,"leagueSettings/season"))]);this.totalUsers=a.docs.length,this.totalActivePlayers=e.docs.length,this.totalTeams=s.docs.length,this.currentLeagueSeason=l.exists()&&l.data().currentSeason||1}catch(a){console.error("Error loading dashboard stats:",a),this.totalUsers=0,this.totalActivePlayers=0,this.totalTeams=0}})}static \u0275fac=function(e){return new(e||n)(te(J),te(me),te(Z))};static \u0275cmp=H({type:n,selectors:[["app-dashboard"]],decls:79,vars:13,consts:[[1,"container","mt-4"],[1,"row","mb-4"],[1,"col-12"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-calendar-day","me-2"],[1,"card-body"],["class","text-center py-3",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["class","games-carousel-container",4,"ngIf"],[1,"row","mb-4","mb-md-5"],[1,"col-lg-8"],[1,"card","bg-dark","text-white"],[1,"card-body","text-center","py-3","py-md-5"],[1,"display-6","display-md-4","mb-3"],[1,"lead","mb-3","mb-md-4","fs-6","fs-md-5"],[1,"ratio","ratio-16x9","mb-3","mb-md-4",2,"max-width","800px","margin","0 auto"],["src",Lt`https://player.twitch.tv/?channel=gohls_official&parent=localhost&parent=127.0.0.1&parent=your-domain.com&autoplay=false`,"allowfullscreen",""],["href","https://www.twitch.tv/gohls_official","target","_blank",1,"btn","btn-primary","btn-lg","fs-6"],[1,"fab","fa-twitch","me-2"],[1,"col-lg-4"],[1,"card","h-100"],[1,"card-header","bg-success","text-white"],[1,"fas","fa-user-plus","me-2"],["class","user-item d-flex align-items-center mb-3 p-2 border rounded",4,"ngFor","ngForOf"],[1,"card-header","bg-warning","text-dark"],[1,"fas","fa-exchange-alt","me-2"],["class","transaction-item mb-3 p-3 border rounded",4,"ngFor","ngForOf"],[1,"row"],[1,"col-6","col-md-3","mb-3"],[1,"card","text-center"],[1,"card-body","py-3"],[1,"fas","fa-users","fa-2x","text-primary","mb-2"],[1,"card-title","fs-6"],[1,"card-text","h4"],[1,"fas","fa-hockey-puck","fa-2x","text-success","mb-2"],[1,"fas","fa-trophy","fa-2x","text-warning","mb-2"],[1,"fas","fa-calendar","fa-2x","text-info","mb-2"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","text-primary"],[1,"mt-2","mb-0","text-muted"],[1,"text-center","py-4","text-muted"],[1,"fas","fa-calendar-times","fa-2x","mb-2"],[1,"games-carousel-container"],["class","carousel-nav",4,"ngIf"],[1,"single-game-container",3,"click"],["class","game-card-single",4,"ngIf"],["class","carousel-indicators",4,"ngIf"],["class","auto-rotation-info",4,"ngIf"],[1,"carousel-nav"],[1,"carousel-btn","carousel-btn-prev",3,"click"],[1,"fas","fa-chevron-left"],[1,"carousel-btn","carousel-btn-next",3,"click"],[1,"fas","fa-chevron-right"],[1,"game-card-single"],[1,"game-header"],[1,"game-week-info"],[1,"week-badge"],[1,"day-badge"],["class","game-status",4,"ngIf"],[1,"teams-container"],[1,"team-display","away-team"],["class","team-logo",3,"src","alt",4,"ngIf"],[1,"team-info"],[1,"team-name"],[1,"team-record"],[1,"vs-section"],["class","vs-display",4,"ngIf"],["class","score-display",4,"ngIf"],[1,"team-display","home-team"],[1,"game-status"],[1,"status-badge"],[1,"team-logo",3,"src","alt"],[1,"vs-display"],[1,"vs-text"],[1,"score-display"],[1,"score-line"],[1,"away-score"],[1,"score-separator"],[1,"home-score"],[1,"carousel-indicators"],["class","indicator-dot",3,"active","click",4,"ngFor","ngForOf"],[1,"indicator-dot",3,"click"],[1,"auto-rotation-info"],[1,"text-muted"],[1,"fas","fa-sync-alt","me-1"],[1,"spinner-border","spinner-border-sm","text-success"],[1,"fas","fa-users","fa-2x","mb-2"],[1,"user-item","d-flex","align-items-center","mb-3","p-2","border","rounded"],[1,"user-avatar","me-3"],[1,"flex-grow-1"],[1,"mb-1"],["class","mb-1",4,"ngIf"],[1,"text-success"],[1,"fas","fa-hockey-puck","me-1"],["class","mt-1",4,"ngIf"],[1,"mt-1"],[1,"spinner-border","spinner-border-sm","text-warning"],[1,"fas","fa-clipboard-list","fa-2x","mb-2"],[1,"transaction-item","mb-3","p-3","border","rounded"],["class","trade-transaction",4,"ngIf"],["class","regular-transaction",4,"ngIf"],[1,"trade-transaction"],[1,"trade-header","mb-2"],[1,"trade-details","d-flex","justify-content-between","align-items-start"],[1,"trade-side","text-center",2,"flex","1"],["class","team-logo-trade mb-2",3,"src","alt",4,"ngIf"],[1,"team-name-small","mb-1"],[1,"traded-players"],[1,"text-muted","d-block"],["class","player-name-small",4,"ngFor","ngForOf"],[1,"trade-arrow","mx-3","align-self-center"],[1,"fas","fa-exchange-alt","text-primary","fa-lg"],[1,"team-logo-trade","mb-2",3,"src","alt"],[1,"player-name-small"],[1,"regular-transaction"],[1,"d-flex","align-items-start"],[1,"transaction-icon","me-3"],["class","team-logo-transaction",3,"src","alt",4,"ngIf"],[3,"class",4,"ngIf"],[1,"team-logo-transaction",3,"src","alt"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),g(6,"i",6),r(7,"Today's Games "),t()(),i(8,"div",7),u(9,Ki,4,0,"div",8)(10,Yi,4,0,"div",9)(11,sn,6,4,"div",10),t()()()(),i(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"h1",15),r(17,"Welcome to GOHLS"),t(),i(18,"p",16),r(19,"Watch live games and stay updated with the latest league action"),t(),i(20,"div",17),g(21,"iframe",18),t(),i(22,"a",19),g(23,"i",20),r(24,"Watch on Twitch "),t()()()(),i(25,"div",21)(26,"div",22)(27,"div",23)(28,"h5",5),g(29,"i",24),r(30,"Newest Users "),t()(),i(31,"div",7),u(32,ln,4,0,"div",8)(33,dn,4,0,"div",9)(34,pn,9,4,"div",25),t()()()(),i(35,"div",1)(36,"div",2)(37,"div",22)(38,"div",26)(39,"h5",5),g(40,"i",27),r(41,"Recent Transactions "),t()(),i(42,"div",7),u(43,gn,4,0,"div",8)(44,un,4,0,"div",9)(45,wn,3,2,"div",28),t()()()(),i(46,"div",29)(47,"div",30)(48,"div",31)(49,"div",32),g(50,"i",33),i(51,"h6",34),r(52,"Total Users"),t(),i(53,"p",35),r(54),t()()()(),i(55,"div",30)(56,"div",31)(57,"div",32),g(58,"i",36),i(59,"h6",34),r(60,"Active Players"),t(),i(61,"p",35),r(62),t()()()(),i(63,"div",30)(64,"div",31)(65,"div",32),g(66,"i",37),i(67,"h6",34),r(68,"Teams"),t(),i(69,"p",35),r(70),t()()()(),i(71,"div",30)(72,"div",31)(73,"div",32),g(74,"i",38),i(75,"h6",34),r(76,"Current Season"),t(),i(77,"p",35),r(78),t()()()()()()),e&2&&(o(9),m("ngIf",s.loadingGames),o(),m("ngIf",!s.loadingGames&&s.todaysGames.length===0),o(),m("ngIf",!s.loadingGames&&s.todaysGames.length>0),o(21),m("ngIf",s.loadingUsers),o(),m("ngIf",!s.loadingUsers&&s.newestUsers.length===0),o(),m("ngForOf",s.newestUsers),o(9),m("ngIf",s.loadingTransactions),o(),m("ngIf",!s.loadingTransactions&&s.recentTransactions.length===0),o(),m("ngForOf",s.recentTransactions),o(9),p(s.totalUsers),o(8),p(s.totalActivePlayers),o(8),p(s.totalTeams),o(8),p(s.currentLeagueSeason))},dependencies:[ye,X,ie,Q],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;background:#fff;min-height:100vh;padding:2rem 0}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;box-shadow:0 2px 4px #0000000d;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background:#f8f9fa;border-bottom:1px solid #dee2e6;border-radius:8px 8px 0 0;padding:1rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.games-carousel-container[_ngcontent-%COMP%]{position:relative;border-radius:12px;background:#f8f9fa;padding:2rem;box-shadow:0 4px 12px #0000001a;border:1px solid #dee2e6;min-height:320px}.carousel-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;display:flex;justify-content:space-between;width:100%;pointer-events:none}.carousel-btn[_ngcontent-%COMP%]{background:#495057cc;border:none;border-radius:50%;width:48px;height:48px;color:#fff;cursor:pointer;pointer-events:auto;transition:all .2s ease;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.carousel-btn[_ngcontent-%COMP%]:hover{background:#495057;transform:scale(1.1)}.carousel-btn-prev[_ngcontent-%COMP%]{left:1rem}.carousel-btn-next[_ngcontent-%COMP%]{right:1rem}.game-card-single[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 25px #0000001a;border:2px solid #e9ecef;cursor:pointer;transition:transform .2s ease}.game-card-single[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:1.5rem;position:relative}.game-week-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.week-badge[_ngcontent-%COMP%], .day-badge[_ngcontent-%COMP%]{background:#6c757d;color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.9rem}.game-status[_ngcontent-%COMP%]{position:absolute;right:0}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.85rem}.status-badge.live[_ngcontent-%COMP%]{background:#dc3545;color:#fff;animation:_ngcontent-%COMP%_pulse 2s infinite}.status-badge.final[_ngcontent-%COMP%]{background:#198754;color:#fff}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.teams-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;width:100%;padding:0 1rem}.team-display[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:1rem;min-width:0}.team-display.away-team[_ngcontent-%COMP%]{justify-content:flex-start}.team-display.home-team[_ngcontent-%COMP%]{justify-content:flex-end}.team-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;min-width:0}.team-display.away-team[_ngcontent-%COMP%]   .team-info[_ngcontent-%COMP%]{text-align:left}.team-display.home-team[_ngcontent-%COMP%]   .team-info[_ngcontent-%COMP%]{text-align:right}.team-display.home-team[_ngcontent-%COMP%]   .team-logo[_ngcontent-%COMP%]{order:2}.team-display.home-team[_ngcontent-%COMP%]   .team-info[_ngcontent-%COMP%]{order:1}.team-logo[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:contain;border-radius:12px;flex-shrink:0;box-shadow:0 4px 8px #0000001a}.team-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#212529;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.team-record[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;font-weight:500;margin:0}.vs-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex-shrink:0;padding:0 2rem}.vs-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.vs-text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:900;color:#495057;text-shadow:0 2px 4px rgba(0,0,0,.1)}.score-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem}.score-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.away-score[_ngcontent-%COMP%], .home-score[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:900;color:#212529;background:#f8f9fa;padding:.5rem 1rem;border-radius:12px;border:2px solid #dee2e6;min-width:60px;text-align:center;box-shadow:0 2px 4px #0000001a}.score-separator[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#6c757d}.carousel-indicators[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-top:1.5rem}.indicator-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;border:none;background:#dee2e6;cursor:pointer;transition:all .2s ease}.indicator-dot.active[_ngcontent-%COMP%]{background:#0d6efd;transform:scale(1.2)}.indicator-dot[_ngcontent-%COMP%]:hover{background:#6c757d}.auto-rotation-info[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem 0}.games-carousel-container[_ngcontent-%COMP%]{padding:1.5rem;min-height:280px}.teams-container[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:0 .5rem}.team-display.away-team[_ngcontent-%COMP%], .team-display.home-team[_ngcontent-%COMP%]{align-items:center;text-align:center;flex-direction:row}.team-logo[_ngcontent-%COMP%]{width:50px;height:50px}.team-name[_ngcontent-%COMP%]{font-size:.9rem}.vs-text[_ngcontent-%COMP%]{font-size:1.5rem}.away-score[_ngcontent-%COMP%], .home-score[_ngcontent-%COMP%]{font-size:1.75rem;padding:.25rem .75rem;min-width:50px}.carousel-nav[_ngcontent-%COMP%]{position:static;transform:none;justify-content:center;gap:1rem;margin-bottom:1rem}.carousel-btn-prev[_ngcontent-%COMP%], .carousel-btn-next[_ngcontent-%COMP%]{position:static}.card-body[_ngcontent-%COMP%]{padding:1rem}.games-carousel-container[_ngcontent-%COMP%]{min-height:250px}}.user-item[_ngcontent-%COMP%]{transition:all .2s ease}.user-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa!important;border-color:#dee2e6!important}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:#28a745;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff;font-weight:700}.transaction-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px}.team-logo-transaction[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain;border-radius:4px}.trade-transaction[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1rem}.trade-header[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding-bottom:.5rem}.trade-details[_ngcontent-%COMP%]{padding-top:.75rem}.trade-side[_ngcontent-%COMP%]{background:#fff;border-radius:6px;padding:.75rem;border:1px solid #dee2e6}.team-logo-trade[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain;border-radius:4px}.team-name-small[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#495057}.player-name-small[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;background:#e9ecef;padding:.25rem .5rem;border-radius:12px;margin-bottom:.25rem;display:inline-block}.trade-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]})};var ot=class n{user={username:"",email:"",password:""};authService=B(J);router=B(Z);register(){if(this.user.username===""){alert("Please enter a username");return}if(this.user.email===""){alert("Please enter email");return}if(this.user.password===""){alert("Please enter your password");return}this.authService.register(this.user).then(()=>{this.router.navigate(["/dashboard"]),this.user={username:"",email:"",password:""}}).catch(a=>{console.error("Registration failed:",a),alert("Registration failed: "+a.message)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-register"]],decls:29,vars:3,consts:[[1,"container-fluid"],[1,"row","justify-content-center","mt-3","mt-md-5"],[1,"col-12","col-sm-8","col-md-6","col-lg-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","username",1,"form-label"],["type","text","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row","mt-3"],[1,"col-12"],["routerLink","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form")(6,"div",5)(7,"h4",6),r(8,"Register"),t()(),i(9,"div",5)(10,"label",7),r(11,"Username"),t(),i(12,"input",8),I("ngModelChange",function(d){return T(s.user.username,d)||(s.user.username=d),d}),t()(),i(13,"div",5)(14,"label",9),r(15,"Email"),t(),i(16,"input",10),I("ngModelChange",function(d){return T(s.user.email,d)||(s.user.email=d),d}),t()(),i(17,"div",5)(18,"label",11),r(19,"Password"),t(),i(20,"input",12),I("ngModelChange",function(d){return T(s.user.password,d)||(s.user.password=d),d}),t()(),i(21,"button",13),A("click",function(){return s.register()}),r(22," Register "),t(),i(23,"div",14)(24,"div",15)(25,"a",16),r(26,"Have an Account? "),i(27,"span",17),r(28,"Login"),t()()()()()()()()()()),e&2&&(o(12),E("ngModel",s.user.username),o(4),E("ngModel",s.user.email),o(4),E("ngModel",s.user.password))},dependencies:[re,Se,le,ne,ve,ae,xe,ye,Ie],encapsulation:2})};var st=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-verify-email"]],decls:13,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(e,s){e&1&&(Qe(0,"div",0)(1,"div",1),xt(2,"div",2),Qe(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h4",7),r(8,"Welcome"),Xe()(),Qe(9,"div",6)(10,"p",8),r(11," Link has been sent to your registered email. Please verify it. "),Xe()()()()(),xt(12,"div",2),Xe()())},encapsulation:2})};var lt=class n{authService=B(J);email="";forgotPassword(){this.authService.forgotPassword(this.email),this.email=""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-forgot-password"]],decls:21,vars:1,consts:[[1,"container-fluid"],[1,"row","justify-content-center","mt-3","mt-md-5"],[1,"col-12","col-sm-8","col-md-6","col-lg-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row","mt-3"],[1,"col-12"],["routerLink","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form")(6,"div",5)(7,"h4",6),r(8,"Forgot Password"),t()(),i(9,"div",5)(10,"label",7),r(11,"Email"),t(),i(12,"input",8),I("ngModelChange",function(d){return T(s.email,d)||(s.email=d),d}),t()(),i(13,"button",9),A("click",function(){return s.forgotPassword()}),r(14," Send Link "),t(),i(15,"div",10)(16,"div",11)(17,"a",12),r(18,"Back to "),i(19,"span",13),r(20,"Login"),t()()()()()()()()()()),e&2&&(o(12),E("ngModel",s.email))},dependencies:[re,Se,le,ne,ve,ae,xe,ye,Ie],encapsulation:2})};var Pn=()=>[];function Cn(n,a){if(n&1&&(i(0,"option",30),r(1),t()),n&2){let e=a.$implicit;m("value",e.id),o(),p(e.name)}}function En(n,a){if(n&1&&(i(0,"option",30),r(1),t()),n&2){let e=a.$implicit;m("value",e.id),o(),p(e.name)}}function Tn(n,a){if(n&1){let e=M();i(0,"div",14)(1,"div",4)(2,"h5",6),r(3,"Add New Game"),t()(),i(4,"div",8)(5,"form",15),A("ngSubmit",function(){v(e);let l=c();return x(l.addGame())}),i(6,"div",16)(7,"label",17),r(8,"Home Team"),t(),i(9,"select",18),I("ngModelChange",function(l){v(e);let d=c();return T(d.newGame.homeTeamId,l)||(d.newGame.homeTeamId=l),x(l)}),i(10,"option",19),r(11,"Select Home Team"),t(),u(12,Cn,2,2,"option",20),t()(),i(13,"div",16)(14,"label",17),r(15,"Away Team"),t(),i(16,"select",21),I("ngModelChange",function(l){v(e);let d=c();return T(d.newGame.awayTeamId,l)||(d.newGame.awayTeamId=l),x(l)}),i(17,"option",19),r(18,"Select Away Team"),t(),u(19,En,2,2,"option",20),t()(),i(20,"div",22)(21,"label",17),r(22,"Week"),t(),i(23,"input",23),I("ngModelChange",function(l){v(e);let d=c();return T(d.newGame.week,l)||(d.newGame.week=l),x(l)}),t()(),i(24,"div",22)(25,"label",17),r(26,"Day"),t(),i(27,"input",24),I("ngModelChange",function(l){v(e);let d=c();return T(d.newGame.day,l)||(d.newGame.day=l),x(l)}),t()(),i(28,"div",25)(29,"div",26)(30,"input",27),I("ngModelChange",function(l){v(e);let d=c();return T(d.newGame.isRival,l)||(d.newGame.isRival=l),x(l)}),t(),i(31,"label",28),r(32,"Rivalry Game"),t()()(),i(33,"div",25)(34,"button",29),r(35,"Add Game"),t()()()()()}if(n&2){let e=c();o(9),E("ngModel",e.newGame.homeTeamId),o(3),m("ngForOf",e.teams),o(4),E("ngModel",e.newGame.awayTeamId),o(3),m("ngForOf",e.teams),o(4),E("ngModel",e.newGame.week),o(4),E("ngModel",e.newGame.day),o(3),E("ngModel",e.newGame.isRival)}}function In(n,a){if(n&1){let e=M();i(0,"button",31),A("click",function(){v(e);let l=c();return x(l.clearAllGames())}),r(1),t()}if(n&2){let e=c();m("disabled",e.isClearing),o(),b(" ",e.isClearing?"Clearing...":"Clear All Games"," ")}}function Mn(n,a){if(n&1){let e=M();i(0,"button",32),A("click",function(){let l=v(e).$implicit,d=c();return x(d.onWeekChange(l))}),r(1),t()}if(n&2){let e=a.$implicit,s=c();N("btn-primary",s.selectedWeek===e)("btn-outline-primary",s.selectedWeek!==e),o(),b(" Week ",e," ")}}function kn(n,a){n&1&&(i(0,"div",33)(1,"div",34)(2,"span",35),r(3,"Loading..."),t()()())}function An(n,a){if(n&1&&g(0,"img",49),n&2){let e=c().$implicit;m("src",e.homeLogo,z)("alt",e.homeTeam)}}function On(n,a){if(n&1&&(i(0,"div",50)(1,"div",51)(2,"span",52),r(3),t(),i(4,"span",53),r(5,"-"),t(),i(6,"span",52),r(7),t()(),i(8,"div",54)(9,"span",55),r(10),t()()()),n&2){let e=c().$implicit;o(3),p(e.homeScore||0),o(4),p(e.awayScore||0),o(2),N("bg-warning",e.period&&e.period!=="Final")("bg-success",e.period==="Final"),o(),b(" ",e.period||"In Progress"," ")}}function Dn(n,a){n&1&&(i(0,"div",50)(1,"span",56),r(2,"VS"),t()())}function Gn(n,a){if(n&1&&g(0,"img",49),n&2){let e=c().$implicit;m("src",e.awayLogo,z)("alt",e.awayTeam)}}function Rn(n,a){if(n&1&&(i(0,"span",57),r(1),t()),n&2){let e=a.$implicit;N("bg-danger",e==="rival")("bg-primary",e==="division")("bg-success",e==="conference"),o(),b(" ",e," ")}}function Nn(n,a){if(n&1){let e=M();i(0,"div",41)(1,"div",42),A("click",function(){let l=v(e).$implicit,d=c(3);return x(d.viewGame(l))}),i(2,"div",43),u(3,An,1,2,"img",44),i(4,"span",45),r(5),t()(),u(6,On,11,7,"div",46)(7,Dn,3,0,"ng-template",null,0,Ht),i(9,"div",43),u(10,Gn,1,2,"img",44),i(11,"span",45),r(12),t()(),i(13,"div",47),u(14,Rn,2,7,"span",48),t()()()}if(n&2){let e=a.$implicit,s=Ut(8),l=c(3);o(3),m("ngIf",e.homeLogo),o(2),p(e.homeTeam),o(),m("ngIf",l.hasScore(e))("ngIfElse",s),o(4),m("ngIf",e.awayLogo),o(2),p(e.awayTeam),o(2),m("ngForOf",e.tags)}}function Ln(n,a){n&1&&g(0,"div",41)}function Vn(n,a){if(n&1&&(i(0,"div",37)(1,"h6",38),r(2),t(),i(3,"div",39),u(4,Nn,15,7,"div",40)(5,Ln,1,0,"div",40),t()()),n&2){let e=a.$implicit,s=c().ngIf,l=c();o(2),p(e),o(2),m("ngForOf",l.getGamesForDay(s,e)),o(),m("ngForOf",Bt(3,Pn).constructor(5-l.getGamesForDay(s,e).length%5))}}function Fn(n,a){if(n&1&&(Ft(0),u(1,Vn,6,4,"div",36),Wt()),n&2){let e=a.ngIf,s=c();o(),m("ngForOf",s.getDays(e))}}function Wn(n,a){if(n&1&&(i(0,"div",58),r(1),t()),n&2){let e=c();o(),b(" No games scheduled for Week ",e.selectedWeek," ")}}var dt=class n{constructor(a,e,s){this.firestore=a;this.router=e;this.authService=s}teams=[];currentSeason=1;loading=!1;isClearing=!1;selectedWeek=1;activeWeeks=[];weekSchedule=new Map;gamesCache=new Map;canManageGames=!1;isDeveloper=!1;newGame={homeTeamId:"",awayTeamId:"",week:1,day:1,season:1,isRival:!1};ngOnInit(){return k(this,null,function*(){this.authService.effectiveRoles.subscribe(s=>{this.canManageGames=s.some(l=>["developer","commissioner"].includes(l)),this.isDeveloper=s.includes("developer")}),yield this.loadCurrentSeason();let a=O(this.firestore,"teams"),e=yield G(a);this.teams=e.docs.map(s=>j({id:s.id},s.data())),yield this.loadActiveWeeks(),this.activeWeeks.length>0&&(this.selectedWeek=this.activeWeeks[0],yield this.loadWeek(this.selectedWeek))})}loadCurrentSeason(){return k(this,null,function*(){try{let a=W(this.firestore,"gameScheduleSettings/current"),e=yield Y(a);if(e.exists()){let s=e.data();this.currentSeason=s.season||1,this.newGame.season=this.currentSeason}}catch(a){console.error("Error loading current season:",a)}})}loadActiveWeeks(){return k(this,null,function*(){let a=V(O(this.firestore,"games"),R("season","==",this.currentSeason)),e=yield G(a),s=new Set(e.docs.map(l=>l.data().week));this.activeWeeks=Array.from(s).sort((l,d)=>l-d)})}onWeekChange(a){return k(this,null,function*(){this.selectedWeek=a,yield this.loadWeek(a)})}loadWeek(a){return k(this,null,function*(){if(!this.loading){this.loading=!0;try{let e=V(O(this.firestore,"games"),R("season","==",this.currentSeason),R("week","==",a)),s=yield G(e),l=yield Promise.all(s.docs.map(d=>k(this,null,function*(){let _=d.data(),h=this.teams.find(w=>w.id===_.homeTeamId),C=this.teams.find(w=>w.id===_.awayTeamId);return se(j({id:d.id},_),{homeTeam:h?.name||"Unknown Team",awayTeam:C?.name||"Unknown Team",homeLogo:h?.logoUrl,awayLogo:C?.logoUrl,tags:_.tags||[],homeScore:_.homeScore,awayScore:_.awayScore,period:_.period})})));this.weekSchedule.set(a,l)}finally{this.loading=!1}}})}getWeekSchedule(a){return this.weekSchedule.get(a)}getDays(a){if(!a)return[];let e=new Set(a.map(s=>s.day));return Array.from(e).sort()}getGamesForDay(a,e){return a?a.filter(s=>s.day===e):[]}formatDay(a){return`D${a}`}hasScore(a){return a.homeScore!==void 0&&a.homeScore!==null||a.awayScore!==void 0&&a.awayScore!==null||a.period!==void 0&&a.period!==null}addGame(){return k(this,null,function*(){if(!this.canManageGames)return;if(!this.newGame.homeTeamId||!this.newGame.awayTeamId||!this.newGame.day){alert("Please fill in all required fields");return}let a=this.teams.find(h=>h.id===this.newGame.homeTeamId),e=this.teams.find(h=>h.id===this.newGame.awayTeamId);if(!a||!e)return;let s=[];this.newGame.isRival?s.push("rival"):a.division===e.division?s.push("division"):a.conference===e.conference&&s.push("conference");let l=se(j({},this.newGame),{day:this.formatDay(this.newGame.day),season:this.currentSeason,tags:s}),_=(yield Re(O(this.firestore,"games"),l)).id;yield Promise.all([Be(W(this.firestore,`teams/${a.id}/games/${_}`),se(j({},l),{isHome:!0,opponent:e.name,opponentId:e.id})),Be(W(this.firestore,`teams/${e.id}/games/${_}`),se(j({},l),{isHome:!1,opponent:a.name,opponentId:a.id}))]),this.newGame={homeTeamId:"",awayTeamId:"",week:this.newGame.week,day:1,season:this.currentSeason,isRival:!1},yield this.loadActiveWeeks(),yield this.loadWeek(this.selectedWeek)})}clearAllGames(){return k(this,null,function*(){if(this.isDeveloper&&confirm("Are you sure you want to clear all games? This cannot be undone.")){this.isClearing=!0;try{let a=V(O(this.firestore,"games"),R("season","==",this.currentSeason)),e=yield G(a);for(let s of e.docs)yield Ei(s.ref);this.weekSchedule.clear(),this.activeWeeks=[],this.selectedWeek=1}finally{this.isClearing=!1}}})}viewGame(a){!a.id||!a.homeTeamId||this.router.navigate(["/games",a.homeTeamId,a.id])}static \u0275fac=function(e){return new(e||n)(te(me),te(Z),te(J))};static \u0275cmp=H({type:n,selectors:[["app-games"]],decls:14,vars:7,consts:[["vsDisplay",""],[1,"container","mt-4"],["class","card mb-4",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"card-body"],[1,"btn-group","mb-4","flex-wrap"],["class","btn btn-sm",3,"btn-primary","btn-outline-primary","click",4,"ngFor","ngForOf"],["class","text-center my-4",4,"ngIf"],[4,"ngIf"],["class","text-center text-muted my-4",4,"ngIf"],[1,"card","mb-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-4"],[1,"form-label"],["name","homeTeam","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","awayTeam","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"col-md-2"],["type","number","name","week","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","day","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],[1,"form-check"],["type","checkbox","name","isRival","id","isRival",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isRival",1,"form-check-label"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"btn","btn-danger",3,"click","disabled"],[1,"btn","btn-sm",3,"click"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"text-muted","mb-3"],[1,"row","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"game-card",3,"click"],[1,"team-row","flex-wrap"],["class","team-logo",3,"src","alt",4,"ngIf"],[1,"team-name","text-truncate"],["class","text-center my-2",4,"ngIf","ngIfElse"],[1,"mt-3"],["class","badge me-1",3,"bg-danger","bg-primary","bg-success",4,"ngFor","ngForOf"],[1,"team-logo",3,"src","alt"],[1,"text-center","my-2"],[1,"score-display"],[1,"score-number"],[1,"score-divider"],[1,"game-status"],[1,"badge"],[1,"vs-text"],[1,"badge","me-1"],[1,"text-center","text-muted","my-4"]],template:function(e,s){e&1&&(i(0,"div",1),u(1,Tn,36,7,"div",2),i(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),r(6),t(),u(7,In,2,2,"button",7),t()(),i(8,"div",8)(9,"div",9),u(10,Mn,2,5,"button",10),t(),u(11,kn,4,0,"div",11)(12,Fn,2,1,"ng-container",12)(13,Wn,2,1,"div",13),t()()()),e&2&&(o(),m("ngIf",s.canManageGames),o(5),b("Season ",s.currentSeason," Schedule"),o(),m("ngIf",s.isDeveloper),o(3),m("ngForOf",s.activeWeeks),o(),m("ngIf",s.loading),o(),m("ngIf",s.getWeekSchedule(s.selectedWeek)),o(),m("ngIf",!s.loading&&(!s.getWeekSchedule(s.selectedWeek)||s.getDays(s.getWeekSchedule(s.selectedWeek)).length===0)))},dependencies:[X,ie,Q,re,Se,ke,Ae,le,Fe,et,Me,ne,ve,it,We,ae,xe],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;min-width:150px;padding:1rem}.badge[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:600;letter-spacing:.5px}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.btn-group[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.25rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:.25rem}.game-card[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:8px;padding:1rem;margin-bottom:1rem;background-color:#fff;transition:all .2s ease;cursor:pointer;box-shadow:0 2px 4px #0000000d}.game-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#dee2e6}.team-logo[_ngcontent-%COMP%]{width:36px;height:36px;object-fit:contain;margin-right:.75rem}.team-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem;border-radius:6px;background-color:#f8f9fa;margin-bottom:.5rem}.team-name[_ngcontent-%COMP%]{font-weight:500;color:#495057}.vs-text[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;font-size:.9rem}.score-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:.5rem}.score-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#212529;background:#f8f9fa;padding:.25rem .75rem;border-radius:6px;border:2px solid #e9ecef;min-width:50px;text-align:center}.score-divider[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#6c757d}.game-status[_ngcontent-%COMP%]{text-align:center}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .65rem;width:fit-content}.badge.bg-primary[_ngcontent-%COMP%]{background-color:#0d6efd!important}.badge.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600;text-transform:uppercase;font-size:.9rem;letter-spacing:.5px;padding:1rem}.row[_ngcontent-%COMP%]{--bs-gutter-x: 1.5rem;--bs-gutter-y: 1.5rem;display:flex;flex-wrap:wrap}.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}@media (max-width: 1200px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 25%;max-width:25%}}@media (max-width: 992px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 33.333333%;max-width:33.333333%}}@media (max-width: 768px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}.d-flex.justify-content-between[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.btn-group[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.table-responsive[_ngcontent-%COMP%]{font-size:.85rem}.card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%], .game-card[_ngcontent-%COMP%]{margin-bottom:1rem}.team-row[_ngcontent-%COMP%]{justify-content:center;text-align:center}.team-name[_ngcontent-%COMP%]{font-size:.85rem;max-width:120px}.team-logo[_ngcontent-%COMP%]{width:28px;height:28px}}@media (max-width: 576px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}}"]})};var Un=(n,a,e)=>({wins:n,losses:a,otl:e});function Bn(n,a){if(n&1){let e=M();i(0,"button",31),A("click",function(){v(e);let l=c(2);return x(l.showPlayoffManager=!l.showPlayoffManager)}),g(1,"i",32),r(2,"Manage Playoffs "),t()}}function $n(n,a){if(n&1&&g(0,"img",50),n&2){let e=c().$implicit;m("src",e.logoUrl,z)("alt",e.name)}}function Hn(n,a){if(n&1){let e=M();i(0,"div",39)(1,"div",40)(2,"div",12)(3,"div",41),u(4,$n,1,2,"img",42),i(5,"strong"),r(6),t()(),i(7,"select",43),A("change",function(l){let d=v(e).$implicit,_=c(3);return x(_.updateTeamPlayoffStatus(d.id,l.target.value))}),i(8,"option",44),r(9,"No Status"),t(),i(10,"option",45),r(11,"League Championship Clinched (P)"),t(),i(12,"option",46),r(13,"Conference Championship Clinched (z)"),t(),i(14,"option",47),r(15,"Division Championship Clinched (y)"),t(),i(16,"option",48),r(17,"Playoff Spot Clinched (x)"),t(),i(18,"option",49),r(19,"Eliminated (e)"),t()()()()()}if(n&2){let e=a.$implicit,s=c(3);o(4),m("ngIf",e.logoUrl),o(2),p(e.name),o(),m("value",s.getTeamPlayoffStatus(e.id))}}function jn(n,a){if(n&1&&(i(0,"div",33)(1,"div",34)(2,"h5",14),g(3,"i",35),r(4,"Playoff Status Management "),t()(),i(5,"div",12)(6,"p",36),r(7,"Set playoff clinching status for teams. This will add visual indicators to the standings."),t(),i(8,"div",37),u(9,Hn,20,3,"div",38),t()()()),n&2){let e=c(2);o(9),m("ngForOf",e.filteredTeams)}}function zn(n,a){n&1&&(i(0,"div",51)(1,"div",52)(2,"span",53),r(3,"Loading standings..."),t()()())}function qn(n,a){if(n&1&&g(0,"img",50),n&2){let e=c().$implicit;m("alt",Ze(e.name))("src",e.logoUrl,z)}}function Kn(n,a){if(n&1&&(i(0,"span",63),r(1),t()),n&2){let e=a.ngIf;ue(e.class),o(),b(" ",e.text," ")}}function Yn(n,a){if(n&1&&(i(0,"tr")(1,"td")(2,"div",61),u(3,qn,1,3,"img",42),i(4,"span"),r(5),t(),u(6,Kn,2,3,"span",62),t()(),i(7,"td"),r(8),t(),i(9,"td"),r(10),t(),i(11,"td"),r(12),t(),i(13,"td"),r(14),t(),i(15,"td")(16,"strong"),r(17),t()(),i(18,"td"),r(19),t(),i(20,"td"),r(21),t(),i(22,"td"),r(23),t()()),n&2){let e=a.$implicit,s=c(5);ue(s.getPlayoffStatusClass(e)),o(3),m("ngIf",e.logoUrl),o(2),p(e.name),o(),m("ngIf",s.getPlayoffStatusBadge(e)),o(2),p(e.gamesPlayed),o(2),p(e.wins),o(2),p(e.losses),o(2),p(e.overtimeLosses),o(3),p(e.points),o(2),p(e.goalsFor),o(2),p(e.goalsAgainst),o(),N("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),o(),q(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function Qn(n,a){if(n&1&&(i(0,"div",56)(1,"div",40)(2,"div",57)(3,"h5",14),r(4),t()(),i(5,"div",58)(6,"table",59)(7,"thead")(8,"tr")(9,"th"),r(10,"Team"),t(),i(11,"th"),r(12,"GP"),t(),i(13,"th"),r(14,"W"),t(),i(15,"th"),r(16,"L"),t(),i(17,"th"),r(18,"OTL"),t(),i(19,"th"),r(20,"PTS"),t(),i(21,"th"),r(22,"GF"),t(),i(23,"th"),r(24,"GA"),t(),i(25,"th"),r(26,"DIFF"),t()()(),i(27,"tbody"),u(28,Yn,24,18,"tr",60),t()()()()()),n&2){let e=a.$implicit,s=c().$implicit,l=c(3);o(4),p(e),o(24),m("ngForOf",l.getStandingsForDivision(s.name,e))}}function Xn(n,a){if(n&1&&(i(0,"div",3)(1,"h3"),r(2),t(),i(3,"div",37),u(4,Qn,29,2,"div",55),t()()),n&2){let e=a.$implicit;o(2),p(e.name),o(2),m("ngForOf",e.divisions)}}function Zn(n,a){if(n&1&&(i(0,"div"),u(1,Xn,5,2,"div",54),t()),n&2){let e=c(2);o(),m("ngForOf",e.conferences)}}function Jn(n,a){if(n&1&&g(0,"img",50),n&2){let e=c().$implicit;m("alt",Ze(e.name))("src",e.logoUrl,z)}}function ea(n,a){if(n&1&&(i(0,"span",63),r(1),t()),n&2){let e=a.ngIf;ue(e.class),o(),b(" ",e.text," ")}}function ta(n,a){if(n&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td")(4,"div",61),u(5,Jn,1,3,"img",42),i(6,"span"),r(7),t(),u(8,ea,2,3,"span",62),t()(),i(9,"td"),r(10),t(),i(11,"td"),r(12),t(),i(13,"td"),r(14),t(),i(15,"td"),r(16),t(),i(17,"td")(18,"strong"),r(19),t()(),i(20,"td"),r(21),t(),i(22,"td"),r(23),t(),i(24,"td"),r(25),t(),i(26,"td"),r(27),t()()),n&2){let e=a.$implicit,s=a.index,l=c(4);ue(l.getPlayoffStatusClass(e)),o(2),p(s+1),o(3),m("ngIf",e.logoUrl),o(2),p(e.name),o(),m("ngIf",l.getPlayoffStatusBadge(e)),o(2),p(e.gamesPlayed),o(2),p(e.wins),o(2),p(e.losses),o(2),p(e.overtimeLosses),o(3),p(e.points),o(2),b("",(e.pointPercentage*100).toFixed(1),"%"),o(2),p(e.goalsFor),o(2),p(e.goalsAgainst),o(),N("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),o(),q(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function ia(n,a){if(n&1&&(i(0,"div",3)(1,"div",40)(2,"div",64)(3,"h4",14),r(4),t()(),i(5,"div",58)(6,"table",65)(7,"thead")(8,"tr")(9,"th"),r(10,"Rank"),t(),i(11,"th"),r(12,"Team"),t(),i(13,"th"),r(14,"GP"),t(),i(15,"th"),r(16,"W"),t(),i(17,"th"),r(18,"L"),t(),i(19,"th"),r(20,"OTL"),t(),i(21,"th"),r(22,"PTS"),t(),i(23,"th"),r(24,"P%"),t(),i(25,"th"),r(26,"GF"),t(),i(27,"th"),r(28,"GA"),t(),i(29,"th"),r(30,"DIFF"),t()()(),i(31,"tbody"),u(32,ta,28,20,"tr",60),t()()()()()),n&2){let e=a.$implicit,s=c(3);o(4),p(e.name),o(28),m("ngForOf",s.getStandingsForConference(e.name))}}function na(n,a){if(n&1&&(i(0,"div"),u(1,ia,33,2,"div",54),t()),n&2){let e=c(2);o(),m("ngForOf",e.conferences)}}function aa(n,a){if(n&1&&g(0,"img",50),n&2){let e=c().$implicit;m("alt",Ze(e.name))("src",e.logoUrl,z)}}function ra(n,a){if(n&1&&(i(0,"span",63),r(1),t()),n&2){let e=a.ngIf;ue(e.class),o(),b(" ",e.text," ")}}function oa(n,a){if(n&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td")(4,"div",61),u(5,aa,1,3,"img",42),i(6,"span"),r(7),t(),u(8,ra,2,3,"span",62),t()(),i(9,"td")(10,"small",28),r(11),t()(),i(12,"td")(13,"small",28),r(14),t()(),i(15,"td"),r(16),t(),i(17,"td"),r(18),t(),i(19,"td"),r(20),t(),i(21,"td"),r(22),t(),i(23,"td")(24,"strong"),r(25),t()(),i(26,"td"),r(27),t(),i(28,"td"),r(29),t(),i(30,"td"),r(31),t(),i(32,"td"),r(33),t()()),n&2){let e=a.$implicit,s=a.index,l=c(3);ue(l.getPlayoffStatusClass(e)),o(2),p(s+1),o(3),m("ngIf",e.logoUrl),o(2),p(e.name),o(),m("ngIf",l.getPlayoffStatusBadge(e)),o(3),p(e.conference),o(3),p(e.division),o(2),p(e.gamesPlayed),o(2),p(e.wins),o(2),p(e.losses),o(2),p(e.overtimeLosses),o(3),p(e.points),o(2),b("",(e.pointPercentage*100).toFixed(1),"%"),o(2),p(e.goalsFor),o(2),p(e.goalsAgainst),o(),N("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),o(),q(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function sa(n,a){if(n&1&&(i(0,"div")(1,"div",40)(2,"div",66)(3,"h4",14),r(4),ce(5,"titlecase"),t()(),i(6,"div",58)(7,"table",65)(8,"thead")(9,"tr")(10,"th"),r(11,"Rank"),t(),i(12,"th"),r(13,"Team"),t(),i(14,"th"),r(15,"Conference"),t(),i(16,"th"),r(17,"Division"),t(),i(18,"th"),r(19,"GP"),t(),i(20,"th"),r(21,"W"),t(),i(22,"th"),r(23,"L"),t(),i(24,"th"),r(25,"OTL"),t(),i(26,"th"),r(27,"PTS"),t(),i(28,"th"),r(29,"P%"),t(),i(30,"th"),r(31,"GF"),t(),i(32,"th"),r(33,"GA"),t(),i(34,"th"),r(35,"DIFF"),t()()(),i(36,"tbody"),u(37,oa,34,22,"tr",60),t()()(),i(38,"div",67)(39,"div",68)(40,"div",69)(41,"span",70),r(42,"P"),t(),i(43,"small"),r(44,"League Championship"),t()(),i(45,"div",69)(46,"span",71),r(47,"z"),t(),i(48,"small"),r(49,"Conference Championship"),t()(),i(50,"div",69)(51,"span",72),r(52,"y"),t(),i(53,"small"),r(54,"Division Championship"),t()(),i(55,"div",69)(56,"span",73),r(57,"x"),t(),i(58,"small"),r(59,"Playoff Spot"),t()(),i(60,"div",69)(61,"span",74),r(62,"e"),t(),i(63,"small"),r(64,"Eliminated"),t()(),i(65,"div",69)(66,"small",28),r(67,"No indicator - Still competing"),t()()()()()()),n&2){let e=c(2);o(4),b("",Ge(5,2,e.selectedLeague)," League Overall Standings"),o(33),m("ngForOf",e.getOverallStandings())}}function la(n,a){if(n&1){let e=M();i(0,"div")(1,"div",11)(2,"div",12)(3,"div",13)(4,"h5",14),r(5,"League Standings"),t(),i(6,"div",15)(7,"div",16)(8,"button",17),A("click",function(){v(e);let l=c();return l.standingsViewType="division",x(l.onStandingsViewChange())}),g(9,"i",18),r(10,"By Division "),t(),i(11,"button",17),A("click",function(){v(e);let l=c();return l.standingsViewType="conference",x(l.onStandingsViewChange())}),g(12,"i",19),r(13,"By Conference "),t(),i(14,"button",17),A("click",function(){v(e);let l=c();return l.standingsViewType="overall",x(l.onStandingsViewChange())}),g(15,"i",20),r(16,"Overall "),t()(),i(17,"div",16)(18,"button",21),A("click",function(){v(e);let l=c();return l.selectedLeague="major",x(l.onLeagueChange())}),r(19," Major League "),t(),i(20,"button",21),A("click",function(){v(e);let l=c();return l.selectedLeague="minor",x(l.onLeagueChange())}),r(21," Minor League "),t()(),i(22,"div",16),u(23,Bn,3,0,"button",22),i(24,"button",23),A("click",function(){v(e);let l=c();return x(l.refreshStandings())}),g(25,"i",24),t()()()()()(),u(26,jn,10,1,"div",25)(27,zn,4,0,"div",26)(28,Zn,2,1,"div",10)(29,na,2,1,"div",10)(30,sa,68,4,"div",10),i(31,"div",27)(32,"small",28),g(33,"i",29),r(34," Data cached for faster loading \u2022 "),i(35,"button",30),A("click",function(){v(e);let l=c();return x(l.clearCache())}),r(36,"Clear cache"),t()()()()}if(n&2){let e=c();o(8),N("btn-info",e.standingsViewType==="division")("btn-outline-info",e.standingsViewType!=="division"),o(3),N("btn-info",e.standingsViewType==="conference")("btn-outline-info",e.standingsViewType!=="conference"),o(3),N("btn-info",e.standingsViewType==="overall")("btn-outline-info",e.standingsViewType!=="overall"),o(4),N("btn-primary",e.selectedLeague==="major")("btn-outline-primary",e.selectedLeague!=="major"),o(2),N("btn-primary",e.selectedLeague==="minor")("btn-outline-primary",e.selectedLeague!=="minor"),o(3),m("ngIf",e.canManagePlayoffs),o(),m("disabled",e.loadingStandings),o(),N("fa-spin",e.loadingStandings),o(),m("ngIf",e.showPlayoffManager&&e.canManagePlayoffs),o(),m("ngIf",e.loadingStandings),o(),m("ngIf",e.standingsViewType==="division"&&!e.loadingStandings),o(),m("ngIf",e.standingsViewType==="conference"&&!e.loadingStandings),o(),m("ngIf",e.standingsViewType==="overall"&&!e.loadingStandings)}}function da(n,a){if(n&1&&(i(0,"option",89),r(1),t()),n&2){let e=a.$implicit;m("value",e.key),o(),b(" ",e.label," ")}}function ca(n,a){n&1&&(i(0,"div",51)(1,"div",52)(2,"span",53),r(3,"Loading player stats..."),t()()())}function ma(n,a){n&1&&(i(0,"th"),r(1,"G"),t())}function pa(n,a){n&1&&(i(0,"th"),r(1,"A"),t())}function ga(n,a){n&1&&(i(0,"th"),r(1,"PTS"),t())}function ua(n,a){n&1&&(i(0,"th"),r(1,"Saves"),t())}function fa(n,a){n&1&&(i(0,"th"),r(1,"SA"),t())}function ha(n,a){n&1&&(i(0,"th"),r(1,"Age"),t())}function _a(n,a){n&1&&(i(0,"small",28),g(1,"i",99),r(2,"Rookie "),t())}function ya(n,a){if(n&1&&g(0,"img",50),n&2){let e=c().$implicit;m("src",e.teamLogo,z)("alt",e.teamName)}}function va(n,a){if(n&1&&(i(0,"td"),r(1),t()),n&2){let e=c().$implicit;o(),b(" ",e.goals," ")}}function xa(n,a){if(n&1&&(i(0,"td"),r(1),t()),n&2){let e=c().$implicit;o(),b(" ",e.assists," ")}}function Sa(n,a){if(n&1&&(i(0,"td"),r(1),t()),n&2){let e=c().$implicit;o(),b(" ",e.points," ")}}function ba(n,a){if(n&1&&(i(0,"td"),r(1),t()),n&2){let e=c().$implicit;o(),b(" ",e.saves," ")}}function wa(n,a){if(n&1&&(i(0,"td"),r(1),t()),n&2){let e=c().$implicit;o(),b(" ",e.shotsAgainst," ")}}function Pa(n,a){if(n&1&&(i(0,"td"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.age)}}function Ca(n,a){if(n&1&&(i(0,"tr")(1,"td")(2,"span",92),r(3),t()(),i(4,"td")(5,"div",61)(6,"div",93)(7,"div",94),r(8),t(),u(9,_a,3,0,"small",95),t()()(),i(10,"td")(11,"div",61),u(12,ya,1,2,"img",42),i(13,"span",96),r(14),t()()(),i(15,"td")(16,"span",97),r(17),t()(),i(18,"td"),r(19),t(),i(20,"td",98)(21,"strong"),r(22),t()(),u(23,va,2,1,"td",10)(24,xa,2,1,"td",10)(25,Sa,2,1,"td",10)(26,ba,2,1,"td",10)(27,wa,2,1,"td",10)(28,Pa,2,1,"td",10),t()),n&2){let e=a.$implicit,s=a.index,l=c(3);o(3),p(l.playerStatsPage*l.playersPerPage+s+1),o(5),p(e.name),o(),m("ngIf",e.rookie),o(3),m("ngIf",e.teamLogo),o(2),p(e.teamName),o(2),Le("background-color",l.getPositionColor(e.position)),o(),b(" ",e.position," "),o(2),p(e.games),o(3),p(l.getStatValue(e,l.playerStatsView)),o(),m("ngIf",l.playerStatsView==="goals"||l.playerStatsView==="assists"||l.playerStatsView==="points"),o(),m("ngIf",l.playerStatsView==="goals"||l.playerStatsView==="assists"||l.playerStatsView==="points"),o(),m("ngIf",l.playerStatsView==="goals"||l.playerStatsView==="assists"||l.playerStatsView==="points"),o(),m("ngIf",l.playerStatsView==="saves"||l.playerStatsView==="savepct"||l.playerStatsView==="shutouts"||l.playerStatsView==="gaa"),o(),m("ngIf",l.playerStatsView==="saves"||l.playerStatsView==="savepct"||l.playerStatsView==="shutouts"||l.playerStatsView==="gaa"),o(),m("ngIf",l.showRookieOnly)}}function Ea(n,a){if(n&1&&(i(0,"div",58)(1,"table",90)(2,"thead")(3,"tr")(4,"th"),r(5,"Rank"),t(),i(6,"th"),r(7,"Player"),t(),i(8,"th"),r(9,"Team"),t(),i(10,"th"),r(11,"Position"),t(),i(12,"th"),r(13,"GP"),t(),i(14,"th"),r(15),t(),u(16,ma,2,0,"th",10)(17,pa,2,0,"th",10)(18,ga,2,0,"th",10)(19,ua,2,0,"th",10)(20,fa,2,0,"th",10)(21,ha,2,0,"th",10),t()(),i(22,"tbody"),u(23,Ca,29,16,"tr",91),t()()()),n&2){let e=c(2);o(15),p(e.getCurrentCategoryLabel()),o(),m("ngIf",e.playerStatsView==="goals"||e.playerStatsView==="assists"||e.playerStatsView==="points"),o(),m("ngIf",e.playerStatsView==="goals"||e.playerStatsView==="assists"||e.playerStatsView==="points"),o(),m("ngIf",e.playerStatsView==="goals"||e.playerStatsView==="assists"||e.playerStatsView==="points"),o(),m("ngIf",e.playerStatsView==="saves"||e.playerStatsView==="savepct"||e.playerStatsView==="shutouts"||e.playerStatsView==="gaa"),o(),m("ngIf",e.playerStatsView==="saves"||e.playerStatsView==="savepct"||e.playerStatsView==="shutouts"||e.playerStatsView==="gaa"),o(),m("ngIf",e.showRookieOnly),o(2),m("ngForOf",e.getPaginatedPlayerStats())}}function Ta(n,a){if(n&1){let e=M();i(0,"div",100)(1,"div")(2,"small",28),r(3),t()(),i(4,"div",16)(5,"button",101),A("click",function(){v(e);let l=c(2);return x(l.previousPlayerStatsPage())}),g(6,"i",102),r(7," Previous "),t(),i(8,"span",103),r(9),t(),i(10,"button",101),A("click",function(){v(e);let l=c(2);return x(l.nextPlayerStatsPage())}),r(11," Next "),g(12,"i",104),t()()()}if(n&2){let e=c(2);o(3),De(" Showing ",e.playerStatsPage*e.playersPerPage+1," - ",e.Math.min((e.playerStatsPage+1)*e.playersPerPage,e.getFilteredPlayerStats().length)," of ",e.getFilteredPlayerStats().length," players "),o(2),m("disabled",e.playerStatsPage===0),o(4),q(" Page ",e.playerStatsPage+1," of ",e.getTotalPlayerStatsPages()," "),o(),m("disabled",e.playerStatsPage>=e.getTotalPlayerStatsPages()-1)}}function Ia(n,a){if(n&1&&(i(0,"div",105),g(1,"i",106),i(2,"h5"),r(3,"No Player Stats Available"),t(),i(4,"p"),r(5),t()()),n&2){let e=c(2);o(5),p(e.showRookieOnly?"No rookie players found with stats":"No players found with stats for this category")}}function Ma(n,a){if(n&1){let e=M();i(0,"div")(1,"div",11)(2,"div",57)(3,"h5",14),g(4,"i",75),r(5,"Player Statistics Leaders "),t()(),i(6,"div",12)(7,"div",76)(8,"div",77)(9,"label",78),r(10,"Select Category"),t(),i(11,"select",79),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerStatsView,l)||(d.playerStatsView=l),x(l)}),A("change",function(){v(e);let l=c();return x(l.onPlayerStatsViewChange())}),u(12,da,2,2,"option",80),t()(),i(13,"div",81)(14,"div",82)(15,"input",83),I("ngModelChange",function(l){v(e);let d=c();return T(d.showRookieOnly,l)||(d.showRookieOnly=l),x(l)}),A("change",function(){v(e);let l=c();return x(l.onRookieFilterChange())}),t(),i(16,"label",84),g(17,"i",85),r(18,"Rookies Only "),t()()()(),u(19,ca,4,0,"div",26)(20,Ea,24,8,"div",86)(21,Ta,13,7,"div",87)(22,Ia,6,1,"div",88),t()()()}if(n&2){let e=c();o(11),E("ngModel",e.playerStatsView),o(),m("ngForOf",e.playerStatsCategories),o(3),E("ngModel",e.showRookieOnly),o(4),m("ngIf",e.loadingPlayerStats),o(),m("ngIf",!e.loadingPlayerStats),o(),m("ngIf",!e.loadingPlayerStats&&e.getFilteredPlayerStats().length>e.playersPerPage),o(),m("ngIf",!e.loadingPlayerStats&&e.getFilteredPlayerStats().length===0)}}function ka(n,a){if(n&1&&(i(0,"option",89),r(1),t()),n&2){let e=a.$implicit;m("value",e.id),o(),p(e.name)}}function Aa(n,a){if(n&1&&(i(0,"div",112)(1,"h6"),r(2,"Debug Info:"),t(),i(3,"p"),r(4),t(),i(5,"p"),r(6),t(),i(7,"p"),r(8),t(),i(9,"p"),r(10),t()()),n&2){let e=c(2);o(4),b("Selected Team ID: ",e.selectedTeamId),o(2),b("Selected Team Name: ",e.selectedTeamName),o(2),b("Total Games: ",e.teamAnalytics.totalGames),o(2),b("Team Roster Length: ",e.teamRoster.length||0)}}function Oa(n,a){if(n&1&&g(0,"img",127),n&2){let e=c(3);m("src",e.getSelectedTeamLogo(),z)("alt",e.selectedTeamName)}}function Da(n,a){n&1&&(i(0,"div",128),g(1,"i",129),t())}function Ga(n,a){n&1&&(i(0,"div",130),g(1,"i",131),i(2,"h5"),r(3,"No Game Data Available"),t(),i(4,"p",14),r(5,"This team hasn't played any completed games with recorded scores yet."),t()())}function Ra(n,a){if(n&1&&(i(0,"div")(1,"div",132)(2,"h4",133),g(3,"i",134),r(4,"Key Performance Indicators "),t(),i(5,"div",37)(6,"div",135)(7,"div",136)(8,"div",137),g(9,"i",138),t(),i(10,"div",139)(11,"div",140),r(12),t(),i(13,"div",141),r(14,"Goals Per Game"),t(),i(15,"div",142),r(16),t()()()(),i(17,"div",135)(18,"div",143)(19,"div",137),g(20,"i",144),t(),i(21,"div",139)(22,"div",140),r(23),t(),i(24,"div",141),r(25,"Goals Against Per Game"),t(),i(26,"div",142),r(27),t()()()(),i(28,"div",135)(29,"div",145)(30,"div",137),g(31,"i",146),t(),i(32,"div",139)(33,"div",140),r(34),t(),i(35,"div",141),r(36,"Shooting Percentage"),t(),i(37,"div",142),r(38),t()()()(),i(39,"div",135)(40,"div",147)(41,"div",137),g(42,"i",148),t(),i(43,"div",139)(44,"div",140),r(45),t(),i(46,"div",141),r(47,"Faceoff Percentage"),t(),i(48,"div",142),r(49),t()()()()()(),i(50,"div",149)(51,"h4",133),g(52,"i",107),r(53,"Record Analysis "),t(),i(54,"div",37)(55,"div",150)(56,"div",151)(57,"div",152),g(58,"i",153),t(),i(59,"h5"),r(60,"Home Performance"),t(),i(61,"div",154),r(62),t(),i(63,"div",155)(64,"span",156),r(65),t(),i(66,"span",157),r(67),t(),i(68,"span",158),r(69),t()()()(),i(70,"div",150)(71,"div",151)(72,"div",152),g(73,"i",159),t(),i(74,"h5"),r(75,"Away Performance"),t(),i(76,"div",154),r(77),t(),i(78,"div",155)(79,"span",156),r(80),t(),i(81,"span",157),r(82),t(),i(83,"span",158),r(84),t()()()(),i(85,"div",150)(86,"div",160)(87,"div",152),g(88,"i",161),t(),i(89,"h5"),r(90,"Current Streak"),t(),i(91,"div",162),r(92),t(),i(93,"div",163)(94,"small"),r(95),t(),i(96,"small"),r(97),t()()()()()(),i(98,"div",149)(99,"h4",133),g(100,"i",164),r(101,"Offensive Analytics "),t(),i(102,"div",37)(103,"div",165)(104,"div",166)(105,"div",167)(106,"div",168),g(107,"i",138),t(),i(108,"div",169)(109,"div",170),r(110),t(),i(111,"div",171),r(112,"Total Goals"),t(),i(113,"div",172),r(114),t()()(),i(115,"div",173)(116,"div",168),g(117,"i",174),t(),i(118,"div",169)(119,"div",170),r(120),t(),i(121,"div",171),r(122,"Even Strength"),t(),i(123,"div",172),r(124),t()()(),i(125,"div",175)(126,"div",168),g(127,"i",176),t(),i(128,"div",169)(129,"div",170),r(130),t(),i(131,"div",171),r(132,"Shot Attempts"),t(),i(133,"div",172),r(134),t()()(),i(135,"div",177)(136,"div",168),g(137,"i",178),t(),i(138,"div",169)(139,"div",170),r(140),t(),i(141,"div",171),r(142,"Time on Attack"),t(),i(143,"div",172),r(144),t()()()()(),i(145,"div",179)(146,"div",180)(147,"h6"),g(148,"i",35),r(149,"Offensive Highlights"),t(),i(150,"div",181)(151,"span",182),r(152,"Most Goals in Game:"),t(),i(153,"span",183),r(154),t()(),i(155,"div",181)(156,"span",182),r(157,"Goals Per Game:"),t(),i(158,"span",183),r(159),t()(),i(160,"div",181)(161,"span",182),r(162,"Shooting Accuracy:"),t(),i(163,"span",183),r(164),t()()()()()(),i(165,"div",149)(166,"h4",133),g(167,"i",184),r(168,"Defensive Analytics "),t(),i(169,"div",37)(170,"div",165)(171,"div",166)(172,"div",185)(173,"div",168),g(174,"i",144),t(),i(175,"div",169)(176,"div",170),r(177),t(),i(178,"div",171),r(179,"Goals Against"),t(),i(180,"div",172),r(181),t()()(),i(182,"div",186)(183,"div",168),g(184,"i",187),t(),i(185,"div",169)(186,"div",170),r(187),t(),i(188,"div",171),r(189,"Shots Against"),t(),i(190,"div",172),r(191),t()()(),i(192,"div",188)(193,"div",168),g(194,"i",189),t(),i(195,"div",169)(196,"div",170),r(197),t(),i(198,"div",171),r(199,"Goal Differential"),t(),i(200,"div",172),r(201),t()()(),i(202,"div",190)(203,"div",168),g(204,"i",191),t(),i(205,"div",169)(206,"div",170),r(207),t(),i(208,"div",171),r(209,"Time on Defense"),t(),i(210,"div",172),r(211),t()()()()(),i(212,"div",179)(213,"div",192)(214,"h6"),g(215,"i",193),r(216,"Defensive Highlights"),t(),i(217,"div",181)(218,"span",182),r(219,"Most Goals Against:"),t(),i(220,"span",183),r(221),t()(),i(222,"div",181)(223,"span",182),r(224,"GA Per Game:"),t(),i(225,"span",183),r(226),t()(),i(227,"div",181)(228,"span",182),r(229,"Save Percentage:"),t(),i(230,"span",183),r(231),t()()()()()(),i(232,"div",149)(233,"h4",133),g(234,"i",194),r(235,"Special Teams & Discipline "),t(),i(236,"div",37)(237,"div",195)(238,"div",196)(239,"div",197),g(240,"i",194),i(241,"h5"),r(242,"Powerplay Performance"),t()(),i(243,"div",198)(244,"div",199)(245,"span",200),r(246),t(),i(247,"span",201),r(248,"Total PP Time"),t()(),i(249,"div",202)(250,"div",203)(251,"span",204),r(252),t(),i(253,"span",205),r(254,"Avg PP Time/Game"),t()()()()()(),i(255,"div",195)(256,"div",206)(257,"div",197),g(258,"i",184),i(259,"h5"),r(260,"Penalty Kill Performance"),t()(),i(261,"div",198)(262,"div",199)(263,"span",200),r(264),t(),i(265,"span",201),r(266,"PK Success Rate"),t()(),i(267,"div",202)(268,"div",203)(269,"span",204),r(270),t(),i(271,"span",205),r(272,"Successful/Total"),t()()()()()()()(),i(273,"div",149)(274,"h4",133),g(275,"i",2),r(276,"Game Flow Analytics "),t(),i(277,"div",37)(278,"div",195)(279,"div",207)(280,"h5"),g(281,"i",208),r(282,"Puck Possession"),t(),i(283,"div",209)(284,"div",210)(285,"div",211),g(286,"div",212),t(),i(287,"div",213)(288,"span",214),r(289),t(),i(290,"span",215),r(291),t()()()()()(),i(292,"div",195)(293,"div",216)(294,"h5"),g(295,"i",217),r(296,"Efficiency Metrics"),t(),i(297,"div",218)(298,"div",219)(299,"span",220),r(300,"Attack Time per Goal:"),t(),i(301,"span",221),r(302),t()(),i(303,"div",219)(304,"span",220),r(305,"Defense Time per GA:"),t(),i(306,"span",221),r(307),t()(),i(308,"div",219)(309,"span",220),r(310,"Passing Accuracy:"),t(),i(311,"span",221),r(312),t()()()()()()(),i(313,"div",149)(314,"h4",133),g(315,"i",222),r(316,"Physical Play & Discipline "),t(),i(317,"div",37)(318,"div",56)(319,"div",223)(320,"div",224),g(321,"i",225),t(),i(322,"div",226)(323,"div",227),r(324),t(),i(325,"div",228),r(326,"Total Hits"),t(),i(327,"div",229),r(328),t()()()(),i(329,"div",56)(330,"div",230)(331,"div",224),g(332,"i",161),t(),i(333,"div",226)(334,"div",227),r(335),t(),i(336,"div",228),r(337,"Fights"),t(),i(338,"div",229),r(339),t()()()(),i(340,"div",56)(341,"div",231)(342,"div",224),g(343,"i",148),t(),i(344,"div",226)(345,"div",227),r(346),t(),i(347,"div",228),r(348,"Faceoff Win %"),t(),i(349,"div",229),r(350),t()()()()()()()),n&2){let e=c(3);o(12),p(e.formatDecimal(e.teamAnalytics.avgGoalsPerGame,2)),o(4),b("",e.teamAnalytics.goals," total goals"),o(7),p(e.formatDecimal(e.teamAnalytics.avgGoalsAgainstPerGame,2)),o(4),b("",e.teamAnalytics.goalsAgainst," total against"),o(7),p(e.formatPercentage(e.teamAnalytics.shootingPercentage)),o(4),b("",e.teamAnalytics.shotAttempts," shot attempts"),o(7),p(e.formatPercentage(e.teamAnalytics.faceoffPercentage)),o(4),q("",e.teamAnalytics.faceoffsWon,"/",e.teamAnalytics.faceoffsTaken),o(13),p(e.formatRecord(e.teamAnalytics.homeRecord)),o(3),b("",e.teamAnalytics.homeRecord.wins,"W"),o(2),b("",e.teamAnalytics.homeRecord.losses,"L"),o(2),b("",e.teamAnalytics.homeRecord.otl,"OTL"),o(8),p(e.formatRecord(e.teamAnalytics.awayRecord)),o(3),b("",e.teamAnalytics.awayRecord.wins,"W"),o(2),b("",e.teamAnalytics.awayRecord.losses,"L"),o(2),b("",e.teamAnalytics.awayRecord.otl,"OTL"),o(7),N("win-streak",e.teamAnalytics.currentStreak.type==="W")("lose-streak",e.teamAnalytics.currentStreak.type==="L"),o(),b(" ",e.formatStreak(e.teamAnalytics.currentStreak)," "),o(3),b("Longest Win: ",e.teamAnalytics.longestWinStreak),o(2),b("Longest Loss: ",e.teamAnalytics.longestLoseStreak),o(13),p(e.teamAnalytics.goals),o(4),b("",e.formatDecimal(e.teamAnalytics.avgGoalsPerGame,2)," per game"),o(6),p(e.teamAnalytics.evenStrengthGoals),o(4),b("",(e.teamAnalytics.evenStrengthGoals/e.teamAnalytics.goals*100).toFixed(1),"% of goals"),o(6),p(e.teamAnalytics.shotAttempts),o(4),b("",e.formatPercentage(e.teamAnalytics.shootingPercentage)," accuracy"),o(6),p(e.formatTime(e.teamAnalytics.timeOnAttack)),o(4),b("",e.formatTime(e.teamAnalytics.timeOnAttackPerGoal)," per goal"),o(10),p(e.teamAnalytics.mostGoalsInGame),o(5),p(e.formatDecimal(e.teamAnalytics.avgGoalsPerGame,2)),o(5),p(e.formatPercentage(e.teamAnalytics.shootingPercentage)),o(13),p(e.teamAnalytics.goalsAgainst),o(4),b("",e.formatDecimal(e.teamAnalytics.avgGoalsAgainstPerGame,2)," per game"),o(6),p(e.teamAnalytics.shotsAgainst),o(4),b("",e.formatPercentage(e.teamAnalytics.goalsAgainstPercentage)," GA%"),o(3),N("fa-arrow-up",e.teamAnalytics.goalDifferential>0)("fa-arrow-down",e.teamAnalytics.goalDifferential<0)("fa-minus",e.teamAnalytics.goalDifferential===0),o(2),N("positive",e.teamAnalytics.goalDifferential>0)("negative",e.teamAnalytics.goalDifferential<0),o(),q(" ",e.teamAnalytics.goalDifferential>0?"+":"","",e.teamAnalytics.goalDifferential," "),o(4),q("",e.teamAnalytics.goals," GF - ",e.teamAnalytics.goalsAgainst," GA"),o(6),p(e.formatTime(e.teamAnalytics.timeOnDefense)),o(4),b("",e.formatTime(e.teamAnalytics.timeOnDefensePerGoal)," per GA"),o(10),p(e.teamAnalytics.mostGoalsAgainstInGame),o(5),p(e.formatDecimal(e.teamAnalytics.avgGoalsAgainstPerGame,2)),o(5),p(e.formatPercentage(100-e.teamAnalytics.goalsAgainstPercentage)),o(15),p(e.formatTime(e.teamAnalytics.powerplayTimeOnIce)),o(6),p(e.teamAnalytics.powerplayTimeOnIce>0?e.formatDecimal(e.teamAnalytics.powerplayTimeOnIce/e.teamAnalytics.totalGames,1):"0.0"),o(12),p(e.formatPercentage(e.teamAnalytics.penaltyKillPercentage)),o(6),p(e.formatPenaltyKills(e.teamAnalytics.penaltyKills.successful,e.teamAnalytics.penaltyKills.total)),o(16),Le("width",e.teamAnalytics.timeOnAttack/(e.teamAnalytics.timeOnAttack+e.teamAnalytics.timeOnDefense)*100,"%"),o(3),b("Attack: ",e.formatTime(e.teamAnalytics.timeOnAttack)),o(2),b("Defense: ",e.formatTime(e.teamAnalytics.timeOnDefense)),o(11),p(e.formatTime(e.teamAnalytics.timeOnAttackPerGoal)),o(5),p(e.formatTime(e.teamAnalytics.timeOnDefensePerGoal)),o(5),p(e.formatPercentage(e.teamAnalytics.passingPercentage)),o(12),p(e.teamAnalytics.hits),o(4),b("",e.formatDecimal(e.teamAnalytics.hits/e.teamAnalytics.totalGames,1)," per game"),o(7),p(e.teamAnalytics.fights),o(4),b("",e.formatDecimal(e.teamAnalytics.fights/e.teamAnalytics.totalGames,1)," per game"),o(7),p(e.formatPercentage(e.teamAnalytics.faceoffPercentage)),o(4),q("",e.teamAnalytics.faceoffsWon,"/",e.teamAnalytics.faceoffsTaken)}}function Na(n,a){n&1&&(i(0,"th",242),r(1,"Saves"),t())}function La(n,a){n&1&&(i(0,"th",242),r(1,"SA"),t())}function Va(n,a){n&1&&(i(0,"th",242),r(1,"SV%"),t())}function Fa(n,a){n&1&&(i(0,"th",242),r(1,"GAA"),t())}function Wa(n,a){n&1&&(i(0,"th",242),r(1,"SO"),t())}function Ua(n,a){n&1&&(i(0,"span",257),g(1,"i",258),r(2," Rookie "),t())}function Ba(n,a){if(n&1&&(i(0,"td",259),r(1),t()),n&2){let e=c().$implicit;o(),p(e.saves)}}function $a(n,a){if(n&1&&(i(0,"td",259),r(1),t()),n&2){let e=c().$implicit;o(),p(e.shotsAgainst)}}function Ha(n,a){if(n&1&&(i(0,"td",259),r(1),t()),n&2){let e=c().$implicit;o(),b("",e.savePercentage.toFixed(1),"%")}}function ja(n,a){if(n&1&&(i(0,"td",259),r(1),t()),n&2){let e=c().$implicit;o(),p(e.gaa.toFixed(2))}}function za(n,a){if(n&1&&(i(0,"td",259),r(1),t()),n&2){let e=c().$implicit;o(),p(e.shutouts)}}function qa(n,a){n&1&&(i(0,"td",260),r(1,"-"),t())}function Ka(n,a){n&1&&(i(0,"td",260),r(1,"-"),t())}function Ya(n,a){n&1&&(i(0,"td",260),r(1,"-"),t())}function Qa(n,a){n&1&&(i(0,"td",260),r(1,"-"),t())}function Xa(n,a){n&1&&(i(0,"td",260),r(1,"-"),t())}function Za(n,a){if(n&1&&(i(0,"tr",243)(1,"td",244)(2,"span",245),r(3),t()(),i(4,"td",246)(5,"div",247)(6,"div",248),r(7),t(),i(8,"div",249),u(9,Ua,3,0,"span",250),t()()(),i(10,"td",251)(11,"span",252),r(12),t()(),i(13,"td",253),r(14),t(),i(15,"td",253),r(16),t(),i(17,"td",253),r(18),t(),i(19,"td",254)(20,"strong"),r(21),t()(),i(22,"td",253),r(23),t(),i(24,"td",253),r(25),t(),i(26,"td",253),r(27),t(),i(28,"td",253),r(29),t(),i(30,"td",253),r(31),t(),i(32,"td",253),r(33),t(),i(34,"td",253),r(35),t(),i(36,"td",253),r(37),t(),u(38,Ba,2,1,"td",255)(39,$a,2,1,"td",255)(40,Ha,2,1,"td",255)(41,ja,2,1,"td",255)(42,za,2,1,"td",255)(43,qa,2,0,"td",256)(44,Ka,2,0,"td",256)(45,Ya,2,0,"td",256)(46,Qa,2,0,"td",256)(47,Xa,2,0,"td",256),t()),n&2){let e=a.$implicit,s=c(4);o(3),b("#",e.number),o(4),p(e.name),o(2),m("ngIf",e.rookie),o(2),Le("background-color",s.getPositionColor(e.position)),o(),b(" ",e.position," "),o(2),p(e.games),o(2),p(e.goals),o(2),p(e.assists),o(3),p(e.points),o(),N("positive-stat",e.plusMinus>0)("negative-stat",e.plusMinus<0),o(),q(" ",e.plusMinus>0?"+":"","",e.plusMinus," "),o(2),p(e.pim),o(2),p(e.shots),o(2),b("",e.shootingPercentage.toFixed(1),"%"),o(2),p(e.hits),o(2),p(e.ppg),o(2),p(e.shg),o(2),p(s.formatTimeOnIce(e.timeOnIce)),o(),m("ngIf",s.hasGoalies()&&e.position==="G"),o(),m("ngIf",s.hasGoalies()&&e.position==="G"),o(),m("ngIf",s.hasGoalies()&&e.position==="G"),o(),m("ngIf",s.hasGoalies()&&e.position==="G"),o(),m("ngIf",s.hasGoalies()&&e.position==="G"),o(),m("ngIf",s.hasGoalies()&&e.position!=="G"),o(),m("ngIf",s.hasGoalies()&&e.position!=="G"),o(),m("ngIf",s.hasGoalies()&&e.position!=="G"),o(),m("ngIf",s.hasGoalies()&&e.position!=="G"),o(),m("ngIf",s.hasGoalies()&&e.position!=="G")}}function Ja(n,a){if(n&1&&(i(0,"div",232)(1,"h4",133),g(2,"i",75),r(3),t(),i(4,"div",233)(5,"div",58)(6,"table",234)(7,"thead")(8,"tr")(9,"th",235),r(10,"#"),t(),i(11,"th",236),r(12,"Player"),t(),i(13,"th",237),r(14,"Pos"),t(),i(15,"th",238),r(16,"GP"),t(),i(17,"th",238),r(18,"G"),t(),i(19,"th",238),r(20,"A"),t(),i(21,"th",239),r(22,"PTS"),t(),i(23,"th",238),r(24,"+/-"),t(),i(25,"th",238),r(26,"PIM"),t(),i(27,"th",238),r(28,"Shots"),t(),i(29,"th",238),r(30,"S%"),t(),i(31,"th",238),r(32,"Hits"),t(),i(33,"th",238),r(34,"PPG"),t(),i(35,"th",238),r(36,"SHG"),t(),i(37,"th",238),r(38,"TOI"),t(),u(39,Na,2,0,"th",240)(40,La,2,0,"th",240)(41,Va,2,0,"th",240)(42,Fa,2,0,"th",240)(43,Wa,2,0,"th",240),t()(),i(44,"tbody"),u(45,Za,48,33,"tr",241),t()()()()()),n&2){let e=c(3);o(3),b("",e.selectedTeamName," - Player Statistics "),o(36),m("ngIf",e.hasGoalies()),o(),m("ngIf",e.hasGoalies()),o(),m("ngIf",e.hasGoalies()),o(),m("ngIf",e.hasGoalies()),o(),m("ngIf",e.hasGoalies()),o(2),m("ngForOf",e.teamRoster)}}function er(n,a){if(n&1&&(i(0,"div")(1,"div",113)(2,"div",114)(3,"div",115),u(4,Oa,1,2,"img",116)(5,Da,2,0,"div",117),t(),i(6,"div",118)(7,"h2",119),r(8),t(),i(9,"p",120),r(10,"Season Analytics Dashboard"),t(),i(11,"div",121)(12,"span",122),g(13,"i",123),r(14),t(),i(15,"span",122),g(16,"i",9),r(17),t(),i(18,"span",122),g(19,"i",124),r(20),t()()()()(),u(21,Ga,6,0,"div",125)(22,Ra,351,76,"div",10)(23,Ja,46,7,"div",126),t()),n&2){let e=c(2);o(4),m("ngIf",e.getSelectedTeamLogo()),o(),m("ngIf",!e.getSelectedTeamLogo()),o(3),p(e.selectedTeamName),o(6),b("",e.teamAnalytics.totalGames," Games "),o(3),b(" ",e.formatRecord($t(10,Un,e.teamAnalytics.homeRecord.wins+e.teamAnalytics.awayRecord.wins,e.teamAnalytics.homeRecord.losses+e.teamAnalytics.awayRecord.losses,e.teamAnalytics.homeRecord.otl+e.teamAnalytics.awayRecord.otl))," "),o(3),q("",e.teamAnalytics.goalDifferential>0?"+":"","",e.teamAnalytics.goalDifferential," "),o(),m("ngIf",e.teamAnalytics.totalGames===0),o(),m("ngIf",e.teamAnalytics.totalGames>0),o(),m("ngIf",e.teamRoster.length>0)}}function tr(n,a){if(n&1){let e=M();i(0,"div")(1,"div",11)(2,"div",57)(3,"h5",14),g(4,"i",107),r(5,"Team Analytics "),t()(),i(6,"div",12)(7,"div",36)(8,"label",108),r(9,"Select Team"),t(),i(10,"select",109),I("ngModelChange",function(l){v(e);let d=c();return T(d.selectedTeamId,l)||(d.selectedTeamId=l),x(l)}),A("change",function(){v(e);let l=c();return x(l.onTeamSelect())}),i(11,"option",110),r(12,"-- Choose a Team --"),t(),u(13,ka,2,2,"option",80),t()(),u(14,Aa,11,4,"div",111)(15,er,24,14,"div",10),t()()()}if(n&2){let e=c();o(10),E("ngModel",e.selectedTeamId),o(3),m("ngForOf",e.teams),o(),m("ngIf",e.selectedTeamId),o(),m("ngIf",e.selectedTeamId&&e.selectedTeamName)}}var ct=class n{currentView="standings";teamsCache=null;playerStatsCache=null;gamesCache=new Map;teamStatsCache=new Map;lastCacheTime=0;CACHE_DURATION=5*60*1e3;playerStatsView="goals";showRookieOnly=!1;playerStats=[];loadingPlayerStats=!1;playerStatsPage=0;playersPerPage=10;playerStatsCategories=[{key:"goals",label:"Goals Leaders",icon:"fas fa-bullseye"},{key:"assists",label:"Assist Leaders",icon:"fas fa-hands-helping"},{key:"points",label:"Points Leaders",icon:"fas fa-star"},{key:"points60",label:"Points per 60",icon:"fas fa-clock"},{key:"toi",label:"Time on Ice Leaders",icon:"fas fa-stopwatch"},{key:"shots",label:"Shots on Goal Leaders",icon:"fas fa-hockey-puck"},{key:"ppg",label:"Powerplay Goal Leaders",icon:"fas fa-bolt"},{key:"shg",label:"Short Handed Goal Leaders",icon:"fas fa-shield-alt"},{key:"hits",label:"Hits Leaders",icon:"fas fa-fist-raised"},{key:"pim",label:"Penalty Minute Leaders",icon:"fas fa-exclamation-triangle"},{key:"possession",label:"Puck Possession Leaders",icon:"fas fa-hand-holding"},{key:"plusminus",label:"+/- Leaders",icon:"fas fa-plus-minus"},{key:"saves",label:"Save Leaders",icon:"fas fa-hand-paper"},{key:"savepct",label:"Save % Leaders",icon:"fas fa-percentage"},{key:"shutouts",label:"Shutout Leaders",icon:"fas fa-lock"},{key:"gaa",label:"Goals Against Average",icon:"fas fa-chart-line"}];selectedLeague="major";standingsViewType="division";teams=[];filteredTeams=[];loadingStandings=!1;showPlayoffManager=!1;canManagePlayoffs=!1;conferences=[{name:"Mr. Hockey Conference",divisions:["Europe Division","Great Lakes Division","Atlantic Division"]},{name:"The Rocket Conference",divisions:["Northwest Division","Pacific Division","South Division"]}];selectedTeamId="";selectedTeamName="";teamRoster=[];teamAnalytics={homeRecord:{wins:0,losses:0,otl:0},awayRecord:{wins:0,losses:0,otl:0},currentStreak:{type:"",count:0},longestWinStreak:0,longestLoseStreak:0,goals:0,evenStrengthGoals:0,mostGoalsInGame:0,shotAttempts:0,shootingPercentage:0,avgGoalsPerGame:0,goalsAgainst:0,mostGoalsAgainstInGame:0,shotsAgainst:0,goalsAgainstPercentage:0,avgGoalsAgainstPerGame:0,goalDifferential:0,hits:0,passingPercentage:0,faceoffsTaken:0,faceoffsWon:0,faceoffPercentage:0,powerplayTimeOnIce:0,penaltyKills:{successful:0,total:0},penaltyKillPercentage:0,timeOnAttack:0,timeOnAttackPerGoal:0,timeOnDefense:0,timeOnDefensePerGoal:0,fights:0,totalGames:0};exportGames=[];selectedExportTeamId="";selectedExportGameId="";firestore=B(me);authService=B(J);Math=Math;ngOnInit(){return k(this,null,function*(){this.authService.effectiveRoles.subscribe(a=>{this.canManagePlayoffs=a.some(e=>["developer","commissioner"].includes(e))}),yield this.loadTeamsOptimized(),this.currentView==="playerstats"&&(yield this.loadPlayerStatsOptimized())})}isCacheValid(){return Date.now()-this.lastCacheTime<this.CACHE_DURATION}updateCacheTime(){this.lastCacheTime=Date.now()}loadTeamsOptimized(){return k(this,null,function*(){if(this.teamsCache&&this.isCacheValid()){this.teams=this.teamsCache,this.filteredTeams=this.teams.filter(a=>a.league===this.selectedLeague);return}this.loadingStandings=!0;try{let[a,e]=yield Promise.all([G(O(this.firestore,"teams")),G(O(this.firestore,"games"))]),s=new Map;a.docs.forEach(l=>{s.set(l.id,{wins:0,losses:0,overtimeLosses:0,goalsFor:0,goalsAgainst:0,gamesPlayed:0})}),e.docs.forEach(l=>{let d=l.data(),_=d.homeTeamId,h=d.awayTeamId,C=d.homeScore,w=d.awayScore,S=d.period;if(C!==void 0&&w!==void 0){let P=s.get(_),f=s.get(h);P&&f&&(P.gamesPlayed++,f.gamesPlayed++,P.goalsFor+=C,P.goalsAgainst+=w,f.goalsFor+=w,f.goalsAgainst+=C,C>w?(P.wins++,S==="OT"||S==="SO"?f.overtimeLosses++:f.losses++):w>C&&(f.wins++,S==="OT"||S==="SO"?P.overtimeLosses++:P.losses++))}}),this.teams=a.docs.map(l=>{let d=l.data(),_=s.get(l.id)||{wins:0,losses:0,overtimeLosses:0,goalsFor:0,goalsAgainst:0,gamesPlayed:0},h=_.wins*2+_.overtimeLosses,C=_.gamesPlayed>0?h/(_.gamesPlayed*2):0;return{id:l.id,name:`${d.city} ${d.mascot}`,league:d.league||"major",conference:d.conference||"",division:d.division||"",logoUrl:d.logoUrl,wins:_.wins,losses:_.losses,overtimeLosses:_.overtimeLosses,points:h,gamesPlayed:_.gamesPlayed,goalsFor:_.goalsFor,goalsAgainst:_.goalsAgainst,goalDifferential:_.goalsFor-_.goalsAgainst,pointPercentage:C,playoffStatus:d.playoffStatus}}),this.teamsCache=this.teams,this.updateCacheTime(),this.filteredTeams=this.teams.filter(l=>l.league===this.selectedLeague)}catch(a){console.error("Error loading teams:",a)}finally{this.loadingStandings=!1}})}onLeagueChange(){return k(this,null,function*(){this.teamsCache&&(this.teams=this.teamsCache),this.filteredTeams=this.teams.filter(a=>a.league===this.selectedLeague)})}onStandingsViewChange(){}refreshStandings(){return k(this,null,function*(){this.teamsCache=null,this.lastCacheTime=0,yield this.loadTeamsOptimized()})}clearCache(){this.teamsCache=null,this.playerStatsCache=null,this.gamesCache.clear(),this.teamStatsCache.clear(),this.lastCacheTime=0,console.log("Cache cleared")}getStandingsForDivision(a,e){return this.filteredTeams.filter(s=>s.conference===a&&s.division===e).sort((s,l)=>l.points!==s.points?l.points-s.points:l.pointPercentage!==s.pointPercentage?l.pointPercentage-s.pointPercentage:l.goalDifferential-s.goalDifferential)}getStandingsForConference(a){return this.filteredTeams.filter(e=>e.conference===a).sort((e,s)=>s.points!==e.points?s.points-e.points:s.pointPercentage!==e.pointPercentage?s.pointPercentage-e.pointPercentage:s.goalDifferential-e.goalDifferential)}getOverallStandings(){return[...this.filteredTeams].sort((a,e)=>e.points!==a.points?e.points-a.points:e.pointPercentage!==a.pointPercentage?e.pointPercentage-a.pointPercentage:e.goalDifferential-a.goalDifferential)}getTeamPlayoffStatus(a){return this.teams.find(s=>s.id===a)?.playoffStatus||"none"}updateTeamPlayoffStatus(a,e){return k(this,null,function*(){try{let s=e==="none"?null:e;yield be(W(this.firestore,"teams",a),{playoffStatus:s});let l=this.teams.find(d=>d.id===a);l&&(l.playoffStatus=s||void 0)}catch(s){console.error("Error updating playoff status:",s)}})}getPlayoffStatusClass(a){if(!a.playoffStatus)return"";switch(a.playoffStatus){case"league":return"table-success";case"conference":return"table-info";case"division":return"table-warning";case"playoff":return"table-primary";case"eliminated":return"table-danger";default:return""}}getPlayoffStatusBadge(a){if(!a.playoffStatus)return null;switch(a.playoffStatus){case"league":return{text:"P",class:"badge bg-success"};case"conference":return{text:"z",class:"badge bg-info"};case"division":return{text:"y",class:"badge bg-warning"};case"playoff":return{text:"x",class:"badge bg-primary"};case"eliminated":return{text:"e",class:"badge bg-danger"};default:return null}}onPlayerStatsTabClick(){return k(this,null,function*(){this.currentView="playerstats",(!this.playerStatsCache||!this.isCacheValid())&&(yield this.loadPlayerStatsOptimized())})}onTeamSelect(){return k(this,null,function*(){console.log("\u{1F50D} onTeamSelect called with selectedTeamId:",this.selectedTeamId);let a=`team-analytics-${this.selectedTeamId}`;if(this.teamStatsCache.has(a)&&this.isCacheValid()){let s=this.teamStatsCache.get(a);this.teamAnalytics=s.teamAnalytics,this.selectedTeamName=s.selectedTeamName,console.log("\u{1F4CB} Using cached data for:",this.selectedTeamName);return}if(!this.selectedTeamId){console.log("\u274C No team selected, resetting analytics"),this.resetAnalytics();return}let e=this.teams.find(s=>s.id===this.selectedTeamId);this.selectedTeamName=e?.name||"",console.log("\u{1F3D2} Selected team:",this.selectedTeamName,"ID:",this.selectedTeamId),console.log("\u{1F50D} Loading analytics for team:",this.selectedTeamName,"ID:",this.selectedTeamId);try{yield this.calculateTeamAnalytics(),this.teamStatsCache.set(a,{teamAnalytics:this.teamAnalytics,selectedTeamName:this.selectedTeamName}),console.log("\u2705 Team analytics calculated:",this.teamAnalytics),yield this.loadTeamRoster(),console.log("\u{1F465} Team roster loaded:",this.teamRoster.length,"players")}catch(s){console.error("Error loading team analytics:",s)}})}calculateTeamAnalytics(){return k(this,null,function*(){this.resetAnalytics(),console.log("\u{1F4CA} Calculating analytics for team ID:",this.selectedTeamId);try{let a=V(O(this.firestore,"games"),R("homeTeamId","==",this.selectedTeamId)),e=V(O(this.firestore,"games"),R("awayTeamId","==",this.selectedTeamId)),[s,l]=yield Promise.all([G(a),G(e)]);console.log(`\u{1F4C8} Found ${s.docs.length} home games and ${l.docs.length} away games`);let _=[...s.docs.map(y=>se(j({},y.data()),{isHome:!0,gameId:y.id})),...l.docs.map(y=>se(j({},y.data()),{isHome:!1,gameId:y.id}))].filter(y=>y.homeScore!==void 0&&y.awayScore!==void 0).sort((y,D)=>{let L=y.date?.toDate?.()||new Date(y.date),F=D.date?.toDate?.()||new Date(D.date);return L.getTime()-F.getTime()});if(console.log(`\u{1F3AF} Processing ${_.length} completed games`),this.teamAnalytics.totalGames=_.length,_.length===0)return;let h="",C=0,w=0,S=0,P=0,f=0;_.forEach((y,D)=>{let L=y.isHome,F=L?y.homeScore:y.awayScore,$=L?y.awayScore:y.homeScore,U=L?y.homeStats:y.awayStats,ee=L?y.awayStats:y.homeStats,K=y.period,he=F>$,_e=F<$&&(K==="OT"||K==="SO");if(L?he?this.teamAnalytics.homeRecord.wins++:_e?this.teamAnalytics.homeRecord.otl++:this.teamAnalytics.homeRecord.losses++:he?this.teamAnalytics.awayRecord.wins++:_e?this.teamAnalytics.awayRecord.otl++:this.teamAnalytics.awayRecord.losses++,he?(h==="W"?C++:(h="W",C=1),w++,S=0):(h==="L"?C++:(h="L",C=1),S++,w=0),P=Math.max(P,w),f=Math.max(f,S),this.teamAnalytics.goals+=F,this.teamAnalytics.mostGoalsInGame=Math.max(this.teamAnalytics.mostGoalsInGame,F),this.teamAnalytics.goalsAgainst+=$,this.teamAnalytics.mostGoalsAgainstInGame=Math.max(this.teamAnalytics.mostGoalsAgainstInGame,$),this.teamAnalytics.goalDifferential+=F-$,U){this.teamAnalytics.shotAttempts+=U.totalShots||0,this.teamAnalytics.shotsAgainst+=ee?.totalShots||0,this.teamAnalytics.hits+=U.hits||0,U.passingPercentage!==void 0&&(this.teamAnalytics.passingPercentage+=U.passingPercentage),this.teamAnalytics.faceoffsWon+=U.faceoffsWon||0,this.teamAnalytics.faceoffsTaken+=(U.faceoffsWon||0)+(U.faceoffsLost||0),this.teamAnalytics.penaltyKills.total+=U.penaltyKills?.total||0,this.teamAnalytics.penaltyKills.successful+=U.penaltyKills?.successful||0,this.teamAnalytics.powerplayTimeOnIce+=U.powerplayMinutes||0;let Pe=U.timeOnAttack||{minutes:0,seconds:0};this.teamAnalytics.timeOnAttack+=Pe.minutes+Pe.seconds/60;let Oe=Pe.minutes+Pe.seconds/60;this.teamAnalytics.timeOnDefense+=Math.max(0,60-Oe-10),this.teamAnalytics.fights+=U.fights||0;let ge=U.powerplayGoals||0,zi=U.shorthandedGoals||0;this.teamAnalytics.evenStrengthGoals+=Math.max(0,F-ge-zi)}}),this.teamAnalytics.currentStreak={type:h,count:C},this.teamAnalytics.longestWinStreak=P,this.teamAnalytics.longestLoseStreak=f,this.teamAnalytics.totalGames>0&&(this.teamAnalytics.avgGoalsPerGame=this.teamAnalytics.goals/this.teamAnalytics.totalGames,this.teamAnalytics.avgGoalsAgainstPerGame=this.teamAnalytics.goalsAgainst/this.teamAnalytics.totalGames,this.teamAnalytics.passingPercentage=this.teamAnalytics.passingPercentage/this.teamAnalytics.totalGames),this.teamAnalytics.shotAttempts>0&&(this.teamAnalytics.shootingPercentage=this.teamAnalytics.goals/this.teamAnalytics.shotAttempts*100),this.teamAnalytics.shotsAgainst>0&&(this.teamAnalytics.goalsAgainstPercentage=this.teamAnalytics.goalsAgainst/this.teamAnalytics.shotsAgainst*100),this.teamAnalytics.faceoffsTaken>0&&(this.teamAnalytics.faceoffPercentage=this.teamAnalytics.faceoffsWon/this.teamAnalytics.faceoffsTaken*100),this.teamAnalytics.penaltyKills.total>0&&(this.teamAnalytics.penaltyKillPercentage=this.teamAnalytics.penaltyKills.successful/this.teamAnalytics.penaltyKills.total*100),this.teamAnalytics.goals>0&&(this.teamAnalytics.timeOnAttackPerGoal=this.teamAnalytics.timeOnAttack/this.teamAnalytics.goals),this.teamAnalytics.goalsAgainst>0&&(this.teamAnalytics.timeOnDefensePerGoal=this.teamAnalytics.timeOnDefense/this.teamAnalytics.goalsAgainst),console.log("\u{1F4CA} Final team analytics:",this.teamAnalytics)}catch(a){console.error("Error calculating team analytics:",a)}})}resetAnalytics(){this.teamRoster=[],this.teamAnalytics={homeRecord:{wins:0,losses:0,otl:0},awayRecord:{wins:0,losses:0,otl:0},currentStreak:{type:"",count:0},longestWinStreak:0,longestLoseStreak:0,goals:0,evenStrengthGoals:0,mostGoalsInGame:0,shotAttempts:0,shootingPercentage:0,avgGoalsPerGame:0,goalsAgainst:0,mostGoalsAgainstInGame:0,shotsAgainst:0,goalsAgainstPercentage:0,avgGoalsAgainstPerGame:0,goalDifferential:0,hits:0,passingPercentage:0,faceoffsTaken:0,faceoffsWon:0,faceoffPercentage:0,powerplayTimeOnIce:0,penaltyKills:{successful:0,total:0},penaltyKillPercentage:0,timeOnAttack:0,timeOnAttackPerGoal:0,timeOnDefense:0,timeOnDefensePerGoal:0,fights:0,totalGames:0},this.selectedTeamName=""}formatRecord(a){return`${a.wins}-${a.losses}-${a.otl}`}formatStreak(a){return!a.type||a.count===0?"None":`${a.type}${a.count}`}formatPercentage(a){return`${a.toFixed(1)}%`}formatDecimal(a,e=1){return a.toFixed(e)}formatTime(a){let e=Math.floor(a),s=Math.round((a-e)*60);return`${e}:${s.toString().padStart(2,"0")}`}formatPenaltyKills(a,e){return`${a}/${e}`}onExportTeamSelect(){return k(this,null,function*(){if(!this.selectedExportTeamId){this.exportGames=[],this.selectedExportGameId="";return}try{let a=V(O(this.firestore,"games"),R("homeTeamId","==",this.selectedExportTeamId)),e=V(O(this.firestore,"games"),R("awayTeamId","==",this.selectedExportTeamId)),[s,l]=yield Promise.all([G(a),G(e)]),d=[...s.docs.map(_=>j({id:_.id},_.data())),...l.docs.map(_=>j({id:_.id},_.data()))];this.exportGames=d.filter(_=>_.date).sort((_,h)=>{let C=_.date?.toDate?.()||new Date(_.date);return(h.date?.toDate?.()||new Date(h.date)).getTime()-C.getTime()}).map(_=>({id:_.id,teamId:this.selectedExportTeamId,opponent:_.opponent||"Unknown",date:_.date,players:[]}))}catch(a){console.error("Error loading games for export:",a)}})}loadPlayerStatsOptimized(){return k(this,null,function*(){if(this.playerStatsCache&&this.isCacheValid()){this.playerStats=this.playerStatsCache;return}this.loadingPlayerStats=!0;try{console.log("\u{1F504} Loading player stats from database...");let[a,e,s]=yield Promise.all([G(V(O(this.firestore,"players"),R("status","==","active"))),G(O(this.firestore,"teams")),G(O(this.firestore,"games"))]),l=new Map;e.docs.forEach(_=>{let h=_.data();l.set(_.id,{name:`${h.city} ${h.mascot}`,logo:h.logoUrl||""})});let d=new Map;s.docs.forEach(_=>{let h=_.data(),C=h.homePlayerStats||{},w=h.awayPlayerStats||{};Object.entries(C).forEach(([S,P])=>{d.has(S)||d.set(S,{games:0,goals:0,assists:0,shots:0,hits:0,pim:0,ppg:0,shg:0,plusMinus:0,totalMinutes:0,totalSeconds:0,saves:0,shotsAgainst:0,shutouts:0,goalsAgainst:0,possessionTime:0});let f=d.get(S);f.games++,f.goals+=P.goals||0,f.assists+=P.assists||0,f.shots+=P.shots||0,f.hits+=P.hits||0,f.pim+=P.pim||0,f.ppg+=P.ppg||0,f.shg+=P.shg||0,f.plusMinus+=P.plusMinus||0,f.totalMinutes+=P.minutes||0,f.totalSeconds+=P.seconds||0,f.saves+=P.saves||0,f.shotsAgainst+=P.shotsAgainst||0,f.goalsAgainst+=P.goalsAgainst||0,f.possessionTime+=P.possessionTime||0,P.position==="G"&&(P.goalsAgainst||0)===0&&f.shutouts++}),Object.entries(w).forEach(([S,P])=>{d.has(S)||d.set(S,{games:0,goals:0,assists:0,shots:0,hits:0,pim:0,ppg:0,shg:0,plusMinus:0,totalMinutes:0,totalSeconds:0,saves:0,shotsAgainst:0,shutouts:0,goalsAgainst:0,possessionTime:0});let f=d.get(S);f.games++,f.goals+=P.goals||0,f.assists+=P.assists||0,f.shots+=P.shots||0,f.hits+=P.hits||0,f.pim+=P.pim||0,f.ppg+=P.ppg||0,f.shg+=P.shg||0,f.plusMinus+=P.plusMinus||0,f.totalMinutes+=P.minutes||0,f.totalSeconds+=P.seconds||0,f.saves+=P.saves||0,f.shotsAgainst+=P.shotsAgainst||0,f.goalsAgainst+=P.goalsAgainst||0,f.possessionTime+=P.possessionTime||0,P.position==="G"&&(P.goalsAgainst||0)===0&&f.shutouts++})}),this.playerStats=a.docs.filter(_=>{let h=_.data();return h.teamId&&h.teamId!=="none"}).map(_=>{let h=_.data(),C=_.id,w=d.get(C)||{games:0,goals:0,assists:0,shots:0,hits:0,pim:0,ppg:0,shg:0,plusMinus:0,totalMinutes:0,totalSeconds:0,saves:0,shotsAgainst:0,shutouts:0,goalsAgainst:0,possessionTime:0},S=l.get(h.teamId)||{name:"Free Agent",logo:""},P=w.goals+w.assists,f=w.totalMinutes+w.totalSeconds/60,y=f>0?P/f*60:0,D=w.shotsAgainst>0?w.saves/w.shotsAgainst*100:0,L=w.games>0?w.goalsAgainst/w.games:0;return{id:C,name:`${h.firstName} ${h.lastName}`,position:h.position,teamName:S.name,teamLogo:S.logo,rookie:h.rookie||!1,age:h.age||19,games:w.games,goals:w.goals,assists:w.assists,points:P,shots:w.shots,hits:w.hits,pim:w.pim,ppg:w.ppg,shg:w.shg,plusMinus:w.plusMinus,saves:w.saves,shotsAgainst:w.shotsAgainst,shutouts:w.shutouts,points60:y,savePercentage:D,gaa:L,timeOnIce:f,possessionTime:w.possessionTime}}),this.playerStatsCache=this.playerStats,this.updateCacheTime(),console.log(`\u2705 Loaded stats for ${this.playerStats.length} players`)}catch(a){console.error("Error loading player stats:",a)}finally{this.loadingPlayerStats=!1}})}getFilteredPlayerStats(){let a=[...this.playerStats];switch(this.showRookieOnly&&(a=a.filter(e=>e.rookie)),this.playerStatsView){case"goals":a=a.sort((e,s)=>s.goals-e.goals);break;case"assists":a=a.sort((e,s)=>s.assists-e.assists);break;case"points":a=a.sort((e,s)=>s.points-e.points);break;case"points60":a=a.sort((e,s)=>s.points60-e.points60);break;case"toi":a=a.sort((e,s)=>s.timeOnIce-e.timeOnIce);break;case"shots":a=a.sort((e,s)=>s.shots-e.shots);break;case"ppg":a=a.sort((e,s)=>s.ppg-e.ppg);break;case"shg":a=a.sort((e,s)=>s.shg-e.shg);break;case"hits":a=a.sort((e,s)=>s.hits-e.hits);break;case"pim":a=a.sort((e,s)=>s.pim-e.pim);break;case"possession":a=a.sort((e,s)=>s.possessionTime-e.possessionTime);break;case"plusminus":a=a.sort((e,s)=>s.plusMinus-e.plusMinus);break;case"saves":a=a.filter(e=>e.position==="G").sort((e,s)=>s.saves-e.saves);break;case"savepct":a=a.filter(e=>e.position==="G").sort((e,s)=>s.savePercentage-e.savePercentage);break;case"shutouts":a=a.filter(e=>e.position==="G").sort((e,s)=>s.shutouts-e.shutouts);break;case"gaa":a=a.filter(e=>e.position==="G").sort((e,s)=>e.gaa-s.gaa);break}return a}getPaginatedPlayerStats(){let a=this.getFilteredPlayerStats(),e=this.playerStatsPage*this.playersPerPage;return a.slice(e,e+this.playersPerPage)}getTotalPlayerStatsPages(){return Math.ceil(this.getFilteredPlayerStats().length/this.playersPerPage)}nextPlayerStatsPage(){this.playerStatsPage<this.getTotalPlayerStatsPages()-1&&this.playerStatsPage++}previousPlayerStatsPage(){this.playerStatsPage>0&&this.playerStatsPage--}onPlayerStatsViewChange(){this.playerStatsPage=0}onRookieFilterChange(){this.playerStatsPage=0}getStatValue(a,e){switch(e){case"goals":return a.goals.toString();case"assists":return a.assists.toString();case"points":return a.points.toString();case"points60":return a.points60.toFixed(2);case"toi":return a.timeOnIce.toFixed(1)+" min";case"shots":return a.shots.toString();case"ppg":return a.ppg.toString();case"shg":return a.shg.toString();case"hits":return a.hits.toString();case"pim":return a.pim.toString();case"possession":return a.possessionTime.toFixed(1)+" min";case"plusminus":return(a.plusMinus>=0?"+":"")+a.plusMinus.toString();case"saves":return a.saves.toString();case"savepct":return a.savePercentage.toFixed(1)+"%";case"shutouts":return a.shutouts.toString();case"gaa":return a.gaa.toFixed(2);default:return"0"}}getCurrentCategoryLabel(){return this.playerStatsCategories.find(e=>e.key===this.playerStatsView)?.label||"Player Stats"}getPositionColor(a){switch(a){case"G":return"#dc3545";case"D":return"#fd7e14";case"C":return"#28a745";case"LW":return"#17a2b8";case"RW":return"#007bff";default:return"#6c757d"}}hasGoalies(){return this.teamRoster.some(a=>a.position==="G")}formatTimeOnIce(a){let e=Math.floor(a),s=Math.round((a-e)*60);return`${e}:${s.toString().padStart(2,"0")}`}getSelectedTeamLogo(){return this.teams.find(e=>e.id===this.selectedTeamId)?.logoUrl||""}loadTeamRoster(){return k(this,null,function*(){if(!this.selectedTeamId){this.teamRoster=[];return}try{console.log("\u{1F465} Loading team roster for:",this.selectedTeamName);let a=O(this.firestore,`teams/${this.selectedTeamId}/roster`),e=yield G(a),s=V(O(this.firestore,"games"),R("homeTeamId","==",this.selectedTeamId)),l=V(O(this.firestore,"games"),R("awayTeamId","==",this.selectedTeamId)),[d,_]=yield Promise.all([G(s),G(l)]),h=new Map;e.docs.forEach(C=>{h.set(C.id,{games:0,goals:0,assists:0,shots:0,hits:0,pim:0,ppg:0,shg:0,plusMinus:0,totalMinutes:0,totalSeconds:0,saves:0,shotsAgainst:0,shutouts:0,goalsAgainst:0})}),d.docs.forEach(C=>{let S=C.data().homePlayerStats||{};Object.entries(S).forEach(([P,f])=>{if(h.has(P)){let y=h.get(P);y.games++,y.goals+=f.goals||0,y.assists+=f.assists||0,y.shots+=f.shots||0,y.hits+=f.hits||0,y.pim+=f.pim||0,y.ppg+=f.ppg||0,y.shg+=f.shg||0,y.plusMinus+=f.plusMinus||0,y.totalMinutes+=f.minutes||0,y.totalSeconds+=f.seconds||0,y.saves+=f.saves||0,y.shotsAgainst+=f.shotsAgainst||0,y.goalsAgainst+=f.goalsAgainst||0,f.position==="G"&&(f.goalsAgainst||0)===0&&y.shutouts++}})}),_.docs.forEach(C=>{let S=C.data().awayPlayerStats||{};Object.entries(S).forEach(([P,f])=>{if(h.has(P)){let y=h.get(P);y.games++,y.goals+=f.goals||0,y.assists+=f.assists||0,y.shots+=f.shots||0,y.hits+=f.hits||0,y.pim+=f.pim||0,y.ppg+=f.ppg||0,y.shg+=f.shg||0,y.plusMinus+=f.plusMinus||0,y.totalMinutes+=f.minutes||0,y.totalSeconds+=f.seconds||0,y.saves+=f.saves||0,y.shotsAgainst+=f.shotsAgainst||0,y.goalsAgainst+=f.goalsAgainst||0,f.position==="G"&&(f.goalsAgainst||0)===0&&y.shutouts++}})}),this.teamRoster=e.docs.map(C=>{let w=C.data(),S=h.get(C.id)||{games:0,goals:0,assists:0,shots:0,hits:0,pim:0,ppg:0,shg:0,plusMinus:0,totalMinutes:0,totalSeconds:0,saves:0,shotsAgainst:0,shutouts:0,goalsAgainst:0},P=S.goals+S.assists,f=S.totalMinutes+S.totalSeconds/60,y=S.shots>0?S.goals/S.shots*100:0,D=S.shotsAgainst>0?S.saves/S.shotsAgainst*100:0,L=S.games>0?S.goalsAgainst/S.games:0;return{id:C.id,number:w.jerseyNumber||0,name:`${w.firstName} ${w.lastName}`,position:w.position||"",rookie:w.rookie||!1,games:S.games,goals:S.goals,assists:S.assists,points:P,plusMinus:S.plusMinus,pim:S.pim,shots:S.shots,shootingPercentage:y,hits:S.hits,ppg:S.ppg,shg:S.shg,timeOnIce:f,saves:S.saves,shotsAgainst:S.shotsAgainst,savePercentage:D,gaa:L,shutouts:S.shutouts}}).sort((C,w)=>C.number-w.number),console.log(`\u{1F465} Loaded ${this.teamRoster.length} players for team roster`)}catch(a){console.error("Error loading team roster:",a),this.teamRoster=[]}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-analytics"]],decls:21,vars:9,consts:[[1,"container","mt-4"],[1,"page-title"],[1,"fas","fa-chart-line","me-2"],[1,"mb-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-trophy","me-1"],[1,"fas","fa-users","me-1"],[1,"fas","fa-chart-line","me-1"],[4,"ngIf"],[1,"card","mb-4"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap","gap-3"],[1,"mb-0"],[1,"d-flex","gap-3","align-items-center","flex-wrap"],[1,"btn-group"],[1,"btn","btn-sm",3,"click"],[1,"fas","fa-layer-group","me-1"],[1,"fas","fa-sitemap","me-1"],[1,"fas","fa-globe","me-1"],[1,"btn",3,"click"],["class","btn btn-outline-warning btn-sm","title","Manage playoff clinching status",3,"click",4,"ngIf"],["title","Refresh standings data",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"fas","fa-sync-alt"],["class","card mb-4 border-warning",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[1,"mt-4","text-center"],[1,"text-muted"],[1,"fas","fa-clock","me-1"],[1,"btn","btn-link","btn-sm","p-0",3,"click"],["title","Manage playoff clinching status",1,"btn","btn-outline-warning","btn-sm",3,"click"],[1,"fas","fa-cog","me-1"],[1,"card","mb-4","border-warning"],[1,"card-header","bg-warning","text-dark"],[1,"fas","fa-trophy","me-2"],[1,"mb-3"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card"],[1,"d-flex","align-items-center","mb-2"],["class","team-logo-small me-2",3,"src","alt",4,"ngIf"],[1,"form-select","form-select-sm",3,"change","value"],["value","none"],["value","league"],["value","conference"],["value","division"],["value","playoff"],["value","eliminated"],[1,"team-logo-small","me-2",3,"src","alt"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["class","mb-4",4,"ngFor","ngForOf"],["class","col-lg-4 mb-3",4,"ngFor","ngForOf"],[1,"col-lg-4","mb-3"],[1,"card-header"],[1,"table-responsive"],[1,"table","table-sm","mb-0"],[3,"class",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],["class","ms-1",3,"class",4,"ngIf"],[1,"ms-1"],[1,"card-header","bg-primary","text-white"],[1,"table","table-striped","mb-0"],[1,"card-header","bg-success","text-white"],[1,"card-footer","bg-light"],[1,"row","text-center"],[1,"col-md-2"],[1,"badge","bg-success","me-2"],[1,"badge","bg-info","me-2"],[1,"badge","bg-warning","me-2"],[1,"badge","bg-primary","me-2"],[1,"badge","bg-danger","me-2"],[1,"fas","fa-users","me-2"],[1,"row","align-items-center","mb-3"],[1,"col-md-8"],[1,"form-label"],[1,"form-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"form-check","form-switch","mt-4"],["type","checkbox","id","rookieFilter",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","rookieFilter",1,"form-check-label"],[1,"fas","fa-graduation-cap","me-1"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-3",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],[3,"value"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"rank-badge"],[1,"player-info"],[1,"player-name"],["class","text-muted",4,"ngIf"],[1,"team-name-small"],[1,"badge","position-badge"],[1,"stat-highlight"],[1,"fas","fa-star","text-warning","me-1"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"btn","btn-outline-secondary","btn-sm","disabled"],[1,"fas","fa-chevron-right"],[1,"text-center","py-4","text-muted"],[1,"fas","fa-chart-line","fa-3x","mb-3"],[1,"fas","fa-chart-bar","me-2"],["for","teamSelect",1,"form-label"],["id","teamSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["class","alert alert-info mb-3",4,"ngIf"],[1,"alert","alert-info","mb-3"],[1,"team-analytics-header"],[1,"d-flex","align-items-center","justify-content-center","mb-4"],[1,"team-logo-container","me-4"],["class","team-logo-large",3,"src","alt",4,"ngIf"],["class","team-logo-placeholder",4,"ngIf"],[1,"team-header-info"],[1,"team-name-large"],[1,"team-subtitle"],[1,"quick-stats"],[1,"quick-stat-item"],[1,"fas","fa-calendar","me-1"],[1,"fas","fa-bullseye","me-1"],["class","alert alert-warning text-center",4,"ngIf"],["class","roster-section",4,"ngIf"],[1,"team-logo-large",3,"src","alt"],[1,"team-logo-placeholder"],[1,"fas","fa-hockey-puck","fa-3x"],[1,"alert","alert-warning","text-center"],[1,"fas","fa-exclamation-triangle","fa-2x","mb-3"],[1,"kpi-section","mb-5"],[1,"section-title"],[1,"fas","fa-tachometer-alt","me-2"],[1,"col-lg-3","col-md-6","mb-3"],[1,"kpi-card","offensive"],[1,"kpi-icon"],[1,"fas","fa-bullseye"],[1,"kpi-content"],[1,"kpi-value"],[1,"kpi-label"],[1,"kpi-detail"],[1,"kpi-card","defensive"],[1,"fas","fa-shield-alt"],[1,"kpi-card","shooting"],[1,"fas","fa-percentage"],[1,"kpi-card","faceoff"],[1,"fas","fa-dot-circle"],[1,"analytics-section","mb-5"],[1,"col-lg-4","mb-4"],[1,"analytics-card","record-card"],[1,"card-icon"],[1,"fas","fa-home"],[1,"record-display"],[1,"record-breakdown"],[1,"win-stat"],[1,"loss-stat"],[1,"otl-stat"],[1,"fas","fa-plane"],[1,"analytics-card","streak-card"],[1,"fas","fa-fire"],[1,"streak-display"],[1,"streak-history"],[1,"fas","fa-bullseye","me-2"],[1,"col-lg-8"],[1,"analytics-grid"],[1,"analytics-stat-card","goals"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-detail"],[1,"analytics-stat-card","even-strength"],[1,"fas","fa-equals"],[1,"analytics-stat-card","shots"],[1,"fas","fa-hockey-puck"],[1,"analytics-stat-card","attack-time"],[1,"fas","fa-clock"],[1,"col-lg-4"],[1,"highlight-card","offensive-highlight"],[1,"highlight-item"],[1,"highlight-label"],[1,"highlight-value"],[1,"fas","fa-shield-alt","me-2"],[1,"analytics-stat-card","goals-against"],[1,"analytics-stat-card","shots-against"],[1,"fas","fa-crosshairs"],[1,"analytics-stat-card","goal-diff"],[1,"fas"],[1,"analytics-stat-card","defense-time"],[1,"fas","fa-stopwatch"],[1,"highlight-card","defensive-highlight"],[1,"fas","fa-shield","me-2"],[1,"fas","fa-bolt","me-2"],[1,"col-lg-6","mb-4"],[1,"special-teams-card","powerplay"],[1,"st-header"],[1,"st-stats"],[1,"st-main-stat"],[1,"st-value"],[1,"st-label"],[1,"st-secondary-stats"],[1,"st-secondary-stat"],[1,"value"],[1,"label"],[1,"special-teams-card","penalty-kill"],[1,"flow-card","possession"],[1,"fas","fa-exchange-alt","me-2"],[1,"flow-stats"],[1,"flow-stat"],[1,"flow-bar"],[1,"flow-fill","attack"],[1,"flow-labels"],[1,"attack-label"],[1,"defense-label"],[1,"flow-card","efficiency"],[1,"fas","fa-target","me-2"],[1,"efficiency-stats"],[1,"efficiency-item"],[1,"eff-label"],[1,"eff-value"],[1,"fas","fa-fist-raised","me-2"],[1,"physical-card","hits"],[1,"physical-icon"],[1,"fas","fa-fist-raised"],[1,"physical-stat"],[1,"physical-number"],[1,"physical-label"],[1,"physical-avg"],[1,"physical-card","fights"],[1,"physical-card","faceoffs"],[1,"roster-section"],[1,"roster-card"],[1,"table","table-hover","roster-table"],[1,"number-col"],[1,"player-col"],[1,"pos-col"],[1,"stat-col"],[1,"stat-col","highlight-col"],["class","stat-col goalie-col",4,"ngIf"],["class","player-row",4,"ngFor","ngForOf"],[1,"stat-col","goalie-col"],[1,"player-row"],[1,"number-cell"],[1,"jersey-number"],[1,"player-cell"],[1,"player-info-detailed"],[1,"player-name-main"],[1,"player-badges"],["class","rookie-badge",4,"ngIf"],[1,"pos-cell"],[1,"position-badge-detailed"],[1,"stat-cell"],[1,"stat-cell","highlight-cell"],["class","stat-cell goalie-stat",4,"ngIf"],["class","stat-cell empty-goalie-stat",4,"ngIf"],[1,"rookie-badge"],[1,"fas","fa-star"],[1,"stat-cell","goalie-stat"],[1,"stat-cell","empty-goalie-stat"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h2",1),g(2,"i",2),r(3,"Stats and Standings "),t(),i(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),A("click",function(){return s.currentView="standings"}),g(8,"i",7),r(9," Standings "),t()(),i(10,"li",5)(11,"a",6),A("click",function(){return s.onPlayerStatsTabClick()}),g(12,"i",8),r(13," Player Stats "),t()(),i(14,"li",5)(15,"a",6),A("click",function(){return s.currentView="analytics"}),g(16,"i",9),r(17," Team Analytics "),t()()()(),u(18,la,37,29,"div",10)(19,Ma,23,7,"div",10)(20,tr,16,4,"div",10),t()),e&2&&(o(7),N("active",s.currentView==="standings"),o(4),N("active",s.currentView==="playerstats"),o(4),N("active",s.currentView==="analytics"),o(3),m("ngIf",s.currentView==="standings"),o(),m("ngIf",s.currentView==="playerstats"),o(),m("ngIf",s.currentView==="analytics"))},dependencies:[X,ie,Q,re,ke,Ae,et,Me,ne,ae,Je],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;padding:2rem 0}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6;margin-bottom:2rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#6c757d;font-weight:500;padding:1rem 1.5rem;border-bottom:3px solid transparent}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0d6efd;border-bottom-color:#0d6efd;font-weight:600}.team-logo-small[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain}.team-analytics-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:2rem;border-radius:12px;margin-bottom:2rem}.team-logo-large[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:contain;border-radius:12px;background:#ffffff1a;padding:.5rem}.team-name-large[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.quick-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.quick-stat-item[_ngcontent-%COMP%]{background:#ffffff26;padding:.5rem 1rem;border-radius:20px;font-weight:600}.kpi-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 4px 16px #0000001a;border:1px solid #e9ecef;height:100%;display:flex;align-items:center;gap:1rem}.kpi-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.25rem;color:#fff}.kpi-card.offensive[_ngcontent-%COMP%]   .kpi-icon[_ngcontent-%COMP%]{background:#28a745}.kpi-card.defensive[_ngcontent-%COMP%]   .kpi-icon[_ngcontent-%COMP%]{background:#dc3545}.kpi-card.shooting[_ngcontent-%COMP%]   .kpi-icon[_ngcontent-%COMP%]{background:#ffc107}.kpi-card.faceoff[_ngcontent-%COMP%]   .kpi-icon[_ngcontent-%COMP%]{background:#6f42c1}.kpi-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.kpi-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#6c757d;text-transform:uppercase}.analytics-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;text-align:center;box-shadow:0 4px 16px #0000001a;border:1px solid #e9ecef;height:100%}.analytics-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#667eea;color:#fff;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem}.record-display[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1rem}.win-stat[_ngcontent-%COMP%]{color:#28a745}.loss-stat[_ngcontent-%COMP%]{color:#dc3545}.otl-stat[_ngcontent-%COMP%]{color:#ffc107}.streak-display[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1rem}.analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:2rem}.analytics-stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;box-shadow:0 4px 16px #00000014;border:1px solid #e9ecef;display:flex;align-items:center;gap:1rem}.analytics-stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;color:#fff}.analytics-stat-card.goals[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#28a745}.analytics-stat-card.shots[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#6f42c1}.analytics-stat-card.attack-time[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#fd7e14}.analytics-stat-card.goals-against[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#dc3545}.analytics-stat-card.goal-diff[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#0d6efd}.analytics-stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:.25rem}.analytics-stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#6c757d;text-transform:uppercase}.highlight-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 4px 16px #00000014;border:1px solid #e9ecef}.highlight-card.offensive-highlight[_ngcontent-%COMP%]{border-left:4px solid #28a745}.highlight-card.defensive-highlight[_ngcontent-%COMP%]{border-left:4px solid #dc3545}.highlight-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #f8f9fa}.highlight-value[_ngcontent-%COMP%]{font-weight:700}.special-teams-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 4px 16px #00000014;border:1px solid #e9ecef}.special-teams-card.powerplay[_ngcontent-%COMP%]{border-left:4px solid #ffc107}.special-teams-card.penalty-kill[_ngcontent-%COMP%]{border-left:4px solid #17a2b8}.st-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:.25rem}.flow-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 4px 16px #00000014;border:1px solid #e9ecef}.flow-bar[_ngcontent-%COMP%]{width:100%;height:20px;background:#e9ecef;border-radius:10px;overflow:hidden;margin:1rem 0}.flow-fill.attack[_ngcontent-%COMP%]{height:100%;background:#28a745}.attack-label[_ngcontent-%COMP%]{color:#28a745}.defense-label[_ngcontent-%COMP%]{color:#dc3545}.physical-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 4px 16px #00000014;border:1px solid #e9ecef;text-align:center}.physical-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;color:#fff}.physical-card.hits[_ngcontent-%COMP%]   .physical-icon[_ngcontent-%COMP%]{background:#dc3545}.physical-card.fights[_ngcontent-%COMP%]   .physical-icon[_ngcontent-%COMP%]{background:#fd7e14}.physical-card.faceoffs[_ngcontent-%COMP%]   .physical-icon[_ngcontent-%COMP%]{background:#6f42c1}.physical-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:.5rem}.roster-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#495057;color:#fff;font-weight:600;text-transform:uppercase;font-size:.8rem;padding:.75rem}.jersey-number[_ngcontent-%COMP%]{background:#495057;color:#fff;padding:.25rem .5rem;border-radius:4px;font-weight:600;font-size:.8rem}.position-badge-detailed[_ngcontent-%COMP%]{color:#fff;padding:.25rem .5rem;border-radius:4px;font-weight:600;font-size:.8rem}.rookie-badge[_ngcontent-%COMP%]{background:#ffc107;color:#fff;padding:.15rem .5rem;border-radius:12px;font-size:.7rem;font-weight:600}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem 0}.team-analytics-header[_ngcontent-%COMP%]{padding:1.5rem;text-align:center}.team-name-large[_ngcontent-%COMP%]{font-size:1.5rem}.analytics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.kpi-card[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;text-align:center}.analytics-stat-card[_ngcontent-%COMP%]{padding:1rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.75rem 1rem}}"]})};var Mi=n=>({"table-success":n});function ir(n,a){n&1&&(i(0,"div",3)(1,"div",4)(2,"span",5),r(3,"Loading..."),t()()())}function nr(n,a){if(n&1&&(i(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),r(5),t()(),i(6,"div",11)(7,"h1",12),r(8),t(),i(9,"div",13),r(10),t(),i(11,"div",14),g(12,"i",15),r(13,"Pending Approval "),t()(),i(14,"div",16)(15,"div",17)(16,"div",18)(17,"div",19),r(18,"Age"),t(),i(19,"div",20),r(20),t()(),i(21,"div",18)(22,"div",19),r(23,"Height"),t(),i(24,"div",20),r(25),t()(),i(26,"div",18)(27,"div",19),r(28,"Weight"),t(),i(29,"div",20),r(30),t()(),i(31,"div",18)(32,"div",19),r(33,"Hand"),t(),i(34,"div",20),r(35),t()()()()()(),i(36,"div",21)(37,"div",22)(38,"div",23)(39,"h4"),g(40,"i",24),r(41,"Player Pending Approval"),t(),i(42,"p",25),r(43," Your player "),i(44,"strong"),r(45),t(),r(46," has been submitted for approval by league management. "),t(),i(47,"p",25)(48,"small",26),r(49),ce(50,"date"),g(51,"br"),r(52," This process typically takes 24-48 hours. You will be notified once your player has been approved. "),t()(),i(53,"div",27)(54,"div",28)(55,"h6"),r(56,"Player Details"),t(),i(57,"ul",29)(58,"li")(59,"strong"),r(60,"Position:"),t(),r(61),t(),i(62,"li")(63,"strong"),r(64,"Archetype:"),t(),r(65),t(),i(66,"li")(67,"strong"),r(68,"Jersey Number:"),t(),r(69),t(),i(70,"li")(71,"strong"),r(72,"Handedness:"),t(),r(73),t(),i(74,"li")(75,"strong"),r(76,"Height:"),t(),r(77),t(),i(78,"li")(79,"strong"),r(80,"Weight:"),t(),r(81),t()()(),i(82,"div",28)(83,"h6"),r(84,"Additional Info"),t(),i(85,"ul",29)(86,"li")(87,"strong"),r(88,"Origin:"),t(),r(89),t(),i(90,"li")(91,"strong"),r(92,"Fighting:"),t(),r(93),t(),i(94,"li")(95,"strong"),r(96,"Twitch:"),t(),r(97),t(),i(98,"li")(99,"strong"),r(100,"Referral:"),t(),r(101),t(),i(102,"li")(103,"strong"),r(104,"Invited By:"),t(),r(105),t()()()()()()()()),n&2){let e=c();o(5),q(" ",e.pendingPlayer.firstName==null?null:e.pendingPlayer.firstName.charAt(0),"",e.pendingPlayer.lastName==null?null:e.pendingPlayer.lastName.charAt(0)," "),o(3),q("",e.pendingPlayer.firstName," ",e.pendingPlayer.lastName),o(2),De(" ",e.pendingPlayer.position," \u2022 ",e.pendingPlayer.archetype," \u2022 #",e.pendingPlayer.jerseyNumber," "),o(10),p(e.pendingPlayer.age),o(5),b("",e.pendingPlayer.height,'"'),o(5),b("",e.pendingPlayer.weight," lbs"),o(5),p(e.pendingPlayer.handedness),o(10),q("",e.pendingPlayer.firstName," ",e.pendingPlayer.lastName),o(4),b(" Submitted on ",Ve(50,25,e.pendingPlayer.submittedDate==null||e.pendingPlayer.submittedDate.toDate==null?null:e.pendingPlayer.submittedDate.toDate(),"medium")),o(12),b(" ",e.pendingPlayer.position),o(4),b(" ",e.pendingPlayer.archetype),o(4),b(" #",e.pendingPlayer.jerseyNumber),o(4),b(" ",e.pendingPlayer.handedness),o(4),b(" ",e.pendingPlayer.height,'"'),o(4),b(" ",e.pendingPlayer.weight," lbs"),o(8),b(" ",e.pendingPlayer.origin||"N/A"),o(4),b(" ",e.pendingPlayer.fight||"N/A"),o(4),b(" ",e.pendingPlayer.twitch||"N/A"),o(4),b(" ",e.pendingPlayer.referral||"N/A"),o(4),b(" ",e.pendingPlayer.invitedBy||"N/A")}}function ar(n,a){if(n&1&&g(0,"img",52),n&2){let e=c(3);m("src",e.teamLogo,z)("alt",e.teamName)}}function rr(n,a){if(n&1&&(i(0,"div",49),u(1,ar,1,2,"img",50),i(2,"span",51),r(3),t()()),n&2){let e=c(2);o(),m("ngIf",e.teamLogo),o(2),p(e.teamName)}}function or(n,a){if(n&1&&(i(0,"th"),r(1),t()),n&2){let e=a.$implicit;o(),p(e)}}function sr(n,a){if(n&1&&(i(0,"span",61),r(1),t()),n&2){let e=c(4);o(),b(" +",e.getAttributeDelta()," ")}}function lr(n,a){if(n&1&&(i(0,"td",57)(1,"div",58)(2,"span",59),r(3),t(),u(4,sr,2,1,"span",60),t()()),n&2){let e=a.$implicit,s=c(3);m("ngClass",St(3,Mi,s.isAttributeAffected(e))),o(3),p(s.playerAttributes[e]||0),o(),m("ngIf",s.isAttributeAffected(e)&&!s.trainingProcessed)}}function dr(n,a){if(n&1&&(i(0,"div",53)(1,"table",54)(2,"thead")(3,"tr"),u(4,or,2,1,"th",55),t()(),i(5,"tbody")(6,"tr"),u(7,lr,5,5,"td",56),t()()()()),n&2){let e=c(2);o(4),m("ngForOf",e.skaterAttributeOrder),o(3),m("ngForOf",e.skaterAttributeOrder)}}function cr(n,a){if(n&1&&(i(0,"th"),r(1),t()),n&2){let e=a.$implicit;o(),p(e)}}function mr(n,a){if(n&1&&(i(0,"span",61),r(1),t()),n&2){let e=c(4);o(),b(" +",e.getAttributeDelta()," ")}}function pr(n,a){if(n&1&&(i(0,"td",57)(1,"div",58)(2,"span",59),r(3),t(),u(4,mr,2,1,"span",60),t()()),n&2){let e=a.$implicit,s=c(3);m("ngClass",St(3,Mi,s.isAttributeAffected(e))),o(3),p(s.playerAttributes[e]||0),o(),m("ngIf",s.isAttributeAffected(e)&&!s.trainingProcessed)}}function gr(n,a){if(n&1&&(i(0,"div",53)(1,"table",54)(2,"thead")(3,"tr"),u(4,cr,2,1,"th",55),t()(),i(5,"tbody")(6,"tr"),u(7,pr,5,5,"td",56),t()()()()),n&2){let e=c(2);o(4),m("ngForOf",e.goalieAttributeOrder),o(3),m("ngForOf",e.goalieAttributeOrder)}}function ur(n,a){if(n&1&&(i(0,"div",62)(1,"span",63),r(2,"Enhanced"),t(),i(3,"small")(4,"strong"),r(5),t(),r(6," will improve the highlighted attributes by "),i(7,"strong"),r(8),t()()()),n&2){let e=c(2);o(5),p(e.tempTrainingType),o(3),q("",e.getAttributeDelta()>0?"+":"","",e.getAttributeDelta()," points")}}function fr(n,a){if(n&1&&(i(0,"div",62)(1,"span",64),r(2,"Applied"),t(),i(3,"small")(4,"strong"),r(5),t(),r(6," has been processed and applied to your player's attributes. "),t()()),n&2){let e=c(2);o(5),p(e.trainingType)}}function hr(n,a){if(n&1&&(i(0,"div",23),g(1,"i",82),i(2,"strong"),r(3,"Training Submissions Closed"),t(),g(4,"br"),r(5),t()),n&2){let e=c(3);o(5),b(" Training submissions are currently closed for Week ",e.currentProgressionWeek,". Please wait for the next progression period to open. ")}}function _r(n,a){if(n&1&&(i(0,"div",83),g(1,"i",84),i(2,"strong"),r(3,"Training Processed"),t(),g(4,"br"),r(5),t()),n&2){let e=c(3);o(5),b(" Your training for Week ",e.currentProgressionWeek," has been processed and applied to your player. You cannot modify processed training. Please wait for the next week to submit new training. ")}}function yr(n,a){if(n&1&&(i(0,"div",83),g(1,"i",84),i(2,"strong"),r(3,"Training Already Submitted"),t(),g(4,"br"),r(5),t()),n&2){let e=c(3);o(5),b(" You have already submitted training for Week ",e.currentProgressionWeek,". You can only submit one training per week. ")}}function vr(n,a){n&1&&(i(0,"span",94),g(1,"i",95),r(2,"Locked "),t())}function xr(n,a){if(n&1){let e=M();i(0,"div",85)(1,"div",86)(2,"div")(3,"h6",87),r(4),t(),i(5,"p",88)(6,"strong"),r(7,"Program:"),t(),r(8),t(),i(9,"p",89)(10,"strong"),r(11,"Status:"),t(),i(12,"span",90),r(13),ce(14,"titlecase"),t(),u(15,vr,3,0,"span",91),t()(),i(16,"button",92),A("click",function(){v(e);let l=c(3);return x(l.trainingSubmitted=!1)}),g(17,"i",93),r(18),t()()()}if(n&2){let e=c(3);o(4),b("\u2705 Training Submitted for Week ",e.currentProgressionWeek),o(4),b(" ",e.trainingType),o(4),N("bg-warning",e.trainingStatus==="pending")("bg-success",e.trainingStatus==="processed"),o(),b(" ",Ge(14,11,e.trainingStatus)," "),o(2),m("ngIf",e.trainingStatus==="processed"),o(),m("disabled",!e.canEditTraining())("title",e.trainingProcessed?"Cannot edit processed training":e.progressionsOpen?"Edit training":"Progressions are closed"),o(2),b(" ",e.trainingProcessed?"Locked":"Edit Training"," ")}}function Sr(n,a){if(n&1&&(i(0,"option",103),r(1),t()),n&2){let e=a.$implicit;m("value",e),o(),b(" ",e," ")}}function br(n,a){if(n&1){let e=M();i(0,"div",96)(1,"label",97),r(2),t(),i(3,"select",98),I("ngModelChange",function(l){v(e);let d=c(3);return T(d.tempTrainingType,l)||(d.tempTrainingType=l),x(l)}),A("change",function(){v(e);let l=c(3);return x(l.onTrainingChange())}),i(4,"option",99),r(5,"-- Choose Your Training --"),t(),u(6,Sr,2,2,"option",100),t(),i(7,"button",101),A("click",function(){v(e);let l=c(3);return x(l.submitTraining())}),g(8,"i",102),r(9),t()()}if(n&2){let e=c(3);o(2),b("Select Training Program for Week ",e.currentProgressionWeek),o(),E("ngModel",e.tempTrainingType),m("disabled",!e.progressionsOpen||e.trainingProcessed),o(3),m("ngForOf",e.trainingOptions),o(),m("disabled",!e.tempTrainingType||!e.progressionsOpen||e.trainingProcessed),o(2),b(" Submit Training for Week ",e.currentProgressionWeek," ")}}function wr(n,a){if(n&1&&(i(0,"div",104),g(1,"i",105),r(2),t()),n&2){let e=c(3);o(2),b(" Secondary Position Progress: ",e.secondaryProgress,"/3 weeks completed ")}}function Pr(n,a){if(n&1){let e=M();i(0,"div")(1,"div",65)(2,"div",66)(3,"div",67)(4,"h5",25),r(5,"Player Details"),t(),i(6,"div",65)(7,"div",68)(8,"div",19),r(9,"Call Name"),t(),i(10,"div",20),r(11),t()(),i(12,"div",68)(13,"div",19),r(14,"Origin"),t(),i(15,"div",20),r(16),t()(),i(17,"div",68)(18,"div",19),r(19,"Fighting"),t(),i(20,"div",20),r(21),t()(),i(22,"div",68)(23,"div",19),r(24,"Race"),t(),i(25,"div",20),r(26),t()(),i(27,"div",68)(28,"div",19),r(29,"Hair"),t(),i(30,"div",20),r(31),t()(),i(32,"div",68)(33,"div",19),r(34,"Beard"),t(),i(35,"div",20),r(36),t()(),i(37,"div",68)(38,"div",19),r(39,"Stick Tape"),t(),i(40,"div",20),r(41),t()(),i(42,"div",68)(43,"div",19),r(44,"Twitch"),t(),i(45,"div",20),r(46),t()(),i(47,"div",69)(48,"div",19),r(49,"Referral"),t(),i(50,"div",20),r(51),t()(),i(52,"div",70)(53,"div",19),r(54,"Invited By"),t(),i(55,"div",20),r(56),t()()(),i(57,"div",71)(58,"button",72),A("click",function(){v(e);let l=c(2);return x(l.showRetireModal=!0)}),g(59,"i",73),r(60,"Retire Player "),t()()()(),i(61,"div",66)(62,"div",74)(63,"h5",75),r(64),i(65,"span",76),r(66),t()(),u(67,hr,6,1,"div",77)(68,_r,6,1,"div",78)(69,yr,6,1,"div",78)(70,xr,19,13,"div",79)(71,br,10,6,"div",80)(72,wr,3,1,"div",81),t()()()()}if(n&2){let e=c(2);o(11),p(e.player.callName||"N/A"),o(5),p(e.player.origin||"N/A"),o(5),p(e.player.fightTendency||"N/A"),o(5),p(e.player.race||"N/A"),o(5),p(e.player.hair||"N/A"),o(5),p(e.player.beard||"N/A"),o(5),p(e.player.stickTapeColor||"N/A"),o(5),p(e.player.twitch||"N/A"),o(5),p(e.player.referralSource||"N/A"),o(5),p(e.player.invitedBy||"N/A"),o(8),b(" Weekly Training Program - Week ",e.currentProgressionWeek," "),o(),N("bg-success",e.progressionsOpen)("bg-danger",!e.progressionsOpen),o(),b(" ",e.progressionsOpen?"Open":"Closed"," "),o(),m("ngIf",!e.progressionsOpen),o(),m("ngIf",e.trainingProcessed),o(),m("ngIf",e.hasSubmittedThisWeek&&!e.trainingSubmitted&&!e.trainingProcessed),o(),m("ngIf",e.trainingSubmitted),o(),m("ngIf",!e.trainingSubmitted&&e.progressionsOpen&&!e.hasSubmittedThisWeek&&!e.trainingProcessed),o(),m("ngIf",e.trainingType==="Learn Secondary Position")}}function Cr(n,a){if(n&1&&g(0,"img",116),n&2){let e=c().$implicit;m("src",e.teamLogo,z)("alt",e.teamName)}}function Er(n,a){if(n&1&&(i(0,"div",112)(1,"div",113),u(2,Cr,1,2,"img",114),i(3,"div",115)(4,"h6",88),r(5),t(),i(6,"small",26),r(7),ce(8,"titlecase"),ce(9,"date"),t()()()()),n&2){let e=a.$implicit;o(2),m("ngIf",e.teamLogo),o(3),p(e.teamName),o(2),q(" ",Ge(8,4,e.action)," on ",Ve(9,6,e.joinDate,"mediumDate")," ")}}function Tr(n,a){n&1&&(i(0,"div",117),r(1," No team history available "),t())}function Ir(n,a){if(n&1&&g(0,"img",124),n&2){let e=c().$implicit;m("src",e.teamLogo,z)("alt",e.teamName)}}function Mr(n,a){if(n&1&&(i(0,"p",125),r(1),t()),n&2){let e=c().$implicit;o(),p(e.details)}}function kr(n,a){if(n&1&&(i(0,"div",118)(1,"div",119)(2,"div",115)(3,"div",113),u(4,Ir,1,2,"img",120),i(5,"div")(6,"h6",88),r(7),ce(8,"titlecase"),t(),i(9,"p",121),r(10),t()()(),i(11,"small",26),r(12),ce(13,"date"),t()(),i(14,"span",122),r(15),t()(),u(16,Mr,2,1,"p",123),t()),n&2){let e=a.$implicit;o(4),m("ngIf",e.teamLogo),o(3),p(Ge(8,6,e.action)),o(3),p(e.teamName),o(2),p(Ve(13,8,e.timestamp,"medium")),o(3),p(e.action),o(),m("ngIf",e.details)}}function Ar(n,a){n&1&&(i(0,"div",117),r(1," No career history available "),t())}function Or(n,a){if(n&1&&(i(0,"div")(1,"div",65)(2,"div",28)(3,"div",67)(4,"h5",25),g(5,"i",106),r(6,"Team History "),t(),u(7,Er,10,9,"div",107)(8,Tr,2,0,"div",108),t()(),i(9,"div",28)(10,"div",67)(11,"h5",25),g(12,"i",109),r(13,"Career Timeline "),t(),i(14,"div",110),u(15,kr,17,11,"div",111),t(),u(16,Ar,2,0,"div",108),t()()()()),n&2){let e=c(2);o(7),m("ngForOf",e.getTeamHistory()),o(),m("ngIf",e.getTeamHistory().length===0),o(7),m("ngForOf",e.playerHistory),o(),m("ngIf",e.playerHistory.length===0)}}function Dr(n,a){if(n&1&&(i(0,"tr")(1,"td"),r(2),ce(3,"date"),t(),i(4,"td"),r(5),t(),i(6,"td"),r(7),t(),i(8,"td"),r(9),t(),i(10,"td"),r(11),t(),i(12,"td"),r(13),t(),i(14,"td"),r(15),t(),i(16,"td"),r(17),t(),i(18,"td"),r(19),t(),i(20,"td"),r(21),t()()),n&2){let e=a.$implicit;o(2),p(Ve(3,11,e.date,"shortDate")),o(3),p(e.teamName),o(2),q("",e.isHome?"vs":"@"," ",e.opponent),o(2),p(e.goals||0),o(2),p(e.assists||0),o(2),p((e.goals||0)+(e.assists||0)),o(2),p(e.plusMinus||0),o(2),p(e.pim||0),o(2),p(e.hits||0),o(2),p(e.shots||0)}}function Gr(n,a){n&1&&(i(0,"div",117),r(1," No game stats available "),t())}function Rr(n,a){if(n&1&&(i(0,"div")(1,"div",126)(2,"h5",25),g(3,"i",127),r(4,"Career Totals "),t(),i(5,"div",128)(6,"div",129)(7,"div",18)(8,"div",19),r(9,"Games"),t(),i(10,"div",20),r(11),t()()(),i(12,"div",129)(13,"div",18)(14,"div",19),r(15,"Goals"),t(),i(16,"div",20),r(17),t()()(),i(18,"div",129)(19,"div",18)(20,"div",19),r(21,"Assists"),t(),i(22,"div",20),r(23),t()()(),i(24,"div",129)(25,"div",18)(26,"div",19),r(27,"Points"),t(),i(28,"div",20),r(29),t()()(),i(30,"div",129)(31,"div",18)(32,"div",19),r(33,"PIM"),t(),i(34,"div",20),r(35),t()()(),i(36,"div",129)(37,"div",18)(38,"div",19),r(39,"Hits"),t(),i(40,"div",20),r(41),t()()()()(),i(42,"div",67)(43,"h5",25),g(44,"i",130),r(45,"Game by Game Stats "),t(),i(46,"div",53)(47,"table",131)(48,"thead")(49,"tr")(50,"th"),r(51,"Date"),t(),i(52,"th"),r(53,"Team"),t(),i(54,"th"),r(55,"vs"),t(),i(56,"th"),r(57,"G"),t(),i(58,"th"),r(59,"A"),t(),i(60,"th"),r(61,"PTS"),t(),i(62,"th"),r(63,"+/-"),t(),i(64,"th"),r(65,"PIM"),t(),i(66,"th"),r(67,"Hits"),t(),i(68,"th"),r(69,"Shots"),t()()(),i(70,"tbody"),u(71,Dr,22,14,"tr",55),t()()(),u(72,Gr,2,0,"div",108),t()()),n&2){let e=c(2);o(11),p(e.getTotalStats().games),o(6),p(e.getTotalStats().goals),o(6),p(e.getTotalStats().assists),o(6),p(e.getTotalStats().points),o(6),p(e.getTotalStats().pim),o(6),p(e.getTotalStats().hits),o(30),m("ngForOf",e.gameStats),o(),m("ngIf",e.gameStats.length===0)}}function Nr(n,a){n&1&&(i(0,"span",134),g(1,"i",135),t())}function Lr(n,a){if(n&1&&(i(0,"tr")(1,"td"),r(2),ce(3,"date"),t(),i(4,"td"),r(5),t(),i(6,"td")(7,"span",90),r(8),ce(9,"titlecase"),t(),u(10,Nr,2,0,"span",133),t(),i(11,"td"),r(12),t(),i(13,"td"),r(14),t()()),n&2){let e=a.$implicit;o(2),p(Ve(3,10,e.timestamp,"mediumDate")),o(3),p(e.training),o(2),N("bg-warning",e.status==="pending")("bg-success",e.status==="processed"),o(),b(" ",Ge(9,13,e.status)," "),o(2),m("ngIf",e.status==="processed"),o(2),p(e.week||"N/A"),o(2),p(e.season||"N/A")}}function Vr(n,a){n&1&&(i(0,"div",117),r(1," No training history available "),t())}function Fr(n,a){if(n&1&&(i(0,"div")(1,"div",67)(2,"h5",25),g(3,"i",132),r(4,"Training History "),t(),i(5,"div",53)(6,"table",131)(7,"thead")(8,"tr")(9,"th"),r(10,"Date"),t(),i(11,"th"),r(12,"Training Program"),t(),i(13,"th"),r(14,"Status"),t(),i(15,"th"),r(16,"Week"),t(),i(17,"th"),r(18,"Season"),t()()(),i(19,"tbody"),u(20,Lr,15,15,"tr",55),t()()(),u(21,Vr,2,0,"div",108),t()()),n&2){let e=c(2);o(20),m("ngForOf",e.trainingHistory),o(),m("ngIf",e.trainingHistory.length===0)}}function Wr(n,a){if(n&1){let e=M();i(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),r(5),t()(),i(6,"div",28)(7,"h1",12),r(8),t(),i(9,"div",13),r(10),t(),u(11,rr,4,2,"div",30),t(),i(12,"div",31)(13,"div",17)(14,"div",32)(15,"div",19),r(16,"Overall"),t(),i(17,"div",33)(18,"div",34)(19,"div",35),r(20),t()()()(),i(21,"div",18)(22,"div",19),r(23,"Age"),t(),i(24,"div",20),r(25),t()(),i(26,"div",18)(27,"div",19),r(28,"Height"),t(),i(29,"div",20),r(30),t()(),i(31,"div",18)(32,"div",19),r(33,"Weight"),t(),i(34,"div",20),r(35),t()(),i(36,"div",18)(37,"div",19),r(38,"Hand"),t(),i(39,"div",20),r(40),t()()()()()(),i(41,"div",36)(42,"h5",37),r(43," Player Attributes "),t(),u(44,dr,8,2,"div",38)(45,gr,8,2,"div",38)(46,ur,9,3,"div",39)(47,fr,7,1,"div",39),t(),i(48,"div",40)(49,"ul",41)(50,"li",42)(51,"a",43),A("click",function(){v(e);let l=c();return x(l.onTabChange("overview"))}),g(52,"i",44),r(53," Overview "),t()(),i(54,"li",42)(55,"a",43),A("click",function(){v(e);let l=c();return x(l.onTabChange("history"))}),g(56,"i",45),r(57," Career History "),t()(),i(58,"li",42)(59,"a",43),A("click",function(){v(e);let l=c();return x(l.onTabChange("stats"))}),g(60,"i",46),r(61," Game Stats "),t()(),i(62,"li",42)(63,"a",43),A("click",function(){v(e);let l=c();return x(l.onTabChange("trainings"))}),g(64,"i",47),r(65," Training History "),t()()()(),u(66,Pr,73,22,"div",48)(67,Or,17,4,"div",48)(68,Rr,73,8,"div",48)(69,Fr,22,2,"div",48),t()}if(n&2){let e=c();o(5),q(" ",e.player.firstName==null?null:e.player.firstName.charAt(0),"",e.player.lastName==null?null:e.player.lastName.charAt(0)," "),o(3),q("",e.player.firstName," ",e.player.lastName),o(2),De(" ",e.player.position," \u2022 ",e.player.archetype," \u2022 #",e.player.jerseyNumber," "),o(),m("ngIf",e.teamName),o(7),Le("background","conic-gradient(#0d6efd 0deg "+(e.playerAttributes.OVERALL||50)*3.6+"deg, #e9ecef "+(e.playerAttributes.OVERALL||50)*3.6+"deg 360deg)"),o(2),b(" ",e.playerAttributes.OVERALL||50," "),o(5),p(e.player.age),o(5),b("",e.player.height,'"'),o(5),b("",e.player.weight," lbs"),o(5),p(e.player.handedness),o(4),m("ngIf",e.player.position!=="G"),o(),m("ngIf",e.player.position==="G"),o(),m("ngIf",e.tempTrainingType&&!e.trainingProcessed),o(),m("ngIf",e.trainingProcessed&&e.trainingType),o(4),N("active",e.currentView==="overview"),o(4),N("active",e.currentView==="history"),o(4),N("active",e.currentView==="stats"),o(4),N("active",e.currentView==="trainings"),o(3),m("ngIf",e.currentView==="overview"),o(),m("ngIf",e.currentView==="history"),o(),m("ngIf",e.currentView==="stats"),o(),m("ngIf",e.currentView==="trainings")}}function Ur(n,a){if(n&1){let e=M();i(0,"div",136)(1,"div",137)(2,"div",138)(3,"div",139)(4,"h5",140),g(5,"i",141),r(6,"Retire Player "),t(),i(7,"button",142),A("click",function(){v(e);let l=c();return x(l.showRetireModal=!1)}),t()(),i(8,"div",143)(9,"div",23)(10,"strong"),r(11,"Warning:"),t(),r(12," This action cannot be undone. Your player will be permanently retired from the league. "),t(),i(13,"p"),r(14,"Are you sure you want to retire "),i(15,"strong"),r(16),t(),r(17,"?"),t(),i(18,"p"),r(19,"To confirm, please type "),i(20,"strong"),r(21,"RETIRE"),t(),r(22," in the box below:"),t(),i(23,"input",144),I("ngModelChange",function(l){v(e);let d=c();return T(d.retireConfirmation,l)||(d.retireConfirmation=l),x(l)}),t()(),i(24,"div",145)(25,"button",146),A("click",function(){v(e);let l=c();return x(l.showRetireModal=!1)}),r(26,"Cancel"),t(),i(27,"button",147),A("click",function(){v(e);let l=c();return x(l.retirePlayer())}),g(28,"i",148),r(29,"Retire Player "),t()()()()()}if(n&2){let e=c();o(16),q("",e.player.firstName," ",e.player.lastName),o(7),E("ngModel",e.retireConfirmation),o(4),m("disabled",e.retireConfirmation!=="RETIRE")}}var mt=class n{firestore=B(me);auth=B(nt);router=B(Z);player=null;pendingPlayer=null;teamName="";teamLogo="";loading=!0;isPendingPlayer=!1;trainingType="";tempTrainingType="";trainingOptions=[];trainingSubmitted=!1;trainingStatus=null;trainingProcessed=!1;progressionsOpen=!0;currentProgressionWeek=1;hasSubmittedThisWeek=!1;secondaryProgress=0;existingTrainingId=null;playerAttributes={};skaterAttributeOrder=["SPEED","BODY CHK","ENDUR","PK CTRL","PASSING","SHT/PSS","SLAP PWR","SLAP ACC","WRI PWR","WRI ACC","AGILITY","STRENGTH","ACCEL","BALANCE","FACEOFF","DRBLTY","DEKE","AGGRE","POISE","HND EYE","SHT BLK","OFF AWR","DEF AWR","DISCIP","FIGHTING","STK CHK"];goalieAttributeOrder=["GLV LOW","GLV HIGH","STK LOW","STK HIGH","5 HOLE","SPEED","AGILITY","CONSIS","PK CTRL","ENDUR","BRK AWAY","RBD CTRL","RECOV","POISE","PASSING","ANGLES","PK PL FRQ","AGGRE","DRBLTY","VISION"];trainingMap={"Speed Skating":["SPEED","ACCEL","AGILITY"],"Distance Skating":["ENDUR","BALANCE","DRBLTY"],"Stick Handling":["PK CTRL","DEKE","HND EYE"],MMA:["BODY CHK","STRENGTH","AGGRE","FIGHTING"],Marksmanship:["WRI PWR","SLAP PWR","PASSING"],"Hit the Targets":["WRI ACC","SLAP ACC","POISE"],"Study Film":["OFF AWR","DEF AWR","DISCIP"],"Special Teams":["STK CHK","SHT BLK","FACEOFF"],"Learn Secondary Position":[],"Shots High":["GLV HIGH","STK HIGH","VISION"],"Shots Low":["GLV LOW","STK LOW","5 HOLE"],"Side to Sides":["SPEED","AGILITY","POISE"],"Puck Skills":["PK CTRL","PASSING","PK PL FRQ"],"Laps in Pads":["ENDUR","DRBLTY","AGGRE"],Positioning:["BRK AWAY","ANGLES"],"Under Pressure":["RBD CTRL","RECOV"]};playerHistory=[];gameStats=[];trainingHistory=[];currentView="overview";showRetireModal=!1;retireConfirmation="";teamCache=new Map;gameStatsCache=null;historyCache=null;weekChangeListener;ngOnInit(){return k(this,null,function*(){let a=this.auth.currentUser;if(!a){this.loading=!1;return}console.log("PlayerManager: Initializing for user:",a.uid),this.weekChangeListener=()=>{console.log("\u{1F504} Week change detected, refreshing progression settings..."),this.loadProgressionSettings()},window.addEventListener("weekChanged",this.weekChangeListener);try{let[e,s]=yield Promise.all([this.loadPlayerData(a.uid),this.loadProgressionSettings()]);e&&(yield this.initializePlayerData(e))}catch(e){console.error("Error initializing player manager:",e)}finally{this.loading=!1}})}ngOnDestroy(){this.weekChangeListener&&window.removeEventListener("weekChanged",this.weekChangeListener)}loadPlayerData(a){return k(this,null,function*(){console.log("\u{1F50D} Loading player data for user:",a);let[e,s]=yield Promise.all([G(V(O(this.firestore,"players"),R("userId","==",a),R("status","==","active"),oe(1))),G(V(O(this.firestore,"pendingPlayers"),R("userId","==",a),R("status","==","pending"),oe(1)))]);if(!e.empty){let l=e.docs[0].data();return l.id=e.docs[0].id,this.player=l,this.isPendingPlayer=!1,console.log("\u26A1 Active player found"),{type:"active",data:l}}if(!s.empty){let l=s.docs[0].data();return l.id=s.docs[0].id,this.pendingPlayer=l,this.isPendingPlayer=!0,console.log("\u23F3 Pending player found"),{type:"pending",data:l}}return console.log("\u274C No player found"),null})}initializePlayerData(a){return k(this,null,function*(){if(a.type==="pending")return;this.setTrainingOptions(this.player.position);let e=[this.loadPlayerAttributes(),this.loadProgressionData(),this.loadTeamData()];this.currentView==="history"&&e.push(this.loadPlayerHistory()),this.currentView==="stats"&&e.push(this.loadGameStats()),this.currentView==="trainings"&&e.push(this.loadTrainingHistory()),yield Promise.all(e)})}loadProgressionData(){return k(this,null,function*(){if(!this.player?.id)return;let[a,e]=yield Promise.all([G(V(O(this.firestore,`players/${this.player.id}/progressions`),R("training","==","Learn Secondary Position"))),G(V(O(this.firestore,`players/${this.player.id}/progressions`),R("week","==",this.currentProgressionWeek),R("season","==",new Date().getFullYear()),oe(1)))]);if(this.secondaryProgress=a.docs.length,!e.empty){let s=e.docs[0].data();this.hasSubmittedThisWeek=!0,this.trainingType=s.training,this.tempTrainingType=this.trainingType,this.trainingStatus=s.status||"pending",this.trainingProcessed=this.trainingStatus==="processed",this.trainingSubmitted=!0,this.existingTrainingId=e.docs[0].id}})}loadTeamData(){return k(this,null,function*(){if(!this.player?.id||this.player.teamId==="none")return;if(this.teamCache.has(this.player.teamId)){let s=this.teamCache.get(this.player.teamId);this.teamName=s.name,this.teamLogo=s.logo;return}let a=W(this.firestore,`teams/${this.player.teamId}`),e=yield Y(a);if(e.exists()){let s=e.data(),l=`${s.city} ${s.mascot}`.trim(),d=s.logoUrl||"";this.teamCache.set(this.player.teamId,{name:l,logo:d}),this.teamName=l,this.teamLogo=d}})}loadGameStats(){return k(this,null,function*(){if(this.player?.id){if(this.gameStatsCache){this.gameStats=this.gameStatsCache;return}console.log("\u{1F4CA} Loading game stats..."),this.gameStats=[];try{let a=O(this.firestore,"teams"),e=yield G(a),s=[],l=new Map;for(let d of e.docs){let _=d.id,h=d.data(),C=W(this.firestore,`teams/${_}/roster/${this.player.id}`);if(!(yield Y(C)).exists())continue;let S=`${h.city} ${h.mascot}`;s.push(this.loadTeamGamesForPlayer(_,S,l))}yield Promise.all(s),this.gameStats=Array.from(l.values()).sort((d,_)=>_.date.getTime()-d.date.getTime()),this.gameStatsCache=this.gameStats,console.log(`\u2705 Loaded ${this.gameStats.length} game stats`)}catch(a){console.error("Error loading game stats:",a)}}})}loadTeamGamesForPlayer(a,e,s){return k(this,null,function*(){let l=O(this.firestore,`teams/${a}/games`),d=yield G(l);for(let _ of d.docs){let h=_.data(),C=h.homePlayerStats?.[this.player.id],w=h.awayPlayerStats?.[this.player.id];if(!C&&!w)continue;let S=C||w,P=!!C,f=P?h.awayTeamId:h.homeTeamId,y="Unknown Opponent";if(f&&this.teamCache.has(f))y=this.teamCache.get(f).name;else if(f){let L=W(this.firestore,`teams/${f}`),F=yield Y(L);if(F.exists()){let $=F.data(),U=`${$.city} ${$.mascot}`;this.teamCache.set(f,{name:U,logo:$.logoUrl||""}),y=U}}let D=`${h.week}-${h.day}-${h.homeTeamId}-${h.awayTeamId}`;s.has(D)||s.set(D,{gameId:_.id,teamName:e,opponent:y,date:h.date?.toDate?.()||new Date,week:h.week,day:h.day,isHome:P,goals:S.goals||0,assists:S.assists||0,plusMinus:S.plusMinus||0,shots:S.shots||0,pim:S.pim||0,hits:S.hits||0,ppg:S.ppg||0,shg:S.shg||0,fot:S.fot||0,fow:S.fow||0})}})}loadPlayerHistory(){return k(this,null,function*(){if(!this.player?.id)return;if(this.historyCache){this.playerHistory=this.historyCache;return}console.log("\u{1F4DC} Loading player history...");let a=O(this.firestore,`players/${this.player.id}/history`),e=V(a,Ue("timestamp","desc"),oe(20)),s=yield G(e);this.playerHistory=yield Promise.all(s.docs.map(l=>k(this,null,function*(){let d=l.data(),_="Unknown Team",h="";if(d.teamId&&d.teamId!=="none")if(this.teamCache.has(d.teamId)){let C=this.teamCache.get(d.teamId);_=C.name,h=C.logo}else{let C=W(this.firestore,`teams/${d.teamId}`),w=yield Y(C);if(w.exists()){let S=w.data();_=`${S.city} ${S.mascot}`,h=S.logoUrl||"",this.teamCache.set(d.teamId,{name:_,logo:h})}}return se(j({id:l.id},d),{teamName:_,teamLogo:h,timestamp:d.timestamp?.toDate?.()||new Date(d.timestamp)})}))),this.historyCache=this.playerHistory,console.log(`\u2705 Loaded ${this.playerHistory.length} history entries`)})}loadPlayerAttributes(){return k(this,null,function*(){if(!this.player?.id)return;let a=W(this.firestore,`players/${this.player.id}/meta/attributes`),e=yield Y(a);e.exists()&&(this.playerAttributes=e.data())})}loadTrainingHistory(){return k(this,null,function*(){if(!this.player?.id)return;let a=O(this.firestore,`players/${this.player.id}/progressions`),e=V(a,Ue("timestamp","desc"),oe(10)),s=yield G(e);this.trainingHistory=s.docs.map(l=>se(j({id:l.id},l.data()),{timestamp:l.data().timestamp?.toDate?.()||new Date(l.data().timestamp)}))})}onTabChange(a){return k(this,null,function*(){switch(this.currentView=a,a){case"history":this.historyCache||(yield this.loadPlayerHistory());break;case"stats":this.gameStatsCache||(yield this.loadGameStats());break;case"trainings":this.trainingHistory.length===0&&(yield this.loadTrainingHistory());break}})}loadProgressionSettings(){return k(this,null,function*(){try{let a=W(this.firestore,"progressionSettings/config"),e=yield Y(a),s=this.currentProgressionWeek;if(e.exists()){let l=e.data();this.progressionsOpen=l.open??!0,this.currentProgressionWeek=l.week??1}else this.progressionsOpen=!0,this.currentProgressionWeek=1;s!==this.currentProgressionWeek&&s!==0&&(console.log(`\u{1F4C5} Week changed from ${s} to ${this.currentProgressionWeek}`),yield this.handleWeekChange()),this.player?.id&&(yield this.checkCurrentWeekSubmission())}catch(a){console.error("Error loading progression settings:",a),this.progressionsOpen=!0,this.currentProgressionWeek=1}})}handleWeekChange(){return k(this,null,function*(){console.log("\u{1F504} Handling week change..."),this.tempTrainingType="",this.trainingType="",this.trainingSubmitted=!1,this.trainingStatus=null,this.trainingProcessed=!1,this.existingTrainingId=null,this.hasSubmittedThisWeek=!1,console.log("\u2705 Training selection cleared for new week")})}checkCurrentWeekSubmission(){return k(this,null,function*(){if(this.player?.id)try{let a=O(this.firestore,`players/${this.player.id}/progressions`),e=V(a,R("week","==",this.currentProgressionWeek),R("season","==",new Date().getFullYear()),oe(1)),s=yield G(e);if(s.empty)this.hasSubmittedThisWeek=!1,this.trainingSubmitted=!1,this.trainingProcessed=!1;else{let l=s.docs[0].data();this.hasSubmittedThisWeek=!0,this.trainingType=l.training,this.tempTrainingType=this.trainingType,this.trainingStatus=l.status||"pending",this.trainingProcessed=this.trainingStatus==="processed",this.trainingSubmitted=!0,this.existingTrainingId=s.docs[0].id}}catch(a){console.error("Error checking current week submission:",a)}})}setTrainingOptions(a){a==="G"?this.trainingOptions=["Shots High","Shots Low","Side to Sides","Puck Skills","Laps in Pads","Positioning","Under Pressure"]:(this.trainingOptions=["Speed Skating","Distance Skating","Stick Handling","MMA","Marksmanship","Hit the Targets","Study Film","Special Teams"],a!=="D"&&this.trainingOptions.push("Learn Secondary Position"))}onTrainingChange(){}isAttributeAffected(a){return this.tempTrainingType?(this.trainingMap[this.tempTrainingType]||[]).includes(a):!1}getAttributeDelta(){if(!this.player?.age)return 0;let a=this.player.age,e=this.currentProgressionWeek;return a<=26?e<=5?3:2:a<=29||a===30?1:a===31?-1:a===32||a===33?-2:-3}canEditTraining(){return!this.trainingProcessed&&this.progressionsOpen}submitTraining(){return k(this,null,function*(){if(!this.tempTrainingType||!this.player?.id||!this.player?.teamId)return;if(!this.progressionsOpen){alert("Training submissions are currently closed. Please wait for the next progression period to open.");return}if(this.trainingProcessed){alert("Your training has already been processed and cannot be modified. Please wait for the next week.");return}if(this.hasSubmittedThisWeek&&!this.existingTrainingId){alert(`You have already submitted training for Week ${this.currentProgressionWeek}. Please wait for the next week.`);return}let a=new Date().getFullYear(),e={training:this.tempTrainingType,timestamp:new Date,status:"pending",week:this.currentProgressionWeek,season:a},s=O(this.firestore,`players/${this.player.id}/progressions`),l=O(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression`);if(this.existingTrainingId){if(this.trainingProcessed){alert("Your training has already been processed and cannot be modified.");return}let d=W(this.firestore,`players/${this.player.id}/progressions/${this.existingTrainingId}`);yield be(d,e);let _=W(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression/${this.existingTrainingId}`);yield Be(_,e)}else{let d=yield Re(s,e);this.existingTrainingId=d.id;let _=W(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression/${d.id}`);yield Be(_,e)}this.trainingType=this.tempTrainingType,this.trainingStatus="pending",this.trainingProcessed=!1,this.hasSubmittedThisWeek=!0,this.trainingType==="Learn Secondary Position"&&(this.secondaryProgress++,this.secondaryProgress>=3&&alert("You have successfully learned your secondary position!")),this.trainingSubmitted=!0,yield this.loadTrainingHistory()})}retirePlayer(){return k(this,null,function*(){if(this.retireConfirmation!=="RETIRE"){alert('Please type "RETIRE" to confirm retirement');return}if(this.player?.id)try{let a=O(this.firestore,`players/${this.player.id}/history`);yield Re(a,{action:"retired",teamId:this.player.teamId,timestamp:new Date,details:"Player announced retirement from professional hockey"});let e=W(this.firestore,`players/${this.player.id}`);if(yield be(e,{status:"retired",retiredDate:new Date,teamId:"retired"}),this.player.teamId&&this.player.teamId!=="none"){let s=W(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}`);yield be(s,{status:"retired",retiredDate:new Date})}this.showRetireModal=!1,this.player.status="retired",window.dispatchEvent(new CustomEvent("playerRetired")),alert("Your player has been retired. Thank you for your service to the league!")}catch(a){console.error("Error retiring player:",a),alert("Failed to retire player. Please try again.")}})}getTotalStats(){return this.gameStats.reduce((a,e)=>(a.games+=1,a.goals+=e.goals||0,a.assists+=e.assists||0,a.points+=(e.goals||0)+(e.assists||0),a.pim+=e.pim||0,a.hits+=e.hits||0,a.shots+=e.shots||0,a),{games:0,goals:0,assists:0,points:0,pim:0,hits:0,shots:0})}getTeamHistory(){let a=new Map;return this.playerHistory.forEach(e=>{(e.action==="signed"||e.action==="traded")&&a.set(e.teamId,{teamName:e.teamName,teamLogo:e.teamLogo,joinDate:e.timestamp,action:e.action})}),Array.from(a.values()).sort((e,s)=>s.joinDate.getTime()-e.joinDate.getTime())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-player-manager"]],decls:4,vars:4,consts:[["class","loading-container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["class","modal fade show","tabindex","-1","style","display: block; background: rgba(0,0,0,0.5);",4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"container","mt-4"],[1,"player-header"],[1,"row","align-items-center"],[1,"col-md-2","text-center"],[1,"player-avatar"],[1,"col-md-7"],[1,"player-name"],[1,"player-position"],[1,"team-badge","bg-warning","text-dark"],[1,"fas","fa-clock","me-2"],[1,"col-md-3"],[1,"stat-grid"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"card"],[1,"card-body","text-center"],[1,"alert","alert-warning"],[1,"fas","fa-hourglass-half","me-2"],[1,"mb-3"],[1,"text-muted"],[1,"row","mt-4"],[1,"col-md-6"],[1,"list-unstyled","text-start"],["class","team-display",4,"ngIf"],[1,"col-md-4"],[1,"stat-item","overall-rating"],[1,"overall-container"],[1,"circular-progress"],[1,"overall-value",2,"color","#0d6efd"],[1,"attributes-section-full"],[1,"attributes-title"],["class","table-responsive",4,"ngIf"],["class","training-legend",4,"ngIf"],[1,"mb-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-user","me-1"],[1,"fas","fa-history","me-1"],[1,"fas","fa-chart-line","me-1"],[1,"fas","fa-dumbbell","me-1"],[4,"ngIf"],[1,"team-display"],["class","team-logo-small",3,"src","alt",4,"ngIf"],[1,"team-name-text"],[1,"team-logo-small",3,"src","alt"],[1,"table-responsive"],[1,"table","table-bordered","attributes-table"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"attribute-cell"],[1,"attribute-value"],["class","training-impact",4,"ngIf"],[1,"training-impact"],[1,"training-legend"],[1,"legend-badge"],[1,"legend-badge","bg-success"],[1,"row"],[1,"col-lg-6"],[1,"stat-card"],[1,"col-6","mb-3"],[1,"col-12","mb-3"],[1,"col-12"],[1,"mt-4","pt-3","border-top"],[1,"btn","btn-danger","w-100",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],[1,"training-section"],[1,"training-title"],[1,"badge","ms-2"],["class","alert alert-warning",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","training-submitted",4,"ngIf"],["class","training-form",4,"ngIf"],["class","progress-indicator",4,"ngIf"],[1,"fas","fa-lock","me-2"],[1,"alert","alert-info"],[1,"fas","fa-check-circle","me-2"],[1,"training-submitted"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1","text-success"],[1,"mb-1"],[1,"mb-0"],[1,"badge"],["class","ms-2 text-success",4,"ngIf"],[1,"btn","btn-warning",3,"click","disabled","title"],[1,"fas","fa-edit","me-1"],[1,"ms-2","text-success"],[1,"fas","fa-lock","me-1"],[1,"training-form"],["for","trainingSelect",1,"form-label","fw-bold"],["name","training","id","trainingSelect",1,"form-select","mb-3",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-paper-plane","me-1"],[3,"value"],[1,"progress-indicator"],[1,"fas","fa-chart-line","me-2"],[1,"fas","fa-building","me-2"],["class","mb-3 p-3 border rounded team-history-item",4,"ngFor","ngForOf"],["class","text-muted text-center py-3",4,"ngIf"],[1,"fas","fa-timeline","me-2"],[1,"timeline"],["class","timeline-item mb-3 p-3 border-start border-3 border-primary",4,"ngFor","ngForOf"],[1,"mb-3","p-3","border","rounded","team-history-item"],[1,"d-flex","align-items-center","mb-2"],["class","team-logo-history me-3",3,"src","alt",4,"ngIf"],[1,"flex-grow-1"],[1,"team-logo-history","me-3",3,"src","alt"],[1,"text-muted","text-center","py-3"],[1,"timeline-item","mb-3","p-3","border-start","border-3","border-primary"],[1,"d-flex","justify-content-between","align-items-start"],["class","team-logo-timeline me-2",3,"src","alt",4,"ngIf"],[1,"mb-1","text-muted"],[1,"badge","bg-primary"],["class","mt-2 mb-0 small",4,"ngIf"],[1,"team-logo-timeline","me-2",3,"src","alt"],[1,"mt-2","mb-0","small"],[1,"stat-card","mb-4"],[1,"fas","fa-trophy","me-2"],[1,"row","text-center"],[1,"col-md-2"],[1,"fas","fa-list","me-2"],[1,"table","table-striped"],[1,"fas","fa-dumbbell","me-2"],["class","ms-1",4,"ngIf"],[1,"ms-1"],["title","Training has been processed and locked",1,"fas","fa-lock","text-success"],["tabindex","-1",1,"modal","fade","show",2,"display","block","background","rgba(0,0,0,0.5)"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],["type","text","placeholder","Type RETIRE to confirm",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-sign-out-alt","me-1"]],template:function(e,s){e&1&&u(0,ir,4,0,"div",0)(1,nr,106,28,"div",1)(2,Wr,70,31,"div",1)(3,Ur,30,4,"div",2),e&2&&(m("ngIf",s.loading),o(),m("ngIf",!s.loading&&s.isPendingPlayer&&s.pendingPlayer),o(),m("ngIf",!s.loading&&!s.isPendingPlayer&&s.player&&(s.player==null?null:s.player.status)!=="retired"),o(),m("ngIf",s.showRetireModal))},dependencies:[X,zt,ie,Q,re,ke,Ae,le,Me,ne,ae,Je,qt],styles:['.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:300px;flex-direction:column;gap:1rem}.player-header[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:2rem;margin-bottom:2rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.player-avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#0d6efd;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;color:#fff;font-weight:700;margin-bottom:1rem}.player-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#212529;margin-bottom:.5rem}.team-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;background:#f8f9fa;padding:.75rem 1rem;border-radius:8px;border:1px solid #dee2e6;margin-top:.5rem}.team-logo-small[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain;border-radius:4px}.team-logo-history[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain;border-radius:4px;flex-shrink:0}.team-logo-timeline[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain;border-radius:4px;flex-shrink:0}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.stat-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:.75rem;background:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.circular-progress[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative}.circular-progress[_ngcontent-%COMP%]:before{content:"";position:absolute;width:46px;height:46px;border-radius:50%;background:#fff;z-index:1}.overall-value[_ngcontent-%COMP%]{position:relative;z-index:2;font-size:1.25rem;font-weight:700;color:#0d6efd}.training-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.attributes-section-full[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef;margin-bottom:2rem}.attributes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;font-weight:600;text-align:center;padding:.75rem .5rem;font-size:.8rem;text-transform:uppercase;border:1px solid #dee2e6}.attributes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:.75rem .5rem;font-weight:600;border:1px solid #dee2e6}.training-impact[_ngcontent-%COMP%]{background:#198754;color:#fff;padding:.2rem .5rem;border-radius:12px;font-size:.7rem;font-weight:700}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#6c757d;font-weight:500;padding:1rem 1.5rem;border-radius:0;border-bottom:3px solid transparent}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0d6efd;background-color:transparent;border-color:transparent;border-bottom-color:#0d6efd;font-weight:600}@media (max-width: 768px){.player-header[_ngcontent-%COMP%]{padding:1.5rem}.stat-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.attributes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .attributes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem;font-size:.75rem}}']})};function Br(n,a){n&1&&(i(0,"div",3)(1,"div",4)(2,"span",5),r(3,"Loading..."),t()(),i(4,"p",6),r(5,"Checking player status..."),t()())}function $r(n,a){if(n&1){let e=M();i(0,"div",7)(1,"div",8)(2,"h4"),g(3,"i",9),r(4),t(),i(5,"p",10),r(6,"Your player has retired from professional hockey. Thank you for your service to the league!"),t(),i(7,"button",11),A("click",function(){v(e);let l=c();return x(l.createNewPlayer())}),g(8,"i",12),r(9,"Create New Player "),t()()()}if(n&2){let e=c();o(4),b("",e.retiredPlayerName," Has Retired")}}function Hr(n,a){if(n&1&&(i(0,"option",61),r(1),t()),n&2){let e=a.$implicit;m("value",e),o(),p(e)}}function jr(n,a){if(n&1){let e=M();i(0,"div",21)(1,"label",22),r(2,"Archetype"),t(),i(3,"select",59),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.playerForm.archetype,l)||(d.playerForm.archetype=l),x(l)}),u(4,Hr,2,2,"option",60),t()()}if(n&2){let e=c(2);o(3),E("ngModel",e.playerForm.archetype),o(),m("ngForOf",e.filteredArchetypes)}}function zr(n,a){if(n&1){let e=M();i(0,"div")(1,"div",7)(2,"div",13)(3,"div",14)(4,"h4",15),g(5,"i",16),r(6,"Create Your Player "),t()(),i(7,"div",17)(8,"div",18),g(9,"i",19),i(10,"strong"),r(11,"Player Creation Process:"),t(),r(12," Your player will be submitted for approval by league management. Once approved, your player will be created with the appropriate attributes and you'll be able to start playing! "),t(),i(13,"form",20),A("ngSubmit",function(){v(e);let l=c();return x(l.createPlayer())}),i(14,"div",21)(15,"label",22),r(16,"First Name"),t(),i(17,"input",23),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.firstName,l)||(d.playerForm.firstName=l),x(l)}),t()(),i(18,"div",21)(19,"label",22),r(20,"Last Name"),t(),i(21,"input",24),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.lastName,l)||(d.playerForm.lastName=l),x(l)}),t()(),i(22,"div",25)(23,"label",22),r(24,"Play by Play Name"),t(),i(25,"input",26),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.gamertag,l)||(d.playerForm.gamertag=l),x(l)}),t()(),i(26,"div",21)(27,"label",22),r(28,"Position"),t(),i(29,"select",27),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.position,l)||(d.playerForm.position=l),x(l)}),A("change",function(){v(e);let l=c();return x(l.onPositionChange())}),i(30,"option",28),r(31,"Select Position"),t(),i(32,"option",29),r(33,"Left Wing"),t(),i(34,"option",30),r(35,"Center"),t(),i(36,"option",31),r(37,"Right Wing"),t(),i(38,"option",32),r(39,"Defense"),t(),i(40,"option",33),r(41,"Goalie"),t()()(),u(42,jr,5,2,"div",34),i(43,"div",21)(44,"label",22),r(45,"Jersey Number"),t(),i(46,"input",35),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.jerseyNumber,l)||(d.playerForm.jerseyNumber=l),x(l)}),t()(),i(47,"div",21)(48,"label",22),r(49,"Handedness"),t(),i(50,"select",36),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.handedness,l)||(d.playerForm.handedness=l),x(l)}),i(51,"option",37),r(52,"Left"),t(),i(53,"option",38),r(54,"Right"),t()()(),i(55,"div",21)(56,"label",22),r(57,"Height (inches)"),t(),i(58,"input",39),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.height,l)||(d.playerForm.height=l),x(l)}),t()(),i(59,"div",21)(60,"label",22),r(61,"Weight (lbs)"),t(),i(62,"input",40),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.weight,l)||(d.playerForm.weight=l),x(l)}),t()(),i(63,"div",25)(64,"label",22),r(65,"Fighter Tendency"),t(),i(66,"select",41),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.fight,l)||(d.playerForm.fight=l),x(l)}),i(67,"option",42),r(68,"Never"),t(),i(69,"option",43),r(70,"Rarely"),t(),i(71,"option",44),r(72,"Sometimes"),t(),i(73,"option",45),r(74,"Often"),t()()(),i(75,"div",21)(76,"label",22),r(77,"Place of Origin"),t(),i(78,"input",46),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.origin,l)||(d.playerForm.origin=l),x(l)}),t()(),i(79,"div",21)(80,"label",22),r(81,"Hair Style / Color (1\u201373)"),t(),i(82,"input",47),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.hair,l)||(d.playerForm.hair=l),x(l)}),t()(),i(83,"div",25)(84,"label",22),r(85,"Beard"),t(),i(86,"input",48),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.beard,l)||(d.playerForm.beard=l),x(l)}),t()(),i(87,"div",25)(88,"label",22),r(89,"Stick Tape Color"),t(),i(90,"input",49),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.tape,l)||(d.playerForm.tape=l),x(l)}),t()(),i(91,"div",25)(92,"label",22),r(93,"Ethnicity"),t(),i(94,"select",50),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.ethnicity,l)||(d.playerForm.ethnicity=l),x(l)}),i(95,"option",51),r(96,"Caucasian"),t(),i(97,"option",52),r(98,"African-American"),t()()(),i(99,"div",25)(100,"label",22),r(101,"Twitch Name"),t(),i(102,"input",53),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.twitch,l)||(d.playerForm.twitch=l),x(l)}),t()(),i(103,"div",25)(104,"label",22),r(105,"How did you find us?"),t(),i(106,"input",54),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.referral,l)||(d.playerForm.referral=l),x(l)}),t()(),i(107,"div",25)(108,"label",22),r(109,"Who invited you (bonus)?"),t(),i(110,"input",55),I("ngModelChange",function(l){v(e);let d=c();return T(d.playerForm.invitedBy,l)||(d.playerForm.invitedBy=l),x(l)}),t()(),i(111,"div",56)(112,"button",57),g(113,"i",58),r(114,"Submit Player for Approval "),t()()()()()()()}if(n&2){let e=c();o(17),E("ngModel",e.playerForm.firstName),o(4),E("ngModel",e.playerForm.lastName),o(4),E("ngModel",e.playerForm.gamertag),o(4),E("ngModel",e.playerForm.position),o(13),m("ngIf",e.filteredArchetypes.length>0),o(4),E("ngModel",e.playerForm.jerseyNumber),o(4),E("ngModel",e.playerForm.handedness),o(8),E("ngModel",e.playerForm.height),o(4),E("ngModel",e.playerForm.weight),o(4),E("ngModel",e.playerForm.fight),o(12),E("ngModel",e.playerForm.origin),o(4),E("ngModel",e.playerForm.hair),o(4),E("ngModel",e.playerForm.beard),o(4),E("ngModel",e.playerForm.tape),o(4),E("ngModel",e.playerForm.ethnicity),o(8),E("ngModel",e.playerForm.twitch),o(4),E("ngModel",e.playerForm.referral),o(4),E("ngModel",e.playerForm.invitedBy)}}function qr(n,a){n&1&&(i(0,"div"),g(1,"app-player-manager"),t())}var pt=class n{firestore=B(me);auth=B(nt);router=B(Z);hasActivePlayer=!1;hasRetiredPlayer=!1;hasPendingPlayer=!1;loading=!0;retiredPlayerName="";pendingPlayerName="";showCreateForm=!1;filteredArchetypes=[];retirementListener;approvalListener;playerForm={firstName:"",lastName:"",gamertag:"",position:"",archetype:"",jerseyNumber:0,handedness:"",height:72,weight:180,fight:"",origin:"",hair:"",beard:"",tape:"",ethnicity:"",twitch:"",referral:"",invitedBy:"",age:19};ngOnInit(){return k(this,null,function*(){let a=this.auth.currentUser;if(!a){this.loading=!1;return}this.retirementListener=()=>{console.log("\u{1F3C6} Player retirement event received, refreshing status..."),this.refreshPlayerStatus()},this.approvalListener=()=>{console.log("\u2705 Player approval event received, refreshing status..."),this.refreshPlayerStatus()},window.addEventListener("playerRetired",this.retirementListener),window.addEventListener("playerApproved",this.approvalListener),yield this.checkPlayerStatus(a.uid),this.loading=!1})}ngOnDestroy(){this.retirementListener&&window.removeEventListener("playerRetired",this.retirementListener),this.approvalListener&&window.removeEventListener("playerApproved",this.approvalListener)}checkPlayerStatus(a){return k(this,null,function*(){try{console.log("\u{1F50D} Checking player status for user:",a),this.resetAllStates();let[e,s,l]=yield Promise.all([G(V(O(this.firestore,"players"),R("userId","==",a),R("status","==","active"))),G(V(O(this.firestore,"players"),R("userId","==",a),R("status","==","retired"))),G(V(O(this.firestore,"pendingPlayers"),R("userId","==",a),R("status","==","pending")))]);if(console.log("\u{1F4CA} Query results:",{active:e.docs.length,retired:s.docs.length,pending:l.docs.length}),!e.empty){this.hasActivePlayer=!0,console.log("\u26A1 Active player found - showing player manager");return}if(!l.empty){let d=l.docs[0].data();this.hasPendingPlayer=!0,this.pendingPlayerName=`${d.firstName} ${d.lastName}`,console.log("\u23F3 Pending player found:",this.pendingPlayerName);return}if(!s.empty){let d=s.docs[0].data();this.hasRetiredPlayer=!0,this.retiredPlayerName=`${d.firstName} ${d.lastName}`,console.log("\u{1F3C6} Retired player found:",this.retiredPlayerName);return}console.log("\u2795 No player found, showing create form"),this.showCreateForm=!0}catch(e){console.error("\u274C Error checking player status:",e),this.showCreateForm=!0}})}resetAllStates(){this.hasActivePlayer=!1,this.hasRetiredPlayer=!1,this.hasPendingPlayer=!1,this.showCreateForm=!1,this.retiredPlayerName="",this.pendingPlayerName=""}refreshPlayerStatus(){return k(this,null,function*(){let a=this.auth.currentUser;a&&(console.log("\u{1F504} Manually refreshing player status..."),this.loading=!0,yield new Promise(e=>setTimeout(e,500)),yield this.checkPlayerStatus(a.uid),this.loading=!1)})}onPositionChange(){let a=this.playerForm.position;["LW","C","RW"].includes(a)?this.filteredArchetypes=["Playmaker","Sniper","2-Way Forward","Power Forward","Enforcer Forward","Grinder"]:a==="D"?this.filteredArchetypes=["Defensive Defense","Offensive Defense","2-Way Defense","Enforcer Defense"]:a==="G"?this.filteredArchetypes=["Hybrid","Butterfly","Standup"]:this.filteredArchetypes=[],this.playerForm.archetype=""}createPlayer(){return k(this,null,function*(){let a=this.auth.currentUser;if(a)try{console.log("\u{1F4DD} Creating pending player request...");let e=W(this.firestore,"progressionSettings/config"),s=yield Y(e),l=s.exists()&&s.data().week||1,d=W(this.firestore,"leagueSettings/season"),_=yield Y(d),h=_.exists()&&_.data().currentSeason||1,C=l<=5?20:19;yield Re(O(this.firestore,"pendingPlayers"),se(j({},this.playerForm),{userId:a.uid,status:"pending",submittedDate:new Date,userEmail:a.email,userDisplayName:a.displayName,age:C,draftClass:h})),console.log("\u2705 Pending player created successfully"),this.resetAllStates(),this.hasPendingPlayer=!0,this.pendingPlayerName=`${this.playerForm.firstName} ${this.playerForm.lastName}`,console.log("\u{1F3AF} Component state updated to show pending player:",this.pendingPlayerName),alert("Your player has been submitted for approval! You can now view your pending player below.")}catch(e){console.error("\u274C Error submitting player:",e),alert("Failed to submit player. Please try again.")}})}createNewPlayer(){console.log("\u2795 Creating new player - resetting form..."),this.playerForm={firstName:"",lastName:"",gamertag:"",position:"",archetype:"",jerseyNumber:0,handedness:"",height:72,weight:180,fight:"",origin:"",hair:"",beard:"",tape:"",ethnicity:"",twitch:"",referral:"",invitedBy:"",age:19},this.filteredArchetypes=[],this.resetAllStates(),this.showCreateForm=!0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-player"]],decls:4,vars:4,consts:[["class","loading-container",4,"ngIf"],["class","container mt-4",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"container","mt-4"],[1,"alert","alert-info","text-center"],[1,"fas","fa-medal","me-2"],[1,"mb-3"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fas","fa-plus","me-2"],[1,"card","shadow-lg"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-user-plus","me-2"],[1,"card-body"],[1,"alert","alert-info"],[1,"fas","fa-info-circle","me-2"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-6","mb-3"],[1,"form-label"],["type","text","name","firstName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","lastName","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],["type","text","name","gamertag",1,"form-control",3,"ngModelChange","ngModel"],["name","position","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","LW"],["value","C"],["value","RW"],["value","D"],["value","G"],["class","col-md-6 mb-3",4,"ngIf"],["type","number","name","jerseyNumber","min","0","max","99",1,"form-control",3,"ngModelChange","ngModel"],["name","handedness",1,"form-select",3,"ngModelChange","ngModel"],["value","Left"],["value","Right"],["type","number","name","height","min","67","max","81",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","weight","min","129","max","290",1,"form-control",3,"ngModelChange","ngModel"],["name","fight",1,"form-select",3,"ngModelChange","ngModel"],["value","Never"],["value","Rarely"],["value","Sometimes"],["value","Often"],["type","text","name","origin",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","hair",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","beard",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","tape",1,"form-control",3,"ngModelChange","ngModel"],["name","ethnicity",1,"form-select",3,"ngModelChange","ngModel"],["value","Caucasian"],["value","African-American"],["type","text","name","twitch",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","referral",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","invitedBy",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","submit",1,"btn","btn-primary","btn-lg","w-100"],[1,"fas","fa-paper-plane","me-2"],["name","archetype",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,s){e&1&&u(0,Br,6,0,"div",0)(1,$r,10,1,"div",1)(2,zr,115,18,"div",2)(3,qr,2,0,"div",2),e&2&&(m("ngIf",s.loading),o(),m("ngIf",!s.loading&&s.hasRetiredPlayer&&!s.showCreateForm),o(),m("ngIf",!s.loading&&s.showCreateForm),o(),m("ngIf",!s.loading&&(s.hasActivePlayer||s.hasPendingPlayer)))},dependencies:[X,ie,Q,re,Se,ke,Ae,le,Fe,Me,ne,ve,it,We,tt,ae,xe,mt],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:300px;flex-direction:column;gap:1rem}.spinner-border[_ngcontent-%COMP%]{color:#0d6efd;width:3rem;height:3rem}.alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000001a}.alert-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7f3ff,#cff4fc);color:#055160;border-left:4px solid #0dcaf0}.alert-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#664d03;border-left:4px solid #ffc107}.alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;margin-bottom:1rem}.btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#0d6efd,#6610f2);border:none;box-shadow:0 4px 6px #0d6efd4d}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#0b5ed7,#5a0fc8);transform:translateY(-2px);box-shadow:0 6px 12px #0d6efd66}.btn-outline-primary[_ngcontent-%COMP%]{color:#0d6efd;border:2px solid #0d6efd;background:transparent}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#0d6efd;color:#fff;transform:translateY(-1px);box-shadow:0 4px 8px #0d6efd4d}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 2rem;font-size:1.1rem}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 8px 25px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#1a237e,#283593);color:#fff;border-bottom:none;padding:1.5rem}.card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;margin-bottom:.75rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #ced4da;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.fas[_ngcontent-%COMP%]{margin-right:.5rem}@media (max-width: 768px){.alert[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1.5rem}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem}.loading-container[_ngcontent-%COMP%]{height:200px}}.alert[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.container[_ngcontent-%COMP%]{max-width:800px}.row.g-3[_ngcontent-%COMP%]{--bs-gutter-x: 1.5rem;--bs-gutter-y: 1rem}.alert.alert-info[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:.95rem;line-height:1.6}.alert.alert-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}"]})};function Kr(n,a){n&1&&(i(0,"div",4)(1,"div",5)(2,"span",6),r(3,"Loading..."),t()()())}function Yr(n,a){if(n&1){let e=M();i(0,"button",41),A("click",function(){v(e);let l=c(2);return x(l.toggleEdit())}),r(1),t()}if(n&2){let e=c(2);o(),b(" ",e.isEditing?"Save":"Edit"," ")}}function Qr(n,a){if(n&1){let e=M();i(0,"button",45),A("click",function(){let l=v(e).$implicit,d=c(3);return x(d.updatePeriod(l))}),r(1),t()}if(n&2){let e=a.$implicit,s=c(3);N("active",s.currentPeriod===e),o(),b(" ",e," ")}}function Xr(n,a){if(n&1&&(i(0,"div",42)(1,"div",43),u(2,Qr,2,3,"button",44),t()()),n&2){let e=c(2);o(2),m("ngForOf",e.periods)}}function Zr(n,a){if(n&1&&(i(0,"div",42)(1,"span",46),r(2),t()()),n&2){let e=c(2);o(2),p(e.currentPeriod)}}function Jr(n,a){if(n&1){let e=M();i(0,"input",47),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayScore,l)||(d.awayScore=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.awayScore)}}function eo(n,a){if(n&1&&(i(0,"span",48),r(1),t()),n&2){let e=c(2);o(),p(e.awayScore)}}function to(n,a){if(n&1){let e=M();i(0,"input",47),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeScore,l)||(d.homeScore=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.homeScore)}}function io(n,a){if(n&1&&(i(0,"span",48),r(1),t()),n&2){let e=c(2);o(),p(e.homeScore)}}function no(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.totalShots,l)||(d.awayStats.totalShots=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.awayStats.totalShots)}}function ao(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.awayStats.totalShots)}}function ro(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.totalShots,l)||(d.homeStats.totalShots=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.homeStats.totalShots)}}function oo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.homeStats.totalShots)}}function so(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.hits,l)||(d.awayStats.hits=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.awayStats.hits)}}function lo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.awayStats.hits)}}function co(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.hits,l)||(d.homeStats.hits=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.homeStats.hits)}}function mo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.homeStats.hits)}}function po(n,a){if(n&1){let e=M();i(0,"div",50)(1,"input",51),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.timeOnAttack.minutes,l)||(d.awayStats.timeOnAttack.minutes=l),x(l)}),t(),i(2,"span"),r(3,":"),t(),i(4,"input",51),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.timeOnAttack.seconds,l)||(d.awayStats.timeOnAttack.seconds=l),x(l)}),t()()}if(n&2){let e=c(2);o(),E("ngModel",e.awayStats.timeOnAttack.minutes),o(3),E("ngModel",e.awayStats.timeOnAttack.seconds)}}function go(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.formatTime(e.awayStats.timeOnAttack.minutes,e.awayStats.timeOnAttack.seconds))}}function uo(n,a){if(n&1){let e=M();i(0,"div",50)(1,"input",51),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.timeOnAttack.minutes,l)||(d.homeStats.timeOnAttack.minutes=l),x(l)}),t(),i(2,"span"),r(3,":"),t(),i(4,"input",51),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.timeOnAttack.seconds,l)||(d.homeStats.timeOnAttack.seconds=l),x(l)}),t()()}if(n&2){let e=c(2);o(),E("ngModel",e.homeStats.timeOnAttack.minutes),o(3),E("ngModel",e.homeStats.timeOnAttack.seconds)}}function fo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.formatTime(e.homeStats.timeOnAttack.minutes,e.homeStats.timeOnAttack.seconds))}}function ho(n,a){if(n&1){let e=M();i(0,"input",52),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.passingPercentage,l)||(d.awayStats.passingPercentage=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.awayStats.passingPercentage)}}function _o(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),b("",e.awayStats.passingPercentage,"%")}}function yo(n,a){if(n&1){let e=M();i(0,"input",52),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.passingPercentage,l)||(d.homeStats.passingPercentage=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.homeStats.passingPercentage)}}function vo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),b("",e.homeStats.passingPercentage,"%")}}function xo(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.faceoffsWon,l)||(d.awayStats.faceoffsWon=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.awayStats.faceoffsWon)}}function So(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.awayStats.faceoffsWon)}}function bo(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.faceoffsWon,l)||(d.homeStats.faceoffsWon=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.homeStats.faceoffsWon)}}function wo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.homeStats.faceoffsWon)}}function Po(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.penaltyMinutes,l)||(d.awayStats.penaltyMinutes=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.awayStats.penaltyMinutes)}}function Co(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.awayStats.penaltyMinutes)}}function Eo(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.penaltyMinutes,l)||(d.homeStats.penaltyMinutes=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.homeStats.penaltyMinutes)}}function To(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.homeStats.penaltyMinutes)}}function Io(n,a){if(n&1){let e=M();i(0,"div",53)(1,"input",54),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.powerplays.successful,l)||(d.awayStats.powerplays.successful=l),x(l)}),t(),i(2,"span"),r(3,"/"),t(),i(4,"input",54),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.powerplays.total,l)||(d.awayStats.powerplays.total=l),x(l)}),t()()}if(n&2){let e=c(2);o(),E("ngModel",e.awayStats.powerplays.successful),o(3),E("ngModel",e.awayStats.powerplays.total)}}function Mo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.formatPowerplays(e.awayStats.powerplays.successful,e.awayStats.powerplays.total))}}function ko(n,a){if(n&1){let e=M();i(0,"div",53)(1,"input",54),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.powerplays.successful,l)||(d.homeStats.powerplays.successful=l),x(l)}),t(),i(2,"span"),r(3,"/"),t(),i(4,"input",54),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.powerplays.total,l)||(d.homeStats.powerplays.total=l),x(l)}),t()()}if(n&2){let e=c(2);o(),E("ngModel",e.homeStats.powerplays.successful),o(3),E("ngModel",e.homeStats.powerplays.total)}}function Ao(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.formatPowerplays(e.homeStats.powerplays.successful,e.homeStats.powerplays.total))}}function Oo(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.powerplayMinutes,l)||(d.awayStats.powerplayMinutes=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.awayStats.powerplayMinutes)}}function Do(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.awayStats.powerplayMinutes)}}function Go(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.powerplayMinutes,l)||(d.homeStats.powerplayMinutes=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.homeStats.powerplayMinutes)}}function Ro(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.homeStats.powerplayMinutes)}}function No(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.awayStats.shorthandedGoals,l)||(d.awayStats.shorthandedGoals=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.awayStats.shorthandedGoals)}}function Lo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.awayStats.shorthandedGoals)}}function Vo(n,a){if(n&1){let e=M();i(0,"input",49),I("ngModelChange",function(l){v(e);let d=c(2);return T(d.homeStats.shorthandedGoals,l)||(d.homeStats.shorthandedGoals=l),x(l)}),t()}if(n&2){let e=c(2);E("ngModel",e.homeStats.shorthandedGoals)}}function Fo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c(2);o(),p(e.homeStats.shorthandedGoals)}}function Wo(n,a){if(n&1){let e=M();i(0,"input",59),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.minutes,l)||(d.minutes=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.minutes)}}function Uo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.minutes)}}function Bo(n,a){if(n&1){let e=M();i(0,"input",60),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.seconds,l)||(d.seconds=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.seconds)}}function $o(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.seconds)}}function Ho(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.goals,l)||(d.goals=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.goals)}}function jo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.goals)}}function zo(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.assists,l)||(d.assists=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.assists)}}function qo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.assists)}}function Ko(n,a){if(n&1){let e=M();i(0,"input",62),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.plusMinus,l)||(d.plusMinus=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.plusMinus)}}function Yo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.plusMinus)}}function Qo(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.shots,l)||(d.shots=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.shots)}}function Xo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.shots)}}function Zo(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.pim,l)||(d.pim=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.pim)}}function Jo(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.pim)}}function es(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.hits,l)||(d.hits=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.hits)}}function ts(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.hits)}}function is(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.ppg,l)||(d.ppg=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.ppg)}}function ns(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.ppg)}}function as(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.shg,l)||(d.shg=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.shg)}}function rs(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.shg)}}function os(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.fot,l)||(d.fot=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.fot)}}function ss(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.fot)}}function ls(n,a){if(n&1){let e=M();i(0,"input",61),I("ngModelChange",function(l){v(e);let d=c().$implicit;return T(d.fow,l)||(d.fow=l),x(l)}),t()}if(n&2){let e=c().$implicit;E("ngModel",e.fow)}}function ds(n,a){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=c().$implicit;o(),p(e.fow)}}function cs(n,a){if(n&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td"),u(8,Wo,1,1,"input",55)(9,Uo,2,1,"span",27),t(),i(10,"td"),u(11,Bo,1,1,"input",56)(12,$o,2,1,"span",27),t(),i(13,"td"),u(14,Ho,1,1,"input",57)(15,jo,2,1,"span",27),t(),i(16,"td"),u(17,zo,1,1,"input",57)(18,qo,2,1,"span",27),t(),i(19,"td"),r(20),t(),i(21,"td"),u(22,Ko,1,1,"input",58)(23,Yo,2,1,"span",27),t(),i(24,"td"),u(25,Qo,1,1,"input",57)(26,Xo,2,1,"span",27),t(),i(27,"td"),r(28),t(),i(29,"td"),u(30,Zo,1,1,"input",57)(31,Jo,2,1,"span",27),t(),i(32,"td"),u(33,es,1,1,"input",57)(34,ts,2,1,"span",27),t(),i(35,"td"),u(36,is,1,1,"input",57)(37,ns,2,1,"span",27),t(),i(38,"td"),u(39,as,1,1,"input",57)(40,rs,2,1,"span",27),t(),i(41,"td"),u(42,os,1,1,"input",57)(43,ss,2,1,"span",27),t(),i(44,"td"),u(45,ls,1,1,"input",57)(46,ds,2,1,"span",27),t(),i(47,"td"),r(48),t()()),n&2){let e=a.$implicit,s=c(2);o(2),p(e.number),o(2),p(e.name),o(2),p(e.position),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),p(e.points),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),p(s.formatPercentage(e.shotPercentage)),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),m("ngIf",s.isEditing),o(),m("ngIf",!s.isEditing),o(2),p(s.formatPercentage(e.foPercentage))}}function ms(n,a){if(n&1){let e=M();i(0,"div",7)(1,"div",8)(2,"div",9),u(3,Yr,2,1,"button",10),i(4,"div",11),r(5),t(),u(6,Xr,3,1,"div",12)(7,Zr,3,1,"div",12),i(8,"div",13)(9,"div",14),g(10,"img",15),i(11,"span",16),r(12),t()(),i(13,"div",17),u(14,Jr,1,1,"input",18)(15,eo,2,1,"span",19),i(16,"span",20),r(17,"-"),t(),u(18,to,1,1,"input",18)(19,io,2,1,"span",19),t(),i(20,"div",14)(21,"span",16),r(22),t(),g(23,"img",15),t()()(),i(24,"div",21)(25,"h5",22),r(26,"Game Statistics"),t(),i(27,"div",23)(28,"div",24)(29,"div",25),u(30,no,1,1,"input",26)(31,ao,2,1,"span",27),t(),i(32,"div",28),r(33,"TOTAL SHOTS"),t(),i(34,"div",29),u(35,ro,1,1,"input",26)(36,oo,2,1,"span",27),t()(),i(37,"div",24)(38,"div",25),u(39,so,1,1,"input",26)(40,lo,2,1,"span",27),t(),i(41,"div",28),r(42,"HITS"),t(),i(43,"div",29),u(44,co,1,1,"input",26)(45,mo,2,1,"span",27),t()(),i(46,"div",24)(47,"div",25),u(48,po,5,2,"div",30)(49,go,2,1,"span",27),t(),i(50,"div",28),r(51,"TIME ON ATTACK"),t(),i(52,"div",29),u(53,uo,5,2,"div",30)(54,fo,2,1,"span",27),t()(),i(55,"div",24)(56,"div",25),u(57,ho,1,1,"input",31)(58,_o,2,1,"span",27),t(),i(59,"div",28),r(60,"PASSING"),t(),i(61,"div",29),u(62,yo,1,1,"input",31)(63,vo,2,1,"span",27),t()(),i(64,"div",24)(65,"div",25),u(66,xo,1,1,"input",26)(67,So,2,1,"span",27),t(),i(68,"div",28),r(69,"FACEOFFS WON"),t(),i(70,"div",29),u(71,bo,1,1,"input",26)(72,wo,2,1,"span",27),t()(),i(73,"div",24)(74,"div",25),u(75,Po,1,1,"input",26)(76,Co,2,1,"span",27),t(),i(77,"div",28),r(78,"PENALTY MINUTES"),t(),i(79,"div",29),u(80,Eo,1,1,"input",26)(81,To,2,1,"span",27),t()(),i(82,"div",24)(83,"div",25),u(84,Io,5,2,"div",32)(85,Mo,2,1,"span",27),t(),i(86,"div",28),r(87,"POWERPLAYS"),t(),i(88,"div",29),u(89,ko,5,2,"div",32)(90,Ao,2,1,"span",27),t()(),i(91,"div",24)(92,"div",25),u(93,Oo,1,1,"input",26)(94,Do,2,1,"span",27),t(),i(95,"div",28),r(96,"POWERPLAY MINUTES"),t(),i(97,"div",29),u(98,Go,1,1,"input",26)(99,Ro,2,1,"span",27),t()(),i(100,"div",24)(101,"div",25),u(102,No,1,1,"input",26)(103,Lo,2,1,"span",27),t(),i(104,"div",28),r(105,"SHORTHANDED GOALS"),t(),i(106,"div",29),u(107,Vo,1,1,"input",26)(108,Fo,2,1,"span",27),t()()()(),i(109,"div",33)(110,"div",7)(111,"div",34)(112,"h5",35),r(113,"Player Statistics"),t(),i(114,"div",36)(115,"button",37),A("click",function(){v(e);let l=c();return x(l.selectedTeamView="home")}),r(116),t(),i(117,"button",37),A("click",function(){v(e);let l=c();return x(l.selectedTeamView="away")}),r(118),t()()(),i(119,"div",8)(120,"div",38)(121,"table",39)(122,"thead")(123,"tr")(124,"th"),r(125,"#"),t(),i(126,"th"),r(127,"Player"),t(),i(128,"th"),r(129,"POS"),t(),i(130,"th"),r(131,"MIN"),t(),i(132,"th"),r(133,"SEC"),t(),i(134,"th"),r(135,"G"),t(),i(136,"th"),r(137,"A"),t(),i(138,"th"),r(139,"PTS"),t(),i(140,"th"),r(141,"+/-"),t(),i(142,"th"),r(143,"SHOTS"),t(),i(144,"th"),r(145,"S%"),t(),i(146,"th"),r(147,"PIM"),t(),i(148,"th"),r(149,"HITS"),t(),i(150,"th"),r(151,"PPG"),t(),i(152,"th"),r(153,"SHG"),t(),i(154,"th"),r(155,"FOT"),t(),i(156,"th"),r(157,"FOW"),t(),i(158,"th"),r(159,"FO%"),t()()(),i(160,"tbody"),u(161,cs,49,30,"tr",40),t()()()()()()()()}if(n&2){let e=c();o(3),m("ngIf",e.canEditScores),o(2),q("W",e.game.week," ",e.game.day),o(),m("ngIf",e.isEditing&&e.canEditScores),o(),m("ngIf",!e.isEditing),o(3),m("src",e.awayTeamLogo,z)("alt",e.awayTeamName),o(2),p(e.awayTeamName),o(2),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),p(e.homeTeamName),o(),m("src",e.homeTeamLogo,z)("alt",e.homeTeamName),o(7),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(7),N("btn-primary",e.selectedTeamView==="home")("btn-outline-primary",e.selectedTeamView==="away"),o(),b(" ",e.homeTeamName," "),o(),N("btn-primary",e.selectedTeamView==="away")("btn-outline-primary",e.selectedTeamView==="home"),o(),b(" ",e.awayTeamName," "),o(43),m("ngForOf",e.getDisplayPlayerStats())}}function ps(n,a){n&1&&(i(0,"div",63),r(1," Game not found "),t())}var gt=class n{constructor(a,e,s){this.route=a;this.firestore=e;this.authService=s;this.gameId=this.route.snapshot.paramMap.get("gameId")||"",this.teamId=this.route.snapshot.paramMap.get("teamId")||""}gameId;teamId;game;loading=!0;awayTeamLogo="";awayTeamName="";homeTeamLogo="";homeTeamName="";awayScore=0;homeScore=0;canEditScores=!1;isEditing=!1;currentPeriod="1st";periods=["1st","2nd","3rd","OT","Final"];selectedTeamView="home";homeStats={totalShots:0,hits:0,timeOnAttack:{minutes:0,seconds:0},passingPercentage:0,faceoffsWon:0,penaltyMinutes:0,powerplays:{successful:0,total:0},powerplayMinutes:0,shorthandedGoals:0};awayStats={totalShots:0,hits:0,timeOnAttack:{minutes:0,seconds:0},passingPercentage:0,faceoffsWon:0,penaltyMinutes:0,powerplays:{successful:0,total:0},powerplayMinutes:0,shorthandedGoals:0};homePlayerStats=[];awayPlayerStats=[];ngOnInit(){return k(this,null,function*(){this.authService.effectiveRoles.subscribe(a=>{this.canEditScores=a.some(e=>["developer","commissioner","stats monkey","gm"].includes(e))}),yield this.loadGameData()})}loadGameData(){return k(this,null,function*(){if(this.gameId&&this.teamId){let a=W(this.firestore,`teams/${this.teamId}/games/${this.gameId}`),e=yield Y(a);if(e.exists()){this.game=j({id:e.id},e.data()),this.awayScore=this.game.awayScore||0,this.homeScore=this.game.homeScore||0,this.currentPeriod=this.game.period||"1st",this.game.homeStats&&(this.homeStats=j(j({},this.homeStats),this.game.homeStats)),this.game.awayStats&&(this.awayStats=j(j({},this.awayStats),this.game.awayStats));let s=W(this.firestore,`teams/${this.game.homeTeamId}`),l=yield Y(s);if(l.exists()){let h=l.data();this.homeTeamLogo=h.logoUrl||"",this.homeTeamName=h.mascot||""}let d=W(this.firestore,`teams/${this.game.awayTeamId}`),_=yield Y(d);if(_.exists()){let h=_.data();this.awayTeamLogo=h.logoUrl||"",this.awayTeamName=h.mascot||""}yield this.loadPlayerStats()}}this.loading=!1})}loadPlayerStats(){return k(this,null,function*(){let a=O(this.firestore,`teams/${this.game.homeTeamId}/roster`),e=yield G(a);this.homePlayerStats=e.docs.map(d=>{let _=d.data(),h=this.game.homePlayerStats?.[d.id]||{},C=h.fow||0,w=h.fot||0;return{id:d.id,number:_.jerseyNumber||0,name:`${_.firstName} ${_.lastName}`,position:_.position||"",goals:h.goals||0,assists:h.assists||0,points:(h.goals||0)+(h.assists||0),plusMinus:h.plusMinus||0,shots:h.shots||0,shotPercentage:h.shots?(h.goals||0)/h.shots*100:0,pim:h.pim||0,hits:h.hits||0,ppg:h.ppg||0,shg:h.shg||0,fot:w,fow:C,foPercentage:w>0?C/w*100:0,minutes:h.minutes||0,seconds:h.seconds||0}}).sort((d,_)=>d.number-_.number);let s=O(this.firestore,`teams/${this.game.awayTeamId}/roster`),l=yield G(s);this.awayPlayerStats=l.docs.map(d=>{let _=d.data(),h=this.game.awayPlayerStats?.[d.id]||{},C=h.fow||0,w=h.fot||0;return{id:d.id,number:_.jerseyNumber||0,name:`${_.firstName} ${_.lastName}`,position:_.position||"",goals:h.goals||0,assists:h.assists||0,points:(h.goals||0)+(h.assists||0),plusMinus:h.plusMinus||0,shots:h.shots||0,shotPercentage:h.shots?(h.goals||0)/h.shots*100:0,pim:h.pim||0,hits:h.hits||0,ppg:h.ppg||0,shg:h.shg||0,fot:w,fow:C,foPercentage:w>0?C/w*100:0,minutes:h.minutes||0,seconds:h.seconds||0}}).sort((d,_)=>d.number-_.number)})}saveGameData(){return k(this,null,function*(){if(!(!this.game||!this.canEditScores))try{let a={homeScore:this.homeScore,awayScore:this.awayScore,period:this.currentPeriod,homeStats:this.homeStats,awayStats:this.awayStats,homePlayerStats:this.createPlayerStatsMap(this.homePlayerStats),awayPlayerStats:this.createPlayerStatsMap(this.awayPlayerStats)},e=W(this.firestore,`games/${this.gameId}`),s=W(this.firestore,`teams/${this.game.homeTeamId}/games/${this.gameId}`),l=W(this.firestore,`teams/${this.game.awayTeamId}/games/${this.gameId}`);yield Promise.all([be(e,a),be(s,a),be(l,a)]),console.log("Game data saved successfully:",a),this.isEditing=!1,yield this.loadGameData()}catch(a){console.error("Error saving game data:",a),alert("Failed to save game data. Please try again.")}})}createPlayerStatsMap(a){let e={};return a.forEach(s=>{e[s.id]={goals:s.goals,assists:s.assists,plusMinus:s.plusMinus,shots:s.shots,pim:s.pim,hits:s.hits,ppg:s.ppg,shg:s.shg,fot:s.fot,fow:s.fow,minutes:s.minutes,seconds:s.seconds}}),e}toggleEdit(){this.canEditScores&&(this.isEditing?this.saveGameData():this.isEditing=!0)}updatePeriod(a){return k(this,null,function*(){this.canEditScores&&(this.currentPeriod=a,yield this.saveGameData())})}formatTime(a,e){return`${a.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}formatPowerplays(a,e){return`${a}/${e}`}formatPercentage(a){return`${a.toFixed(1)}%`}getDisplayPlayerStats(){return this.selectedTeamView==="home"?this.homePlayerStats:this.awayPlayerStats}getDisplayTeamName(){return this.selectedTeamView==="home"?this.homeTeamName:this.awayTeamName}static \u0275fac=function(e){return new(e||n)(te(Qt),te(me),te(J))};static \u0275cmp=H({type:n,selectors:[["app-game-detail"]],decls:4,vars:3,consts:[[1,"container","mt-4"],["class","text-center",4,"ngIf"],["class","card",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"card"],[1,"card-body"],[1,"scoreboard"],["class","edit-button",3,"click",4,"ngIf"],[1,"game-info"],["class","period-indicator",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"team-section"],[1,"team-logo",3,"src","alt"],[1,"team-name"],[1,"score-section"],["type","number","class","score-input","min","0",3,"ngModel","ngModelChange",4,"ngIf"],["class","score-display",4,"ngIf"],[1,"score-divider"],[1,"game-stats","mt-4"],[1,"text-center","mb-4"],[1,"stats-grid"],[1,"stat-row"],[1,"away-stat"],["type","number","class","stat-input",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"stat-label"],[1,"home-stat"],["class","time-input-group",4,"ngIf"],["type","number","class","stat-input","min","0","max","100",3,"ngModel","ngModelChange",4,"ngIf"],["class","powerplay-input-group",4,"ngIf"],[1,"player-stats","mt-4"],[1,"card-header","bg-dark","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn-group"],[1,"btn",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"edit-button",3,"click"],[1,"period-indicator"],[1,"period-buttons"],["class","period-button",3,"active","click",4,"ngFor","ngForOf"],[1,"period-button",3,"click"],[1,"period-display"],["type","number","min","0",1,"score-input",3,"ngModelChange","ngModel"],[1,"score-display"],["type","number",1,"stat-input",3,"ngModelChange","ngModel"],[1,"time-input-group"],["type","number","min","0","max","59",1,"time-input",3,"ngModelChange","ngModel"],["type","number","min","0","max","100",1,"stat-input",3,"ngModelChange","ngModel"],[1,"powerplay-input-group"],["type","number","min","0",1,"powerplay-input",3,"ngModelChange","ngModel"],["type","number","class","form-control form-control-sm stat-input","min","0","max","60",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control form-control-sm stat-input","min","0","max","59",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control form-control-sm stat-input","min","0",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control form-control-sm stat-input",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","min","0","max","60",1,"form-control","form-control-sm","stat-input",3,"ngModelChange","ngModel"],["type","number","min","0","max","59",1,"form-control","form-control-sm","stat-input",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control","form-control-sm","stat-input",3,"ngModelChange","ngModel"],["type","number",1,"form-control","form-control-sm","stat-input",3,"ngModelChange","ngModel"],[1,"alert","alert-warning"]],template:function(e,s){e&1&&(i(0,"div",0),u(1,Kr,4,0,"div",1)(2,ms,162,62,"div",2)(3,ps,2,0,"div",3),t()),e&2&&(o(),m("ngIf",s.loading),o(),m("ngIf",!s.loading&&s.game),o(),m("ngIf",!s.loading&&!s.game))},dependencies:[X,ie,Q,re,le,Fe,ne,We,tt,ae],styles:[".scoreboard[_ngcontent-%COMP%]{background:#1a1a1a;color:#fff;padding:2rem;border-radius:10px;margin-bottom:2rem;position:relative}.period-indicator[_ngcontent-%COMP%]{position:absolute;top:1.5rem;left:50%;transform:translate(-50%);display:flex;flex-direction:column;align-items:center;gap:.5rem}.period-button[_ngcontent-%COMP%]{background:#333;border:none;color:#999;padding:.25rem .75rem;border-radius:4px;cursor:pointer}.period-button.active[_ngcontent-%COMP%]{background:#666;color:#fff}.team-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;min-width:200px;justify-content:center}.team-logo[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:contain;border-radius:50%}.score-input[_ngcontent-%COMP%]{width:80px;font-size:2.5rem;font-weight:700;background:transparent;border:2px solid #333;border-radius:8px;color:#fff;text-align:center;padding:.25rem}.score-display[_ngcontent-%COMP%]{width:80px;font-size:2.5rem;font-weight:700;text-align:center;color:#fff}.game-stats[_ngcontent-%COMP%]{background:#1a1a1a;color:#fff;padding:2rem;border-radius:10px}.stat-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1fr;align-items:center;gap:1rem;padding:1rem;border-bottom:1px solid var(--bs-border-color);background:var(--bs-tertiary-bg);border-radius:8px;transition:all .2s ease}.stat-row[_ngcontent-%COMP%]:hover{background:var(--bs-secondary-bg);transform:translate(4px)}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.stat-label[_ngcontent-%COMP%]{text-align:center;font-weight:600;color:var(--bs-emphasis-color);text-transform:uppercase;letter-spacing:.5px;font-size:.9rem}.away-stat[_ngcontent-%COMP%], .home-stat[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:1.1rem;color:var(--bs-body-color)}.time-input-group[_ngcontent-%COMP%], .powerplay-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.25rem}.time-input[_ngcontent-%COMP%], .powerplay-input[_ngcontent-%COMP%]{width:40px;text-align:center;background:var(--bs-body-bg);border:1px solid var(--bs-border-color);color:var(--bs-body-color);border-radius:4px;padding:.25rem}.stat-input[_ngcontent-%COMP%]{width:50px;background:var(--bs-body-bg)!important;border:1px solid var(--bs-border-color)!important;color:var(--bs-body-color)!important;padding:.25rem;text-align:center;border-radius:4px;transition:all .2s ease}.stat-input[_ngcontent-%COMP%]:focus{border-color:var(--bs-primary)!important;box-shadow:0 0 0 .2rem rgba(var(--bs-primary-rgb),.25);outline:none}.stat-input[_ngcontent-%COMP%]{min-width:50px}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{color:var(--bs-body-color)!important;font-size:.9rem;background-color:var(--bs-body-bg)!important}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bs-tertiary-bg)!important;border-color:var(--bs-border-color)!important;color:var(--bs-emphasis-color)!important;font-weight:600;text-transform:uppercase;letter-spacing:.5px;padding:1rem .75rem}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:var(--bs-border-color)!important;background:var(--bs-body-bg)!important;color:var(--bs-body-color)!important;padding:.75rem;vertical-align:middle}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--bs-secondary-bg)!important}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;transition:all .2s ease}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{border-top-left-radius:0;border-bottom-left-radius:0}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem 0}.scoreboard[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1.5rem}.team-section[_ngcontent-%COMP%]{min-width:150px;padding:.75rem}.team-logo[_ngcontent-%COMP%]{width:40px;height:40px}.score-input[_ngcontent-%COMP%], .score-display[_ngcontent-%COMP%]{width:60px;font-size:1.8rem}.stat-row[_ngcontent-%COMP%]{padding:.75rem;gap:.5rem}.stat-label[_ngcontent-%COMP%], .player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{font-size:.8rem}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem}.btn-group[_ngcontent-%COMP%]{flex-direction:column;width:100%}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:8px!important;margin-bottom:.25rem}.edit-button[_ngcontent-%COMP%]{position:static;width:100%;margin-bottom:1rem}.game-info[_ngcontent-%COMP%]{position:static;display:inline-block;margin-bottom:1rem}.period-indicator[_ngcontent-%COMP%]{position:static;transform:none;margin-bottom:1rem}}"]})};var ut=n=>()=>{let a=B(J),e=B(Z);return a.effectiveRoles.pipe(Ke(s=>s.some(d=>d.startsWith("gm:")?n.includes("gm"):n.includes(d))?!0:(e.navigate(["/unauthorized"]),!1)))};var fe=()=>{let n=B(J),a=B(Z);return n.currentUser.pipe(Ke(e=>e?!0:(a.navigate(["/login"]),!1)))};var ki=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:at,title:"Login"},{path:"dashboard",component:rt,title:"Dashboard",canActivate:[fe]},{path:"register",component:ot,title:"Register"},{path:"verify-email",component:st},{path:"forgot-password",component:lt},{path:"analytics",component:ct,title:"Stats and Standings",canActivate:[fe]},{path:"games",component:dt,title:"Games",canActivate:[fe]},{path:"games/:teamId/:gameId",component:gt,title:"Game Details",canActivate:[fe]},{path:"teams",loadComponent:()=>import("./chunk-4HD44YKW.js").then(n=>n.Teams),title:"Teams",canActivate:[fe]},{path:"teams/:id",loadComponent:()=>import("./chunk-MTXZ6POI.js").then(n=>n.TeamDetail),title:"Team Details",canActivate:[fe]},{path:"player",component:pt,title:"Player",canActivate:[fe]},{path:"headquarters",loadComponent:()=>import("./chunk-2SZH2PLF.js").then(n=>n.Headquarters),title:"Headquarters",canActivate:[fe,ut(["developer","commissioner"])]},{path:"progression-tracker",loadComponent:()=>import("./chunk-V3GZPP45.js").then(n=>n.ProgressionTracker),title:"Progression Tracker",canActivate:[fe,ut(["developer","commissioner","progression tracker"])]},{path:"draft",loadComponent:()=>import("./chunk-GXMYCEG5.js").then(n=>n.Draft),title:"Draft Central",canActivate:[fe,ut(["developer"])]},{path:"**",redirectTo:"/login"}];var Ni="firebasestorage.googleapis.com",gs="storageBucket",us=2*60*1e3,fs=10*60*1e3;var we=class n extends ai{constructor(a,e,s=0){super(wt(a),`Firebase Storage: ${e} (${wt(a)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return wt(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Te=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Te||{});function wt(n){return"storage/"+n}function hs(){let n="An unknown error occurred, please check the error payload for server response.";return new we(Te.UNKNOWN,n)}function _s(){return new we(Te.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ys(){return new we(Te.CANCELED,"User canceled the upload/download.")}function vs(n){return new we(Te.INVALID_URL,"Invalid URL '"+n+"'.")}function xs(n){return new we(Te.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Ai(n){return new we(Te.INVALID_ARGUMENT,n)}function Li(){return new we(Te.APP_DELETED,"The Firebase app was deleted.")}function Ss(n){return new we(Te.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Ee=class n{constructor(a,e){this.bucket=a,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,e){let s;try{s=n.makeFromUrl(a,e)}catch{return new n(a,"")}if(s.path==="")return s;throw xs(a)}static makeFromUrl(a,e){let s=null,l="([A-Za-z0-9.\\-_]+)";function d(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}let _="(/(.*))?$",h=new RegExp("^gs://"+l+_,"i"),C={bucket:1,path:3};function w(K){K.path_=decodeURIComponent(K.path)}let S="v[A-Za-z0-9_]+",P=e.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",y=new RegExp(`^https?://${P}/${S}/b/${l}/o${f}`,"i"),D={bucket:1,path:3},L=e===Ni?"(?:storage.googleapis.com|storage.cloud.google.com)":e,F="([^?#]*)",$=new RegExp(`^https?://${L}/${l}/${F}`,"i"),ee=[{regex:h,indices:C,postModify:d},{regex:y,indices:D,postModify:w},{regex:$,indices:{bucket:1,path:2},postModify:w}];for(let K=0;K<ee.length;K++){let he=ee[K],_e=he.regex.exec(a);if(_e){let Pe=_e[he.indices.bucket],Oe=_e[he.indices.path];Oe||(Oe=""),s=new n(Pe,Oe),he.postModify(s);break}}if(s==null)throw vs(a);return s}},Pt=class{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}};function bs(n,a,e){let s=1,l=null,d=null,_=!1,h=0;function C(){return h===2}let w=!1;function S(...F){w||(w=!0,a.apply(null,F))}function P(F){l=setTimeout(()=>{l=null,n(y,C())},F)}function f(){d&&clearTimeout(d)}function y(F,...$){if(w){f();return}if(F){f(),S.call(null,F,...$);return}if(C()||_){f(),S.call(null,F,...$);return}s<64&&(s*=2);let ee;h===1?(h=2,ee=0):ee=(s+Math.random())*1e3,P(ee)}let D=!1;function L(F){D||(D=!0,f(),!w&&(l!==null?(F||(h=2),clearTimeout(l),P(0)):F||(h=1)))}return P(0),d=setTimeout(()=>{_=!0,L(!0)},e),L}function ws(n){n(!1)}function Ps(n){return n!==void 0}function Oi(n,a,e,s){if(s<a)throw Ai(`Invalid value for '${n}'. Expected ${a} or greater.`);if(s>e)throw Ai(`Invalid value for '${n}'. Expected ${e} or less.`)}function Cs(n){let a=encodeURIComponent,e="?";for(let s in n)if(n.hasOwnProperty(s)){let l=a(s)+"="+a(n[s]);e=e+l+"&"}return e=e.slice(0,-1),e}var Ct=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Ct||{});function Es(n,a){let e=n>=500&&n<600,l=[408,429].indexOf(n)!==-1,d=a.indexOf(n)!==-1;return e||l||d}var Et=class{constructor(a,e,s,l,d,_,h,C,w,S,P,f=!0,y=!1){this.url_=a,this.method_=e,this.headers_=s,this.body_=l,this.successCodes_=d,this.additionalRetryCodes_=_,this.callback_=h,this.errorCallback_=C,this.timeout_=w,this.progressCallback_=S,this.connectionFactory_=P,this.retry=f,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,L)=>{this.resolve_=D,this.reject_=L,this.start_()})}start_(){let a=(s,l)=>{if(l){s(!1,new He(!1,null,!0));return}let d=this.connectionFactory_();this.pendingConnection_=d;let _=h=>{let C=h.loaded,w=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(C,w)};this.progressCallback_!==null&&d.addUploadProgressListener(_),d.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&d.removeUploadProgressListener(_),this.pendingConnection_=null;let h=d.getErrorCode()===Ct.NO_ERROR,C=d.getStatus();if(!h||Es(C,this.additionalRetryCodes_)&&this.retry){let S=d.getErrorCode()===Ct.ABORT;s(!1,new He(!1,null,S));return}let w=this.successCodes_.indexOf(C)!==-1;s(!0,new He(w,d))})},e=(s,l)=>{let d=this.resolve_,_=this.reject_,h=l.connection;if(l.wasSuccessCode)try{let C=this.callback_(h,h.getResponse());Ps(C)?d(C):d()}catch(C){_(C)}else if(h!==null){let C=hs();C.serverResponse=h.getErrorText(),this.errorCallback_?_(this.errorCallback_(h,C)):_(C)}else if(l.canceled){let C=this.appDelete_?Li():ys();_(C)}else{let C=_s();_(C)}};this.canceled_?e(!1,new He(!1,null,!0)):this.backoffId_=bs(a,e,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,this.backoffId_!==null&&ws(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},He=class{constructor(a,e,s){this.wasSuccessCode=a,this.connection=e,this.canceled=!!s}};function Ts(n,a){a!==null&&a.length>0&&(n.Authorization="Firebase "+a)}function Is(n,a){n["X-Firebase-Storage-Version"]="webjs/"+(a??"AppManager")}function Ms(n,a){a&&(n["X-Firebase-GMPID"]=a)}function ks(n,a){a!==null&&(n["X-Firebase-AppCheck"]=a)}function As(n,a,e,s,l,d,_=!0,h=!1){let C=Cs(n.urlParams),w=n.url+C,S=Object.assign({},n.headers);return Ms(S,a),Ts(S,e),Is(S,d),ks(S,s),new Et(w,n.method,S,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,l,_,h)}function Os(n){if(n.length===0)return null;let a=n.lastIndexOf("/");return a===-1?"":n.slice(0,a)}function Ds(n){let a=n.lastIndexOf("/",n.length-2);return a===-1?n:n.slice(a+1)}var Jd=256*1024;var Tt=class n{constructor(a,e){this._service=a,e instanceof Ee?this._location=e:this._location=Ee.makeFromUrl(e,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,e){return new n(a,e)}get root(){let a=new Ee(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ds(this._location.path)}get storage(){return this._service}get parent(){let a=Os(this._location.path);if(a===null)return null;let e=new Ee(this._location.bucket,a);return new n(this._service,e)}_throwIfRoot(a){if(this._location.path==="")throw Ss(a)}};function Di(n,a){let e=a?.[gs];return e==null?null:Ee.makeFromBucketSpec(e,n)}function Gs(n,a,e,s={}){n.host=`${a}:${e}`;let l=ei(a);l&&(ti(`https://${n.host}/b`),ni("Storage",!0)),n._isUsingEmulator=!0,n._protocol=l?"https":"http";let{mockUserToken:d}=s;d&&(n._overrideAuthToken=typeof d=="string"?d:ii(d,n.app.options.projectId))}var It=class{constructor(a,e,s,l,d,_=!1){this.app=a,this._authProvider=e,this._appCheckProvider=s,this._url=l,this._firebaseVersion=d,this._isUsingEmulator=_,this._bucket=null,this._host=Ni,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=us,this._maxUploadRetryTime=fs,this._requests=new Set,l!=null?this._bucket=Ee.makeFromBucketSpec(l,this._host):this._bucket=Di(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._url!=null?this._bucket=Ee.makeFromBucketSpec(this._url,a):this._bucket=Di(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){Oi("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){Oi("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){return k(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let a=this._authProvider.getImmediate({optional:!0});if(a){let e=yield a.getToken();if(e!==null)return e.accessToken}return null})}_getAppCheckToken(){return k(this,null,function*(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let a=this._appCheckProvider.getImmediate({optional:!0});return a?(yield a.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new Tt(this,a)}_makeRequest(a,e,s,l,d=!0){if(this._deleted)return new Pt(Li());{let _=As(a,this._appId,s,l,e,this._firebaseVersion,d,this._isUsingEmulator);return this._requests.add(_),_.getPromise().then(()=>this._requests.delete(_),()=>this._requests.delete(_)),_}}makeRequestWithTokens(a,e){return k(this,null,function*(){let[s,l]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(a,e,s,l).getPromise()})}},Gi="@firebase/storage",Ri="0.13.14";var Vi="storage";function Fi(n=mi(),a){n=ri(n);let s=li(n,Vi).getImmediate({identifier:a}),l=Jt("storage");return l&&Wi(s,...l),s}function Wi(n,a,e,s={}){Gs(n,a,e,s)}function Rs(n,{instanceIdentifier:a}){let e=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),l=n.getProvider("app-check-internal");return new It(e,s,l,a,ci)}function Ns(){si(new oi(Vi,Rs,"PUBLIC").setMultipleInstances(!0)),ze(Gi,Ri,""),ze(Gi,Ri,"esm2017")}Ns();var qe=class{constructor(a){return a}},Ui="storage",Mt=class{constructor(){return ui(Ui)}};var kt=new Gt("angularfire2.storage-instances");function Ls(n,a){let e=gi(Ui,n,a);return e&&new qe(e)}function Vs(n){return(a,e)=>{let s=a.runOutsideAngular(()=>n(e));return new qe(s)}}var Fs={provide:Mt,deps:[[new je,kt]]},Ws={provide:qe,useFactory:Ls,deps:[[new je,kt],_i]};function Bi(n,...a){return ze("angularfire",pi.full,"gcs"),Rt([Ws,Fs,{provide:kt,useFactory:Vs(n),multi:!0,deps:[Vt,Nt,fi,yi,[new je,bi],[new je,Si],...a]}])}var $i=hi(Fi,!0);var Hi={production:!0,firebase:{apiKey:"AIzaSyBSJztG4qQ9ddB24kYd3UHV0n1bnyLImO8",authDomain:"gohls-3033e.firebaseapp.com",projectId:"gohls-3033e",storageBucket:"gohls-3033e.firebasestorage.app",messagingSenderId:"1043263476189",appId:"1:1043263476189:web:18604bd169a5a513e22634"}};var Us=Hi.firebase,ji={providers:[jt({eventCoalescing:!0}),Zt(ki),vi(()=>xi(Us)),wi(()=>Pi()),Ci(()=>Ti()),Bi(()=>$i())]};var ft=class n{STORAGE_KEY="gohls-theme-preference";themeSubject=new At("auto");theme$=this.themeSubject.asObservable();mediaQuery=window.matchMedia("(prefers-color-scheme: dark)");constructor(){this.initializeTheme(),this.setupMediaQueryListener()}initializeTheme(){let e=localStorage.getItem(this.STORAGE_KEY)||"auto";this.setTheme(e)}setupMediaQueryListener(){this.mediaQuery.addEventListener("change",()=>{this.themeSubject.value==="auto"&&this.applyTheme("auto")})}setTheme(a){this.themeSubject.next(a),this.applyTheme(a),localStorage.setItem(this.STORAGE_KEY,a)}applyTheme(a){let e=document.documentElement;e.classList.remove("theme-light","theme-dark");let s;a==="auto"?s=this.mediaQuery.matches?"dark":"light":s=a,e.classList.add(`theme-${s}`),this.updateMetaThemeColor(s)}updateMetaThemeColor(a){let e=document.querySelector('meta[name="theme-color"]'),s=a==="dark"?"#1a1a1a":"#ffffff";if(e)e.setAttribute("content",s);else{let l=document.createElement("meta");l.name="theme-color",l.content=s,document.head.appendChild(l)}}getCurrentTheme(){return this.themeSubject.value}getActualTheme(){let a=this.getCurrentTheme();return a==="auto"?this.mediaQuery.matches?"dark":"light":a}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})};function $s(n,a){n&1&&(Ye(),i(0,"svg",7),g(1,"circle",8)(2,"path",9),t())}function Hs(n,a){n&1&&(Ye(),i(0,"svg",7),g(1,"path",10),t())}function js(n,a){n&1&&(Ye(),i(0,"svg",7),g(1,"circle",11)(2,"path",12)(3,"path",13),t())}function zs(n,a){n&1&&g(0,"i",17)}function qs(n,a){if(n&1){let e=M();i(0,"button",14),A("click",function(){let l=v(e).$implicit,d=c();return x(d.selectTheme(l.value))}),g(1,"i",15),i(2,"span"),r(3),t(),u(4,zs,1,0,"i",16),t()}if(n&2){let e=a.$implicit,s=c();N("active",s.currentTheme===e.value),vt("aria-label","Switch to "+e.label+" theme"),o(),ue(e.icon),o(2),p(e.label),o(),m("ngIf",s.currentTheme===e.value)}}var ht=class n{constructor(a){this.themeService=a}currentTheme="auto";showOptions=!1;subscription;themeOptions=[{value:"light",label:"Light",icon:"fas fa-sun"},{value:"dark",label:"Dark",icon:"fas fa-moon"},{value:"auto",label:"Auto",icon:"fas fa-desktop"}];ngOnInit(){this.subscription=this.themeService.theme$.subscribe(a=>{this.currentTheme=a}),document.addEventListener("click",this.handleOutsideClick.bind(this))}ngOnDestroy(){this.subscription?.unsubscribe(),document.removeEventListener("click",this.handleOutsideClick.bind(this))}toggleOptions(){this.showOptions=!this.showOptions}selectTheme(a){this.themeService.setTheme(a),this.showOptions=!1}getThemeLabel(){return this.themeOptions.find(e=>e.value===this.currentTheme)?.label||"Theme"}getAriaLabel(){return`Current theme: ${this.getThemeLabel()}. Click to change theme.`}handleOutsideClick(a){a.target.closest(".theme-toggle-container")||(this.showOptions=!1)}static \u0275fac=function(e){return new(e||n)(te(ft))};static \u0275cmp=H({type:n,selectors:[["app-theme-toggle"]],decls:10,vars:11,consts:[[1,"theme-toggle-container"],["type","button",1,"theme-toggle-btn",3,"click"],["class","theme-icon","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true",4,"ngIf"],[1,"theme-label","d-none","d-md-inline"],[1,"fas","fa-chevron-down","ms-1","dropdown-arrow"],[1,"theme-options"],["class","theme-option","type","button",3,"active","click",4,"ngFor","ngForOf"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true",1,"theme-icon"],["cx","12","cy","12","r","5"],["d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"],["cx","12","cy","12","r","3"],["d","M12 1v6M12 17v6M5.64 5.64l4.24 4.24M14.12 14.12l4.24 4.24M1 12h6M17 12h6M5.64 18.36l4.24-4.24M14.12 9.88l4.24-4.24"],["d","M12 1v2M12 21v2","opacity","0.5"],["type","button",1,"theme-option",3,"click"],["aria-hidden","true"],["class","fas fa-check theme-check","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fas","fa-check","theme-check"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"button",1),A("click",function(){return s.toggleOptions()}),u(2,$s,3,0,"svg",2)(3,Hs,2,0,"svg",2)(4,js,4,0,"svg",2),i(5,"span",3),r(6),t(),g(7,"i",4),t(),i(8,"div",5),u(9,qs,5,7,"button",6),t()()),e&2&&(o(),vt("aria-label",s.getAriaLabel())("aria-expanded",s.showOptions),o(),m("ngIf",s.currentTheme==="light"),o(),m("ngIf",s.currentTheme==="dark"),o(),m("ngIf",s.currentTheme==="auto"),o(2),p(s.getThemeLabel()),o(),N("rotated",s.showOptions),o(),N("show",s.showOptions),o(),m("ngForOf",s.themeOptions))},dependencies:[X,ie,Q],styles:[".theme-toggle-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.theme-toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:transparent;border:2px solid var(--bs-border-color);border-radius:8px;padding:.5rem 1rem;color:var(--bs-body-color);cursor:pointer;transition:all .2s ease;font-size:.875rem;font-weight:500;min-width:100px}.theme-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--bs-secondary-bg);border-color:var(--bs-primary);transform:translateY(-1px)}.theme-toggle-btn[_ngcontent-%COMP%]:focus{outline:2px solid var(--bs-primary);outline-offset:2px}.dropdown-arrow[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .2s ease}.dropdown-arrow.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.theme-icon[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}.theme-label[_ngcontent-%COMP%]{font-size:.875rem}.theme-options[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:var(--bs-body-bg);border:2px solid var(--bs-border-color);border-radius:8px;box-shadow:0 8px 25px #00000026;z-index:1000;min-width:160px;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .2s ease;margin-top:.5rem}.theme-options.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.theme-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;width:100%;padding:.75rem 1rem;background:none;border:none;color:var(--bs-body-color);cursor:pointer;transition:background-color .2s ease;font-size:.875rem}.theme-option[_ngcontent-%COMP%]:hover{background:var(--bs-secondary-bg)}.theme-option[_ngcontent-%COMP%]:focus{outline:2px solid var(--bs-primary);outline-offset:-2px}.theme-option.active[_ngcontent-%COMP%]{background:var(--bs-primary-bg-subtle);color:var(--bs-primary)}.theme-check[_ngcontent-%COMP%]{margin-left:auto;font-size:.75rem}@media (max-width: 768px){.theme-toggle-btn[_ngcontent-%COMP%]{min-width:50px;padding:.375rem .75rem}.dropdown-arrow[_ngcontent-%COMP%]{display:none}}"]})};function Ks(n,a){n&1&&(i(0,"li",8)(1,"a",21),r(2,"Draft"),t()())}function Ys(n,a){n&1&&(i(0,"li",8)(1,"a",22)(2,"span",13),r(3,"HQ"),t(),i(4,"span",14),r(5,"Headquarters"),t()()())}function Qs(n,a){n&1&&(i(0,"li",8)(1,"a",23)(2,"span",13),r(3,"Progress"),t(),i(4,"span",14),r(5,"Progressions"),t()()())}function Xs(n,a){if(n&1&&(i(0,"option",29),r(1),t()),n&2){let e=a.$implicit;m("value",e),o(),p(e)}}function Zs(n,a){if(n&1){let e=M();i(0,"div",24)(1,"label",25),r(2,"View as:"),t(),i(3,"select",26),A("change",function(l){v(e);let d=c(2);return x(d.onRoleChange(l))}),i(4,"option",27),r(5,"Developer"),t(),u(6,Xs,2,2,"option",28),t()()}if(n&2){let e=c(2);o(6),m("ngForOf",e.allRoles)}}function Js(n,a){if(n&1){let e=M();i(0,"nav",1)(1,"div",2)(2,"a",3),r(3,"GOHLS"),t(),i(4,"button",4),g(5,"span",5),t(),i(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),r(10,"Dashboard"),t()(),i(11,"li",8)(12,"a",10),r(13,"Teams"),t()(),i(14,"li",8)(15,"a",11),r(16,"Games"),t()(),i(17,"li",8)(18,"a",12)(19,"span",13),r(20,"Stats"),t(),i(21,"span",14),r(22,"Stats and Standings"),t()()(),i(23,"li",8)(24,"a",15),r(25,"Player"),t()(),u(26,Ks,3,0,"li",16)(27,Ys,6,0,"li",16)(28,Qs,6,0,"li",16),t(),u(29,Zs,7,1,"div",17),i(30,"div",18),g(31,"app-theme-toggle"),i(32,"button",19),A("click",function(){v(e);let l=c();return x(l.logout())}),g(33,"i",20),i(34,"span",14),r(35,"Logout"),t()()()()()()}if(n&2){let e=c();o(26),m("ngIf",e.viewAsRoles.includes("developer")),o(),m("ngIf",e.viewAsRoles.includes("developer")||e.viewAsRoles.includes("commissioner")),o(),m("ngIf",e.canSeeProgression),o(),m("ngIf",e.isDeveloper)}}var _t=class n{constructor(a,e){this.authService=a;this.router=e}isDeveloper=!1;isLoggedIn=!1;viewAsRoles=[];allRoles=["viewer","commissioner","stats monkey","finance officer","progression tracker"];rolesSub;viewAsSub;userSub;allowedRolesForProgression=["developer","commissioner","progression tracker"];canSeeProgression=!1;ngOnInit(){this.userSub=this.authService.currentUser.subscribe(a=>{this.isLoggedIn=!!a}),this.rolesSub=this.authService.currentRoles.subscribe(a=>{this.isDeveloper=a.includes("developer")}),this.viewAsSub=this.authService.effectiveRoles.subscribe(a=>{this.viewAsRoles=a,this.canSeeProgression=a.some(e=>this.allowedRolesForProgression.includes(e))})}onRoleChange(a){let e=a.target.value;this.authService.setViewAsRole(e==="real"?null:e)}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}ngOnDestroy(){this.userSub?.unsubscribe(),this.rolesSub?.unsubscribe(),this.viewAsSub?.unsubscribe()}static \u0275fac=function(e){return new(e||n)(te(J),te(Z))};static \u0275cmp=H({type:n,selectors:[["app-navbar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-light bg-light",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["routerLink","/dashboard",1,"navbar-brand","fw-bold","fs-4"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/dashboard",1,"nav-link","px-2","py-2"],["routerLink","/teams",1,"nav-link","px-2","py-2"],["routerLink","/games",1,"nav-link","px-2","py-2"],["routerLink","/analytics",1,"nav-link","px-2","py-2"],[1,"d-lg-none"],[1,"d-none","d-lg-inline"],["routerLink","/player",1,"nav-link","px-2","py-2"],["class","nav-item",4,"ngIf"],["class","d-flex align-items-center me-2 mb-2 mb-lg-0",4,"ngIf"],[1,"d-flex","align-items-center","gap-2"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-sign-out-alt","d-lg-none"],["routerLink","/draft",1,"nav-link","px-2","py-2"],["routerLink","/headquarters",1,"nav-link","px-2","py-2"],["routerLink","/progression-tracker",1,"nav-link","px-2","py-2"],[1,"d-flex","align-items-center","me-2","mb-2","mb-lg-0"],[1,"me-2","mb-0","d-none","d-md-inline"],[1,"form-select","form-select-sm",3,"change"],["value","real"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,s){e&1&&u(0,Js,36,4,"nav",0),e&2&&m("ngIf",s.isLoggedIn)},dependencies:[X,ie,Q,ye,Ie,ht],styles:[".navbar[_ngcontent-%COMP%]{padding:.5rem 1rem}.navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem!important}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:.9rem;white-space:nowrap}.form-select-sm[_ngcontent-%COMP%]{font-size:.8rem;padding:.25rem .5rem}@media (max-width: 991.98px){.navbar-nav[_ngcontent-%COMP%]{text-align:center}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-bottom:.25rem}.navbar-collapse[_ngcontent-%COMP%]{margin-top:1rem}.btn-sm[_ngcontent-%COMP%]{padding:.375rem .75rem}}"]})};function el(n,a){n&1&&g(0,"app-navbar")}var yt=class n{showNavbar=!0;router=B(Z);title="GOHLS";constructor(){this.router.events.pipe(Ot(a=>a instanceof Yt)).subscribe(a=>{let e=["/login","/register","/forgot-password"];this.showNavbar=!e.includes(a.urlAfterRedirects)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(e,s){e&1&&(u(0,el,1,0,"app-navbar",0),g(1,"router-outlet")),e&2&&m("ngIf",s.showNavbar)},dependencies:[Xt,X,Q,_t],encapsulation:2})};Kt(yt,ji).catch(n=>console.error(n));
