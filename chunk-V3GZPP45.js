import{a as ce}from"./chunk-EUKHQLGO.js";import{$b as X,$c as le,Ba as B,Ea as p,Lb as K,Lc as ae,Mb as Y,Nc as se,Oc as R,Pa as d,Pb as z,Q as $,Qa as i,Qc as f,Ra as n,Rc as y,Sa as c,Sc as F,Ub as j,V as v,Vb as Q,W as _,Wb as q,Wc as oe,Xc as D,Ya as T,Yc as O,Za as b,Zb as J,Zc as H,_a as g,ab as N,ac as Z,bb as w,bc as ee,c as h,cc as te,db as o,dc as ie,eb as E,ec as ne,fb as u,gb as G,gc as re,ib as M,jb as A,kb as V,oa as U,ra as s}from"./chunk-JMQVBRUG.js";function ge(a,t){if(a&1){let e=T();i(0,"div",44)(1,"div",45)(2,"span",46),o(3),n()(),i(4,"button",47),b("click",function(){v(e);let l=g(2);return _(l.startEditingWeek())}),c(5,"i",48),n()()}if(a&2){let e=g(2);s(3),u("Week ",e.currentProgressionWeek)}}function pe(a,t){a&1&&c(0,"span",55)}function ue(a,t){a&1&&c(0,"i",56)}function fe(a,t){if(a&1){let e=T();i(0,"div",44)(1,"input",49),V("ngModelChange",function(l){v(e);let m=g(2);return A(m.tempProgressionWeek,l)||(m.tempProgressionWeek=l),_(l)}),n(),i(2,"button",50),b("click",function(){v(e);let l=g(2);return _(l.saveProgressionWeek())}),p(3,pe,1,0,"span",51)(4,ue,1,0,"i",52),n(),i(5,"button",53),b("click",function(){v(e);let l=g(2);return _(l.cancelEditingWeek())}),c(6,"i",54),n()()}if(a&2){let e=g(2);s(),M("ngModel",e.tempProgressionWeek),d("disabled",e.weekSaving),s(),d("disabled",e.weekSaving||e.tempProgressionWeek<1),s(),d("ngIf",e.weekSaving),s(),d("ngIf",!e.weekSaving),s(),d("disabled",e.weekSaving)}}function ve(a,t){if(a&1&&(i(0,"div",10)(1,"label",41),c(2,"i",42),o(3,"Current Progression Week "),n(),p(4,ge,6,1,"div",43)(5,fe,7,6,"div",43),n()),a&2){let e=g();s(4),d("ngIf",!e.isEditingWeek),s(),d("ngIf",e.isEditingWeek)}}function _e(a,t){if(a&1&&(i(0,"div",10)(1,"label",41),c(2,"i",42),o(3,"Current Progression Week "),n(),i(4,"div",45)(5,"span",46),o(6),n(),i(7,"small",57),c(8,"i",58),o(9,"Week management restricted to developers/commissioners "),n()()()),a&2){let e=g();s(6),u("Week ",e.currentProgressionWeek)}}function he(a,t){if(a&1){let e=T();i(0,"div",10)(1,"div",59)(2,"input",60),V("ngModelChange",function(l){v(e);let m=g();return A(m.progressionsOpen,l)||(m.progressionsOpen=l),_(l)}),b("change",function(){v(e);let l=g();return _(l.toggleProgressionsOpen())}),n(),i(3,"label",61),c(4,"i",62),o(5),n()()()}if(a&2){let e=g();s(2),M("ngModel",e.progressionsOpen),s(3),u(" Progressions ",e.progressionsOpen?"Open":"Closed"," ")}}function be(a,t){if(a&1&&(i(0,"div",10)(1,"label",41),c(2,"i",63),o(3,"Progression Status "),n(),i(4,"div",11),c(5,"div",12),i(6,"span",13),o(7),n()()()),a&2){let e=g();s(5),w("processed",e.progressionsOpen)("na",!e.progressionsOpen),s(),w("bg-success",e.progressionsOpen)("bg-secondary",!e.progressionsOpen),s(),u(" ",e.progressionsOpen?"OPEN":"CLOSED"," ")}}function xe(a,t){a&1&&(i(0,"div",64),c(1,"i",65),i(2,"strong"),o(3,"Note:"),n(),o(4," You can view and manage player progressions, but only developers and commissioners can change the current progression week and open/close submissions. "),n())}function ke(a,t){a&1&&(i(0,"span",66)(1,"small",67),c(2,"i",68),o(3,"Viewing historical data "),n()())}function ye(a,t){if(a&1&&(i(0,"option",69),o(1),n()),a&2){let e=t.$implicit;d("value",e.id),s(),E(e.name)}}function Pe(a,t){a&1&&(i(0,"div",70)(1,"div",71)(2,"span",72),o(3,"Loading..."),n()(),i(4,"span",67),o(5,"Loading roster..."),n()())}function we(a,t){if(a&1&&c(0,"img",82),a&2){let e=g(2);d("src",e.selectedTeam.logoUrl,U)}}function Se(a,t){a&1&&(i(0,"span",83),o(1," Historical "),n())}function Te(a,t){a&1&&(i(0,"span",84),o(1," Current "),n())}function Ee(a,t){if(a&1&&(i(0,"div",73)(1,"div",74),p(2,we,1,1,"img",75),i(3,"div")(4,"h4",76),o(5),n(),i(6,"p",77),c(7,"i",28),o(8),i(9,"span",78),o(10,"\u2022"),n(),c(11,"i",79),o(12),p(13,Se,2,0,"span",80)(14,Te,2,0,"span",81),n()()()()),a&2){let e=g();s(2),d("ngIf",e.selectedTeam.logoUrl),s(3),E(e.selectedTeam.name),s(3),u("",e.roster.length," players "),s(4),u("Viewing Week ",e.viewingWeek," "),s(),d("ngIf",e.viewingWeek!==e.currentProgressionWeek),s(),d("ngIf",e.viewingWeek===e.currentProgressionWeek)}}function Oe(a,t){if(a&1){let e=T();i(0,"button",110),b("click",function(){v(e);let l=g().$implicit,m=g(2);return _(m.openOverallModal(l))}),c(1,"i",48),n()}}function Ce(a,t){if(a&1&&(i(0,"span",111),c(1,"i",112),o(2),n()),a&2){let e=g().$implicit;s(2),u("",e.progression," ")}}function Ie(a,t){a&1&&(i(0,"span",67),c(1,"i",113),o(2,"Not submitted "),n())}function We(a,t){if(a&1){let e=T();i(0,"tr")(1,"td")(2,"div",97),c(3,"div",98),i(4,"strong"),o(5),n()()(),i(6,"td")(7,"span",99),o(8),n()(),i(9,"td")(10,"span",100),o(11),n()(),i(12,"td")(13,"div",44)(14,"span",13),o(15),n(),p(16,Oe,2,0,"button",101),n()(),i(17,"td"),p(18,Ce,3,1,"span",102)(19,Ie,3,0,"span",103),n(),i(20,"td")(21,"span",13),o(22),n()(),i(23,"td")(24,"div",104)(25,"button",105),b("click",function(){let l=v(e).$implicit,m=g(2);return _(m.markAsProcessed(l.id,l.progressionDocId))}),c(26,"i",56),n(),i(27,"button",106),b("click",function(){let l=v(e).$implicit,m=g(2);return _(m.showAttributes(l.id,l.progression))}),c(28,"i",107),n(),i(29,"button",108),b("click",function(){let l=v(e).$implicit,m=g(2);return _(m.undoProcessed(l.id,l.progressionDocId))}),c(30,"i",109),n()()()()}if(a&2){let e=t.$implicit,r=g(2);w("status-processed",e.status==="processed")("status-pending",e.status==="pending")("status-na",e.status==="N/A"),s(3),w("processed",e.status==="processed")("pending",e.status==="pending")("na",e.status==="N/A"),s(2),E(e.name),s(3),u("#",e.number),s(3),E(e.position),s(3),N("background-color",r.getOverallColor(e.overall))("color",e.overall>=75?"white":"black"),s(),u(" ",e.overall," "),s(),d("ngIf",r.canManageOverall),s(2),d("ngIf",e.progression!=="Not submitted"),s(),d("ngIf",e.progression==="Not submitted"),s(2),w("bg-secondary",e.status==="N/A")("bg-warning",e.status==="pending")("bg-success",e.status==="processed"),s(),u(" ",e.status," "),s(3),d("disabled",e.status==="processed"||!e.progressionDocId),s(2),d("disabled",e.progression==="Not submitted"),s(2),d("disabled",e.status!=="processed")}}function Me(a,t){if(a&1&&(i(0,"div",85)(1,"div",4)(2,"h5",16),c(3,"i",86),o(4),n()(),i(5,"div",87)(6,"div",88)(7,"table",89)(8,"thead")(9,"tr")(10,"th"),c(11,"i",90),o(12,"Player Name"),n(),i(13,"th"),c(14,"i",91),o(15,"Number"),n(),i(16,"th"),c(17,"i",92),o(18,"Position"),n(),i(19,"th"),c(20,"i",93),o(21,"Overall"),n(),i(22,"th"),c(23,"i",94),o(24,"Training Program"),n(),i(25,"th"),c(26,"i",63),o(27,"Status"),n(),i(28,"th"),c(29,"i",95),o(30,"Actions"),n()()(),i(31,"tbody"),p(32,We,31,33,"tr",96),n()()()()()),a&2){let e=g();s(4),u("Player Progression Management - Week ",e.viewingWeek," "),s(28),d("ngForOf",e.roster)}}function Ae(a,t){if(a&1&&(i(0,"th",121),o(1),n()),a&2){let e=t.$implicit;s(),E(e)}}function Ve(a,t){a&1&&(i(0,"span",120),o(1," \u2191 "),n())}function Re(a,t){if(a&1&&(i(0,"td",121),p(1,Ve,2,0,"span",122),o(2),n()),a&2){let e=t.$implicit,r=g(2);w("text-success",r.affectedAttributes.includes(e))("fw-bold",r.affectedAttributes.includes(e)),s(),d("ngIf",r.affectedAttributes.includes(e)),s(),u(" ",r.selectedPlayerAttributes[e]!==void 0?r.selectedPlayerAttributes[e]:"-"," ")}}function De(a,t){if(a&1&&(i(0,"div",114)(1,"div",4)(2,"h5",16),c(3,"i",115),o(4),n()(),i(5,"div",87)(6,"div",88)(7,"table",116)(8,"thead")(9,"tr"),p(10,Ae,2,1,"th",117),n()(),i(11,"tbody")(12,"tr"),p(13,Re,3,6,"td",118),n()()()(),i(14,"div",119)(15,"small",67),c(16,"i",24),i(17,"span",120),o(18,"\u2191"),n(),o(19," Highlighted attributes will be affected by the selected training program "),n()()()()),a&2){let e=g();s(4),u(" Player Attributes: ",e.getPlayerNameById(e.showAttributesPlayerId)," "),s(6),d("ngForOf",e.attributeDisplayOrder),s(3),d("ngForOf",e.attributeDisplayOrder)}}function Ne(a,t){a&1&&(i(0,"div",123)(1,"div",124),c(2,"i",125),i(3,"h5",67),o(4,"No Players Found"),n(),i(5,"p",67),o(6,"This team doesn't have any players in their roster yet."),n()()())}function Fe(a,t){a&1&&(i(0,"div",123)(1,"div",124),c(2,"i",126),i(3,"h5",67),o(4,"Select a Team"),n(),i(5,"p",67),o(6,"Choose a team from the dropdown above to manage player progressions."),n()()())}function Le(a,t){if(a&1&&(i(0,"div",142),o(1),n()),a&2){let e=g(2);s(),E(e.overallError)}}function $e(a,t){if(a&1&&(i(0,"div",143),o(1),n()),a&2){let e=g(2);s(),E(e.overallSuccess)}}function Ge(a,t){if(a&1){let e=T();i(0,"div")(1,"div",144)(2,"h6"),o(3),n(),i(4,"p",77),o(5),n()(),i(6,"div",144)(7,"label",41),c(8,"i",93),o(9,"Current Overall Rating "),n(),i(10,"div",44)(11,"span",145),o(12),n(),i(13,"span",67),o(14,"\u2192"),n(),i(15,"span",145),o(16),n()()(),i(17,"div",144)(18,"label",146),c(19,"i",147),o(20,"New Overall Rating (40-99) "),n(),i(21,"input",148),V("ngModelChange",function(l){v(e);let m=g(2);return A(m.newOverallValue,l)||(m.newOverallValue=l),_(l)}),n(),i(22,"div",149),o(23," Overall rating must be between 40 and 99. This change will be applied immediately. "),n()(),i(24,"div",150),c(25,"i",65),i(26,"strong"),o(27,"Note:"),n(),o(28," This will manually adjust the player's overall rating. The change will be applied immediately and visible to the player. "),n()()}if(a&2){let e=g(2);s(3),u("Player: ",e.selectedPlayerForOverall.name),s(2),G(" ",e.selectedPlayerForOverall.position," \u2022 #",e.selectedPlayerForOverall.number," "),s(6),N("background-color",e.getOverallColor(e.selectedPlayerForOverall.overall))("color",e.selectedPlayerForOverall.overall>=75?"white":"black"),s(),u(" ",e.selectedPlayerForOverall.overall," "),s(3),N("background-color",e.getOverallColor(e.newOverallValue))("color",e.newOverallValue>=75?"white":"black"),s(),u(" ",e.newOverallValue," "),s(5),M("ngModel",e.newOverallValue),d("disabled",e.overallSaving)}}function He(a,t){a&1&&c(0,"span",55)}function Ue(a,t){a&1&&c(0,"i",151)}function Be(a,t){if(a&1){let e=T();i(0,"div",127)(1,"div",128)(2,"div",129)(3,"div",130)(4,"h5",131),c(5,"i",132),o(6,"Edit Overall Rating "),n(),i(7,"button",133),b("click",function(){v(e);let l=g();return _(l.closeOverallModal())}),n()(),i(8,"div",134),p(9,Le,2,1,"div",135)(10,$e,2,1,"div",136)(11,Ge,29,15,"div",137),n(),i(12,"div",138)(13,"button",139),b("click",function(){v(e);let l=g();return _(l.closeOverallModal())}),o(14,"Cancel"),n(),i(15,"button",140),b("click",function(){v(e);let l=g();return _(l.saveOverallAttribute())}),p(16,He,1,0,"span",51)(17,Ue,1,0,"i",141),o(18,"Update Overall Rating "),n()()()()()}if(a&2){let e=g();s(9),d("ngIf",e.overallError),s(),d("ngIf",e.overallSuccess),s(),d("ngIf",e.selectedPlayerForOverall),s(4),d("disabled",e.overallSaving||e.newOverallValue<40||e.newOverallValue>99),s(),d("ngIf",e.overallSaving),s(),d("ngIf",!e.overallSaving)}}var de=class a{firestore=$(ae);authService=$(le);teams=[];selectedTeamId="";roster=[];loading=!1;canManageWeeks=!1;canManageOverall=!1;currentProgressionWeek=1;tempProgressionWeek=1;progressionsOpen=!0;isEditingWeek=!1;weekSaving=!1;viewingWeek=1;currentSeason=new Date().getFullYear();showOverallModal=!1;selectedPlayerForOverall=null;newOverallValue=50;overallSaving=!1;overallError="";overallSuccess="";trainingMap={"Speed Skating":["SPEED","ACCEL","AGILITY"],"Distance Skating":["ENDUR","BALANCE","DRBLTY"],"Stick Handling":["PK CTRL","DEKE","HND EYE"],MMA:["BODY CHK","STRENGTH","AGGRE","FIGHTING"],Marksmanship:["WRI PWR","SLAP PWR","PASSING"],"Hit the Targets":["WRI ACC","SLAP ACC","POISE"],"Study Film":["OFF AWR","DEF AWR","DISCIP"],"Special Teams":["STK CHK","SHT BLK","FACEOFF"],"Shots High":["GLV HIGH","STK HIGH","VISION"],"Shots Low":["GLV LOW","STK LOW","5 HOLE"],"Side to Sides":["SPEED","AGILITY","POISE"],"Puck Skills":["PK CTRL","PASSING","PK PL FRQ"],"Laps in Pads":["ENDUR","DRBLTY","AGGRE"],Positioning:["BRK AWAY","ANGLES"],"Under Pressure":["RBD CTRL","RECOV"]};conferences=[{name:"Mr. Hockey Conference",divisions:["Europe Division","Great Lakes Division","Atlantic Division"]},{name:"The Rocket Conference",divisions:["Northwest Division","Pacific Division","South Division"]}];showAddTeamModal=!1;selectedConference="";selectedDivision="";newTeam={city:"",mascot:"",logoUrl:""};ngOnInit(){return h(this,null,function*(){this.authService.effectiveRoles.subscribe(e=>{this.canManageWeeks=e.some(r=>["developer","commissioner"].includes(r)),this.canManageOverall=e.some(r=>["developer","commissioner","progression tracker"].includes(r))}),yield this.loadProgressionSettings(),this.viewingWeek=this.currentProgressionWeek;let t=yield F(R(this.firestore,"teams"));this.teams=t.docs.map(e=>{let r=e.data(),l=r.name||`${r.city||""} ${r.mascot||""}`.trim()||"Unnamed";return{id:e.id,name:l,logoUrl:r.logoUrl||""}})})}get selectedTeam(){return this.teams.find(t=>t.id===this.selectedTeamId)}loadRoster(){return h(this,null,function*(){if(!this.selectedTeamId){this.roster=[];return}this.loading=!0,this.roster=[];let t=R(this.firestore,`teams/${this.selectedTeamId}/roster`),r=(yield F(t)).docs;for(let l of r){let m=l.data(),x=oe(R(this.firestore,`players/${l.id}/progressions`),H("week","==",this.viewingWeek),H("season","==",this.currentSeason)),P=yield F(x),k=P.docs[0]?.data(),C=f(this.firestore,`players/${l.id}`),S=yield y(C),I=S.exists()?S.data():{},W=f(this.firestore,`players/${l.id}/meta/attributes`),L=yield y(W);L.exists()||(yield D(W,ce(m.position)));let me=(L.exists()?L.data():{}).OVERALL||50;this.roster.push({id:l.id,name:`${m.firstName} ${m.lastName}`,number:m.jerseyNumber,position:m.position,age:I.age||19,progression:k?.training||"Not submitted",status:k?.status||"N/A",progressionDocId:P.docs[0]?.id||null,overall:me})}this.loading=!1})}onViewingWeekChange(){return h(this,null,function*(){console.log(`\u{1F4C5} Viewing week changed to: ${this.viewingWeek}`),this.selectedTeamId&&(yield this.loadRoster())})}startEditingWeek(){this.canManageWeeks&&(this.tempProgressionWeek=this.currentProgressionWeek,this.isEditingWeek=!0)}cancelEditingWeek(){this.isEditingWeek=!1,this.tempProgressionWeek=this.currentProgressionWeek}saveProgressionWeek(){return h(this,null,function*(){if(!(!this.canManageWeeks||this.weekSaving)){if(this.tempProgressionWeek<1||this.tempProgressionWeek>100){alert("Week number must be between 1 and 100");return}this.weekSaving=!0;try{let t=f(this.firestore,"progressionSettings/config"),e=this.currentProgressionWeek;yield D(t,{week:this.tempProgressionWeek,open:this.progressionsOpen},{merge:!0}),this.currentProgressionWeek=this.tempProgressionWeek,this.isEditingWeek=!1,e!==this.currentProgressionWeek&&(console.log(`\u{1F4C5} Current progression week changed from ${e} to ${this.currentProgressionWeek}`),window.dispatchEvent(new CustomEvent("weekChanged",{detail:{previousWeek:e,newWeek:this.currentProgressionWeek}})),this.viewingWeek=this.currentProgressionWeek,this.selectedTeamId&&(yield this.loadRoster())),console.log(`\u2705 Progression week updated to ${this.currentProgressionWeek}`)}catch(t){console.error("Error updating progression week:",t),alert("Failed to update progression week. Please try again.")}finally{this.weekSaving=!1}}})}toggleProgressionsOpen(){return h(this,null,function*(){if(this.canManageWeeks)try{let t=f(this.firestore,"progressionSettings/config");yield D(t,{week:this.currentProgressionWeek,open:this.progressionsOpen},{merge:!0}),console.log(`\u2705 Progressions ${this.progressionsOpen?"opened":"closed"} for week ${this.currentProgressionWeek}`)}catch(t){console.error("Error updating progression status:",t),alert("Failed to update progression status. Please try again.")}})}openOverallModal(t){this.canManageOverall&&(this.selectedPlayerForOverall=t,this.newOverallValue=t.overall||50,this.showOverallModal=!0,this.overallError="",this.overallSuccess="")}closeOverallModal(){this.showOverallModal=!1,this.selectedPlayerForOverall=null,this.newOverallValue=50,this.overallError="",this.overallSuccess=""}saveOverallAttribute(){return h(this,null,function*(){if(!(!this.selectedPlayerForOverall||this.overallSaving)){if(this.newOverallValue<40||this.newOverallValue>99){this.overallError="Overall rating must be between 40 and 99";return}this.overallSaving=!0,this.overallError="",this.overallSuccess="";try{let t=this.selectedPlayerForOverall.id,e=f(this.firestore,`players/${t}/meta/attributes`);yield O(e,{OVERALL:this.newOverallValue});let r=this.roster.findIndex(l=>l.id===t);r!==-1&&(this.roster[r].overall=this.newOverallValue),this.overallSuccess=`Overall rating updated to ${this.newOverallValue} successfully!`,setTimeout(()=>{this.closeOverallModal()},1500),console.log(`\u2705 Overall rating updated for ${this.selectedPlayerForOverall.name}: ${this.newOverallValue}`)}catch(t){console.error("Error updating overall rating:",t),this.overallError="Failed to update overall rating. Please try again."}finally{this.overallSaving=!1}}})}getOverallColor(t){let r=(Math.max(50,Math.min(99,t))-50)/49,l=Math.round(220-186*r),m=Math.round(38+159*r),x=Math.round(38+56*r);return`rgb(${l}, ${m}, ${x})`}getAttributeDelta(t,e){return t<=26?e<=5?3:2:t<=29||t===30?1:t===31?-1:t===32||t===33?-2:-3}applyProgression(t,e,r,l){return h(this,null,function*(){let m=f(this.firestore,`players/${t}/meta/attributes`),x=yield y(m);if(!x.exists())return;let P=x.data(),k=this.trainingMap[e];if(!k)return;let C=this.getAttributeDelta(r,l),S={};for(let I of k){let W=P[I]||0;S[I]=Math.max(40,Math.min(99,W+C))}yield O(m,S)})}undoProgression(t,e,r,l){return h(this,null,function*(){let m=f(this.firestore,`players/${t}/meta/attributes`),x=yield y(m);if(!x.exists())return;let P=x.data(),k=this.trainingMap[e];if(!k)return;let C=this.getAttributeDelta(r,l),S={};for(let I of k){let W=P[I]||0;S[I]=Math.max(40,Math.min(99,W-C))}yield O(m,S)})}getAffectedAttributes(t){return this.trainingMap[t]||[]}markAsProcessed(t,e){return h(this,null,function*(){if(!this.selectedTeamId||!e)return;let r=f(this.firestore,`players/${t}/progressions/${e}`);yield O(r,{status:"processed"});let l=f(this.firestore,`teams/${this.selectedTeamId}/roster/${t}/progression/${e}`);try{yield O(l,{status:"processed"})}catch{console.log("Team progression record not found, skipping update")}let x=(yield y(r)).data()?.training,k=(yield y(f(this.firestore,`players/${t}`))).data()?.age||19;yield this.applyProgression(t,x,k,this.viewingWeek),yield this.loadRoster()})}undoProcessed(t,e){return h(this,null,function*(){if(!this.selectedTeamId||!e)return;let r=f(this.firestore,`players/${t}/progressions/${e}`),m=(yield y(r)).data()?.training,P=(yield y(f(this.firestore,`players/${t}`))).data()?.age||19;yield this.undoProgression(t,m,P,this.viewingWeek),yield O(r,{status:"pending"});let k=f(this.firestore,`teams/${this.selectedTeamId}/roster/${t}/progression/${e}`);try{yield O(k,{status:"pending"})}catch{console.log("Team progression record not found, skipping update")}yield this.loadRoster()})}selectedPlayerAttributes={};affectedAttributes=[];showAttributesPlayerId=null;objectKeys=Object.keys;showAttributes(t,e){return h(this,null,function*(){if(this.showAttributesPlayerId===t){this.showAttributesPlayerId=null,this.selectedPlayerAttributes={},this.affectedAttributes=[];return}this.showAttributesPlayerId=t;let r=f(this.firestore,`players/${t}/meta/attributes`),l=yield y(r);this.selectedPlayerAttributes=l.exists()?l.data():{},this.affectedAttributes=this.getAffectedAttributes(e)})}attributeDisplayOrder=["SPEED","BODY CHK","ENDUR","PK CTRL","PASSING","SHT/PSS","SLAP PWR","SLAP ACC","WRI PWR","WRI ACC","AGILITY","STRENGTH","ACCEL","BALANCE","FACEOFF","DRBLTY","DEKE","AGGRE","POISE","HND EYE","SHT BLK","OFF AWR","DEF AWR","DISCIP","FIGHTING","STK CHK","OVERALL"];getPlayerNameById(t){let e=this.roster.find(r=>r.id===t);return e?e.name:"Player"}loadProgressionSettings(){return h(this,null,function*(){let t=f(this.firestore,"progressionSettings/config"),e=yield y(t);if(e.exists()){let r=e.data();this.currentProgressionWeek=r.week??1,this.tempProgressionWeek=this.currentProgressionWeek,this.progressionsOpen=r.open??!0}else this.currentProgressionWeek=1,this.tempProgressionWeek=1,this.progressionsOpen=!0,yield D(t,{week:this.currentProgressionWeek,open:this.progressionsOpen})})}openAddTeamModal(t,e){this.selectedConference=t,this.selectedDivision=e,this.newTeam={city:"",mascot:"",logoUrl:""},this.showAddTeamModal=!0}addTeam(){return h(this,null,function*(){let t=`${this.newTeam.city} ${this.newTeam.mascot}`,e={city:this.newTeam.city,mascot:this.newTeam.mascot,logoUrl:this.newTeam.logoUrl,name:t,conference:this.selectedConference,division:this.selectedDivision},r=yield se(R(this.firestore,"teams"),e);this.teams.push({id:r.id,name:t,logoUrl:this.newTeam.logoUrl}),this.showAddTeamModal=!1})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=B({type:a,selectors:[["app-progression-tracker"]],decls:64,vars:27,consts:[[1,"container","mt-4"],[1,"page-title"],[1,"fas","fa-chart-line","me-2"],[1,"card","settings-card","mb-4"],[1,"card-header"],[1,"settings-icon"],[1,"fas","fa-cog"],[1,"card-body"],[1,"row","align-items-end"],["class","col-md-4",4,"ngIf"],[1,"col-md-4"],[1,"status-indicator"],[1,"status-dot"],[1,"badge"],["class","alert alert-info mt-3",4,"ngIf"],[1,"card","management-card","mb-4"],[1,"mb-0"],[1,"fas","fa-eye","me-1"],[1,"row","align-items-center"],[1,"col-md-6"],["for","viewingWeekSelect",1,"form-label"],[1,"fas","fa-search","me-1"],["type","number","id","viewingWeekSelect","min","1","max","100","placeholder","Enter week number",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"alert","alert-info","mb-0"],[1,"fas","fa-info-circle","me-1"],["class","d-block mt-1",4,"ngIf"],[1,"section-divider"],[1,"card","team-selection-card","mb-4"],[1,"fas","fa-users","me-1"],[1,"col-md-8"],["for","teamSelect",1,"form-label"],["id","teamSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","text-end"],["class","d-flex align-items-center justify-content-end",4,"ngIf"],["class","team-info",4,"ngIf"],["class","card roster-card",4,"ngIf"],["class","card mt-4",4,"ngIf"],["class","card",4,"ngIf"],["class","modal fade show","tabindex","-1","style","display: block; background: rgba(0,0,0,0.5);",4,"ngIf"],[1,"form-label"],[1,"fas","fa-calendar-week","me-1"],["class","d-flex align-items-center gap-2",4,"ngIf"],[1,"d-flex","align-items-center","gap-2"],[1,"week-display"],[1,"badge","bg-primary","fs-6","px-3","py-2"],["title","Edit week number",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"fas","fa-edit"],["type","number","min","1","max","100",1,"form-control","form-control-sm",2,"width","80px",3,"ngModelChange","ngModel","disabled"],["title","Save week number",1,"btn","btn-success","btn-sm",3,"click","disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","fas fa-check",4,"ngIf"],["title","Cancel editing",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"fas","fa-times"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"fas","fa-check"],[1,"d-block","text-muted","mt-1"],[1,"fas","fa-lock","me-1"],[1,"form-check","form-switch"],["type","checkbox","id","progressionToggle",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","progressionToggle",1,"form-check-label"],[1,"fas","fa-toggle-on","me-1"],[1,"fas","fa-flag","me-1"],[1,"alert","alert-info","mt-3"],[1,"fas","fa-info-circle","me-2"],[1,"d-block","mt-1"],[1,"text-muted"],[1,"fas","fa-history","me-1"],[3,"value"],[1,"d-flex","align-items-center","justify-content-end"],["role","status",1,"spinner-border","me-2"],[1,"visually-hidden"],[1,"team-info"],[1,"d-flex","align-items-center","gap-3"],["alt","Team Logo","width","60","height","60","class","team-logo",3,"src",4,"ngIf"],[1,"team-name","mb-1"],[1,"text-muted","mb-0"],[1,"mx-2"],[1,"fas","fa-calendar","me-1"],["class","badge bg-warning text-dark ms-2",4,"ngIf"],["class","badge bg-info ms-2",4,"ngIf"],["alt","Team Logo","width","60","height","60",1,"team-logo",3,"src"],[1,"badge","bg-warning","text-dark","ms-2"],[1,"badge","bg-info","ms-2"],[1,"card","roster-card"],[1,"fas","fa-clipboard-list","me-1"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"fas","fa-user","me-1"],[1,"fas","fa-hashtag","me-1"],[1,"fas","fa-map-marker-alt","me-1"],[1,"fas","fa-star","me-1"],[1,"fas","fa-dumbbell","me-1"],[1,"fas","fa-tools","me-1"],[3,"status-processed","status-pending","status-na",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"status-dot","me-2"],[1,"badge","bg-light"],[1,"badge","bg-primary"],["class","btn btn-outline-secondary btn-sm","title","Edit overall rating",3,"click",4,"ngIf"],["class","text-success",4,"ngIf"],["class","text-muted",4,"ngIf"],["role","group",1,"btn-group"],["title","Mark as processed",1,"btn","btn-sm","btn-success",3,"click","disabled"],["title","View player attributes",1,"btn","btn-sm","btn-outline-info",3,"click","disabled"],[1,"fas","fa-eye"],["title","Undo processing",1,"btn","btn-sm","btn-outline-danger",3,"click","disabled"],[1,"fas","fa-undo"],["title","Edit overall rating",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"text-success"],[1,"fas","fa-check-circle","me-1"],[1,"fas","fa-minus-circle","me-1"],[1,"card","mt-4"],[1,"fas","fa-chart-bar","me-1"],[1,"table","table-sm","mb-0"],["class","text-center",4,"ngFor","ngForOf"],["class","text-center",3,"text-success","fw-bold",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"badge","bg-success","me-1"],[1,"text-center"],["class","badge bg-success me-1",4,"ngIf"],[1,"card"],[1,"card-body","text-center","py-5"],[1,"fas","fa-users","fa-3x","text-muted","mb-3"],[1,"fas","fa-hand-pointer","fa-3x","text-muted","mb-3"],["tabindex","-1",1,"modal","fade","show",2,"display","block","background","rgba(0,0,0,0.5)"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-star","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","fas fa-save me-1",4,"ngIf"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"mb-3"],[1,"badge","fs-6","px-3","py-2"],["for","overallInput",1,"form-label"],[1,"fas","fa-edit","me-1"],["type","number","id","overallInput","min","40","max","99",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-text"],[1,"alert","alert-info"],[1,"fas","fa-save","me-1"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"h2",1),c(2,"i",2),o(3,"Progression Tracker "),n(),i(4,"div",3)(5,"div",4)(6,"h4")(7,"div",5),c(8,"i",6),n(),o(9," Current Progression Settings (What Players See) "),n()(),i(10,"div",7)(11,"div",8),p(12,ve,6,2,"div",9)(13,_e,10,1,"div",9)(14,he,6,2,"div",9)(15,be,8,9,"div",9),i(16,"div",10)(17,"div",11),c(18,"div",12),i(19,"span",13),o(20),n()()()(),p(21,xe,5,0,"div",14),n()(),i(22,"div",15)(23,"div",4)(24,"h5",16),c(25,"i",17),o(26,"Management View Settings "),n()(),i(27,"div",7)(28,"div",18)(29,"div",19)(30,"label",20),c(31,"i",21),o(32,"View Progressions for Week "),n(),i(33,"input",22),V("ngModelChange",function(m){return A(r.viewingWeek,m)||(r.viewingWeek=m),m}),b("change",function(){return r.onViewingWeekChange()}),n()(),i(34,"div",19)(35,"div",23),c(36,"i",24),i(37,"strong"),o(38,"Note:"),n(),o(39),p(40,ke,4,0,"span",25),n()()()()(),c(41,"hr",26),i(42,"div",27)(43,"div",4)(44,"h5",16),c(45,"i",28),o(46,"Team Selection "),n()(),i(47,"div",7)(48,"div",18)(49,"div",29)(50,"label",30),o(51,"Select Team to Manage"),n(),i(52,"select",31),V("ngModelChange",function(m){return A(r.selectedTeamId,m)||(r.selectedTeamId=m),m}),b("change",function(){return r.loadRoster()}),i(53,"option",32),o(54,"-- Choose a Team --"),n(),p(55,ye,2,2,"option",33),n()(),i(56,"div",34),p(57,Pe,6,0,"div",35),n()()()(),p(58,Ee,15,6,"div",36)(59,Me,33,2,"div",37)(60,De,20,3,"div",38)(61,Ne,7,0,"div",39)(62,Fe,7,0,"div",39),n(),p(63,Be,19,6,"div",40)),e&2&&(s(12),d("ngIf",r.canManageWeeks),s(),d("ngIf",!r.canManageWeeks),s(),d("ngIf",r.canManageWeeks),s(),d("ngIf",!r.canManageWeeks),s(3),w("processed",r.progressionsOpen)("na",!r.progressionsOpen),s(),w("bg-success",r.progressionsOpen)("bg-secondary",!r.progressionsOpen),s(),u(" ",r.progressionsOpen?"ACCEPTING SUBMISSIONS":"SUBMISSIONS CLOSED"," "),s(),d("ngIf",!r.canManageWeeks),s(12),M("ngModel",r.viewingWeek),s(6),G(" You are viewing Week ",r.viewingWeek," progressions. Players are currently on Week ",r.currentProgressionWeek,". "),s(),d("ngIf",r.viewingWeek!==r.currentProgressionWeek),s(12),M("ngModel",r.selectedTeamId),s(3),d("ngForOf",r.teams),s(2),d("ngIf",r.loading),s(),d("ngIf",r.selectedTeam),s(),d("ngIf",!r.loading&&r.roster.length>0),s(),d("ngIf",r.showAttributesPlayerId),s(),d("ngIf",!r.loading&&r.roster.length===0&&r.selectedTeamId),s(),d("ngIf",!r.selectedTeamId),s(),d("ngIf",r.showOverallModal))},dependencies:[z,K,Y,re,ee,te,Q,X,j,Z,q,ne,ie,J],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;background:#fff;min-height:100vh;padding:2rem 0}.page-title[_ngcontent-%COMP%]{color:#495057;font-weight:600;margin-bottom:2rem;font-size:1.75rem}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;box-shadow:0 2px 4px #0000000d;color:#495057;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border-bottom:1px solid #dee2e6;border-radius:8px 8px 0 0;padding:1rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem;background:#fff}.settings-card[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6}.team-info[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.25rem;border-radius:6px;margin-bottom:1.5rem;border-left:3px solid #6c757d}.table[_ngcontent-%COMP%]{margin-bottom:0;font-size:.9rem;color:#495057}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;font-weight:600;text-transform:uppercase;font-size:.8rem;padding:.75rem;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:middle;border-bottom:1px solid #dee2e6}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .6rem;border-radius:4px;font-weight:500}.btn[_ngcontent-%COMP%]{border-radius:4px;font-weight:500;padding:.375rem .75rem;font-size:.875rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #ced4da;padding:.5rem .75rem;font-size:.9rem}.status-dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;display:inline-block}.status-dot.processed[_ngcontent-%COMP%]{background:#28a745}.status-dot.pending[_ngcontent-%COMP%]{background:#ffc107}.status-dot.na[_ngcontent-%COMP%]{background:#6c757d}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem}.table[_ngcontent-%COMP%]{font-size:.8rem}}"]})};export{de as ProgressionTracker};
