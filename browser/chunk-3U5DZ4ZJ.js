var Ok=Object.defineProperty,xk=Object.defineProperties;var Fk=Object.getOwnPropertyDescriptors;var Ru=Object.getOwnPropertySymbols,Lk=Object.getPrototypeOf,jw=Object.prototype.hasOwnProperty,Bw=Object.prototype.propertyIsEnumerable,Vk=Reflect.get;var Uw=(t,e,n)=>e in t?Ok(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q=(t,e)=>{for(var n in e||={})jw.call(e,n)&&Uw(t,n,e[n]);if(Ru)for(var n of Ru(e))Bw.call(e,n)&&Uw(t,n,e[n]);return t},ce=(t,e)=>xk(t,Fk(e));var Nu=(t,e)=>{var n={};for(var r in t)jw.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ru)for(var r of Ru(t))e.indexOf(r)<0&&Bw.call(t,r)&&(n[r]=t[r]);return n};var $n=(t,e,n)=>Vk(Lk(t),n,e);var m=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});var sp;function Pu(){return sp}function fn(t){let e=sp;return sp=t,e}var $w=Symbol("NotFound");function ws(t){return t===$w||t?.name==="\u0275NotFound"}function Fu(t,e){return Object.is(t,e)}var it=null,ku=!1,op=1,Uk=null,st=Symbol("SIGNAL");function J(t){let e=it;return it=t,e}function Lu(){return it}var ui={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ts(t){if(ku)throw new Error("");if(it===null)return;it.consumerOnSignalRead(t);let e=it.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=it.recomputing;if(r&&(n=e!==void 0?e.nextProducer:it.producers,n!==void 0&&n.producer===t)){it.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===it&&(!r||Bk(i,it)))return;let s=bs(it),o={producer:t,consumer:it,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};it.producersTail=o,e!==void 0?e.nextProducer=o:it.producers=o,s&&qw(t,o)}function Hw(){op++}function Vu(t){if(!(bs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===op)){if(!t.producerMustRecompute(t)&&!pa(t)){xu(t);return}t.producerRecomputeValue(t),xu(t)}}function ap(t){if(t.consumers===void 0)return;let e=ku;ku=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||jk(r)}}finally{ku=e}}function cp(){return it?.consumerAllowSignalWrites!==!1}function jk(t){t.dirty=!0,ap(t),t.consumerMarkedDirty?.(t)}function xu(t){t.dirty=!1,t.lastCleanEpoch=op}function li(t){return t&&(t.producersTail=void 0,t.recomputing=!0),J(t)}function Ds(t,e){if(J(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(bs(t))do r=up(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function pa(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Vu(n),r!==n.version))return!0}return!1}function Uu(t){if(bs(t)){let e=t.producers;for(;e!==void 0;)e=up(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function qw(t,e){let n=t.consumersTail,r=bs(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)qw(i.producer,i)}function up(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!bs(e)){let s=e.producers;for(;s!==void 0;)s=up(s)}return n}function bs(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function ju(t){Uk?.(t)}function Bk(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Bu(t,e){let n=Object.create($k);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Vu(n),Ts(n),n.value===fa)throw n.error;return n.value};return r[st]=n,ju(n),r}var Mu=Symbol("UNSET"),Ou=Symbol("COMPUTING"),fa=Symbol("ERRORED"),$k=ce(q({},ui),{value:Mu,dirty:!0,error:null,equal:Fu,kind:"computed",producerMustRecompute(t){return t.value===Mu||t.value===Ou},producerRecomputeValue(t){if(t.value===Ou)throw new Error("");let e=t.value;t.value=Ou;let n=li(t),r,i=!1;try{r=t.computation(),J(null),i=e!==Mu&&e!==fa&&r!==fa&&t.equal(e,r)}catch(s){r=fa,t.error=s}finally{Ds(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Hk(){throw new Error}var Ww=Hk;function zw(t){Ww(t)}function lp(t){Ww=t}var qk=null;function dp(t,e){let n=Object.create($u);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Gw(n);return r[st]=n,ju(n),[r,o=>Cs(n,o),o=>hp(n,o)]}function Gw(t){return Ts(t),t.value}function Cs(t,e){cp()||zw(t),t.equal(t.value,e)||(t.value=e,Wk(t))}function hp(t,e){cp()||zw(t),Cs(t,e(t.value))}var $u=ce(q({},ui),{equal:Fu,value:void 0,kind:"signal"});function Wk(t){t.version++,Hw(),ap(t),qk?.(t)}function K(t){return typeof t=="function"}function As(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hu=As(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function di(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Oe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(s){e=s instanceof Hu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Kw(s)}catch(o){e=e??[],o instanceof Hu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Kw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&di(n,e)}remove(e){let{_finalizers:n}=this;n&&di(n,e),e instanceof t&&e._removeParent(this)}};Oe.EMPTY=(()=>{let t=new Oe;return t.closed=!0,t})();var fp=Oe.EMPTY;function qu(t){return t instanceof Oe||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function Kw(t){K(t)?t():t.unsubscribe()}var Wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ss={setTimeout(t,e,...n){let{delegate:r}=Ss;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ss;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wu(t){Ss.setTimeout(()=>{let{onUnhandledError:e}=Wt;if(e)e(t);else throw t})}function ga(){}var Yw=pp("C",void 0,void 0);function Qw(t){return pp("E",void 0,t)}function Jw(t){return pp("N",t,void 0)}function pp(t,e,n){return{kind:t,value:e,error:n}}var hi=null;function Rs(t){if(Wt.useDeprecatedSynchronousErrorHandling){let e=!hi;if(e&&(hi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=hi;if(hi=null,n)throw r}}else t()}function Zw(t){Wt.useDeprecatedSynchronousErrorHandling&&hi&&(hi.errorThrown=!0,hi.error=t)}var fi=class extends Oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qu(e)&&e.add(this)):this.destination=Kk}static create(e,n,r){return new Ns(e,n,r)}next(e){this.isStopped?mp(Jw(e),this):this._next(e)}error(e){this.isStopped?mp(Qw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?mp(Yw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},zk=Function.prototype.bind;function gp(t,e){return zk.call(t,e)}var yp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){zu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){zu(r)}else zu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){zu(n)}}},Ns=class extends fi{constructor(e,n,r){super();let i;if(K(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Wt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&gp(e.next,s),error:e.error&&gp(e.error,s),complete:e.complete&&gp(e.complete,s)}):i=e}this.destination=new yp(i)}};function zu(t){Wt.useDeprecatedSynchronousErrorHandling?Zw(t):Wu(t)}function Gk(t){throw t}function mp(t,e){let{onStoppedNotification:n}=Wt;n&&Ss.setTimeout(()=>n(t,e))}var Kk={closed:!0,next:ga,error:Gk,complete:ga};var Ps=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ct(t){return t}function Yk(...t){return _p(t)}function _p(t){return t.length===0?Ct:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=Jk(n)?n:new Ns(n,r,i);return Rs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Xw(r),new r((i,s)=>{let o=new Ns({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ps](){return this}pipe(...n){return _p(n)(this)}toPromise(n){return n=Xw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Xw(t){var e;return(e=t??Wt.Promise)!==null&&e!==void 0?e:Promise}function Qk(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function Jk(t){return t&&t instanceof fi||Qk(t)&&qu(t)}function vp(t){return K(t?.lift)}function ue(t){return e=>{if(vp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,r,i){return new Ip(t,e,n,r,i)}var Ip=class extends fi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ep(){return ue((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var wp=class extends te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oe;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oe.EMPTY)}return e}refCount(){return Ep()(this)}};var eT=As(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var zt=(()=>{class t extends te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new eT}next(n){Rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?fp:(this.currentObservers=null,s.push(n),new Oe(()=>{this.currentObservers=null,di(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new te;return n.source=this,n}}return t.create=(e,n)=>new Gu(e,n),t})(),Gu=class extends zt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:fp}};var Hn=class extends zt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Tp={now(){return(Tp.delegate||Date).now()},delegate:void 0};var Ku=class extends Oe{constructor(e,n){super()}schedule(e,n=0){return this}};var ma={setInterval(t,e,...n){let{delegate:r}=ma;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ma;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ks=class extends Ku{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ma.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ma.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,di(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ms=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ms.now=Tp.now;var Os=class extends Ms{constructor(e,n=Ms.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Dp=new Os(ks);var Yu=class extends ks{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Qu=class extends Os{};var bp=new Qu(Yu);var ya=new te(t=>t.complete());function tT(t){return t&&K(t.schedule)}function nT(t){return t[t.length-1]}function Ju(t){return K(nT(t))?t.pop():void 0}function yr(t){return tT(nT(t))?t.pop():void 0}function Cp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iT(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function rT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pi(t){return this instanceof pi?(this.v=t,this):new pi(t)}function sT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(A){return Promise.resolve(A).then(_,p)}}function a(_,A){r[_]&&(i[_]=function(N){return new Promise(function(P,x){s.push([_,N,P,x])>1||u(_,N)})},A&&(i[_]=A(i[_])))}function u(_,A){try{l(r[_](A))}catch(N){y(s[0][3],N)}}function l(_){_.value instanceof pi?Promise.resolve(_.value.v).then(h,p):y(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function y(_,A){_(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function oT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rT=="function"?rT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Zu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Xu(t){return K(t?.then)}function el(t){return K(t[Ps])}function tl(t){return Symbol.asyncIterator&&K(t?.[Symbol.asyncIterator])}function nl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Zk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rl=Zk();function il(t){return K(t?.[rl])}function sl(t){return sT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield pi(n.read());if(i)return yield pi(void 0);yield yield pi(r)}}finally{n.releaseLock()}})}function ol(t){return K(t?.getReader)}function xe(t){if(t instanceof te)return t;if(t!=null){if(el(t))return Xk(t);if(Zu(t))return eM(t);if(Xu(t))return tM(t);if(tl(t))return aT(t);if(il(t))return nM(t);if(ol(t))return rM(t)}throw nl(t)}function Xk(t){return new te(e=>{let n=t[Ps]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eM(t){return new te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function tM(t){return new te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wu)})}function nM(t){return new te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function aT(t){return new te(e=>{iM(t,e).catch(n=>e.error(n))})}function rM(t){return aT(sl(t))}function iM(t,e){var n,r,i,s;return iT(this,void 0,void 0,function*(){try{for(n=oT(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function _t(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function _r(t,e=0){return ue((n,r)=>{n.subscribe(se(r,i=>_t(r,t,()=>r.next(i),e),()=>_t(r,t,()=>r.complete(),e),i=>_t(r,t,()=>r.error(i),e)))})}function vr(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function cT(t,e){return xe(t).pipe(vr(e),_r(e))}function uT(t,e){return xe(t).pipe(vr(e),_r(e))}function lT(t,e){return new te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function dT(t,e){return new te(n=>{let r;return _t(n,e,()=>{r=t[rl](),_t(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>K(r?.return)&&r.return()})}function al(t,e){if(!t)throw new Error("Iterable cannot be null");return new te(n=>{_t(n,e,()=>{let r=t[Symbol.asyncIterator]();_t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function hT(t,e){return al(sl(t),e)}function fT(t,e){if(t!=null){if(el(t))return cT(t,e);if(Zu(t))return lT(t,e);if(Xu(t))return uT(t,e);if(tl(t))return al(t,e);if(il(t))return dT(t,e);if(ol(t))return hT(t,e)}throw nl(t)}function pn(t,e){return e?fT(t,e):xe(t)}function sM(...t){let e=yr(t);return pn(t,e)}function oM(t,e){let n=K(t)?t:()=>t,r=i=>i.error(n());return new te(e?i=>e.schedule(r,0,i):r)}function aM(t){return!!t&&(t instanceof te||K(t.lift)&&K(t.subscribe))}var gi=As(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Gt(t,e){return ue((n,r)=>{let i=0;n.subscribe(se(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:cM}=Array;function uM(t,e){return cM(e)?t(...e):t(e)}function cl(t){return Gt(e=>uM(t,e))}var{isArray:lM}=Array,{getPrototypeOf:dM,prototype:hM,keys:fM}=Object;function ul(t){if(t.length===1){let e=t[0];if(lM(e))return{args:e,keys:null};if(pM(e)){let n=fM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function pM(t){return t&&typeof t=="object"&&dM(t)===hM}function ll(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ap(...t){let e=yr(t),n=Ju(t),{args:r,keys:i}=ul(t);if(r.length===0)return pn([],e);let s=new te(gM(r,e,i?o=>ll(i,o):Ct));return n?s.pipe(cl(n)):s}function gM(t,e,n=Ct){return r=>{pT(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)pT(e,()=>{let l=pn(t[u],e),h=!1;l.subscribe(se(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function pT(t,e,n){t?_t(n,t,e):e()}function gT(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},_=N=>l<r?A(N):u.push(N),A=N=>{s&&e.next(N),l++;let P=!1;xe(n(N,h++)).subscribe(se(e,x=>{i?.(x),s?_(x):e.next(x)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;u.length&&l<r;){let x=u.shift();o?_t(e,o,()=>A(x)):A(x)}y()}catch(x){e.error(x)}}))};return t.subscribe(se(e,_,()=>{p=!0,y()})),()=>{a?.()}}function mi(t,e,n=1/0){return K(e)?mi((r,i)=>Gt((s,o)=>e(r,s,i,o))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>gT(r,i,t,n)))}function Sp(t=1/0){return mi(Ct,t)}function mT(){return Sp(1)}function dl(...t){return mT()(pn(t,yr(t)))}function mM(t){return new te(e=>{xe(t()).subscribe(e)})}function Rp(...t){let e=Ju(t),{args:n,keys:r}=ul(t),i=new te(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;xe(n[h]).subscribe(se(s,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?ll(r,a):a),s.complete())}))}});return e?i.pipe(cl(e)):i}function _a(t,e){return ue((n,r)=>{let i=0;n.subscribe(se(r,s=>t.call(e,s,i++)&&r.next(s)))})}function yT(t){return ue((e,n)=>{let r=null,i=!1,s;r=e.subscribe(se(n,void 0,void 0,o=>{s=xe(t(o,yT(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function _T(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(se(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function yM(t,e){return K(e)?mi(t,e,1):mi(t,1)}function va(t){return ue((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Np(t){return t<=0?()=>ya:ue((e,n)=>{let r=0;e.subscribe(se(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function hl(t=_M){return ue((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function _M(){return new gi}function vM(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function IM(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_a((i,s)=>t(i,s,r)):Ct,Np(1),n?va(e):hl(()=>new gi))}function Pp(t){return t<=0?()=>ya:ue((e,n)=>{let r=[];e.subscribe(se(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function EM(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_a((i,s)=>t(i,s,r)):Ct,Pp(1),n?va(e):hl(()=>new gi))}function wM(t,e){return ue(_T(t,e,arguments.length>=2,!0))}function TM(...t){let e=yr(t);return ue((n,r)=>{(e?dl(t,n,e):dl(t,n)).subscribe(r)})}function DM(t,e){return ue((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(se(r,u=>{i?.unsubscribe();let l=0,h=s++;xe(t(u,h)).subscribe(i=se(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function bM(t){return ue((e,n)=>{xe(t).subscribe(se(n,()=>n.complete(),ga)),!n.closed&&e.subscribe(n)})}function CM(t,e,n){let r=K(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(se(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ct}function vT(t){let e=J(null);try{return t()}finally{J(e)}}var yl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(Ei(e,n)),this.code=e}};function AM(t){return`NG0${Math.abs(t)}`}function Ei(t,e){return`${AM(t)}${e?": "+e:""}`}var gn=globalThis;function he(t){for(let e in t)if(t[e]===he)return e;throw Error("")}function wT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Wn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Wn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function _l(t,e){return t?e?`${t} ${e}`:t:e||""}var SM=he({__forward_ref__:he});function ot(t){return t.__forward_ref__=ot,t.toString=function(){return Wn(this())},t}function Qe(t){return qp(t)?t():t}function qp(t){return typeof t=="function"&&t.hasOwnProperty(SM)&&t.__forward_ref__===ot}function TT(t,e){t==null&&Wp(e,t,null,"!=")}function Wp(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function ae(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function wi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Da(t){return NM(t,vl)}function RM(t){return Da(t)!==null}function NM(t,e){return t.hasOwnProperty(e)&&t[e]||null}function PM(t){let e=t?.[vl]??null;return e||null}function Mp(t){return t&&t.hasOwnProperty(pl)?t[pl]:null}var vl=he({\u0275prov:he}),pl=he({\u0275inj:he}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ae({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zp(t){return t&&!!t.\u0275providers}var Gp=he({\u0275cmp:he}),Kp=he({\u0275dir:he}),Yp=he({\u0275pipe:he}),Qp=he({\u0275mod:he}),wa=he({\u0275fac:he}),Ti=he({__NG_ELEMENT_ID__:he}),IT=he({__NG_ENV_ID__:he});function Kt(t){return typeof t=="string"?t:t==null?"":String(t)}function gl(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Kt(t)}var Jp=he({ngErrorCode:he}),DT=he({ngErrorMessage:he}),Ea=he({ngTokenPath:he});function Zp(t,e){return bT("",-200,e)}function Il(t,e){throw new j(-201,!1)}function kM(t,e){t[Ea]??=[];let n=t[Ea],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(TT(e.provide,"Token with multi: true should have a provide property"),r=gl(e.provide)):r=gl(e),n[0]!==r&&t[Ea].unshift(r)}function MM(t,e){let n=t[Ea],r=t[Jp],i=t[DT]||t.message;return t.message=xM(i,r,n,e),t}function bT(t,e,n){let r=new j(e,t);return r[Jp]=e,r[DT]=t,n&&(r[Ea]=n),r}function OM(t){return t[Jp]}function xM(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let s=r?` Source: ${r}.`:"";return Ei(e,`${t}${s}${i}`)}var Op;function CT(){return Op}function gt(t){let e=Op;return Op=t,e}function Xp(t,e,n){let r=Da(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Il(t,"Injector")}var FM={},yi=FM,xp="__NG_DI_FLAG__",Fp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=_i(n)||0;try{return this.injector.get(e,r&8?null:yi,r)}catch(i){if(ws(i))return i;throw i}}};function LM(t,e=0){let n=Pu();if(n===void 0)throw new j(-203,!1);if(n===null)return Xp(t,void 0,e);{let r=VM(e),i=n.retrieve(t,r);if(ws(i)){if(r.optional)return null;throw i}return i}}function Ne(t,e=0){return(CT()||LM)(Qe(t),e)}function L(t,e){return Ne(t,_i(e))}function _i(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function VM(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Lp(t){let e=[];for(let n=0;n<t.length;n++){let r=Qe(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],u=UM(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(Ne(i,s))}else e.push(Ne(r))}return e}function eg(t,e){return t[xp]=e,t.prototype[xp]=e,t}function UM(t){return t[xp]}function Ir(t,e){let n=t.hasOwnProperty(wa);return n?t[wa]:null}function El(t,e){t.forEach(n=>Array.isArray(n)?El(n,e):e(n))}function tg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ba(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function AT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function wl(t,e,n){let r=Fs(t,e);return r>=0?t[r|1]=n:(r=~r,AT(t,r,e,n)),r}function Tl(t,e){let n=Fs(t,e);if(n>=0)return t[n|1]}function Fs(t,e){return jM(t,e,1)}function jM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Tr={},mt=[],Di=new $(""),ng=new $("",-1),rg=new $(""),Ta=class{get(e,n=yi){if(n===yi){let i=bT("",-201);throw i.name="\u0275NotFound",i}return n}};function ig(t){return t[Qp]||null}function Gn(t){return t[Gp]||null}function sg(t){return t[Kp]||null}function ST(t){return t[Yp]||null}function mn(t){return{\u0275providers:t}}function RT(...t){return{\u0275providers:og(!0,t),\u0275fromNgModule:!0}}function og(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return El(e,o=>{let a=o;ml(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&NT(i,s),n}function NT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ag(i,s=>{e(s,r)})}}function ml(t,e,n,r){if(t=Qe(t),!t)return!1;let i=null,s=Mp(t),o=!s&&Gn(t);if(!s&&!o){let u=t.ngModule;if(s=Mp(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)ml(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{El(s.imports,h=>{ml(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&NT(l,e)}if(!a){let l=Ir(i)||(()=>new i);e({provide:i,useFactory:l,deps:mt},i),e({provide:rg,useValue:i,multi:!0},i),e({provide:Di,useValue:()=>Ne(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;ag(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ag(t,e){for(let n of t)zp(n)&&(n=n.\u0275providers),Array.isArray(n)?ag(n,e):e(n)}var BM=he({provide:String,useValue:he});function PT(t){return t!==null&&typeof t=="object"&&BM in t}function $M(t){return!!(t&&t.useExisting)}function HM(t){return!!(t&&t.useFactory)}function vi(t){return typeof t=="function"}function kT(t){return!!t.useClass}var cg=new $(""),fl={},ET={},kp;function Ca(){return kp===void 0&&(kp=new Ta),kp}var vt=class{},Ii=class extends vt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Up(e,o=>this.processProvider(o)),this.records.set(ng,xs(void 0,this)),i.has("environment")&&this.records.set(vt,xs(void 0,this));let s=this.records.get(cg);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rg,mt,{self:!0}))}retrieve(e,n){let r=_i(n)||0;try{return this.get(e,yi,r)}catch(i){if(ws(i))return i;throw i}}destroy(){Ia(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return Ia(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ia(this);let n=fn(this),r=gt(void 0),i;try{return e()}finally{fn(n),gt(r)}}get(e,n=yi,r){if(Ia(this),e.hasOwnProperty(IT))return e[IT](this);let i=_i(r),s,o=fn(this),a=gt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=KM(e)&&Da(e);h&&this.injectableDefInScope(h)?l=xs(Vp(e),fl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Ca():this.parent;return n=i&8&&n===yi?null:n,u.get(e,n)}catch(u){let l=OM(u);throw l===-200||l===-201?new j(l,null):u}finally{gt(a),fn(o)}}resolveInjectorInitializers(){let e=J(null),n=fn(this),r=gt(void 0),i;try{let s=this.get(Di,mt,{self:!0});for(let o of s)o()}finally{fn(n),gt(r),J(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Wn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Qe(e);let n=vi(e)?e:Qe(e&&e.provide),r=WM(e);if(!vi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=xs(void 0,fl,!0),i.factory=()=>Lp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=J(null);try{if(n.value===ET)throw Zp(Wn(e));return n.value===fl&&(n.value=ET,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&GM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Qe(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Vp(t){let e=Da(t),n=e!==null?e.factory:Ir(t);if(n!==null)return n;if(t instanceof $)throw new j(204,!1);if(t instanceof Function)return qM(t);throw new j(204,!1)}function qM(t){if(t.length>0)throw new j(204,!1);let n=PM(t);return n!==null?()=>n.factory(t):()=>new t}function WM(t){if(PT(t))return xs(void 0,t.useValue);{let e=ug(t);return xs(e,fl)}}function ug(t,e,n){let r;if(vi(t)){let i=Qe(t);return Ir(i)||Vp(i)}else if(PT(t))r=()=>Qe(t.useValue);else if(HM(t))r=()=>t.useFactory(...Lp(t.deps||[]));else if($M(t))r=(i,s)=>Ne(Qe(t.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Qe(t&&(t.useClass||t.provide));if(zM(t))r=()=>new i(...Lp(t.deps));else return Ir(i)||Vp(i)}return r}function Ia(t){if(t.destroyed)throw new j(205,!1)}function xs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function zM(t){return!!t.deps}function GM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function KM(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Up(t,e){for(let n of t)Array.isArray(n)?Up(n,e):n&&zp(n)?Up(n.\u0275providers,e):e(n)}function Dr(t,e){let n;t instanceof Ii?(Ia(t),n=t):n=new Fp(t);let r,i=fn(n),s=gt(void 0);try{return e()}finally{fn(i),gt(s)}}function MT(){return CT()!==void 0||Pu()!=null}var Yt=0,W=1,z=2,Je=3,Ot=4,xt=5,Aa=6,Ls=7,at=8,bi=9,yn=10,be=11,Vs=12,lg=13,Ci=14,Ft=15,Ai=16,Si=17,Ri=18,Sa=19,dg=20,qn=21,Dl=22,Ra=23,At=24,Ni=25,He=26,OT=1;var br=7,Na=8,Pa=9,It=10;function _n(t){return Array.isArray(t)&&typeof t[OT]=="object"}function Qt(t){return Array.isArray(t)&&t[OT]===!0}function hg(t){return(t.flags&4)!==0}function Cr(t){return t.componentOffset>-1}function Us(t){return(t.flags&1)===1}function vn(t){return!!t.template}function js(t){return(t[z]&512)!==0}function Pi(t){return(t[z]&256)===256}var xT="svg",FT="math";function Lt(t){for(;Array.isArray(t);)t=t[Yt];return t}function fg(t,e){return Lt(e[t])}function Jt(t,e){return Lt(e[t.index])}function bl(t,e){return t.data[e]}function Cl(t,e){return t[e]}function pg(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Vt(t,e){let n=e[t];return _n(n)?n:n[Yt]}function Al(t){return(t[z]&128)===128}function LT(t){return Qt(t[Je])}function ki(t,e){return e==null?null:t[e]}function gg(t){t[Si]=0}function mg(t){t[z]&1024||(t[z]|=1024,Al(t)&&Bs(t))}function VT(t,e){for(;t>0;)e=e[Ci],t--;return e}function ka(t){return!!(t[z]&9216||t[At]?.dirty)}function Sl(t){t[yn].changeDetectionScheduler?.notify(8),t[z]&64&&(t[z]|=1024),ka(t)&&Bs(t)}function Bs(t){t[yn].changeDetectionScheduler?.notify(0);let e=Er(t);for(;e!==null&&!(e[z]&8192||(e[z]|=8192,!Al(e)));)e=Er(e)}function yg(t,e){if(Pi(t))throw new j(911,!1);t[qn]===null&&(t[qn]=[]),t[qn].push(e)}function UT(t,e){if(t[qn]===null)return;let n=t[qn].indexOf(e);n!==-1&&t[qn].splice(n,1)}function Er(t){let e=t[Je];return Qt(e)?e[Je]:e}function jT(t){return t[Ls]??=[]}function BT(t){return t.cleanup??=[]}var X={lFrame:nD(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Ma=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(Ma||{}),YM=0,jp=!1;function $T(){return X.lFrame.elementDepthCount}function HT(){X.lFrame.elementDepthCount++}function _g(){X.lFrame.elementDepthCount--}function Rl(){return X.bindingsEnabled}function qT(){return X.skipHydrationRootTNode!==null}function vg(t){return X.skipHydrationRootTNode===t}function Ig(){X.skipHydrationRootTNode=null}function ne(){return X.lFrame.lView}function ct(){return X.lFrame.tView}function WT(t){return X.lFrame.contextLView=t,t[at]}function zT(t){return X.lFrame.contextLView=null,t}function qe(){let t=Eg();for(;t!==null&&t.type===64;)t=t.parent;return t}function Eg(){return X.lFrame.currentTNode}function GT(){let t=X.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $s(t,e){let n=X.lFrame;n.currentTNode=t,n.isParent=e}function wg(){return X.lFrame.isParent}function KT(){X.lFrame.isParent=!1}function YT(){return X.lFrame.contextLView}function Tg(t){Wp("Must never be called in production mode"),YM=t}function Dg(){return jp}function bg(t){let e=jp;return jp=t,e}function Oa(){let t=X.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Cg(){return X.lFrame.bindingIndex}function QT(t){return X.lFrame.bindingIndex=t}function Hs(){return X.lFrame.bindingIndex++}function xa(t){let e=X.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function JT(){return X.lFrame.inI18n}function ZT(t,e){let n=X.lFrame;n.bindingIndex=n.bindingRootIndex=t,Nl(e)}function XT(){return X.lFrame.currentDirectiveIndex}function Nl(t){X.lFrame.currentDirectiveIndex=t}function eD(t){let e=X.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Ag(t){X.lFrame.currentQueryIndex=t}function QM(t){let e=t[W];return e.type===2?e.declTNode:e.type===1?t[xt]:null}function Sg(t,e,n){if(n&4){let i=e,s=t;for(;i=i.parent,i===null&&!(n&1);)if(i=QM(s),i===null||(s=s[Ci],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=X.lFrame=tD();return r.currentTNode=e,r.lView=t,!0}function Pl(t){let e=tD(),n=t[W];X.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function tD(){let t=X.lFrame,e=t===null?null:t.child;return e===null?nD(t):e}function nD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function rD(){let t=X.lFrame;return X.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Rg=rD;function kl(){let t=rD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function iD(t){return(X.lFrame.contextLView=VT(t,X.lFrame.contextLView))[at]}function In(){return X.lFrame.selectedIndex}function Ar(t){X.lFrame.selectedIndex=t}function Ml(){let t=X.lFrame;return bl(t.tView,t.selectedIndex)}function sD(){return X.lFrame.currentNamespace}var oD=!0;function Ol(){return oD}function Fa(t){oD=t}function Bp(t,e=null,n=null,r){let i=Ng(t,e,n,r);return i.resolveInjectorInitializers(),i}function Ng(t,e=null,n=null,r,i=new Set){let s=[n||mt,RT(t)];return r=r||(typeof t=="object"?void 0:Wn(t)),new Ii(s,e||Ca(),r||null,i)}var $e=class t{static THROW_IF_NOT_FOUND=yi;static NULL=new Ta;static create(e,n){if(Array.isArray(e))return Bp({name:""},n,e,"");{let r=e.name??"";return Bp({name:r},e.parent,e.providers,r)}}static \u0275prov=ae({token:t,providedIn:"any",factory:()=>Ne(ng)});static __NG_ELEMENT_ID__=-1},Mi=new $(""),Sr=(()=>{class t{static __NG_ELEMENT_ID__=JM;static __NG_ENV_ID__=n=>n}return t})(),$p=class extends Sr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Pi(this._lView)}onDestroy(e){let n=this._lView;return yg(n,e),()=>UT(n,e)}};function JM(){return new $p(ne())}var wr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},En=new $("",{providedIn:"root",factory:()=>{let t=L(vt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(wr),e.handleError(n))}}}),aD={provide:Di,useValue:()=>void L(wr),multi:!0};function Pg(t){return typeof t=="function"&&t[st]!==void 0}function Rr(t,e){let[n,r,i]=dp(t,e?.equal),s=n,o=s[st];return s.set=r,s.update=i,s.asReadonly=cD.bind(s),s}function cD(){let t=this[st];if(t.readonlyFn===void 0){let e=()=>this();e[st]=t,t.readonlyFn=e}return t.readonlyFn}function kg(t){return Pg(t)&&typeof t.set=="function"}var zn=class{},La=new $("",{providedIn:"root",factory:()=>!1});var Mg=new $(""),Og=new $("");var xl=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=ZM}return t})();function ZM(){return new xl(ne(),qe())}var Nr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Hn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new te(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ae({token:t,providedIn:"root",factory:()=>new t})}return t})(),qs=(()=>{class t{internalPendingTasks=L(Nr);scheduler=L(zn);errorHandler=L(En);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=ae({token:t,providedIn:"root",factory:()=>new t})}return t})();function Va(...t){}var xg=(()=>{class t{static \u0275prov=ae({token:t,providedIn:"root",factory:()=>new Hp})}return t})(),Hp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Js(t){return{toString:t}.toString()}var Fl="__parameters__";function aO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function LD(t,e,n){return Js(()=>{let r=aO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Fl)?u[Fl]:Object.defineProperty(u,Fl,{value:[]})[Fl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var wt=eg(LD("Optional"),8);var VD=eg(LD("SkipSelf"),4);function cO(t){return typeof t=="function"}var Hl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function UD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var za=(()=>{let t=()=>jD;return t.ngInherit=!0,t})();function jD(t){return t.type.prototype.ngOnChanges&&(t.setInput=lO),uO}function uO(){let t=$D(this),e=t?.current;if(e){let n=t.previous;if(n===Tr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function lO(t,e,n,r,i){let s=this.declaredInputs[r],o=$D(t)||dO(t,{previous:Tr,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Hl(l&&l.currentValue,n,u===Tr),UD(t,e,i,n)}var BD="__ngSimpleChanges__";function $D(t){return t[BD]||null}function dO(t,e){return t[BD]=e}var uD=[];var ge=function(t,e=null,n){for(let r=0;r<uD.length;r++){let i=uD[r];i(t,e,n)}};function hO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=jD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function HD(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function jl(t,e,n){qD(t,e,3,n)}function Bl(t,e,n,r){(t[z]&3)===n&&qD(t,e,n,r)}function Fg(t,e){let n=t[z];(n&3)===e&&(n&=16383,n+=1,t[z]=n)}function qD(t,e,n,r){let i=r!==void 0?t[Si]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Si]+=65536),(a<s||s==-1)&&(fO(t,n,e,u),t[Si]=(t[Si]&4294901760)+u+2),u++}function lD(t,e){ge(4,t,e);let n=J(null);try{e.call(t)}finally{J(n),ge(5,t,e)}}function fO(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[z]>>14<t[Si]>>16&&(t[z]&3)===e&&(t[z]+=16384,lD(a,s)):lD(a,s)}var zs=-1,Fi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function pO(t){return(t.flags&8)!==0}function gO(t){return(t.flags&16)!==0}function mO(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];yO(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function WD(t){return t===3||t===4||t===6}function yO(t){return t.charCodeAt(0)===64}function Gs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?dD(t,n,i,null,e[++r]):dD(t,n,i,null,null))}}return t}function dD(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){i!==null&&(t[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i)}function zD(t){return t!==zs}function ql(t){return t&32767}function _O(t){return t>>16}function Wl(t,e){let n=_O(t),r=e;for(;n>0;)r=r[Ci],n--;return r}var Gg=!0;function zl(t){let e=Gg;return Gg=t,e}var vO=256,GD=vO-1,KD=5,IO=0,wn={};function EO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ti)&&(r=n[Ti]),r==null&&(r=n[Ti]=IO++);let i=r&GD,s=1<<i;e.data[t+(i>>KD)]|=s}function Gl(t,e){let n=YD(t,e);if(n!==-1)return n;let r=e[W];r.firstCreatePass&&(t.injectorIndex=e.length,Lg(r.data,t),Lg(e,null),Lg(r.blueprint,null));let i=fm(t,e),s=t.injectorIndex;if(zD(i)){let o=ql(i),a=Wl(i,e),u=a[W].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Lg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function YD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function fm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=eb(i),r===null)return zs;if(n++,i=i[Ci],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return zs}function Kg(t,e,n){EO(t,e,n)}function wO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(WD(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function QD(t,e,n){if(n&8||t!==void 0)return t;Il(e,"NodeInjector")}function JD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[bi],s=gt(void 0);try{return i?i.get(e,r,n&8):Xp(e,r,n&8)}finally{gt(s)}}return QD(r,e,n)}function ZD(t,e,n,r=0,i){if(t!==null){if(e[z]&2048&&!(r&2)){let o=AO(t,e,n,r,wn);if(o!==wn)return o}let s=XD(t,e,n,r,wn);if(s!==wn)return s}return JD(e,n,r,i)}function XD(t,e,n,r,i){let s=bO(n);if(typeof s=="function"){if(!Sg(e,t,r))return r&1?QD(i,n,r):JD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Il(n);else return o}finally{Rg()}}else if(typeof s=="number"){let o=null,a=YD(t,e),u=zs,l=r&1?e[Ft][xt]:null;for((a===-1||r&4)&&(u=a===-1?fm(t,e):e[a+8],u===zs||!fD(r,!1)?a=-1:(o=e[W],a=ql(u),e=Wl(u,e)));a!==-1;){let h=e[W];if(hD(s,a,h.data)){let p=TO(a,e,n,o,r,l);if(p!==wn)return p}u=e[a+8],u!==zs&&fD(r,e[W].data[a+8]===l)&&hD(s,a,e)?(o=h,a=ql(u),e=Wl(u,e)):a=-1}}return i}function TO(t,e,n,r,i,s){let o=e[W],a=o.data[t+8],u=r==null?Cr(a)&&Gg:r!=o&&(a.type&3)!==0,l=i&1&&s===a,h=DO(a,o,n,u,l);return h!==null?Kl(e,o,h,a,i):wn}function DO(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:l;for(let _=p;_<y;_++){let A=o[_];if(_<u&&n===A||_>=u&&A.type===n)return _}if(i){let _=o[u];if(_&&vn(_)&&_.type===n)return u}return null}function Kl(t,e,n,r,i){let s=t[n],o=e.data;if(s instanceof Fi){let a=s;if(a.resolving){let _=gl(o[n]);throw Zp(_)}let u=zl(a.canSeeViewProviders);a.resolving=!0;let l=o[n].type||o[n],h,p=a.injectImpl?gt(a.injectImpl):null,y=Sg(t,r,0);try{s=t[n]=a.factory(void 0,i,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&hO(n,o[n],e)}finally{p!==null&&gt(p),zl(u),a.resolving=!1,Rg()}}return s}function bO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ti)?t[Ti]:void 0;return typeof e=="number"?e>=0?e&GD:CO:e}function hD(t,e,n){let r=1<<t;return!!(n[e+(t>>KD)]&r)}function fD(t,e){return!(t&2)&&!(t&1&&e)}var xi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ZD(this._tNode,this._lView,e,_i(r),n)}};function CO(){return new xi(qe(),ne())}function Tn(t){return Js(()=>{let e=t.prototype.constructor,n=e[wa]||Yg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[wa]||Yg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Yg(t){return qp(t)?()=>{let e=Yg(Qe(t));return e&&e()}:Ir(t)}function AO(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[z]&2048&&!js(o);){let a=XD(s,o,n,r|2,wn);if(a!==wn)return a;let u=s.parent;if(!u){let l=o[dg];if(l){let h=l.get(n,wn,r);if(h!==wn)return h}u=eb(o),o=o[Ci]}s=u}return i}function eb(t){let e=t[W],n=e.type;return n===2?e.declTNode:n===1?t[xt]:null}function pm(t){return wO(qe(),t)}function SO(){return ad(qe(),ne())}function ad(t,e){return new tn(Jt(t,e))}var tn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=SO}return t})();function tb(t){return(t.flags&128)===128}var gm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gm||{}),nb=new Map,RO=0;function NO(){return RO++}function PO(t){nb.set(t[Sa],t)}function Qg(t){nb.delete(t[Sa])}var pD="__ngContext__";function Ks(t,e){_n(e)?(t[pD]=e[Sa],PO(e)):t[pD]=e}function rb(t){return sb(t[Vs])}function ib(t){return sb(t[Ot])}function sb(t){for(;t!==null&&!Qt(t);)t=t[Ot];return t}var Jg;function kO(t){Jg=t}function ob(){if(Jg!==void 0)return Jg;if(typeof document<"u")return document;throw new j(210,!1)}var MO=new $("",{providedIn:"root",factory:()=>OO}),OO="ng",ab=new $(""),mm=new $("",{providedIn:"platform",factory:()=>"unknown"});var xO=new $("",{providedIn:"root",factory:()=>ob().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var FO="h",LO="b";var cb=!1,ub=new $("",{providedIn:"root",factory:()=>cb});var VO=(t,e,n,r)=>{};function UO(t,e,n,r){VO(t,e,n,r)}function ym(t){return(t.flags&32)===32}var jO=()=>null;function lb(t,e,n=!1){return jO(t,e,n)}function db(t,e){let n=t.contentQueries;if(n!==null){let r=J(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Ag(s),a.contentQueries(2,e[o],o)}}}finally{J(r)}}}function Zg(t,e,n){Ag(0);let r=J(null);try{e(t,n)}finally{J(r)}}function _m(t,e,n){if(hg(e)){let r=J(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{J(r)}}}var Ys=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ys||{}),Ll;function BO(){if(Ll===void 0&&(Ll=null,gn.trustedTypes))try{Ll=gn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ll}function $O(t){return BO()?.createScriptURL(t)||t}var Vl;function HO(){if(Vl===void 0&&(Vl=null,gn.trustedTypes))try{Vl=gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Vl}function gD(t){return HO()?.createScriptURL(t)||t}var Yl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yl})`}};function Zs(t){return t instanceof Yl?t.changingThisBreaksApplicationSecurity:t}function vm(t,e){let n=hb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${yl})`)}return n===e}function hb(t){return t instanceof Yl&&t.getTypeName()||null}var qO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fb(t){return t=String(t),t.match(qO)?t:"unsafe:"+t}var cd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(cd||{});function pb(t){let e=mb();return e?e.sanitize(cd.URL,t)||"":vm(t,"URL")?Zs(t):fb(Kt(t))}function gb(t){let e=mb();if(e)return gD(e.sanitize(cd.RESOURCE_URL,t)||"");if(vm(t,"ResourceURL"))return gD(Zs(t));throw new j(904,!1)}function WO(t){return $O(t[0])}function zO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?gb:pb}function GO(t,e,n){return zO(e,n)(t)}function mb(){let t=ne();return t&&t[yn].sanitizer}var KO=/^>|^->|<!--|-->|--!>|<!-$/g,YO=/(<|>)/g,QO="\u200B$1\u200B";function JO(t){return t.replace(KO,e=>e.replace(YO,QO))}function yb(t){return t instanceof Function?t():t}function ZO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}var _b="ng-template";function XO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ZO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Im(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Im(t){return t.type===4&&t.value!==_b}function ex(t,e,n){let r=t.type===4&&!n?_b:t.value;return e===r}function tx(t,e,n){let r=4,i=t.attrs,s=i!==null?ix(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Zt(r)&&!Zt(u))return!1;if(o&&Zt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!ex(t,u,n)||u===""&&e.length===1){if(Zt(r))return!1;o=!0}}else if(r&8){if(i===null||!XO(t,i,u,n)){if(Zt(r))return!1;o=!0}}else{let l=e[++a],h=nx(u,i,Im(t),n);if(h===-1){if(Zt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Zt(r))return!1;o=!0}}}}return Zt(r)||o}function Zt(t){return(t&1)===0}function nx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return sx(e,t)}function rx(t,e,n=!1){for(let r=0;r<e.length;r++)if(tx(t,e[r],n))return!0;return!1}function ix(t){for(let e=0;e<t.length;e++){let n=t[e];if(WD(n))return e}return t.length}function sx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function mD(t,e){return t?":not("+e.trim()+")":e}function ox(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Zt(o)&&(e+=mD(s,i),i=""),r=o,s=s||!Zt(r);n++}return i!==""&&(e+=mD(s,i)),e}function ax(t){return t.map(ox).join(",")}function cx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Zt(i))break;i=s}r++}return n.length&&e.push(1,...n),e}var Ze={};function ux(t,e){return t.createText(e)}function lx(t,e,n){t.setValue(e,n)}function dx(t,e){return t.createComment(JO(e))}function vb(t,e,n){return t.createElement(e,n)}function Ql(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Ib(t,e,n){t.appendChild(e,n)}function yD(t,e,n,r,i){r!==null?Ql(t,e,n,r,i):Ib(t,e,n)}function hx(t,e,n){t.removeChild(null,e,n)}function fx(t,e,n){t.setAttribute(e,"style",n)}function px(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Eb(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&mO(t,e,r),i!==null&&px(t,e,i),s!==null&&fx(t,e,s)}function Em(t,e,n,r,i,s,o,a,u,l,h){let p=He+r,y=p+i,_=gx(p,y),A=typeof l=="function"?l():l;return _[W]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function gx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ze);return n}function mx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Em(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function wm(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Yt]=i,p[z]=r|4|128|8|64|1024,(l!==null||t&&t[z]&2048)&&(p[z]|=2048),gg(p),p[Je]=p[Ci]=t,p[at]=n,p[yn]=o||t&&t[yn],p[be]=a||t&&t[be],p[bi]=u||t&&t[bi]||null,p[xt]=s,p[Sa]=NO(),p[Aa]=h,p[dg]=l,p[Ft]=e.type==2?t[Ft]:p,p}function yx(t,e,n){let r=Jt(e,t),i=mx(n),s=t[yn].rendererFactory,o=Tm(t,wm(t,i,null,wb(n),r,e,null,s.createRenderer(r,n),null,null,null));return t[e.index]=o}function wb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Tb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Tm(t,e){return t[Vs]?t[lg][Ot]=e:t[Vs]=e,t[lg]=e,e}function _x(t=1){Db(ct(),ne(),In()+t,!1)}function Db(t,e,n,r){if(!r)if((e[z]&3)===3){let s=t.preOrderCheckHooks;s!==null&&jl(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Bl(e,s,0,n)}Ar(n)}var ud=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ud||{});function Xg(t,e,n,r){let i=J(null);try{let[s,o,a]=t.inputs[n],u=null;(o&ud.SignalBased)!==0&&(u=e[s][st]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,s):UD(e,u,s,r)}finally{J(i)}}var Ba=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ba||{}),vx;function Dm(t,e){return vx(t,e)}function Ws(t,e,n,r,i){if(r!=null){let s,o=!1;Qt(r)?s=r:_n(r)&&(o=!0,r=r[Yt]);let a=Lt(r);t===0&&n!==null?i==null?Ib(e,n,a):Ql(e,n,a,i||null,!0):t===1&&n!==null?Ql(e,n,a,i||null,!0):t===2?hx(e,a,o):t===3&&e.destroyNode(a),s!=null&&Px(e,t,s,n,i)}}function Ix(t,e){bb(t,e),e[Yt]=null,e[xt]=null}function Ex(t,e,n,r,i,s){r[Yt]=i,r[xt]=e,ld(t,r,n,1,i,s)}function bb(t,e){e[yn].changeDetectionScheduler?.notify(9),ld(t,e,e[be],2,null,null)}function wx(t){let e=t[Vs];if(!e)return Vg(t[W],t);for(;e;){let n=null;if(_n(e))n=e[Vs];else{let r=e[It];r&&(n=r)}if(!n){for(;e&&!e[Ot]&&e!==t;)_n(e)&&Vg(e[W],e),e=e[Je];e===null&&(e=t),_n(e)&&Vg(e[W],e),n=e&&e[Ot]}e=n}}function bm(t,e){let n=t[Pa],r=n.indexOf(e);n.splice(r,1)}function Cb(t,e){if(Pi(e))return;let n=e[be];n.destroyNode&&ld(t,e,n,3,null,null),wx(e)}function Vg(t,e){if(Pi(e))return;let n=J(null);try{e[z]&=-129,e[z]|=256,e[At]&&Uu(e[At]),Dx(t,e),Tx(t,e),e[W].type===1&&e[be].destroy();let r=e[Ai];if(r!==null&&Qt(e[Je])){r!==e[Je]&&bm(r,e);let i=e[Ri];i!==null&&i.detachView(t)}Qg(e)}finally{J(n)}}function Tx(t,e){let n=t.cleanup,r=e[Ls];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(e[Ls]=null);let i=e[qn];if(i!==null){e[qn]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Ra];if(s!==null){e[Ra]=null;for(let o of s)o.destroy()}}function Dx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Fi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];ge(4,a,u);try{u.call(a)}finally{ge(5,a,u)}}else{ge(4,i,s);try{s.call(i)}finally{ge(5,i,s)}}}}}function bx(t,e,n){return Cx(t,e.parent,n)}function Cx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Yt];if(Cr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ys.None||i===Ys.Emulated)return null}return Jt(r,n)}function Ax(t,e,n){return Rx(t,e,n)}function Sx(t,e,n){return t.type&40?Jt(t,n):null}var Rx=Sx,_D;function Cm(t,e,n,r){let i=bx(t,r,e),s=e[be],o=r.parent||e[xt],a=Ax(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)yD(s,i,n[u],a,!1);else yD(s,i,n,a,!1);_D!==void 0&&_D(s,r,e,n,i)}function Ua(t,e){if(e!==null){let n=e.type;if(n&3)return Jt(e,t);if(n&4)return em(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ua(t,r);{let i=t[e.index];return Qt(i)?em(-1,i):Lt(i)}}else{if(n&128)return Ua(t,e.next);if(n&32)return Dm(e,t)()||Lt(t[e.index]);{let r=Ab(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Er(t[Ft]);return Ua(i,r)}else return Ua(t,e.next)}}}return null}function Ab(t,e){if(e!==null){let r=t[Ft][xt],i=e.projection;return r.projection[i]}return null}function em(t,e){let n=It+t+1;if(n<e.length){let r=e[n],i=r[W].firstChild;if(i!==null)return Ua(r,i)}return e[br]}function Am(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Ks(Lt(a),r),n.flags|=2),!ym(n))if(u&8)Am(t,e,n.child,r,i,s,!1),Ws(e,t,i,a,s);else if(u&32){let l=Dm(n,r),h;for(;h=l();)Ws(e,t,i,h,s);Ws(e,t,i,a,s)}else u&16?Nx(t,e,r,n,i,s):Ws(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ld(t,e,n,r,i,s){Am(n,r,t.firstChild,e,i,s,!1)}function Nx(t,e,n,r,i,s){let o=n[Ft],u=o[xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ws(e,t,i,h,s)}else{let l=u,h=o[Je];tb(r)&&(l.flags|=128),Am(t,e,l,h,i,s,!0)}}function Px(t,e,n,r,i){let s=n[br],o=Lt(n);s!==o&&Ws(e,t,r,s,i);for(let a=It;a<n.length;a++){let u=n[a];ld(u[W],u,t,e,r,s)}}function kx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ba.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ba.Important),t.setStyle(n,r,i,s))}}function Sb(t,e,n,r,i){let s=In(),o=r&2;try{Ar(-1),o&&e.length>He&&Db(t,e,He,!1),ge(o?2:0,i,n),n(r,i)}finally{Ar(s),ge(o?3:1,i,n)}}function dd(t,e,n){Ux(t,e,n),(n.flags&64)===64&&jx(t,e,n)}function hd(t,e,n=Jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Mx(t,e,n,r){let s=r.get(ub,cb)||n===Ys.ShadowDom,o=t.selectRootElement(e,s);return Ox(o),o}function Ox(t){xx(t)}var xx=()=>null;function Fx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Rb(t,e,n,r,i,s){let o=e[W];if(Pm(t,o,e,n,r)){Cr(t)&&Vx(e,t.index);return}t.type&3&&(n=Fx(n)),Lx(t,e,n,r,i,s)}function Lx(t,e,n,r,i,s){if(t.type&3){let o=Jt(t,e);r=s!=null?s(r,t.value||"",n):r,i.setProperty(o,n,r)}else t.type&12}function Vx(t,e){let n=Vt(e,t);n[z]&16||(n[z]|=64)}function Ux(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Cr(n)&&yx(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Gl(n,e);let s=n.initialInputs;for(let o=r;o<i;o++){let a=t.data[o],u=Kl(e,t,o,n);if(Ks(u,e),s!==null&&qx(e,o-r,u,a,n,s),vn(a)){let l=Vt(n.index,e);l[at]=Kl(e,t,o,n)}}}function jx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=XT();try{Ar(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Nl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Bx(u,l)}}finally{Ar(-1),Nl(o)}}function Bx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Sm(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];rx(e,s.selectors,!1)&&(r??=[],vn(s)?r.unshift(s):r.push(s))}return r}function $x(t,e,n,r,i,s){let o=Jt(t,e);Hx(e[be],o,s,t.value,n,r,i)}function Hx(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Kt(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function qx(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let u=o[a],l=o[a+1];Xg(r,n,u,l)}}function Rm(t,e,n,r,i){let s=He+n,o=e[W],a=i(o,e,t,r,n);e[s]=a,$s(t,!0);let u=t.type===2;return u?(Eb(e[be],a,t),($T()===0||Us(t))&&Ks(a,e),HT()):Ks(a,e),Ol()&&(!u||!ym(t))&&Cm(o,e,a,t),t}function Nm(t){let e=t;return wg()?KT():(e=e.parent,$s(e,!1)),e}function Wx(t,e){let n=t[bi];if(!n)return;n.get(En,null)?.(e)}function Pm(t,e,n,r,i){let s=t.inputs?.[r],o=t.hostDirectiveInputs?.[r],a=!1;if(o)for(let u=0;u<o.length;u+=2){let l=o[u],h=o[u+1],p=e.data[l];Xg(p,n[l],h,i),a=!0}if(s)for(let u of s){let l=n[u],h=e.data[u];Xg(h,l,r,i),a=!0}return a}function zx(t,e){let n=Vt(e,t),r=n[W];Gx(r,n);let i=n[Yt];i!==null&&n[Aa]===null&&(n[Aa]=lb(i,n[bi])),ge(18),km(r,n,n[at]),ge(19,n[at])}function Gx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function km(t,e,n){Pl(e);try{let r=t.viewQuery;r!==null&&Zg(1,r,n);let i=t.template;i!==null&&Sb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ri]?.finishViewCreation(t),t.staticContentQueries&&db(t,e),t.staticViewQueries&&Zg(2,t.viewQuery,n);let s=t.components;s!==null&&Kx(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[z]&=-5,kl()}}function Kx(t,e){for(let n=0;n<e.length;n++)zx(t,e[n])}function Yx(t,e,n,r){let i=J(null);try{let s=e.tView,a=t[z]&4096?4096:16,u=wm(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ai]=l;let h=t[Ri];return h!==null&&(u[Ri]=h.createEmbeddedView(s)),km(s,u,n),u}finally{J(i)}}function vD(t,e){return!e||e.firstChild===null||tb(t)}var ID=!1,Qx=new $("");function $a(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Lt(s)),Qt(s)&&Nb(s,r);let o=n.type;if(o&8)$a(t,e,n.child,r);else if(o&32){let a=Dm(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Ab(e,n);if(Array.isArray(a))r.push(...a);else{let u=Er(e[Ft]);$a(u[W],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Nb(t,e){for(let n=It;n<t.length;n++){let r=t[n],i=r[W].firstChild;i!==null&&$a(r[W],r,i,e)}t[br]!==t[Yt]&&e.push(t[br])}function Pb(t){if(t[Ni]!==null){for(let e of t[Ni])e.impl.addSequence(e);t[Ni].length=0}}var kb=[];function Jx(t){return t[At]??Zx(t)}function Zx(t){let e=kb.pop()??Object.create(e1);return e.lView=t,e}function Xx(t){t.lView[At]!==t&&(t.lView=null,kb.push(t))}var e1=ce(q({},ui),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Bs(t.lView)},consumerOnSignalRead(){this.lView[At]=this}});function t1(t){let e=t[At]??Object.create(n1);return e.lView=t,e}var n1=ce(q({},ui),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Er(t.lView);for(;e&&!Mb(e[W]);)e=Er(e);e&&mg(e)},consumerOnSignalRead(){this.lView[At]=this}});function Mb(t){return t.type!==2}function Ob(t){if(t[Ra]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Ra])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[z]&8192)}}var r1=100;function Mm(t,e=0){let r=t[yn].rendererFactory,i=!1;i||r.begin?.();try{i1(t,e)}finally{i||r.end?.()}}function i1(t,e){let n=Dg();try{bg(!0),tm(t,e);let r=0;for(;ka(t);){if(r===r1)throw new j(103,!1);r++,tm(t,1)}}finally{bg(n)}}function xb(t,e){Tg(e?Ma.Exhaustive:Ma.OnlyDirtyViews);try{Mm(t)}finally{Tg(Ma.Off)}}function s1(t,e,n,r){if(Pi(e))return;let i=e[z],s=!1,o=!1;Pl(e);let a=!0,u=null,l=null;s||(Mb(t)?(l=Jx(e),u=li(l)):Lu()===null?(a=!1,l=t1(e),u=li(l)):e[At]&&(Uu(e[At]),e[At]=null));try{gg(e),QT(t.bindingStartIndex),n!==null&&Sb(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let _=t.preOrderCheckHooks;_!==null&&jl(e,_,null)}else{let _=t.preOrderHooks;_!==null&&Bl(e,_,0,null),Fg(e,0)}if(o||o1(e),Ob(e),Fb(e,0),t.contentQueries!==null&&db(t,e),!s)if(h){let _=t.contentCheckHooks;_!==null&&jl(e,_)}else{let _=t.contentHooks;_!==null&&Bl(e,_,1),Fg(e,1)}c1(t,e);let p=t.components;p!==null&&Vb(e,p,0);let y=t.viewQuery;if(y!==null&&Zg(2,y,r),!s)if(h){let _=t.viewCheckHooks;_!==null&&jl(e,_)}else{let _=t.viewHooks;_!==null&&Bl(e,_,2),Fg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dl]){for(let _ of e[Dl])_();e[Dl]=null}s||(Pb(e),e[z]&=-73)}catch(h){throw s||Bs(e),h}finally{l!==null&&(Ds(l,u),a&&Xx(l)),kl()}}function Fb(t,e){for(let n=rb(t);n!==null;n=ib(n))for(let r=It;r<n.length;r++){let i=n[r];Lb(i,e)}}function o1(t){for(let e=rb(t);e!==null;e=ib(e)){if(!(e[z]&2))continue;let n=e[Pa];for(let r=0;r<n.length;r++){let i=n[r];mg(i)}}}function a1(t,e,n){ge(18);let r=Vt(e,t);Lb(r,n),ge(19,r[at])}function Lb(t,e){Al(t)&&tm(t,e)}function tm(t,e){let r=t[W],i=t[z],s=t[At],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&pa(s)),o||=!1,s&&(s.dirty=!1),t[z]&=-9217,o)s1(r,t,r.template,t[at]);else if(i&8192){let a=J(null);try{Ob(t),Fb(t,1);let u=r.components;u!==null&&Vb(t,u,1),Pb(t)}finally{J(a)}}}function Vb(t,e,n){for(let r=0;r<e.length;r++)a1(t,e[r],n)}function c1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ar(~i);else{let s=i,o=n[++r],a=n[++r];ZT(o,s);let u=e[s];ge(24,u),a(2,u),ge(25,u)}}}finally{Ar(-1)}}function Om(t,e){let n=Dg()?64:1088;for(t[yn].changeDetectionScheduler?.notify(e);t;){t[z]|=n;let r=Er(t);if(js(t)&&!r)return t;t=r}return null}function Ub(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function u1(t,e,n,r=!0){let i=e[W];if(l1(i,e,t,n),r){let o=em(n,t),a=e[be],u=a.parentNode(t[br]);u!==null&&Ex(i,t[xt],a,e,u,o)}let s=e[Aa];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function nm(t,e){if(t.length<=It)return;let n=It+e,r=t[n];if(r){let i=r[Ai];i!==null&&i!==t&&bm(i,r),e>0&&(t[n-1][Ot]=r[Ot]);let s=ba(t,It+e);Ix(r[W],r);let o=s[Ri];o!==null&&o.detachView(s[W]),r[Je]=null,r[Ot]=null,r[z]&=-129}return r}function l1(t,e,n,r){let i=It+r,s=n.length;r>0&&(n[i-1][Ot]=e),r<s-It?(e[Ot]=n[i],tg(n,It+r,e)):(n.push(e),e[Ot]=null),e[Je]=n;let o=e[Ai];o!==null&&n!==o&&jb(o,e);let a=e[Ri];a!==null&&a.insertView(t),Sl(e),e[z]|=128}function jb(t,e){let n=t[Pa],r=e[Je];if(_n(r))t[z]|=2;else{let i=r[Je][Ft];e[Ft]!==i&&(t[z]|=2)}n===null?t[Pa]=[e]:n.push(e)}var Pr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[W];return $a(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[at]}set context(e){this._lView[at]=e}get destroyed(){return Pi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(Qt(e)){let n=e[Na],r=n?n.indexOf(this):-1;r>-1&&(nm(e,r),ba(n,r))}this._attachedToViewContainer=!1}Cb(this._lView[W],this._lView)}onDestroy(e){yg(this._lView,e)}markForCheck(){Om(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[z]&=-129}reattach(){Sl(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,Mm(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[bi].get(Qx,ID)}catch{this.exhaustive=ID}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=js(this._lView),n=this._lView[Ai];n!==null&&!e&&bm(n,this._lView),bb(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=js(this._lView),r=this._lView[Ai];r!==null&&!n&&jb(r,this._lView),Sl(this._lView)}};var Ga=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=d1;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let s=Yx(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Pr(s)}}return t})();function d1(){return Bb(qe(),ne())}function Bb(t,e){return t.type&4?new Ga(e,t,ad(t,e)):null}function fd(t,e,n,r,i){let s=t.data[e];if(s===null)s=h1(t,e,n,r,i),JT()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=GT();s.injectorIndex=o===null?-1:o.injectorIndex}return $s(s,!0),s}function h1(t,e,n,r,i){let s=Eg(),o=wg(),a=o?s:s&&s.parent,u=t.data[e]=p1(t,a,n,e,r,i);return f1(t,u,s,o),u}function f1(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function p1(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return qT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var P7=new RegExp(`^(\\d+)*(${LO}|${FO})*(.*)`);var g1=()=>null;function ED(t,e){return g1(t,e)}var $b=class{},pd=class{},rm=class{resolveComponentFactory(e){throw new j(917,!1)}},Ka=class{static NULL=new rm},Ha=class{},Dn=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>m1()}return t})();function m1(){let t=ne(),e=qe(),n=Vt(e.index,t);return(_n(n)?n:t)[be]}var Hb=(()=>{class t{static \u0275prov=ae({token:t,providedIn:"root",factory:()=>null})}return t})();var $l={},im=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,$l,r);return i!==$l||n===$l?i:this.parentInjector.get(e,n,r)}};function Jl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=_l(i,a);else if(s==2){let u=a,l=e[++o];r=_l(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Y(t,e=0){let n=ne();if(n===null)return Ne(t,e);let r=qe();return ZD(r,n,Qe(t),e)}function y1(){let t="invalid";throw new Error(t)}function qb(t,e,n,r,i){let s=r===null?null:{"":-1},o=i(t,n);if(o!==null){let a=o,u=null,l=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(o);break}I1(t,e,n,a,s,u,l)}s!==null&&r!==null&&_1(n,r,s)}function _1(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}function v1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function I1(t,e,n,r,i,s,o){let a=r.length,u=!1;for(let y=0;y<a;y++){let _=r[y];!u&&vn(_)&&(u=!0,v1(t,n,y)),Kg(Gl(n,e),t,_.type)}C1(n,t.data.length,a);for(let y=0;y<a;y++){let _=r[y];_.providersResolver&&_.providersResolver(_)}let l=!1,h=!1,p=Tb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let y=0;y<a;y++){let _=r[y];if(n.mergedAttrs=Gs(n.mergedAttrs,_.hostAttrs),w1(t,n,e,p,_),b1(p,_,i),o!==null&&o.has(_)){let[N,P]=o.get(_);n.directiveToIndex.set(_.type,[p,N+n.directiveStart,P+n.directiveStart])}else(s===null||!s.has(_))&&n.directiveToIndex.set(_.type,p);_.contentQueries!==null&&(n.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(n.flags|=64);let A=_.type.prototype;!l&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(A.ngOnChanges||A.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}E1(t,n,s)}function E1(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))wD(0,e,i,r),wD(1,e,i,r),DD(e,r,!1);else{let s=n.get(i);TD(0,e,s,r),TD(1,e,s,r),DD(e,r,!0)}}}function wD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;t===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),Wb(e,s)}}function TD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),Wb(e,o)}}function Wb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function DD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:s}=t;if(r===null||!n&&i===null||n&&s===null||Im(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){o??=[],o.push(u,r[a+1]);break}}else if(n&&s.hasOwnProperty(u)){let l=s[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){o??=[],o.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(o)}function w1(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Ir(i.type,!0)),o=new Fi(s,vn(i),Y,null);t.blueprint[r]=o,n[r]=o,T1(t,e,r,Tb(t,n,i.hostVars,Ze),i)}function T1(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;D1(o)!=a&&o.push(a),o.push(n,r,s)}}function D1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function b1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vn(e)&&(n[""]=t)}}function C1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xm(t,e,n,r,i,s,o,a){let u=e[W],l=u.consts,h=ki(l,o),p=fd(u,t,n,r,h);return s&&qb(u,e,p,ki(l,a),i),p.mergedAttrs=Gs(p.mergedAttrs,p.attrs),p.attrs!==null&&Jl(p,p.attrs,!1),p.mergedAttrs!==null&&Jl(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Fm(t,e){HD(t,e),hg(e)&&t.queries.elementEnd(e)}function A1(t,e,n,r,i,s){let o=e.consts,a=ki(o,i),u=fd(e,t,n,r,a);if(u.mergedAttrs=Gs(u.mergedAttrs,u.attrs),s!=null){let l=ki(o,s);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Jl(u,u.attrs,!1),u.mergedAttrs!==null&&Jl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Lm(t){return Gb(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function zb(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Gb(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Vm(t,e,n){return t[e]=n}function S1(t,e){return t[e]}function en(t,e,n){if(n===Ze)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Um(t,e,n,r){let i=en(t,e,n);return en(t,e+1,r)||i}function R1(t,e,n,r,i){let s=Um(t,e,n,r);return en(t,e+2,i)||s}function Ug(t,e,n){return function r(i){let s=Cr(t)?Vt(t.index,e):e;Om(s,5);let o=e[at],a=bD(e,o,n,i),u=r.__ngNextListenerFn__;for(;u;)a=bD(e,o,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function bD(t,e,n,r){let i=J(null);try{return ge(6,e,n),n(r)!==!1}catch(s){return Wx(t,s),!1}finally{ge(7,e,n),J(i)}}function N1(t,e,n,r,i,s,o,a){let u=Us(t),l=!1,h=null;if(!r&&u&&(h=P1(e,n,s,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,l=!0}else{let p=Jt(t,n),y=r?r(p):p;UO(n,y,s,a);let _=i.listen(y,s,a),A=r?N=>r(Lt(N[t.index])):t.index;Kb(A,e,n,s,a,_,!1)}return l}function P1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ls],u=i[s+2];return a&&a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function Kb(t,e,n,r,i,s,o){let a=e.firstCreatePass?BT(e):null,u=jT(n),l=u.length;u.push(i,s),a&&a.push(r,t,l,(l+1)*(o?-1:1))}function CD(t,e,n,r,i,s){let o=e[n],a=e[W],l=a.data[n].outputs[r],p=o[l].subscribe(s);Kb(t.index,a,e,i,s,p,!0)}var sm=Symbol("BINDING");var Zl=class extends Ka{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Gn(e);return new Li(n,this.ngModule)}};function k1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],s={propName:n,templateName:e,isSignal:(r&ud.SignalBased)!==0};return i&&(s.transform=i),s})}function M1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function O1(t,e,n){let r=e instanceof vt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new im(n,r):n}function x1(t){let e=t.get(Ha,null);if(e===null)throw new j(407,!1);let n=t.get(Hb,null),r=t.get(zn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function F1(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return vb(e,n,n==="svg"?xT:n==="math"?FT:null)}var Li=class extends pd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=k1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=M1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ax(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,s,o){ge(22);let a=J(null);try{let u=this.componentDef,l=L1(r,u,o,s),h=O1(u,i||this.ngModule,e),p=x1(h),y=p.rendererFactory.createRenderer(null,u),_=r?Mx(y,r,u.encapsulation,h):F1(u,y),A=o?.some(AD)||s?.some(x=>typeof x!="function"&&x.bindings.some(AD)),N=wm(null,l,null,512|wb(u),null,null,p,y,h,null,lb(_,h,!0));N[He]=_,Pl(N);let P=null;try{let x=xm(He,N,2,"#host",()=>l.directiveRegistry,!0,0);_&&(Eb(y,_,x),Ks(_,N)),dd(l,N,x),_m(l,x,N),Fm(l,x),n!==void 0&&U1(x,this.ngContentSelectors,n),P=Vt(x.index,N),N[at]=P[at],km(l,N,null)}catch(x){throw P!==null&&Qg(P),Qg(N),x}finally{ge(23),kl()}return new Xl(this.componentType,N,!!A)}finally{J(a)}}};function L1(t,e,n,r){let i=t?["ng-version","20.1.4"]:cx(e.selectors[0]),s=null,o=null,a=0;if(n)for(let h of n)a+=h[sm].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let y of p.bindings){a+=y[sm].requiredVars;let _=h+1;y.create&&(y.targetIdx=_,(s??=[]).push(y)),y.update&&(y.targetIdx=_,(o??=[]).push(y))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,y=sg(p);u.push(y)}return Em(0,null,V1(s,o),1,a,u,null,null,null,[i],null)}function V1(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function AD(t){let e=t[sm].kind;return e==="input"||e==="twoWay"}var Xl=class extends $b{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=bl(n[W],He),this.location=ad(this._tNode,n),this.instance=Vt(this._tNode.index,n)[at],this.hostView=this.changeDetectorRef=new Pr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,s=Pm(r,i[W],i,e,n);this.previousInputValues.set(e,n);let o=Vt(r.index,i);Om(o,1)}get injector(){return new xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function U1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Ya=(()=>{class t{static __NG_ELEMENT_ID__=j1}return t})();function j1(){let t=qe();return $1(t,ne())}var B1=Ya,Yb=class extends B1{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ad(this._hostTNode,this._hostLView)}get injector(){return new xi(this._hostTNode,this._hostLView)}get parentInjector(){let e=fm(this._hostTNode,this._hostLView);if(zD(e)){let n=Wl(e,this._hostLView),r=ql(e),i=n[W].data[r+8];return new xi(i,n)}else return new xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=SD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-It}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=ED(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,vD(this._hostTNode,o)),a}createComponent(e,n,r,i,s,o,a){let u=e&&!cO(e),l;if(u)l=n;else{let P=n||{};l=P.index,r=P.injector,i=P.projectableNodes,s=P.environmentInjector||P.ngModuleRef,o=P.directives,a=P.bindings}let h=u?e:new Li(Gn(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let x=(u?p:this.parentInjector).get(vt,null);x&&(s=x)}let y=Gn(h.componentType??{}),_=ED(this._lContainer,y?.id??null),A=_?.firstChild??null,N=h.create(p,i,A,s,o,a);return this.insertImpl(N.hostView,l,vD(this._hostTNode,_)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(LT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Je],l=new Yb(u,u[xt],u[Je]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return u1(o,i,s,r),e.attachToViewContainerRef(),tg(jg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=SD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=nm(this._lContainer,n);r&&(ba(jg(this._lContainer),n),Cb(r[W],r))}detach(e){let n=this._adjustIndex(e,-1),r=nm(this._lContainer,n);return r&&ba(jg(this._lContainer),n)!=null?new Pr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function SD(t){return t[Na]}function jg(t){return t[Na]||(t[Na]=[])}function $1(t,e){let n,r=e[t.index];return Qt(r)?n=r:(n=Ub(r,e,null,t),e[t.index]=n,Tm(e,n)),q1(n,e,t,r),new Yb(n,t,e)}function H1(t,e){let n=t[be],r=n.createComment(""),i=Jt(e,t),s=n.parentNode(i);return Ql(n,s,r,n.nextSibling(i),!1),r}var q1=G1,W1=()=>!1;function z1(t,e,n){return W1(t,e,n)}function G1(t,e,n,r){if(t[br])return;let i;n.type&8?i=Lt(r):i=H1(e,n),t[br]=i}var RD=new Set;function Qa(t){RD.has(t)||(RD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Vi=class{},Qb=class{};var ed=class extends Vi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Zl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let s=ig(e);this._bootstrapComponents=yb(s.bootstrap),this._r3Injector=Ng(e,n,[{provide:Vi,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver},...r],Wn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},td=class extends Qb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ed(this.moduleType,e,[])}};var qa=class extends Vi{injector;componentFactoryResolver=new Zl(this);instance=null;constructor(e){super();let n=new Ii([...e.providers,{provide:Vi,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],e.parent||Ca(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Jb(t,e,n=null){return new qa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var K1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=og(!1,n.type),i=r.length>0?Jb([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ae({token:t,providedIn:"environment",factory:()=>new t(Ne(vt))})}return t})();function Y1(t){return Js(()=>{let e=Zb(t),n=ce(q({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(K1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ys.Emulated,styles:t.styles||mt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Qa("NgStandalone"),Xb(n);let r=t.dependencies;return n.directiveDefs=ND(r,Q1),n.pipeDefs=ND(r,ST),n.id=X1(n),n})}function Q1(t){return Gn(t)||sg(t)}function Xs(t){return Js(()=>({type:t.type,bootstrap:t.bootstrap||mt,declarations:t.declarations||mt,imports:t.imports||mt,exports:t.exports||mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function J1(t,e){if(t==null)return Tr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a,u;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,u=i[3]||null):(s=i,o=i,a=ud.None,u=null),n[s]=[r,a,u],e[s]=o}return n}function Z1(t){if(t==null)return Tr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function De(t){return Js(()=>{let e=Zb(t);return Xb(e),e})}function gd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Zb(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Tr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||mt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:J1(t.inputs,e),outputs:Z1(t.outputs),debugInfo:null}}function Xb(t){t.features?.forEach(e=>e(t))}function ND(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let s=e(i);s!==null&&r.push(s)}return r}:null}function X1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function eF(t){return Object.getPrototypeOf(t.prototype).constructor}function Xe(t){let e=eF(t.type),n=!0,r=[t];for(;e;){let i;if(vn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Bg(t.inputs),o.declaredInputs=Bg(t.declaredInputs),o.outputs=Bg(t.outputs);let a=i.hostBindings;a&&sF(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&rF(t,u),l&&iF(t,l),tF(t,i),wT(t.outputs,i.outputs),vn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Xe&&(n=!1)}}e=Object.getPrototypeOf(e)}nF(r)}function tF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function nF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Gs(i.hostAttrs,n=Gs(n,i.hostAttrs))}}function Bg(t){return t===Tr?{}:t===mt?[]:t}function rF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function iF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function sF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function oF(t,e,n,r,i,s,o,a){if(n.firstCreatePass){t.mergedAttrs=Gs(t.mergedAttrs,t.attrs);let h=t.tView=Em(2,t,i,s,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),$s(t,!1);let u=cF(n,e,t,r);Ol()&&Cm(n,e,u,t),Ks(u,e);let l=Ub(u,e,u,t);e[r+He]=l,Tm(e,l),z1(l,t,e)}function aF(t,e,n,r,i,s,o,a,u,l,h){let p=n+He,y;return e.firstCreatePass?(y=fd(e,p,4,o||null,a||null),Rl()&&qb(e,t,y,ki(e.consts,l),Sm),HD(e,y)):y=e.data[p],oF(y,t,e,n,r,i,s,u),Us(y)&&dd(e,t,y),l!=null&&hd(t,y,h),y}function eC(t,e,n,r,i,s,o,a){let u=ne(),l=ct(),h=ki(l.consts,s);return aF(u,l,t,e,n,r,i,h,void 0,o,a),eC}var cF=uF;function uF(t,e,n,r){return Fa(!0),e[be].createComment("")}var md=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(md||{}),Ja=new $(""),tC=!1,om=class extends zt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,MT()&&(this.destroyRef=L(Sr,{optional:!0})??void 0,this.pendingTasks=L(Nr,{optional:!0})??void 0)}emit(e){let n=J(null);try{super.next(e)}finally{J(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Oe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=om;function nC(t){let e,n;function r(){t=Va;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function PD(t){return queueMicrotask(()=>t()),()=>{t=Va}}var jm="isAngularZone",nd=jm+"_ID",lF=0,Te=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=tC}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,fF(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,dF,Va,Va);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dF={};function Bm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hF(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){nC(()=>{t.callbackScheduled=!1,am(t),t.isCheckStableRunning=!0,Bm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),am(t)}function fF(t){let e=()=>{hF(t)},n=lF++;t._inner=t._inner.fork({name:"angular",properties:{[jm]:!0,[nd]:n,[nd+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(pF(u))return r.invokeTask(s,o,a,u);try{return kD(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),MD(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return kD(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!gF(u)&&e(),MD(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,am(t),Bm(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function am(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function kD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function MD(t){t._nesting--,Bm(t)}var rd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function pF(t){return rC(t,"__ignore_ng_zone__")}function gF(t){return rC(t,"__scheduler_tick__")}function rC(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var $m=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=ae({token:t,providedIn:"root",factory:()=>new t})}return t})(),iC=[0,1,2,3],sC=(()=>{class t{ngZone=L(Te);scheduler=L(zn);errorHandler=L(wr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(Ja,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ge(16),this.executing=!0;for(let r of iC)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ge(17)}register(n){let{view:r}=n;r!==void 0?((r[Ni]??=[]).push(n),Bs(r),r[z]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(md.AFTER_NEXT_RENDER,n):n()}static \u0275prov=ae({token:t,providedIn:"root",factory:()=>new t})}return t})(),id=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,s,o=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ni];e&&(this.view[Ni]=e.filter(n=>n!==this))}};function Hm(t,e){let n=e?.injector??L($e);return Qa("NgAfterNextRender"),yF(t,n,e,!0)}function mF(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function yF(t,e,n,r){let i=e.get($m);i.impl??=e.get(sC);let s=e.get(Ja,null,{optional:!0}),o=n?.manualCleanup!==!0?e.get(Sr):null,a=e.get(xl,null,{optional:!0}),u=new id(i.impl,mF(t),a?.view,r,o,s?.snapshot(null));return i.impl.register(u),u}var _F=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var oC=new $("");function eo(t){return!!t&&typeof t.then=="function"}function qm(t){return!!t&&typeof t.subscribe=="function"}var Wm=new $("");function vF(t){return mn([{provide:Wm,multi:!0,useValue:t}])}var zm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=L(Wm,{optional:!0})??[];injector=L($e);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=Dr(this.injector,i);if(eo(s))n.push(s);else if(qm(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aC=new $("");function cC(){lp(()=>{let t="";throw new j(600,t)})}function uC(t){return t.isBoundToModule}var IF=10;var ji=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(En);afterRenderManager=L($m);zonelessEnabled=L(La);rootEffectScheduler=L(xg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new zt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=L(Nr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Gt(n=>!n))}constructor(){L(Ja,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=L(vt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=$e.NULL){return this._injector.get(Te).run(()=>{ge(10);let o=n instanceof pd;if(!this._injector.get(zm).done){let A="";throw new j(405,A)}let u;o?u=n:u=this._injector.get(Ka).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=uC(u)?void 0:this._injector.get(Vi),h=r||u.selector,p=u.create(i,[],h,l),y=p.location.nativeElement,_=p.injector.get(oC,null);return _?.registerApplication(y),p.onDestroy(()=>{this.detachView(p.hostView),ja(this.components,p),_?.unregisterApplication(y)}),this._loadComponent(p),ge(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ge(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(md.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(n),this.afterTick.next(),ge(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ha,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<IF;)ge(14),this.synchronizeOnce(),ge(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ka(i))continue;let s=r&&!this.zonelessEnabled?0:1;Mm(i,s),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ka(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ja(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(aC,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ja(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ja(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function to(t,e,n,r){let i=ne(),s=Hs();if(en(i,s,e)){let o=ct(),a=Ml();$x(a,i,t,e,n,r)}return to}function lC(t,e,n){let r=ne(),i=Hs();if(en(r,i,e)){let s=ct(),o=Ml();Rb(o,r,t,e,r[be],n)}return lC}function cm(t,e,n,r,i){Pm(e,t,n,i?"class":"style",r)}function Gm(t,e,n,r){let i=ne(),s=i[W],o=t+He,a=s.firstCreatePass?xm(o,i,2,e,Sm,Rl(),n,r):s.data[o];if(Rm(a,i,t,e,fC),Us(a)){let u=i[W];dd(u,i,a),_m(u,a,i)}return r!=null&&hd(i,a),Gm}function Km(){let t=ct(),e=qe(),n=Nm(e);return t.firstCreatePass&&Fm(t,n),vg(n)&&Ig(),_g(),n.classesWithoutHost!=null&&pO(n)&&cm(t,n,ne(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&gO(n)&&cm(t,n,ne(),n.stylesWithoutHost,!1),Km}function dC(t,e,n,r){return Gm(t,e,n,r),Km(),dC}function Ym(t,e,n,r){let i=ne(),s=i[W],o=t+He,a=s.firstCreatePass?A1(o,s,2,e,n,r):s.data[o];return Rm(a,i,t,e,fC),r!=null&&hd(i,a),Ym}function Qm(){let t=qe(),e=Nm(t);return vg(e)&&Ig(),_g(),Qm}function hC(t,e,n,r){return Ym(t,e,n,r),Qm(),hC}var fC=(t,e,n,r,i)=>(Fa(!0),vb(e[be],r,sD()));function pC(t,e,n){let r=ne(),i=r[W],s=t+He,o=i.firstCreatePass?xm(s,r,8,"ng-container",Sm,Rl(),e,n):i.data[s];if(Rm(o,r,t,"ng-container",EF),Us(o)){let a=r[W];dd(a,r,o),_m(a,o,r)}return n!=null&&hd(r,o),pC}function gC(){let t=ct(),e=qe(),n=Nm(e);return t.firstCreatePass&&Fm(t,n),gC}var EF=(t,e,n,r,i)=>(Fa(!0),dx(e[be],""));function wF(){return ne()}var Oi=void 0;function TF(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var DF=["en",[["a","p"],["AM","PM"],Oi],[["AM","PM"],Oi,Oi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Oi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Oi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Oi,"{1} 'at' {0}",Oi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",TF],$g={};function St(t){let e=bF(t),n=OD(e);if(n)return n;let r=e.split("-")[0];if(n=OD(r),n)return n;if(r==="en")return DF;throw new j(701,!1)}function OD(t){return t in $g||($g[t]=gn.ng&&gn.ng.common&&gn.ng.common.locales&&gn.ng.common.locales[t]),$g[t]}var Me=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Me||{});function bF(t){return t.toLowerCase().replace(/_/g,"-")}var Za="en-US";var CF=Za;function mC(t){typeof t=="string"&&(CF=t.toLowerCase().replace(/_/g,"-"))}function bn(t,e,n){let r=ne(),i=ct(),s=qe();return yC(i,r,r[be],s,t,e,n),bn}function yC(t,e,n,r,i,s,o){let a=!0,u=null;if((r.type&3||o)&&(u??=Ug(r,e,s),N1(r,t,e,o,n,i,s,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let y=h[p],_=h[p+1];u??=Ug(r,e,s),CD(r,e,y,_,i,u)}if(l&&l.length)for(let p of l)u??=Ug(r,e,s),CD(r,e,p,i,i,u)}}function AF(t=1){return iD(t)}function SF(t){let e=YT();return Cl(e,He+t)}function Ul(t,e){return t<<17|e<<2}function Ui(t){return t>>17&32767}function RF(t){return(t&2)==2}function NF(t,e){return t&131071|e<<17}function um(t){return t|2}function Qs(t){return(t&131068)>>2}function Hg(t,e){return t&-131069|e<<2}function PF(t){return(t&1)===1}function lm(t){return t|1}function kF(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ui(o),u=Qs(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Fs(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let y=Ui(t[a+1]);t[r+1]=Ul(y,a),y!==0&&(t[y+1]=Hg(t[y+1],r)),t[a+1]=NF(t[a+1],r)}else t[r+1]=Ul(a,0),a!==0&&(t[a+1]=Hg(t[a+1],r)),a=r;else t[r+1]=Ul(u,0),a===0?a=r:t[u+1]=Hg(t[u+1],r),u=r;l&&(t[r+1]=um(t[r+1])),xD(t,h,r,!0),xD(t,h,r,!1),MF(e,h,t,r,s),o=Ul(a,u),s?e.classBindings=o:e.styleBindings=o}function MF(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Fs(s,e)>=0&&(n[r+1]=lm(n[r+1]))}function xD(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ui(i):Qs(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];OF(u,e)&&(a=!0,t[o+1]=r?lm(l):um(l)),o=r?Ui(l):Qs(l)}a&&(t[n+1]=r?um(i):lm(i))}function OF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Fs(t,e)>=0:!1}var Xt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xF(t){return t.substring(Xt.key,Xt.keyEnd)}function FF(t){return LF(t),_C(t,vC(t,0,Xt.textEnd))}function _C(t,e){let n=Xt.textEnd;return n===e?-1:(e=Xt.keyEnd=VF(t,Xt.key=e,n),vC(t,e,n))}function LF(t){Xt.key=0,Xt.keyEnd=0,Xt.value=0,Xt.valueEnd=0,Xt.textEnd=t.length}function vC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function VF(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function IC(t,e,n){return EC(t,e,n,!1),IC}function Xa(t,e){return EC(t,e,null,!0),Xa}function UF(t){BF(GF,jF,t,!0)}function jF(t,e){for(let n=FF(e);n>=0;n=_C(e,n))wl(t,xF(e),!0)}function EC(t,e,n,r){let i=ne(),s=ct(),o=xa(2);if(s.firstUpdatePass&&TC(s,t,o,r),e!==Ze&&en(i,o,e)){let a=s.data[In()];DC(s,a,i,i[be],t,i[o+1]=YF(e,n),r,o)}}function BF(t,e,n,r){let i=ct(),s=xa(2);i.firstUpdatePass&&TC(i,null,s,r);let o=ne();if(n!==Ze&&en(o,s,n)){let a=i.data[In()];if(bC(a,r)&&!wC(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=_l(u,n||"")),cm(i,a,o,n,r)}else KF(i,a,o,o[be],o[s+1],o[s+1]=zF(t,e,n),r,s)}}function wC(t,e){return e>=t.expandoStartIndex}function TC(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[In()],o=wC(t,n);bC(s,r)&&e===null&&!o&&(e=!1),e=$F(i,s,e,r),kF(i,s,e,n,o,r)}}function $F(t,e,n,r){let i=eD(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=qg(null,t,e,n,r),n=Wa(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=qg(i,t,e,n,r),s===null){let u=HF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=qg(null,t,e,u[1],r),u=Wa(u,e.attrs,r),qF(t,e,r,u))}else s=WF(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function HF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Qs(r)!==0)return t[Ui(r)]}function qF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ui(i)]=r}function WF(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Wa(r,o,n)}return Wa(r,e.attrs,n)}function qg(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Wa(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Wa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),wl(t,o,n?!0:e[++s]))}return t===void 0?null:t}function zF(t,e,n){if(n==null||n==="")return mt;let r=[],i=Zs(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function GF(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&wl(t,r,n)}function KF(t,e,n,r,i,s,o,a){i===Ze&&(i=mt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let y=u<i.length?i[u+1]:void 0,_=l<s.length?s[l+1]:void 0,A=null,N;h===p?(u+=2,l+=2,y!==_&&(A=p,N=_)):p===null||h!==null&&h<p?(u+=2,A=h):(l+=2,A=p,N=_),A!==null&&DC(t,e,n,r,A,N,o,a),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function DC(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=PF(l)?FD(u,e,n,i,Qs(l),o):void 0;if(!sd(h)){sd(s)||RF(l)&&(s=FD(u,null,n,i,a,o));let p=fg(In(),n);kx(r,o,p,i,s)}}function FD(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=n[i+1];y===Ze&&(y=p?mt:void 0);let _=p?Tl(y,r):h===r?y:void 0;if(l&&!sd(_)&&(_=Tl(u,r)),sd(_)&&(a=_,o))return a;let A=t[i+1];i=o?Ui(A):Qs(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Tl(u,r))}return a}function sd(t){return t!==void 0}function YF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Wn(Zs(t)))),t}function bC(t,e){return(t.flags&(e?8:16))!==0}function QF(t,e=""){let n=ne(),r=ct(),i=t+He,s=r.firstCreatePass?fd(r,i,1,e,null):r.data[i],o=JF(r,n,s,e,t);n[i]=o,Ol()&&Cm(r,n,o,s),$s(s,!1)}var JF=(t,e,n,r,i)=>(Fa(!0),ux(e[be],r));function ZF(t,e,n,r=""){return en(t,Hs(),n)?e+Kt(n)+r:Ze}function XF(t,e,n,r,i,s=""){let o=Cg(),a=Um(t,o,n,i);return xa(2),a?e+Kt(n)+r+Kt(i)+s:Ze}function eL(t,e,n,r,i,s,o,a=""){let u=Cg(),l=R1(t,u,n,i,o);return xa(3),l?e+Kt(n)+r+Kt(i)+s+Kt(o)+a:Ze}function CC(t){return Jm("",t),CC}function Jm(t,e,n){let r=ne(),i=ZF(r,t,e,n);return i!==Ze&&Zm(r,In(),i),Jm}function AC(t,e,n,r,i){let s=ne(),o=XF(s,t,e,n,r,i);return o!==Ze&&Zm(s,In(),o),AC}function SC(t,e,n,r,i,s,o){let a=ne(),u=eL(a,t,e,n,r,i,s,o);return u!==Ze&&Zm(a,In(),u),SC}function Zm(t,e,n){let r=fg(e,t);lx(t[be],r,n)}function RC(t,e,n){kg(e)&&(e=e());let r=ne(),i=Hs();if(en(r,i,e)){let s=ct(),o=Ml();Rb(o,r,t,e,r[be],n)}return RC}function tL(t,e){let n=kg(t);return n&&t.set(e),n}function NC(t,e){let n=ne(),r=ct(),i=qe();return yC(r,n,n[be],i,t,e),NC}function nL(t){return en(ne(),Hs(),t)?Kt(t):Ze}function rL(t,e,n){let r=ct();if(r.firstCreatePass){let i=vn(t);dm(n,r.data,r.blueprint,i,!0),dm(e,r.data,r.blueprint,i,!1)}}function dm(t,e,n,r,i){if(t=Qe(t),Array.isArray(t))for(let s=0;s<t.length;s++)dm(t[s],e,n,r,i);else{let s=ct(),o=ne(),a=qe(),u=vi(t)?t:Qe(t.provide),l=ug(t),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(vi(t)||!t.multi){let _=new Fi(l,i,Y,null),A=zg(u,e,i?h:h+y,p);A===-1?(Kg(Gl(a,o),s,u),Wg(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[A]=_,o[A]=_)}else{let _=zg(u,e,h+y,p),A=zg(u,e,h,h+y),N=_>=0&&n[_],P=A>=0&&n[A];if(i&&!P||!i&&!N){Kg(Gl(a,o),s,u);let x=oL(i?sL:iL,n.length,i,r,l,t);!i&&P&&(n[A].providerFactory=x),Wg(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),o.push(x)}else{let x=PC(n[i?A:_],l,!i&&r);Wg(s,t,_>-1?_:A,x)}!i&&r&&P&&n[A].componentProviders++}}}function Wg(t,e,n,r){let i=vi(e),s=kT(e);if(i||s){let u=(s?Qe(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function PC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function zg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function iL(t,e,n,r,i){return hm(this.multi,[])}function sL(t,e,n,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Kl(r,r[W],this.providerFactory.index,i);o=u.slice(0,a),hm(s,o);for(let l=a;l<u.length;l++)o.push(u[l])}else o=[],hm(s,o);return o}function hm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function oL(t,e,n,r,i,s){let o=new Fi(t,n,Y,null);return o.multi=[],o.index=e,o.componentProviders=0,PC(o,i,r&&!n),o}function Rt(t,e=[]){return n=>{n.providersResolver=(r,i)=>rL(r,i?i(t):t,e)}}function aL(t,e,n){let r=Oa()+t,i=ne();return i[r]===Ze?Vm(i,r,n?e.call(n):e()):S1(i,r)}function cL(t,e,n,r){return MC(ne(),Oa(),t,e,n,r)}function kC(t,e){let n=t[e];return n===Ze?void 0:n}function MC(t,e,n,r,i,s){let o=e+n;return en(t,o,i)?Vm(t,o+1,s?r.call(s,i):r(i)):kC(t,o+1)}function uL(t,e,n,r,i,s,o){let a=e+n;return Um(t,a,i,s)?Vm(t,a+2,o?r.call(o,i,s):r(i,s)):kC(t,a+2)}function lL(t,e){let n=ct(),r,i=t+He;n.firstCreatePass?(r=dL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Ir(r.type,!0)),o,a=gt(Y);try{let u=zl(!1),l=s();return zl(u),pg(n,ne(),i,l),l}finally{gt(a)}}function dL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function hL(t,e,n){let r=t+He,i=ne(),s=Cl(i,r);return OC(i,r)?MC(i,Oa(),e,s.transform,n,s):s.transform(n)}function fL(t,e,n,r){let i=t+He,s=ne(),o=Cl(s,i);return OC(s,i)?uL(s,Oa(),e,o.transform,n,r,o):o.transform(n,r)}function OC(t,e){return t[W].data[e].pure}function pL(t,e){return Bb(t,e)}var od=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},gL=(()=>{class t{compileModuleSync(n){return new td(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ig(n),s=yb(i.declarations).reduce((o,a)=>{let u=Gn(a);return u&&o.push(new Li(u)),o},[]);return new od(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var mL=(()=>{class t{zone=L(Te);changeDetectionScheduler=L(zn);applicationRef=L(ji);applicationErrorHandler=L(En);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xC=new $("",{factory:()=>!1});function Xm({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Te(ce(q({},ey()),{scheduleInRootZone:n})),[{provide:Te,useFactory:t},{provide:Di,multi:!0,useFactory:()=>{let r=L(mL,{optional:!0});return()=>r.initialize()}},{provide:Di,multi:!0,useFactory:()=>{let r=L(_L);return()=>{r.initialize()}}},e===!0?{provide:Mg,useValue:!0}:[],{provide:Og,useValue:n??tC},{provide:En,useFactory:()=>{let r=L(Te),i=L(vt),s;return o=>{r.runOutsideAngular(()=>{i.destroyed&&!s?setTimeout(()=>{throw o}):(s??=i.get(wr),s.handleError(o))})}}}]}function yL(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Xm({ngZoneFactory:()=>{let i=ey(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Qa("NgZone_CoalesceEvent"),new Te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return mn([{provide:xC,useValue:!0},{provide:La,useValue:!1},r])}function ey(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _L=(()=>{class t{subscription=new Oe;initialized=!1;zone=L(Te);pendingTasks=L(Nr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var FC=(()=>{class t{applicationErrorHandler=L(En);appRef=L(ji);taskService=L(Nr);ngZone=L(Te);zonelessEnabled=L(La);tracing=L(Ja,{optional:!0});disableScheduling=L(Mg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Oe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(Og,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof rd||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?PD:nC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,PD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vL(){return typeof $localize<"u"&&$localize.locale||Za}var ec=new $("",{providedIn:"root",factory:()=>L(ec,{optional:!0,skipSelf:!0})||vL()});function Cn(t){return vT(t)}function no(t,e){return Bu(t,e?.equal)}var LC=class{[st];constructor(e){this[st]=e}destroy(){this[st].destroy()}};var HC=Symbol("InputSignalNode#UNSET"),AL=ce(q({},$u),{transformFn:void 0,applyValueToInputSignal(t,e){Cs(t,e)}});function qC(t,e){let n=Object.create(AL);n.value=t,n.transformFn=e?.transform;function r(){if(Ts(n),n.value===HC){let i=null;throw new j(-950,i)}return n.value}return r[st]=n,r}var VC=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>pm(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},SL=new $("");SL.__NG_ELEMENT_ID__=t=>{let e=qe();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function UC(t,e){return qC(t,e)}function RL(t){return qC(HC,t)}var zX=(UC.required=RL,UC);var Bi=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},WC=new Bi("20.1.4");var ty=new $(""),NL=new $("");function tc(t){return!t.moduleRef}function PL(t){let e=tc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Te);return n.run(()=>{tc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(En),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),tc(t)){let s=()=>e.destroy(),o=t.platformInjector.get(ty);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(ty);o.add(s),t.moduleRef.onDestroy(()=>{ja(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return ML(r,n,()=>{let s=e.get(Nr),o=s.add(),a=e.get(zm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(ec,Za);if(mC(u||Za),!e.get(NL,!0))return tc(t)?e.get(ji):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(tc(t)){let h=e.get(ji);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return kL?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void s.remove(o))})})}var kL;function ML(t,e,n){try{let r=n();return eo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var yd=null;function OL(t=[],e){return $e.create({name:e,providers:[{provide:cg,useValue:"platform"},{provide:ty,useValue:new Set([()=>yd=null])},...t]})}function xL(t=[]){if(yd)return yd;let e=OL(t);return yd=e,cC(),FL(e),e}function FL(t){let e=t.get(ab,null);Dr(t,()=>{e?.forEach(n=>n())})}function oy(){return!1}var nc=(()=>{class t{static __NG_ELEMENT_ID__=LL}return t})();function LL(t){return VL(qe(),ne(),(t&16)===16)}function VL(t,e,n){if(Cr(t)&&!n){let r=Vt(t.index,e);return new Pr(r,r)}else if(t.type&175){let r=e[Ft];return new Pr(r,e)}return null}var ny=class{constructor(){}supports(e){return Lm(e)}create(e){return new ry(e)}},UL=(t,e)=>e,ry=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||UL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<jC(r,i,s)?n:r,a=jC(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let _=y<s.length?s[y]:s[y]=0,A=_+y;h<=A&&A<l&&(s[y]=_+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Lm(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,zb(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new iy(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new _d),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _d),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},iy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},sy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},_d=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new sy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function jC(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function BC(){return new ay([new ny])}var ay=(()=>{class t{factories;static \u0275prov=ae({token:t,providedIn:"root",factory:BC});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||BC()),deps:[[t,new VD,new wt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new j(901,!1)}}return t})();function GX(t){ge(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=xL(r),s=[Xm({}),{provide:zn,useExisting:FC},aD,...n||[]],o=new qa({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return PL({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ge(9)}}function vd(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function KX(t){let e=Gn(t);if(!e)return null;let n=new Li(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var KC=null;function $i(){return KC}function jL(t){KC??=t}var cy=class{},ic=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:()=>L(YC),providedIn:"platform"})}return t})(),BL=new $(""),YC=(()=>{class t extends ic{_location;_history;_doc=L(Mi);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $i().getBaseHref(this._doc)}onPopState(n){let r=$i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=$i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Id(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function zC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function nn(t){return t&&t[0]!=="?"?`?${t}`:t}var ro=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:()=>L(QC),providedIn:"root"})}return t})(),Ed=new $(""),QC=(()=>{class t extends ro{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(Mi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Id(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+nn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+nn(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+nn(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ne(ic),Ne(Ed,8))};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),JC=(()=>{class t{_subject=new zt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=qL(zC(GC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+nn(r))}normalize(n){return t.stripTrailingSlash(HL(this._basePath,GC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+nn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+nn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=nn;static joinWithSlash=Id;static stripTrailingSlash=zC;static \u0275fac=function(r){return new(r||t)(Ne(ro))};static \u0275prov=ae({token:t,factory:()=>$L(),providedIn:"root"})}return t})();function $L(){return new JC(Ne(ro))}function HL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function GC(t){return t.replace(/\/index.html$/,"")}function qL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var WL=(()=>{class t extends ro{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Id(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+nn(s))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+nn(s))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ne(ic),Ne(Ed,8))};static \u0275prov=ae({token:t,factory:t.\u0275fac})}return t})();var ut=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(ut||{}),me=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(me||{}),Tt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Tt||{}),Yn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function nA(t){return St(t)[Me.LocaleId]}function rA(t,e,n){let r=St(t),i=[r[Me.DayPeriodsFormat],r[Me.DayPeriodsStandalone]],s=Ut(i,e);return Ut(s,n)}function iA(t,e,n){let r=St(t),i=[r[Me.DaysFormat],r[Me.DaysStandalone]],s=Ut(i,e);return Ut(s,n)}function sA(t,e,n){let r=St(t),i=[r[Me.MonthsFormat],r[Me.MonthsStandalone]],s=Ut(i,e);return Ut(s,n)}function oA(t,e){let r=St(t)[Me.Eras];return Ut(r,e)}function sc(t,e){let n=St(t);return Ut(n[Me.DateFormat],e)}function oc(t,e){let n=St(t);return Ut(n[Me.TimeFormat],e)}function ac(t,e){let r=St(t)[Me.DateTimeFormat];return Ut(r,e)}function cc(t,e){let n=St(t),r=n[Me.NumberSymbols][e];if(typeof r>"u"){if(e===Yn.CurrencyDecimal)return n[Me.NumberSymbols][Yn.Decimal];if(e===Yn.CurrencyGroup)return n[Me.NumberSymbols][Yn.Group]}return r}function aA(t){if(!t[Me.ExtraData])throw new j(2303,!1)}function cA(t){let e=St(t);return aA(e),(e[Me.ExtraData][2]||[]).map(r=>typeof r=="string"?uy(r):[uy(r[0]),uy(r[1])])}function uA(t,e,n){let r=St(t);aA(r);let i=[r[Me.ExtraData][0],r[Me.ExtraData][1]],s=Ut(i,e)||[];return Ut(s,n)||[]}function Ut(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new j(2304,!1)}function uy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var zL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,wd={},GL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function lA(t,e,n,r){let i=nV(t);e=Kn(n,e)||e;let o=[],a;for(;e;)if(a=GL.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let u=i.getTimezoneOffset();r&&(u=hA(r,u),i=tV(i,r));let l="";return o.forEach(h=>{let p=XL(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Ad(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Kn(t,e){let n=nA(t);if(wd[n]??={},wd[n][e])return wd[n][e];let r="";switch(e){case"shortDate":r=sc(t,Tt.Short);break;case"mediumDate":r=sc(t,Tt.Medium);break;case"longDate":r=sc(t,Tt.Long);break;case"fullDate":r=sc(t,Tt.Full);break;case"shortTime":r=oc(t,Tt.Short);break;case"mediumTime":r=oc(t,Tt.Medium);break;case"longTime":r=oc(t,Tt.Long);break;case"fullTime":r=oc(t,Tt.Full);break;case"short":let i=Kn(t,"shortTime"),s=Kn(t,"shortDate");r=Td(ac(t,Tt.Short),[i,s]);break;case"medium":let o=Kn(t,"mediumTime"),a=Kn(t,"mediumDate");r=Td(ac(t,Tt.Medium),[o,a]);break;case"long":let u=Kn(t,"longTime"),l=Kn(t,"longDate");r=Td(ac(t,Tt.Long),[u,l]);break;case"full":let h=Kn(t,"fullTime"),p=Kn(t,"fullDate");r=Td(ac(t,Tt.Full),[h,p]);break}return r&&(wd[n][e]=r),r}function Td(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function rn(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function KL(t,e){return rn(t,3).substring(0,e)}function Fe(t,e,n=0,r=!1,i=!1){return function(s,o){let a=YL(t,s);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return KL(a,e);let u=cc(o,Yn.MinusSign);return rn(a,e,u,r,i)}}function YL(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new j(2301,!1)}}function Ie(t,e,n=ut.Format,r=!1){return function(i,s){return QL(i,s,t,e,n,r)}}function QL(t,e,n,r,i,s){switch(n){case 2:return sA(e,i,r)[t.getMonth()];case 1:return iA(e,i,r)[t.getDay()];case 0:let o=t.getHours(),a=t.getMinutes();if(s){let l=cA(e),h=uA(e,i,r),p=l.findIndex(y=>{if(Array.isArray(y)){let[_,A]=y,N=o>=_.hours&&a>=_.minutes,P=o<A.hours||o===A.hours&&a<A.minutes;if(_.hours<A.hours){if(N&&P)return!0}else if(N||P)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return rA(e,i,r)[o<12?0:1];case 3:return oA(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new j(2302,!1)}}function Dd(t){return function(e,n,r){let i=-1*r,s=cc(n,Yn.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+rn(o,2,s)+rn(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+rn(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+rn(o,2,s)+":"+rn(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+rn(o,2,s)+":"+rn(Math.abs(i%60),2,s);default:throw new j(2302,!1)}}}var JL=0,Cd=4;function ZL(t){let e=Ad(t,JL,1).getDay();return Ad(t,0,1+(e<=Cd?Cd:Cd+7)-e)}function dA(t){let e=t.getDay(),n=e===0?-3:Cd-e;return Ad(t.getFullYear(),t.getMonth(),t.getDate()+n)}function ly(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=dA(n),o=ZL(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return rn(i,t,cc(r,Yn.MinusSign))}}function bd(t,e=!1){return function(n,r){let s=dA(n).getFullYear();return rn(s,t,cc(r,Yn.MinusSign),e)}}var dy={};function XL(t){if(dy[t])return dy[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ie(3,me.Abbreviated);break;case"GGGG":e=Ie(3,me.Wide);break;case"GGGGG":e=Ie(3,me.Narrow);break;case"y":e=Fe(0,1,0,!1,!0);break;case"yy":e=Fe(0,2,0,!0,!0);break;case"yyy":e=Fe(0,3,0,!1,!0);break;case"yyyy":e=Fe(0,4,0,!1,!0);break;case"Y":e=bd(1);break;case"YY":e=bd(2,!0);break;case"YYY":e=bd(3);break;case"YYYY":e=bd(4);break;case"M":case"L":e=Fe(1,1,1);break;case"MM":case"LL":e=Fe(1,2,1);break;case"MMM":e=Ie(2,me.Abbreviated);break;case"MMMM":e=Ie(2,me.Wide);break;case"MMMMM":e=Ie(2,me.Narrow);break;case"LLL":e=Ie(2,me.Abbreviated,ut.Standalone);break;case"LLLL":e=Ie(2,me.Wide,ut.Standalone);break;case"LLLLL":e=Ie(2,me.Narrow,ut.Standalone);break;case"w":e=ly(1);break;case"ww":e=ly(2);break;case"W":e=ly(1,!0);break;case"d":e=Fe(2,1);break;case"dd":e=Fe(2,2);break;case"c":case"cc":e=Fe(7,1);break;case"ccc":e=Ie(1,me.Abbreviated,ut.Standalone);break;case"cccc":e=Ie(1,me.Wide,ut.Standalone);break;case"ccccc":e=Ie(1,me.Narrow,ut.Standalone);break;case"cccccc":e=Ie(1,me.Short,ut.Standalone);break;case"E":case"EE":case"EEE":e=Ie(1,me.Abbreviated);break;case"EEEE":e=Ie(1,me.Wide);break;case"EEEEE":e=Ie(1,me.Narrow);break;case"EEEEEE":e=Ie(1,me.Short);break;case"a":case"aa":case"aaa":e=Ie(0,me.Abbreviated);break;case"aaaa":e=Ie(0,me.Wide);break;case"aaaaa":e=Ie(0,me.Narrow);break;case"b":case"bb":case"bbb":e=Ie(0,me.Abbreviated,ut.Standalone,!0);break;case"bbbb":e=Ie(0,me.Wide,ut.Standalone,!0);break;case"bbbbb":e=Ie(0,me.Narrow,ut.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ie(0,me.Abbreviated,ut.Format,!0);break;case"BBBB":e=Ie(0,me.Wide,ut.Format,!0);break;case"BBBBB":e=Ie(0,me.Narrow,ut.Format,!0);break;case"h":e=Fe(3,1,-12);break;case"hh":e=Fe(3,2,-12);break;case"H":e=Fe(3,1);break;case"HH":e=Fe(3,2);break;case"m":e=Fe(4,1);break;case"mm":e=Fe(4,2);break;case"s":e=Fe(5,1);break;case"ss":e=Fe(5,2);break;case"S":e=Fe(6,1);break;case"SS":e=Fe(6,2);break;case"SSS":e=Fe(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Dd(0);break;case"ZZZZZ":e=Dd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Dd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Dd(2);break;default:return null}return dy[t]=e,e}function hA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function eV(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function tV(t,e,n){let i=t.getTimezoneOffset(),s=hA(e,i);return eV(t,-1*(s-i))}function nV(t){if(ZC(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Ad(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(zL))return rV(r)}let e=new Date(t);if(!ZC(e))throw new j(2302,!1);return e}function rV(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,u,l),e}function ZC(t){return t instanceof Date&&!isNaN(t.valueOf())}var hy=/\s+/,XC=[],iV=(()=>{class t{_ngEl;_renderer;initialClasses=XC;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(hy):XC}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(hy):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(hy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(Y(tn),Y(Dn))};static \u0275dir=De({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var Sd=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},fA=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Sd(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),eA(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);eA(s,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Y(Ya),Y(Ga),Y(ay))};static \u0275dir=De({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function eA(t,e){t.context.$implicit=e.item}var sV=(()=>{class t{_viewContainer;_context=new Rd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){tA(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){tA(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Y(Ya),Y(Ga))};static \u0275dir=De({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Rd=class{$implicit=null;ngIf=null};function tA(t,e){if(t&&!t.createEmbeddedView)throw new j(2020,!1)}function pA(t,e){return new j(2100,!1)}var oV=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,aV=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw pA(t,n);return n.replace(oV,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=gd({name:"titlecase",type:t,pure:!0})}return t})();var cV="mediumDate",gA=new $(""),mA=new $(""),uV=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??cV,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return lA(n,o,s||this.locale,a)}catch(o){throw pA(t,o.message)}}static \u0275fac=function(r){return new(r||t)(Y(ec,16),Y(gA,24),Y(mA,24))};static \u0275pipe=gd({name:"date",type:t,pure:!0})}return t})();var lV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Xs({type:t});static \u0275inj=wi({})}return t})();function dV(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var fy=class{};var dte="browser";var hte=(()=>{class t{static \u0275prov=ae({token:t,providedIn:"root",factory:()=>new py(L(Mi),window)})}return t})(),py=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(ce(q({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let r=hV(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Ei(2400,!1))}}scrollToElement(e,n){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(ce(q({},n),{left:i-o[0],top:s-o[1]}))}};function hV(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var CA=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Y(Dn),Y(tn))};static \u0275dir=De({type:t})}return t})(),co=(()=>{class t extends CA{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tn(t)))(i||t)}})();static \u0275dir=De({type:t,features:[Xe]})}return t})(),Hi=new $(""),fV={provide:Hi,useExisting:ot(()=>pV),multi:!0},pV=(()=>{class t extends co{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tn(t)))(i||t)}})();static \u0275dir=De({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&bn("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Rt([fV]),Xe]})}return t})(),gV={provide:Hi,useExisting:ot(()=>AA),multi:!0};function mV(){let t=$i()?$i().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var yV=new $(""),AA=(()=>{class t extends CA{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!mV())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Y(Dn),Y(tn),Y(yV,8))};static \u0275dir=De({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&bn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Rt([gV]),Xe]})}return t})();function _V(t){return t==null||vV(t)===0}function vV(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var pc=new $(""),SA=new $("");function IV(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function EV(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function wV(t){return _V(t.value)?{required:!0}:null}function yA(t){return null}function RA(t){return t!=null}function NA(t){return eo(t)?pn(t):t}function PA(t){let e={};return t.forEach(n=>{e=n!=null?q(q({},e),n):e}),Object.keys(e).length===0?null:e}function kA(t,e){return e.map(n=>n(t))}function TV(t){return!t.validate}function MA(t){return t.map(e=>TV(e)?e:n=>e.validate(n))}function DV(t){if(!t)return null;let e=t.filter(RA);return e.length==0?null:function(n){return PA(kA(n,e))}}function _y(t){return t!=null?DV(MA(t)):null}function bV(t){if(!t)return null;let e=t.filter(RA);return e.length==0?null:function(n){let r=kA(n,e).map(NA);return Rp(r).pipe(Gt(PA))}}function vy(t){return t!=null?bV(MA(t)):null}function _A(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function CV(t){return t._rawValidators}function AV(t){return t._rawAsyncValidators}function gy(t){return t?Array.isArray(t)?t:[t]:[]}function Pd(t,e){return Array.isArray(t)?t.includes(e):t===e}function vA(t,e){let n=gy(e);return gy(t).forEach(i=>{Pd(n,i)||n.push(i)}),n}function IA(t,e){return gy(e).filter(n=>!Pd(t,n))}var kd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_y(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},oo=class extends kd{name;get formDirective(){return null}get path(){return null}},ao=class extends kd{_parent=null;name=null;valueAccessor=null},Md=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},SV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ote=ce(q({},SV),{"[class.ng-submitted]":"isSubmitted"}),xte=(()=>{class t extends Md{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Y(ao,2))};static \u0275dir=De({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Xa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Xe]})}return t})(),Fte=(()=>{class t extends Md{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Y(oo,10))};static \u0275dir=De({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Xa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Xe]})}return t})();var uc="VALID",Nd="INVALID",io="PENDING",lc="DISABLED",kr=class{},Od=class extends kr{value;source;constructor(e,n){super(),this.value=e,this.source=n}},hc=class extends kr{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},fc=class extends kr{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},so=class extends kr{status;source;constructor(e,n){super(),this.status=e,this.source=n}},my=class extends kr{source;constructor(e){super(),this.source=e}},yy=class extends kr{source;constructor(e){super(),this.source=e}};function OA(t){return(Ld(t)?t.validators:t)||null}function RV(t){return Array.isArray(t)?_y(t):t||null}function xA(t,e){return(Ld(e)?e.asyncValidators:t)||null}function NV(t){return Array.isArray(t)?vy(t):t||null}function Ld(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function PV(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[n])throw new j(1001,"")}function kV(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new j(1002,"")})}var xd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Cn(this.statusReactive)}set status(e){Cn(()=>this.statusReactive.set(e))}_status=no(()=>this.statusReactive());statusReactive=Rr(void 0);get valid(){return this.status===uc}get invalid(){return this.status===Nd}get pending(){return this.status==io}get disabled(){return this.status===lc}get enabled(){return this.status!==lc}errors;get pristine(){return Cn(this.pristineReactive)}set pristine(e){Cn(()=>this.pristineReactive.set(e))}_pristine=no(()=>this.pristineReactive());pristineReactive=Rr(!0);get dirty(){return!this.pristine}get touched(){return Cn(this.touchedReactive)}set touched(e){Cn(()=>this.touchedReactive.set(e))}_touched=no(()=>this.touchedReactive());touchedReactive=Rr(!1);get untouched(){return!this.touched}_events=new zt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IA(e,this._rawAsyncValidators))}hasValidator(e){return Pd(this._rawValidators,e)}hasAsyncValidator(e){return Pd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(q({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new fc(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new fc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(q({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new hc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new hc(!0,r))}markAsPending(e={}){this.status=io;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new so(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(q({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=lc,this.errors=null,this._forEachChild(i=>{i.disable(ce(q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Od(this.value,r)),this._events.next(new so(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(q({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=uc,this._forEachChild(r=>{r.enable(ce(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(q({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uc||this.status===io)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Od(this.value,n)),this._events.next(new so(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(q({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lc:uc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=io,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=NA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new so(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?lc:this.errors?Nd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(io)?io:this._anyControlsHaveStatus(Nd)?Nd:uc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new hc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new fc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ld(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=RV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=NV(this._rawAsyncValidators)}},Fd=class extends xd{constructor(e,n,r){super(OA(n),xA(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){kV(this,!0,e),Object.keys(e).forEach(r=>{PV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Vd=new $("",{providedIn:"root",factory:()=>Ud}),Ud="always";function MV(t,e){return[...e.path,t]}function FA(t,e,n=Ud){LA(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),xV(t,e),LV(t,e),FV(t,e),OV(t,e)}function EA(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function OV(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function LA(t,e){let n=CV(t);e.validator!==null?t.setValidators(_A(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=AV(t);e.asyncValidator!==null?t.setAsyncValidators(_A(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();EA(e._rawValidators,i),EA(e._rawAsyncValidators,i)}function xV(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&VA(t,e)})}function FV(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&VA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function VA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function LV(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function VV(t,e){t==null,LA(t,e)}function UV(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function jV(t){return Object.getPrototypeOf(t.constructor)===co}function BV(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $V(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===AA?n=s:jV(s)?r=s:i=s}),i||r||n||null}var HV={provide:oo,useExisting:ot(()=>qV)},dc=Promise.resolve(),qV=(()=>{class t extends oo{callSetDisabledState;get submitted(){return Cn(this.submittedReactive)}_submitted=no(()=>this.submittedReactive());submittedReactive=Rr(!1);_directives=new Set;form;ngSubmit=new Et;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Fd({},_y(n),vy(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){dc.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),FA(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){dc.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){dc.then(()=>{let r=this._findContainer(n.path),i=new Fd({});VV(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){dc.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){dc.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),BV(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new my(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new yy(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(Y(pc,10),Y(SA,10),Y(Vd,8))};static \u0275dir=De({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&bn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Rt([HV]),Xe]})}return t})();function wA(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function TA(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var WV=class extends xd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(OA(n),xA(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ld(n)&&(n.nonNullable||n.initialValueIsDefault)&&(TA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){TA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var zV={provide:ao,useExisting:ot(()=>GV)},DA=Promise.resolve(),GV=(()=>{class t extends ao{_changeDetectorRef;callSetDisabledState;control=new WV;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Et;constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$V(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),UV(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){FA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){DA.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&vd(r);DA.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?MV(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Y(oo,9),Y(pc,10),Y(SA,10),Y(Hi,10),Y(nc,8),Y(Vd,8))};static \u0275dir=De({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Rt([zV]),Xe,za]})}return t})();var Vte=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=De({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),KV={provide:Hi,useExisting:ot(()=>YV),multi:!0},YV=(()=>{class t extends co{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tn(t)))(i||t)}})();static \u0275dir=De({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&bn("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Rt([KV]),Xe]})}return t})(),QV={provide:Hi,useExisting:ot(()=>ZV),multi:!0};var JV=(()=>{class t{_accessors=[];add(n,r){this._accessors.push([n,r])}remove(n){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===n){this._accessors.splice(r,1);return}}select(n){this._accessors.forEach(r=>{this._isSameGroup(r,n)&&r[1]!==n&&r[1].fireUncheck(n.value)})}_isSameGroup(n,r){return n[0].control?n[0]._parent===r._control._parent&&n[1].name===r.name:!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZV=(()=>{class t extends co{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=L(Vd,{optional:!0})??Ud;constructor(n,r,i,s){super(n,r),this._registry=i,this._injector=s}ngOnInit(){this._control=this._injector.get(ao),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(n){this._state=n===this.value,this.setProperty("checked",this._state)}registerOnChange(n){this._fn=n,this.onChange=()=>{n(this.value),this._registry.select(this)}}setDisabledState(n){(this.setDisabledStateFired||n||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",n),this.setDisabledStateFired=!0}fireUncheck(n){this.writeValue(n)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||t)(Y(Dn),Y(tn),Y(JV),Y($e))};static \u0275dir=De({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&bn("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Rt([QV]),Xe]})}return t})();var XV={provide:Hi,useExisting:ot(()=>jA),multi:!0};function UA(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function e2(t){return t.split(":")[0]}var jA=(()=>{class t extends co{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=L(ji).injector;destroyRef=L(Sr);cdr=L(nc);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Hm({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=UA(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=e2(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tn(t)))(i||t)}})();static \u0275dir=De({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&bn("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rt([XV]),Xe]})}return t})(),Ute=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(UA(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(Y(tn),Y(Dn),Y(jA,9))};static \u0275dir=De({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),t2={provide:Hi,useExisting:ot(()=>BA),multi:!0};function bA(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function n2(t){return t.split(":")[0]}var BA=(()=>{class t extends co{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let u=o[a],l=this._getOptionValue(u.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let u=o[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=n2(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tn(t)))(i||t)}})();static \u0275dir=De({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&bn("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Rt([t2]),Xe]})}return t})(),jte=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(bA(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(bA(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(Y(tn),Y(Dn),Y(BA,9))};static \u0275dir=De({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function $A(t){return typeof t=="number"?t:parseFloat(t)}var Iy=(()=>{class t{_validator=yA;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):yA,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=De({type:t,features:[za]})}return t})(),r2={provide:pc,useExisting:ot(()=>i2),multi:!0},i2=(()=>{class t extends Iy{max;inputName="max";normalizeInput=n=>$A(n);createValidator=n=>EV(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tn(t)))(i||t)}})();static \u0275dir=De({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&to("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Rt([r2]),Xe]})}return t})(),s2={provide:pc,useExisting:ot(()=>o2),multi:!0},o2=(()=>{class t extends Iy{min;inputName="min";normalizeInput=n=>$A(n);createValidator=n=>IV(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tn(t)))(i||t)}})();static \u0275dir=De({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&to("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Rt([s2]),Xe]})}return t})(),a2={provide:pc,useExisting:ot(()=>c2),multi:!0};var c2=(()=>{class t extends Iy{required;inputName="required";normalizeInput=vd;createValidator=n=>wV;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tn(t)))(i||t)}})();static \u0275dir=De({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&to("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Rt([a2]),Xe]})}return t})();var u2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Xs({type:t});static \u0275inj=wi({})}return t})();var Bte=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Vd,useValue:n.callSetDisabledState??Ud}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Xs({type:t});static \u0275inj=wi({imports:[u2]})}return t})();var HA=()=>{};var zA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},l2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(n[h],n[p],n[y],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new wy;let y=s<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},wy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},d2=function(t){let e=zA(t);return jd.encodeByteArray(e,!0)},mc=function(t){return d2(t).replace(/\./g,"")},Bd=function(t){try{return jd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var h2=()=>Dy().__FIREBASE_DEFAULTS__,f2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Bd(t[1]);return e&&JSON.parse(e)},$d=()=>{try{return HA()||h2()||f2()||p2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},by=t=>{var e,n;return(n=(e=$d())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},GA=t=>{let e=by(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cy=()=>{var t;return(t=$d())===null||t===void 0?void 0:t.config},Ay=t=>{var e;return(e=$d())===null||e===void 0?void 0:e[`_${t}`]};var qi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Mr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Hd(t){return m(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function KA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mc(JSON.stringify(n)),mc(JSON.stringify(o)),""].join(".")}var gc={};function g2(){let t={prod:[],emulator:[]};for(let e of Object.keys(gc))gc[e]?t.emulator.push(e):t.prod.push(e);return t}function m2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var qA=!1;function qd(t,e){if(typeof window>"u"||typeof document>"u"||!Mr(window.location.host)||gc[t]===e||gc[t]||qA)return;gc[t]=e;function n(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=g2().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,_){y.setAttribute("width","24"),y.setAttribute("id",_),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function l(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{qA=!0,o()},y}function h(y,_){y.setAttribute("id",_),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=m2(r),_=n("text"),A=document.getElementById(_)||document.createElement("span"),N=n("learnmore"),P=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),H=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let Z=y.element;a(Z),h(P,N);let ye=l();u(H,x),Z.append(H,A,P,ye),document.body.appendChild(Z)}s?(A.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function y2(){var t;let e=(t=$d())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XA(){let t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eS(){return!y2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yc(){try{return typeof indexedDB=="object"}catch{return!1}}function tS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var _2="FirebaseError",Nt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_2,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}},sn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?v2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Nt(i,a,r)}};function v2(t,e){return t.replace(I2,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var I2=/\{\$([^}]+)}/g;function nS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jt(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(WA(s)&&WA(o)){if(!jt(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function WA(t){return t!==null&&typeof t=="object"}function _c(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function lo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rS(t,e){let n=new Ty(t,e);return n.subscribe.bind(n)}var Ty=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");E2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ey),i.error===void 0&&(i.error=Ey),i.complete===void 0&&(i.complete=Ey);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function E2(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ey(){}var zte=4*60*60*1e3;function Ce(t){return t&&t._delegate?t._delegate:t}var yt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Wi="[DEFAULT]";var Sy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new qi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T2(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:w2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function w2(t){return t===Wi?void 0:t}function T2(t){return t.instantiationMode==="EAGER"}var Wd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Sy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var D2=[],ie=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ie||{}),b2={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},C2=ie.INFO,A2={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},S2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=A2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},An=class{constructor(e){this.name=e,this._logLevel=C2,this._logHandler=S2,this._userLogHandler=null,D2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}};var R2=(t,e)=>e.some(n=>t instanceof n),iS,sS;function N2(){return iS||(iS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P2(){return sS||(sS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var oS=new WeakMap,Ny=new WeakMap,aS=new WeakMap,Ry=new WeakMap,ky=new WeakMap;function k2(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Sn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&oS.set(n,t)}).catch(()=>{}),ky.set(e,t),e}function M2(t){if(Ny.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ny.set(t,e)}var Py={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ny.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cS(t){Py=t(Py)}function O2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(zd(this),e,...n);return aS.set(r,e.sort?e.sort():[e]),Sn(r)}:P2().includes(t)?function(...e){return t.apply(zd(this),e),Sn(oS.get(this))}:function(...e){return Sn(t.apply(zd(this),e))}}function x2(t){return typeof t=="function"?O2(t):(t instanceof IDBTransaction&&M2(t),R2(t,N2())?new Proxy(t,Py):t)}function Sn(t){if(t instanceof IDBRequest)return k2(t);if(Ry.has(t))return Ry.get(t);let e=x2(t);return e!==t&&(Ry.set(t,e),ky.set(e,t)),e}var zd=t=>ky.get(t);function Gd(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Sn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Sn(o.result),u.oldVersion,u.newVersion,Sn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var F2=["get","getKey","getAll","getAllKeys","count"],L2=["put","add","delete","clear"],My=new Map;function uS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(My.get(e))return My.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=L2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||F2.includes(n)))return;let s=function(o,...a){return m(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return My.set(e,s),s}cS(t=>ce(q({},t),{get:(e,n,r)=>uS(e,n)||t.get(e,n,r),has:(e,n)=>!!uS(e,n)||t.has(e,n)}));var xy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(V2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function V2(t){let e=t.getComponent();return e?.type==="VERSION"}var Fy="@firebase/app",lS="0.13.2";var Qn=new An("@firebase/app"),U2="@firebase/app-compat",j2="@firebase/analytics-compat",B2="@firebase/analytics",$2="@firebase/app-check-compat",H2="@firebase/app-check",q2="@firebase/auth",W2="@firebase/auth-compat",z2="@firebase/database",G2="@firebase/data-connect",K2="@firebase/database-compat",Y2="@firebase/functions",Q2="@firebase/functions-compat",J2="@firebase/installations",Z2="@firebase/installations-compat",X2="@firebase/messaging",eU="@firebase/messaging-compat",tU="@firebase/performance",nU="@firebase/performance-compat",rU="@firebase/remote-config",iU="@firebase/remote-config-compat",sU="@firebase/storage",oU="@firebase/storage-compat",aU="@firebase/firestore",cU="@firebase/ai",uU="@firebase/firestore-compat",lU="firebase",dU="11.10.0";var Ly="[DEFAULT]",hU={[Fy]:"fire-core",[U2]:"fire-core-compat",[B2]:"fire-analytics",[j2]:"fire-analytics-compat",[H2]:"fire-app-check",[$2]:"fire-app-check-compat",[q2]:"fire-auth",[W2]:"fire-auth-compat",[z2]:"fire-rtdb",[G2]:"fire-data-connect",[K2]:"fire-rtdb-compat",[Y2]:"fire-fn",[Q2]:"fire-fn-compat",[J2]:"fire-iid",[Z2]:"fire-iid-compat",[X2]:"fire-fcm",[eU]:"fire-fcm-compat",[tU]:"fire-perf",[nU]:"fire-perf-compat",[rU]:"fire-rc",[iU]:"fire-rc-compat",[sU]:"fire-gcs",[oU]:"fire-gcs-compat",[aU]:"fire-fst",[uU]:"fire-fst-compat",[cU]:"fire-vertex","fire-js":"fire-js",[lU]:"fire-js-all"};var vc=new Map,fU=new Map,Vy=new Map;function dS(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function on(t){let e=t.name;if(Vy.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Vy.set(e,t);for(let n of vc.values())dS(n,t);for(let n of fU.values())dS(n,t);return!0}function ho(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dt(t){return t==null?!1:t.settings!==void 0}var pU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new sn("app","Firebase",pU);var Uy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}};var xr=dU;function $y(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ly,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Or.create("bad-app-name",{appName:String(i)});if(n||(n=Cy()),!n)throw Or.create("no-options");let s=vc.get(i);if(s){if(jt(n,s.options)&&jt(r,s.config))return s;throw Or.create("duplicate-app",{appName:i})}let o=new Wd(i);for(let u of Vy.values())o.addComponent(u);let a=new Uy(n,r,o);return vc.set(i,a),a}function zi(t=Ly){let e=vc.get(t);if(!e&&t===Ly&&Cy())return $y();if(!e)throw Or.create("no-app",{appName:t});return e}function Kd(){return Array.from(vc.values())}function Pe(t,e,n){var r;let i=(r=hU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}on(new yt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var gU="firebase-heartbeat-database",mU=1,Ic="firebase-heartbeat-store",Oy=null;function gS(){return Oy||(Oy=Gd(gU,mU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw Or.create("idb-open",{originalErrorMessage:t.message})})),Oy}function yU(t){return m(this,null,function*(){try{let n=(yield gS()).transaction(Ic),r=yield n.objectStore(Ic).get(mS(t));return yield n.done,r}catch(e){if(e instanceof Nt)Qn.warn(e.message);else{let n=Or.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(n.message)}}})}function hS(t,e){return m(this,null,function*(){try{let r=(yield gS()).transaction(Ic,"readwrite");yield r.objectStore(Ic).put(e,mS(t)),yield r.done}catch(n){if(n instanceof Nt)Qn.warn(n.message);else{let r=Or.create("idb-set",{originalErrorMessage:n?.message});Qn.warn(r.message)}}})}function mS(t){return`${t.name}!${t.options.appId}`}var _U=1024,vU=30,jy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new By(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>vU){let o=EU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qn.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=fS(),{heartbeatsToSend:r,unsentEntries:i}=IU(this._heartbeatsCache.heartbeats),s=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Qn.warn(n),""}})}};function fS(){return new Date().toISOString().substring(0,10)}function IU(t,e=_U){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),pS(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var By=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return yc()?tS().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield yU(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return hS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return hS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function pS(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}function EU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function wU(t){on(new yt("platform-logger",e=>new xy(e),"PRIVATE")),on(new yt("heartbeat",e=>new jy(e),"PRIVATE")),Pe(Fy,lS,t),Pe(Fy,lS,"esm2017"),Pe("fire-js","")}wU("");var yS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_S={};var Jn,Hy;(function(){var t;function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(w,D,C){for(var I=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)I[Un-2]=arguments[Un];return v.prototype[D].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)w[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],D=T.g[2];var C=T.g[3],I=v+(C^E&(D^C))+w[0]+3614090360&4294967295;v=E+(I<<7&4294967295|I>>>25),I=C+(D^v&(E^D))+w[1]+3905402710&4294967295,C=v+(I<<12&4294967295|I>>>20),I=D+(E^C&(v^E))+w[2]+606105819&4294967295,D=C+(I<<17&4294967295|I>>>15),I=E+(v^D&(C^v))+w[3]+3250441966&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(C^E&(D^C))+w[4]+4118548399&4294967295,v=E+(I<<7&4294967295|I>>>25),I=C+(D^v&(E^D))+w[5]+1200080426&4294967295,C=v+(I<<12&4294967295|I>>>20),I=D+(E^C&(v^E))+w[6]+2821735955&4294967295,D=C+(I<<17&4294967295|I>>>15),I=E+(v^D&(C^v))+w[7]+4249261313&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(C^E&(D^C))+w[8]+1770035416&4294967295,v=E+(I<<7&4294967295|I>>>25),I=C+(D^v&(E^D))+w[9]+2336552879&4294967295,C=v+(I<<12&4294967295|I>>>20),I=D+(E^C&(v^E))+w[10]+4294925233&4294967295,D=C+(I<<17&4294967295|I>>>15),I=E+(v^D&(C^v))+w[11]+2304563134&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(C^E&(D^C))+w[12]+1804603682&4294967295,v=E+(I<<7&4294967295|I>>>25),I=C+(D^v&(E^D))+w[13]+4254626195&4294967295,C=v+(I<<12&4294967295|I>>>20),I=D+(E^C&(v^E))+w[14]+2792965006&4294967295,D=C+(I<<17&4294967295|I>>>15),I=E+(v^D&(C^v))+w[15]+1236535329&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(D^C&(E^D))+w[1]+4129170786&4294967295,v=E+(I<<5&4294967295|I>>>27),I=C+(E^D&(v^E))+w[6]+3225465664&4294967295,C=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(C^v))+w[11]+643717713&4294967295,D=C+(I<<14&4294967295|I>>>18),I=E+(C^v&(D^C))+w[0]+3921069994&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^C&(E^D))+w[5]+3593408605&4294967295,v=E+(I<<5&4294967295|I>>>27),I=C+(E^D&(v^E))+w[10]+38016083&4294967295,C=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(C^v))+w[15]+3634488961&4294967295,D=C+(I<<14&4294967295|I>>>18),I=E+(C^v&(D^C))+w[4]+3889429448&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^C&(E^D))+w[9]+568446438&4294967295,v=E+(I<<5&4294967295|I>>>27),I=C+(E^D&(v^E))+w[14]+3275163606&4294967295,C=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(C^v))+w[3]+4107603335&4294967295,D=C+(I<<14&4294967295|I>>>18),I=E+(C^v&(D^C))+w[8]+1163531501&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^C&(E^D))+w[13]+2850285829&4294967295,v=E+(I<<5&4294967295|I>>>27),I=C+(E^D&(v^E))+w[2]+4243563512&4294967295,C=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(C^v))+w[7]+1735328473&4294967295,D=C+(I<<14&4294967295|I>>>18),I=E+(C^v&(D^C))+w[12]+2368359562&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(E^D^C)+w[5]+4294588738&4294967295,v=E+(I<<4&4294967295|I>>>28),I=C+(v^E^D)+w[8]+2272392833&4294967295,C=v+(I<<11&4294967295|I>>>21),I=D+(C^v^E)+w[11]+1839030562&4294967295,D=C+(I<<16&4294967295|I>>>16),I=E+(D^C^v)+w[14]+4259657740&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^C)+w[1]+2763975236&4294967295,v=E+(I<<4&4294967295|I>>>28),I=C+(v^E^D)+w[4]+1272893353&4294967295,C=v+(I<<11&4294967295|I>>>21),I=D+(C^v^E)+w[7]+4139469664&4294967295,D=C+(I<<16&4294967295|I>>>16),I=E+(D^C^v)+w[10]+3200236656&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^C)+w[13]+681279174&4294967295,v=E+(I<<4&4294967295|I>>>28),I=C+(v^E^D)+w[0]+3936430074&4294967295,C=v+(I<<11&4294967295|I>>>21),I=D+(C^v^E)+w[3]+3572445317&4294967295,D=C+(I<<16&4294967295|I>>>16),I=E+(D^C^v)+w[6]+76029189&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^C)+w[9]+3654602809&4294967295,v=E+(I<<4&4294967295|I>>>28),I=C+(v^E^D)+w[12]+3873151461&4294967295,C=v+(I<<11&4294967295|I>>>21),I=D+(C^v^E)+w[15]+530742520&4294967295,D=C+(I<<16&4294967295|I>>>16),I=E+(D^C^v)+w[2]+3299628645&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(D^(E|~C))+w[0]+4096336452&4294967295,v=E+(I<<6&4294967295|I>>>26),I=C+(E^(v|~D))+w[7]+1126891415&4294967295,C=v+(I<<10&4294967295|I>>>22),I=D+(v^(C|~E))+w[14]+2878612391&4294967295,D=C+(I<<15&4294967295|I>>>17),I=E+(C^(D|~v))+w[5]+4237533241&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~C))+w[12]+1700485571&4294967295,v=E+(I<<6&4294967295|I>>>26),I=C+(E^(v|~D))+w[3]+2399980690&4294967295,C=v+(I<<10&4294967295|I>>>22),I=D+(v^(C|~E))+w[10]+4293915773&4294967295,D=C+(I<<15&4294967295|I>>>17),I=E+(C^(D|~v))+w[1]+2240044497&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~C))+w[8]+1873313359&4294967295,v=E+(I<<6&4294967295|I>>>26),I=C+(E^(v|~D))+w[15]+4264355552&4294967295,C=v+(I<<10&4294967295|I>>>22),I=D+(v^(C|~E))+w[6]+2734768916&4294967295,D=C+(I<<15&4294967295|I>>>17),I=E+(C^(D|~v))+w[13]+1309151649&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~C))+w[4]+4149444226&4294967295,v=E+(I<<6&4294967295|I>>>26),I=C+(E^(v|~D))+w[11]+3174756917&4294967295,C=v+(I<<10&4294967295|I>>>22),I=D+(v^(C|~E))+w[2]+718787259&4294967295,D=C+(I<<15&4294967295|I>>>17),I=E+(C^(D|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,w=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=E;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(w[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,w),D=0;break}}else for(;C<v;)if(w[D++]=T[C++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)T[E++]=this.g[v]>>>w&255;return T};function s(T,v){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;for(var E=[],w=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;w&&C==v||(E[D]=C,w=!1)}this.g=E}var a={};function u(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return P(l(-T));for(var v=[],E=1,w=0;T>=E;w++)v[w]=T/E|0,E*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return P(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),I=parseInt(T.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(I))):(w=w.j(E),w=w.add(l(I)))}return w}var p=u(0),y=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-P(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(N(this))return"-"+P(this).toString(T);for(var v=l(Math.pow(T,6)),E=this,w="";;){var D=ye(E,v).g;E=x(E,D.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=D,A(E))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:A(T)?0:1};function P(T){for(var v=T.g.length,E=[],w=0;w<v;w++)E[w]=~T.g[w];return new o(E,~T.h).add(y)}t.abs=function(){return N(this)?P(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0,D=0;D<=v;D++){var C=w+(this.i(D)&65535)+(T.i(D)&65535),I=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=I>>>16,C&=65535,I&=65535,E[D]=I<<16|C}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(P(v))}t.j=function(T){if(A(this)||A(T))return p;if(N(this))return N(T)?P(this).j(P(T)):P(P(this).j(T));if(N(T))return P(this.j(P(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var C=this.i(w)>>>16,I=this.i(w)&65535,Un=T.i(D)>>>16,Ko=T.i(D)&65535;E[2*w+2*D]+=I*Ko,H(E,2*w+2*D),E[2*w+2*D+1]+=C*Ko,H(E,2*w+2*D+1),E[2*w+2*D+1]+=I*Un,H(E,2*w+2*D+1),E[2*w+2*D+2]+=C*Un,H(E,2*w+2*D+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new o(E,0)};function H(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function ye(T,v){if(A(v))throw Error("division by zero");if(A(T))return new Z(p,p);if(N(T))return v=ye(P(T),v),new Z(P(v.g),P(v.h));if(N(v))return v=ye(T,P(v)),new Z(P(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=y,w=v;0>=w.l(T);)E=ht(E),w=ht(w);var D=pe(E,1),C=pe(w,1);for(w=pe(w,2),E=pe(E,2);!A(w);){var I=C.add(w);0>=I.l(T)&&(D=D.add(E),C=I),w=pe(w,1),E=pe(E,1)}return v=x(T,D.j(v)),new Z(D,v)}for(D=p;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(E),I=C.j(v);N(I)||0<I.l(T);)E-=w,C=l(E),I=C.j(v);A(C)&&(C=y),D=D.add(C),T=x(T,I)}return new Z(D,T)}t.A=function(T){return ye(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&T.i(w);return new o(E,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|T.i(w);return new o(E,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^T.i(w);return new o(E,this.h^T.h)};function ht(T){for(var v=T.g.length+1,E=[],w=0;w<v;w++)E[w]=T.i(w)<<1|T.i(w-1)>>>31;return new o(E,T.h)}function pe(T,v){var E=v>>5;v%=32;for(var w=T.g.length-E,D=[],C=0;C<w;C++)D[C]=0<v?T.i(C+E)>>>v|T.i(C+E+1)<<32-v:T.i(C+E);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Hy=_S.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Jn=_S.Integer=o}).apply(typeof yS<"u"?yS:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zn={};var qy,TU,fo,Wy,Ec,Qd,zy,Gy,Ky;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,S){for(var M=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)M[_e-2]=arguments[_e];return d.prototype[b].apply(g,M)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function P(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,S=g.length||0;c.length=b+S;for(let M=0;M<S;M++)c[b+M]=g[M]}else c.push(g)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ye(c){return ye[" "](c),c}ye[" "]=function(){};var ht=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function pe(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let S=0;S<E.length;S++)f=E[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Of;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Un{constructor(){this.h=this.g=null}add(d,f){let g=Ko.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ko=new x(()=>new ek,c=>c.reset());class ek{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Yo,Qo=!1,Of=new Un,VE=()=>{let c=a.Promise.resolve(void 0);Yo=()=>{c.then(tk)}};var tk=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){C(f)}var d=Ko;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Qo=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var nk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Jo(c,d){if(et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ht){e:{try{ye(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:rk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Jo.aa.h.call(this)}}A(Jo,et);var rk={2:"touch",3:"pen",4:"mouse"};Jo.prototype.h=function(){Jo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Zo="closure_listenable_"+(1e6*Math.random()|0),ik=0;function sk(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++ik,this.da=this.fa=!1}function hu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function fu(c){this.src=c,this.g={},this.h=0}fu.prototype.add=function(c,d,f,g,b){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var M=Ff(c,d,g,b);return-1<M?(d=c[M],f||(d.fa=!1)):(d=new sk(d,this.src,S,!!g,b),d.fa=f,c.push(d)),d};function xf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(g,b,1),S&&(hu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ff(c,d,f,g){for(var b=0;b<c.length;++b){var S=c[b];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return b}return-1}var Lf="closure_lm_"+(1e6*Math.random()|0),Vf={};function UE(c,d,f,g,b){if(g&&g.once)return BE(c,d,f,g,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)UE(c,d[S],f,g,b);return null}return f=$f(f),c&&c[Zo]?c.K(d,f,l(g)?!!g.capture:!!g,b):jE(c,d,f,!1,g,b)}function jE(c,d,f,g,b,S){if(!d)throw Error("Invalid event type");var M=l(b)?!!b.capture:!!b,_e=jf(c);if(_e||(c[Lf]=_e=new fu(c)),f=_e.add(d,f,g,M,S),f.proxy)return f;if(g=ok(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)nk||(b=M),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(HE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ok(){function c(f){return d.call(c.src,c.listener,f)}let d=ak;return c}function BE(c,d,f,g,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)BE(c,d[S],f,g,b);return null}return f=$f(f),c&&c[Zo]?c.L(d,f,l(g)?!!g.capture:!!g,b):jE(c,d,f,!0,g,b)}function $E(c,d,f,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)$E(c,d[S],f,g,b);else g=l(g)?!!g.capture:!!g,f=$f(f),c&&c[Zo]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=Ff(S,f,g,b),-1<f&&(hu(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=jf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ff(d,f,g,b)),(f=-1<c?d[c]:null)&&Uf(f))}function Uf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Zo])xf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(HE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=jf(d))?(xf(f,c),f.h==0&&(f.src=null,d[Lf]=null)):hu(c)}}}function HE(c){return c in Vf?Vf[c]:Vf[c]="on"+c}function ak(c,d){if(c.da)c=!0;else{d=new Jo(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Uf(c),c=f.call(g,d)}return c}function jf(c){return c=c[Lf],c instanceof fu?c:null}var Bf="__closure_events_fn_"+(1e9*Math.random()>>>0);function $f(c){return typeof c=="function"?c:(c[Bf]||(c[Bf]=function(d){return c.handleEvent(d)}),c[Bf])}function tt(){fr.call(this),this.i=new fu(this),this.M=this,this.F=null}A(tt,fr),tt.prototype[Zo]=!0,tt.prototype.removeEventListener=function(c,d,f,g){$E(this,c,d,f,g)};function ft(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new et(d,c);else if(d instanceof et)d.target=d.target||c;else{var b=d;d=new et(g,c),w(d,b)}if(b=!0,f)for(var S=f.length-1;0<=S;S--){var M=d.g=f[S];b=pu(M,g,!0,d)&&b}if(M=d.g=c,b=pu(M,g,!0,d)&&b,b=pu(M,g,!1,d)&&b,f)for(S=0;S<f.length;S++)M=d.g=f[S],b=pu(M,g,!1,d)&&b}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)hu(f[g]);delete c.g[d],c.h--}}this.F=null},tt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},tt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function pu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var M=d[S];if(M&&!M.da&&M.capture==f){var _e=M.listener,Ye=M.ha||M.src;M.fa&&xf(c.i,M),b=_e.call(Ye,g)!==!1&&b}}return b&&!g.defaultPrevented}function qE(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function WE(c){c.g=qE(()=>{c.g=null,c.i&&(c.i=!1,WE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class ck extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:WE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xo(c){fr.call(this),this.h=c,this.g={}}A(Xo,fr);var zE=[];function GE(c){pe(c.g,function(d,f){this.g.hasOwnProperty(f)&&Uf(d)},c),c.g={}}Xo.prototype.N=function(){Xo.aa.N.call(this),GE(this)},Xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hf=a.JSON.stringify,uk=a.JSON.parse,lk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function qf(){}qf.prototype.h=null;function KE(c){return c.h||(c.h=c.i())}function YE(){}var ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wf(){et.call(this,"d")}A(Wf,et);function zf(){et.call(this,"c")}A(zf,et);var si={},QE=null;function gu(){return QE=QE||new tt}si.La="serverreachability";function JE(c){et.call(this,si.La,c)}A(JE,et);function ta(c){let d=gu();ft(d,new JE(d))}si.STAT_EVENT="statevent";function ZE(c,d){et.call(this,si.STAT_EVENT,c),this.stat=d}A(ZE,et);function pt(c){let d=gu();ft(d,new ZE(d,c))}si.Ma="timingevent";function XE(c,d){et.call(this,si.Ma,c),this.size=d}A(XE,et);function na(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ra(){this.g=!0}ra.prototype.xa=function(){this.g=!1};function dk(c,d,f,g,b,S){c.info(function(){if(c.g)if(S)for(var M="",_e=S.split("&"),Ye=0;Ye<_e.length;Ye++){var de=_e[Ye].split("=");if(1<de.length){var nt=de[0];de=de[1];var rt=nt.split("_");M=2<=rt.length&&rt[1]=="type"?M+(nt+"="+de+"&"):M+(nt+"=redacted&")}}else M=null;else M=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+M})}function hk(c,d,f,g,b,S,M){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+S+" "+M})}function _s(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+pk(c,f)+(g?" "+g:"")})}function fk(c,d){c.info(function(){return"TIMEOUT: "+d})}ra.prototype.info=function(){};function pk(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var M=1;M<b.length;M++)b[M]=""}}}}return Hf(f)}catch{return d}}var mu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ew={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gf;function yu(){}A(yu,qf),yu.prototype.g=function(){return new XMLHttpRequest},yu.prototype.i=function(){return{}},Gf=new yu;function pr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tw}function tw(){this.i=null,this.g="",this.h=!1}var nw={},Kf={};function Yf(c,d,f){c.L=1,c.v=Eu(jn(d)),c.m=f,c.P=!0,rw(c,null)}function rw(c,d){c.F=Date.now(),_u(c),c.A=jn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),yw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new tw,c.g=xw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new ck(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(zE[0]=b.toString()),b=zE);for(var S=0;S<b.length;S++){var M=UE(f,b[S],g||d.handleEvent,!1,d.h||d);if(!M)break;d.g[M.key]=M}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ta(),dk(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Bn(c)==3?d.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{let rt=Bn(this.g);var d=this.g.Ba();let Es=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||Dw(this.g)))){this.J||rt!=4||d==7||(d==8||0>=Es?ta(3):ta(2)),Qf(this);var f=this.g.Z();this.X=f;t:if(iw(this)){var g=Dw(this.g);c="";var b=g.length,S=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),ia(this);var M="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=f==200,hk(this.i,this.u,this.A,this.l,this.R,rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,Ye=this.g;if((_e=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(_e)){var de=_e;break t}}de=null}if(f=de)_s(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jf(this,f);else{this.o=!1,this.s=3,pt(12),oi(this),ia(this);break e}}if(this.P){f=!0;let qt;for(;!this.J&&this.C<M.length;)if(qt=gk(this,M),qt==Kf){rt==4&&(this.s=4,pt(14),f=!1),_s(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==nw){this.s=4,pt(15),_s(this.i,this.l,M,"[Invalid Chunk]"),f=!1;break}else _s(this.i,this.l,qt,null),Jf(this,qt);if(iw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||M.length!=0||this.h.h||(this.s=1,pt(16),f=!1),this.o=this.o&&f,!f)_s(this.i,this.l,M,"[Invalid Chunked Response]"),oi(this),ia(this);else if(0<M.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),rp(nt),nt.M=!0,pt(11))}}else _s(this.i,this.l,M,null),Jf(this,M);rt==4&&oi(this),this.o&&!this.J&&(rt==4?Pw(this.j,this):(this.o=!1,_u(this)))}else kk(this.g),f==400&&0<M.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),oi(this),ia(this)}}}catch{}finally{}};function iw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gk(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Kf:(f=Number(d.substring(f,g)),isNaN(f)?nw:(g+=1,g+f>d.length?Kf:(d=d.slice(g,g+f),c.C=g+f,d)))}pr.prototype.cancel=function(){this.J=!0,oi(this)};function _u(c){c.S=Date.now()+c.I,sw(c,c.I)}function sw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=na(y(c.ba,c),d)}function Qf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(fk(this.i,this.A),this.L!=2&&(ta(),pt(17)),oi(this),this.s=2,ia(this)):sw(this,this.S-c)};function ia(c){c.j.G==0||c.J||Pw(c.j,c)}function oi(c){Qf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,GE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Jf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Zf(f.h,c))){if(!c.K&&Zf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Cu(f),Du(f);else break e;np(f),pt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=na(y(f.Za,f),6e3));if(1>=cw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ci(f,11)}else if((c.K||f.g==c)&&Cu(f),!H(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let de=b[d];if(f.T=de[0],de=de[1],f.G==2)if(de[0]=="c"){f.K=de[1],f.ia=de[2];let nt=de[3];nt!=null&&(f.la=nt,f.j.info("VER="+f.la));let rt=de[4];rt!=null&&(f.Aa=rt,f.j.info("SVER="+f.Aa));let Es=de[5];Es!=null&&typeof Es=="number"&&0<Es&&(g=1.5*Es,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let qt=c.g;if(qt){let Su=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Su){var S=g.h;S.g||Su.indexOf("spdy")==-1&&Su.indexOf("quic")==-1&&Su.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Xf(S,S.h),S.h=null))}if(g.D){let ip=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;ip&&(g.ya=ip,we(g.I,g.D,ip))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var M=c;if(g.qa=Ow(g,g.J?g.ia:null,g.W),M.K){uw(g.h,M);var _e=M,Ye=g.L;Ye&&(_e.I=Ye),_e.B&&(Qf(_e),_u(_e)),g.g=M}else Rw(g);0<f.i.length&&bu(f)}else de[0]!="stop"&&de[0]!="close"||ci(f,7);else f.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?ci(f,7):tp(f):de[0]!="noop"&&f.l&&f.l.ta(de),f.v=0)}}ta(4)}catch{}}var mk=class{constructor(c,d){this.g=c,this.map=d}};function ow(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function cw(c){return c.h?1:c.g?c.g.size:0}function Zf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Xf(c,d){c.g?c.g.add(d):c.h=d}function uw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ow.prototype.cancel=function(){if(this.i=lw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function lw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function yk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function _k(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function dw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=_k(c),g=yk(c),b=g.length,S=0;S<b;S++)d.call(void 0,g[S],f&&f[S],c)}var hw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vk(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var S=c[f].substring(0,g);b=c[f].substring(g+1)}else S=c[f];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ai){this.h=c.h,vu(this,c.j),this.o=c.o,this.g=c.g,Iu(this,c.s),this.l=c.l;var d=c.i,f=new aa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),fw(this,f),this.m=c.m}else c&&(d=String(c).match(hw))?(this.h=!1,vu(this,d[1]||"",!0),this.o=sa(d[2]||""),this.g=sa(d[3]||"",!0),Iu(this,d[4]),this.l=sa(d[5]||"",!0),fw(this,d[6]||"",!0),this.m=sa(d[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}ai.prototype.toString=function(){var c=[],d=this.j;d&&c.push(oa(d,pw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(oa(d,pw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(oa(f,f.charAt(0)=="/"?wk:Ek,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",oa(f,Dk)),c.join("")};function jn(c){return new ai(c)}function vu(c,d,f){c.j=f?sa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Iu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function fw(c,d,f){d instanceof aa?(c.i=d,bk(c.i,c.h)):(f||(d=oa(d,Tk)),c.i=new aa(d,c.h))}function we(c,d,f){c.i.set(d,f)}function Eu(c){return we(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function sa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Ik),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ik(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var pw=/[#\/\?@]/g,Ek=/[#\?:]/g,wk=/[#\?]/g,Tk=/[#\?@]/g,Dk=/#/g;function aa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function gr(c){c.g||(c.g=new Map,c.h=0,c.i&&vk(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=aa.prototype,t.add=function(c,d){gr(this),this.i=null,c=vs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function gw(c,d){gr(c),d=vs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function mw(c,d){return gr(c),d=vs(c,d),c.g.has(d)}t.forEach=function(c,d){gr(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let S=0;S<b.length;S++)f.push(d[g])}return f},t.V=function(c){gr(this);let d=[];if(typeof c=="string")mw(this,c)&&(d=d.concat(this.g.get(vs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return gr(this),this.i=null,c=vs(this,c),mw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function yw(c,d,f){gw(c,d),0<f.length&&(c.i=null,c.g.set(vs(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),M=this.V(g);for(g=0;g<M.length;g++){var b=S;M[g]!==""&&(b+="="+encodeURIComponent(String(M[g]))),c.push(b)}}return this.i=c.join("&")};function vs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function bk(c,d){d&&!c.j&&(gr(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(gw(this,g),yw(this,b,f))},c)),c.j=d}function Ck(c,d){let f=new ra;if(a.Image){let g=new Image;g.onload=_(mr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(mr,f,"TestLoadImage: error",!1,d,g),g.onabort=_(mr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(mr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Ak(c,d){let f=new ra,g=new AbortController,b=setTimeout(()=>{g.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),mr(f,"TestPingServer: error",!1,d)})}function mr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function Sk(){this.g=new lk}function Rk(c,d,f){let g=f||"";try{dw(c,function(b,S){let M=b;l(b)&&(M=Hf(b)),d.push(g+S+"="+encodeURIComponent(M))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function ca(c){this.l=c.Ub||null,this.j=c.eb||!1}A(ca,qf),ca.prototype.g=function(){return new wu(this.l,this.j)},ca.prototype.i=function(c){return function(){return c}}({});function wu(c,d){tt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(wu,tt),t=wu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,la(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_w(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function _w(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ua(this):la(this),this.readyState==3&&_w(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ua(this))},t.Qa=function(c){this.g&&(this.response=c,ua(this))},t.ga=function(){this.g&&ua(this)};function ua(c){c.readyState=4,c.l=null,c.j=null,c.v=null,la(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function la(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function vw(c){let d="";return pe(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ep(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=vw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):we(c,d,f))}function Re(c){tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Re,tt);var Nk=/^https?$/i,Pk=["POST","PUT"];t=Re.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gf.g(),this.v=this.o?KE(this.o):KE(Gf),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Iw(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Pk,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,M]of f)this.g.setRequestHeader(S,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tw(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){Iw(this,S)}};function Iw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Ew(c),Tu(c)}function Ew(c){c.A||(c.A=!0,ft(c,"complete"),ft(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ft(this,"complete"),ft(this,"abort"),Tu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ww(this):this.bb())},t.bb=function(){ww(this)};function ww(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Bn(c)!=4||c.Z()!=2)){if(c.u&&Bn(c)==4)qE(c.Ea,0,c);else if(ft(c,"readystatechange"),Bn(c)==4){c.h=!1;try{let M=c.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=M===0){var b=String(c.D).match(hw)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!Nk.test(b?b.toLowerCase():"")}f=g}if(f)ft(c,"complete"),ft(c,"success");else{c.m=6;try{var S=2<Bn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",Ew(c)}}finally{Tu(c)}}}}function Tu(c,d){if(c.g){Tw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ft(c,"ready");try{f.onreadystatechange=g}catch{}}}function Tw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Bn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),uk(d)}};function Dw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kk(c){let d={};c=(c.g&&2<=Bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(H(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[b]||[];d[b]=S,S.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function bw(c){this.Aa=0,this.i=[],this.j=new ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=da("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=da("baseRetryDelayMs",5e3,c),this.cb=da("retryDelaySeedMs",1e4,c),this.Wa=da("forwardChannelMaxRetries",2,c),this.wa=da("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ow(c&&c.concurrentRequestLimit),this.Da=new Sk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){pt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Ow(this,null,this.W),bu(this)};function tp(c){if(Cw(c),c.G==3){var d=c.U++,f=jn(c.I);if(we(f,"SID",c.K),we(f,"RID",d),we(f,"TYPE","terminate"),ha(c,f),d=new pr(c,c.j,d),d.L=2,d.v=Eu(jn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=xw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),_u(d)}Mw(c)}function Du(c){c.g&&(rp(c),c.g.cancel(),c.g=null)}function Cw(c){Du(c),c.u&&(a.clearTimeout(c.u),c.u=null),Cu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function bu(c){if(!aw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Yo||VE(),Qo||(Yo(),Qo=!0),Of.add(d,c),c.B=0}}function Mk(c,d){return cw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=na(y(c.Ga,c,d),kw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new pr(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Sw(this,b,d),f=jn(this.I),we(f,"RID",c),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),ha(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(vw(S)))+"&"+d:this.m&&ep(f,this.m,S)),Xf(this.h,b),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),b.T=!0,Yf(b,f,null)):Yf(b,f,d),this.G=2}}else this.G==3&&(c?Aw(this,c):this.i.length==0||aw(this.h)||Aw(this))};function Aw(c,d){var f;d?f=d.l:f=c.U++;let g=jn(c.I);we(g,"SID",c.K),we(g,"RID",f),we(g,"AID",c.T),ha(c,g),c.m&&c.o&&ep(g,c.m,c.o),f=new pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Sw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xf(c.h,f),Yf(f,g,d)}function ha(c,d){c.H&&pe(c.H,function(f,g){we(d,g,f)}),c.l&&dw({},function(f,g){we(d,g,f)})}function Sw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var b=c.i;let S=-1;for(;;){let M=["count="+f];S==-1?0<f?(S=b[0].g,M.push("ofs="+S)):S=0:M.push("ofs="+S);let _e=!0;for(let Ye=0;Ye<f;Ye++){let de=b[Ye].g,nt=b[Ye].map;if(de-=S,0>de)S=Math.max(0,b[Ye].g-100),_e=!1;else try{Rk(nt,M,"req"+de+"_")}catch{g&&g(nt)}}if(_e){g=M.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Rw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Yo||VE(),Qo||(Yo(),Qo=!0),Of.add(d,c),c.v=0}}function np(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=na(y(c.Fa,c),kw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Nw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=na(y(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Du(this),Nw(this))};function rp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Nw(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=jn(c.qa);we(d,"RID","rpc"),we(d,"SID",c.K),we(d,"AID",c.T),we(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&we(d,"TO",c.ja),we(d,"TYPE","xmlhttp"),ha(c,d),c.m&&c.o&&ep(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Eu(jn(d)),f.m=null,f.P=!0,rw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Du(this),np(this),pt(19))};function Cu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Pw(c,d){var f=null;if(c.g==d){Cu(c),rp(c),c.g=null;var g=2}else if(Zf(c.h,d))f=d.D,uw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=gu(),ft(g,new XE(g,f)),bu(c)}else Rw(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&Mk(c,d)||g==2&&np(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:ci(c,5);break;case 4:ci(c,10);break;case 3:ci(c,6);break;default:ci(c,2)}}}function kw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ci(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let b=!g;g=new ai(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vu(g,"https"),Eu(g),b?Ck(g.toString(),f):Ak(g.toString(),f)}else pt(2);c.G=0,c.l&&c.l.sa(d),Mw(c),Cw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Mw(c){if(c.G=0,c.ka=[],c.l){let d=lw(c.h);(d.length!=0||c.i.length!=0)&&(P(c.ka,d),P(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Ow(c,d,f){var g=f instanceof ai?jn(f):new ai(f);if(g.g!="")d&&(g.g=d+"."+g.g),Iu(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new ai(null);g&&vu(S,g),d&&(S.g=d),b&&Iu(S,b),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&we(g,f,d),we(g,"VER",c.la),ha(c,g),g}function xw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Re(new ca({eb:f})):new Re(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fw(){}t=Fw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Au(){}Au.prototype.g=function(c,d){return new bt(c,d)};function bt(c,d){tt.call(this),this.g=new bw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Is(this)}A(bt,tt),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){tp(this.g)},bt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Hf(c),c=f);d.i.push(new mk(d.Ya++,c)),d.G==3&&bu(d)},bt.prototype.N=function(){this.g.l=null,delete this.j,tp(this.g),delete this.g,bt.aa.N.call(this)};function Lw(c){Wf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(Lw,Wf);function Vw(){zf.call(this),this.status=1}A(Vw,zf);function Is(c){this.g=c}A(Is,Fw),Is.prototype.ua=function(){ft(this.g,"a")},Is.prototype.ta=function(c){ft(this.g,new Lw(c))},Is.prototype.sa=function(c){ft(this.g,new Vw)},Is.prototype.ra=function(){ft(this.g,"b")},Au.prototype.createWebChannel=Au.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Ky=Zn.createWebChannelTransport=function(){return new Au},Gy=Zn.getStatEventTarget=function(){return gu()},zy=Zn.Event=si,Qd=Zn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mu.NO_ERROR=0,mu.TIMEOUT=8,mu.HTTP_ERROR=6,Ec=Zn.ErrorCode=mu,ew.COMPLETE="complete",Wy=Zn.EventType=ew,YE.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",tt.prototype.listen=tt.prototype.K,fo=Zn.WebChannel=YE,TU=Zn.FetchXmlHttpFactory=ca,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,qy=Zn.XhrIo=Re}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});var vS="@firebase/firestore",IS="4.8.0";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var Oo="11.10.0";var Ji=new An("@firebase/firestore");function po(){return Ji.logLevel}function F(t,...e){if(Ji.logLevel<=ie.DEBUG){let n=e.map(Uv);Ji.debug(`Firestore (${Oo}): ${t}`,...n)}}function Xn(t,...e){if(Ji.logLevel<=ie.ERROR){let n=e.map(Uv);Ji.error(`Firestore (${Oo}): ${t}`,...n)}}function jr(t,...e){if(Ji.logLevel<=ie.WARN){let n=e.map(Uv);Ji.warn(`Firestore (${Oo}): ${t}`,...n)}}function Uv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function B(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,d0(t,r,n)}function d0(t,e,n){let r=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xn(r),new Error(r)}function fe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||d0(e,i,r)}function G(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Nt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var an=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var rh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},e_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}},t_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},n_=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new an;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new an,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new an)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new rh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new ze(e)}},r_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},i_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new r_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ih=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},s_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ih(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ih(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function DU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function h0(){return new TextEncoder}var Ac=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=DU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}};function ee(t,e){return t<e?-1:t>e?1:0}function o_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ee(r,i);{let s=h0(),o=bU(s.encode(ES(t,n)),s.encode(ES(e,n)));return o!==0?o:ee(r,i)}}n+=r>65535?2:1}return ee(t.length,e.length)}function ES(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function bU(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ee(t[n],e[n]);return ee(t.length,e.length)}function wo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var wS="__name__",sh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&B(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=t.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ee(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):o_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jn.fromString(e.substring(4,e.length-2))}},Se=class t extends sh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},CU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kt=class t extends sh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return CU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wS}static keyField(){return new t([wS])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new O(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var V=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};function f0(t,e,n){if(!n)throw new O(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AU(t,e,n,r){if(e===!0&&r===!0)throw new O(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function TS(t){if(!V.isDocumentKey(t))throw new O(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DS(t){if(V.isDocumentKey(t))throw new O(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function p0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Bh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B(12329,{type:typeof t})}function Ht(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Bh(t);throw new O(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function SU(t,e){if(e<=0)throw new O(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function je(t,e){let n={typeString:t};return e&&(n.value=e),n}function Vc(t,e){if(!p0(t))throw new O(R.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new O(R.INVALID_ARGUMENT,n);return!0}var bS=-62135596800,CS=1e6,Be=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*CS);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bS)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CS}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-bS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:je("string",Be._jsonSchemaVersion),seconds:je("number"),nanoseconds:je("number")};var Q=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Be(0,0))}static max(){return new t(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sc=-1,a_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};a_.UNKNOWN_ID=-1;function RU(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Zi(i,V.empty(),e)}function NU(t){return new Zi(t.readTime,t.key,Sc)}var Zi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Q.min(),V.empty(),Sc)}static max(){return new t(Q.max(),V.empty(),Sc)}};function PU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=V.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}var kU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",c_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function xo(t){return m(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==kU)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function MU(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fo(t){return t.name==="IndexedDbTransactionError"}var jv=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),Bv=-1;function $h(t){return t==null}function Rc(t){return t===0&&1/t==-1/0}function OU(t){return typeof t=="number"&&Number.isInteger(t)&&!Rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var g0="";function xU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AS(e)),e=FU(t.get(n),e);return AS(e)}function FU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case g0:n+="";break;default:n+=s}}return n}function AS(t){return t+g0+""}var LU="remoteDocuments",m0="owner";var y0="mutationQueues";var _0="mutations";var v0="documentMutations",VU="remoteDocumentsV14";var I0="remoteDocumentGlobal";var E0="targets";var w0="targetDocuments";var T0="targetGlobal",D0="collectionParents";var b0="clientMetadata";var C0="bundles";var A0="namedQueries";var UU="indexConfiguration";var jU="indexState";var BU="indexEntries";var S0="documentOverlays";var $U="globals";var HU=[y0,_0,v0,LU,E0,m0,T0,w0,b0,I0,D0,C0,A0],Ane=[...HU,S0],qU=[y0,_0,v0,VU,E0,m0,T0,w0,b0,I0,D0,C0,A0,S0],WU=qU,zU=[...WU,UU,jU,BU];var Sne=[...zU,$U];function SS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function R0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ke=class t{constructor(e,n){this.comparator=e,this.root=n||Rn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _o(this.root,e,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _o(this.root,e,this.comparator,!0)}},_o=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ge=class t{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oh(this.data.getIterator())}getIteratorFrom(e){return new oh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},oh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $t=class t{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ge(kt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ah=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ah("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var GU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(t){if(fe(!!t,39018),typeof t=="string"){let e=0,n=GU.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function tr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}var N0="server_timestamp",P0="__type__",k0="__previous_value__",M0="__local_write_time__";function $v(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[P0])===null||n===void 0?void 0:n.stringValue)===N0}function Hh(t){let e=t.mapValue.fields[k0];return $v(e)?Hh(e):e}function Nc(t){let e=er(t.mapValue.fields[M0].timestampValue);return new Be(e.seconds,e.nanos)}var u_=class{constructor(e,n,r,i,s,o,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},ch="(default)",uh=class t{constructor(e,n){this.projectId=e,this.database=n||ch}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===ch}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Hv="__type__",O0="__max__",Jd={mapValue:{fields:{__type__:{stringValue:O0}}}},qv="__vector__",To="value";function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$v(t)?4:F0(t)?9007199254740991:x0(t)?10:11:B(28295,{value:t})}function kn(t,e){if(t===e)return!0;let n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nc(t).isEqual(Nc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=er(i.timestampValue),a=er(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return tr(i.bytesValue).isEqual(tr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ae(i.geoPointValue.latitude)===Ae(s.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ae(i.integerValue)===Ae(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ae(i.doubleValue),a=Ae(s.doubleValue);return o===a?Rc(o)===Rc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return wo(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(SS(o)!==SS(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!kn(o[u],a[u])))return!1;return!0}(t,e);default:return B(52216,{left:t})}}function Pc(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Do(t,e){if(t===e)return 0;let n=Br(t),r=Br(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ae(s.integerValue||s.doubleValue),u=Ae(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return RS(t.timestampValue,e.timestampValue);case 4:return RS(Nc(t),Nc(e));case 5:return o_(t.stringValue,e.stringValue);case 6:return function(s,o){let a=tr(s),u=tr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ee(a[l],u[l]);if(h!==0)return h}return ee(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ee(Ae(s.latitude),Ae(o.latitude));return a!==0?a:ee(Ae(s.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return NS(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},y=o.fields||{},_=(a=p[To])===null||a===void 0?void 0:a.arrayValue,A=(u=y[To])===null||u===void 0?void 0:u.arrayValue,N=ee(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:NS(_,A)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Jd.mapValue&&o===Jd.mapValue)return 0;if(s===Jd.mapValue)return 1;if(o===Jd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=o_(u[p],h[p]);if(y!==0)return y;let _=Do(a[u[p]],l[h[p]]);if(_!==0)return _}return ee(u.length,h.length)}(t.mapValue,e.mapValue);default:throw B(23264,{le:n})}}function RS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);let n=er(t),r=er(e),i=ee(n.seconds,r.seconds);return i!==0?i:ee(n.nanos,r.nanos)}function NS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Do(n[i],r[i]);if(s)return s}return ee(n.length,r.length)}function bo(t){return l_(t)}function l_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=er(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return tr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return V.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=l_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${l_(n.fields[o])}`;return i+"}"}(t.mapValue):B(61005,{value:t})}function eh(t){switch(Br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Hh(t);return e?16+eh(e):16;case 5:return 2*t.stringValue.length;case 6:return tr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+eh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Kr(r.fields,(s,o)=>{i+=s.length+eh(o)}),i}(t.mapValue);default:throw B(13486,{value:t})}}function PS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function d_(t){return!!t&&"integerValue"in t}function Wv(t){return!!t&&"arrayValue"in t}function kS(t){return!!t&&"nullValue"in t}function MS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function th(t){return!!t&&"mapValue"in t}function x0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hv])===null||n===void 0?void 0:n.stringValue)===qv}function Tc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Kr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function F0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===O0}var Nne={mapValue:{fields:{[Hv]:{stringValue:qv},[To]:{arrayValue:{}}}}};var Pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(n)}setAll(e){let n=kt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Tc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Kr(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Tc(this.value))}};function L0(t){let e=[];return Kr(t.fields,(n,r)=>{let i=new kt([n]);if(th(r)){let s=L0(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new $t(e)}var cn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Q.min(),Q.min(),Q.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Q.min(),Q.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Q.min(),Q.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Co=class{constructor(e,n){this.position=e,this.inclusive=n}};function OS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=V.comparator(V.fromName(o.referenceValue),n.key):r=Do(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function xS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}var Xi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function KU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var lh=class{},Ue=class t extends lh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new f_(e,n,r):n==="array-contains"?new m_(e,r):n==="in"?new y_(e,r):n==="not-in"?new __(e,r):n==="array-contains-any"?new v_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new p_(e,r):new g_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Do(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Do(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},un=class t extends lh{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return V0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function V0(t){return t.op==="and"}function U0(t){return YU(t)&&V0(t)}function YU(t){for(let e of t.filters)if(e instanceof un)return!1;return!0}function h_(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+bo(t.value);if(U0(t))return t.filters.map(e=>h_(e)).join(",");{let e=t.filters.map(n=>h_(n)).join(",");return`${t.op}(${e})`}}function j0(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&kn(r.value,i.value)}(t,e):t instanceof un?function(r,i){return i instanceof un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&j0(o,i.filters[a]),!0):!1}(t,e):void B(19439)}function B0(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${bo(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(B0).join(" ,")+"}"}(t):"Filter"}var f_=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){let n=V.comparator(e.key,this.key);return this.matchesComparison(n)}},p_=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=$0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},g_=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=$0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function $0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}var m_=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Wv(n)&&Pc(n.arrayValue,this.value)}},y_=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Pc(this.value.arrayValue,n)}},__=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pc(this.value.arrayValue,n)}},v_=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Wv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pc(this.value.arrayValue,r))}};var I_=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function FS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new I_(t,e,n,r,i,s,o)}function zv(t){let e=G(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>h_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bo(r)).join(",")),e.Pe=n}return e.Pe}function Gv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xS(t.startAt,e.startAt)&&xS(t.endAt,e.endAt)}function E_(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var $r=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function QU(t,e,n,r,i,s,o,a){return new $r(t,e,n,r,i,s,o,a)}function Kv(t){return new $r(t)}function LS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function H0(t){return t.collectionGroup!==null}function Dc(t){let e=G(t);if(e.Te===null){e.Te=[];let n=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ge(kt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Xi(s,r))}),n.has(kt.keyField().canonicalString())||e.Te.push(new Xi(kt.keyField(),r))}return e.Te}function Nn(t){let e=G(t);return e.Ie||(e.Ie=JU(e,Dc(t))),e.Ie}function JU(t,e){if(t.limitType==="F")return FS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Xi(i.field,s)});let n=t.endAt?new Co(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Co(t.startAt.position,t.startAt.inclusive):null;return FS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function w_(t,e){let n=t.filters.concat([e]);return new $r(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dh(t,e,n){return new $r(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qh(t,e){return Gv(Nn(t),Nn(e))&&t.limitType===e.limitType}function q0(t){return`${zv(Nn(t))}|lt:${t.limitType}`}function go(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>B0(i)).join(", ")}]`),$h(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bo(i)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function Wh(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):V.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Dc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=OS(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Dc(r),i)||r.endAt&&!function(o,a,u){let l=OS(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Dc(r),i))}(t,e)}function ZU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function W0(t){return(e,n)=>{let r=!1;for(let i of Dc(t)){let s=XU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XU(t,e,n){let r=t.field.isKeyField()?V.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Do(u,l):B(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:t.dir})}}var nr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kr(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return R0(this.inner)}size(){return this.innerSize}};var ej=new ke(V.comparator);function rr(){return ej}var z0=new ke(V.comparator);function wc(...t){let e=z0;for(let n of t)e=e.insert(n.key,n);return e}function G0(t){let e=z0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gi(){return bc()}function K0(){return bc()}function bc(){return new nr(t=>t.toString(),(t,e)=>t.isEqual(e))}var tj=new ke(V.comparator),nj=new Ge(V.comparator);function oe(...t){let e=nj;for(let n of t)e=e.add(n);return e}var rj=new Ge(ee);function ij(){return rj}function Yv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function Y0(t){return{integerValue:""+t}}function sj(t,e){return OU(e)?Y0(e):Yv(t,e)}var Ao=class{constructor(){this._=void 0}};function oj(t,e,n){return t instanceof So?function(i,s){let o={fields:{[P0]:{stringValue:N0},[M0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$v(s)&&(s=Hh(s)),s&&(o.fields[k0]=s),{mapValue:o}}(n,e):t instanceof Hr?J0(t,e):t instanceof qr?Z0(t,e):function(i,s){let o=Q0(i,s),a=VS(o)+VS(i.Ee);return d_(o)&&d_(i.Ee)?Y0(a):Yv(i.serializer,a)}(t,e)}function aj(t,e,n){return t instanceof Hr?J0(t,e):t instanceof qr?Z0(t,e):n}function Q0(t,e){return t instanceof Ro?function(r){return d_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var So=class extends Ao{},Hr=class extends Ao{constructor(e){super(),this.elements=e}};function J0(t,e){let n=X0(e);for(let r of t.elements)n.some(i=>kn(i,r))||n.push(r);return{arrayValue:{values:n}}}var qr=class extends Ao{constructor(e){super(),this.elements=e}};function Z0(t,e){let n=X0(e);for(let r of t.elements)n=n.filter(i=>!kn(i,r));return{arrayValue:{values:n}}}var Ro=class extends Ao{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function VS(t){return Ae(t.integerValue||t.doubleValue)}function X0(t){return Wv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var hh=class{constructor(e,n){this.field=e,this.transform=n}};function cj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hr&&i instanceof Hr||r instanceof qr&&i instanceof qr?wo(r.elements,i.elements,kn):r instanceof Ro&&i instanceof Ro?kn(r.Ee,i.Ee):r instanceof So&&i instanceof So}(t.transform,e.transform)}var T_=class{constructor(e,n){this.version=e,this.transformResults=n}},Mt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function nh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var No=class{};function eR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Po(t.key,Mt.none()):new es(t.key,t.data,Mt.none());{let n=t.data,r=Pt.empty(),i=new Ge(kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mn(t.key,r,new $t(i.toArray()),Mt.none())}}function uj(t,e,n){t instanceof es?function(i,s,o){let a=i.value.clone(),u=jS(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mn?function(i,s,o){if(!nh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=jS(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(tR(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Cc(t,e,n,r){return t instanceof es?function(s,o,a,u){if(!nh(s.precondition,o))return a;let l=s.value.clone(),h=BS(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mn?function(s,o,a,u){if(!nh(s.precondition,o))return a;let l=BS(s.fieldTransforms,u,o),h=o.data;return h.setAll(tR(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return nh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function lj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Q0(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function US(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wo(r,i,(s,o)=>cj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var es=class extends No{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mn=class extends No{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function tR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function jS(t,e,n){let r=new Map;fe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,aj(o,a,n[i]))}return r}function BS(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,oj(s,o,e))}return r}var Po=class extends No{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},D_=class extends No{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var b_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&uj(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Cc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=K0();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=eR(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(n,r)=>US(n,r))&&wo(this.baseMutations,e.baseMutations,(n,r)=>US(n,r))}},C_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return tj}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var A_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var S_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Le,le;function dj(t){switch(t){case R.OK:return B(64938);case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return B(15467,{code:t})}}function nR(t){if(t===void 0)return Xn("GRPC error has no .code"),R.UNKNOWN;switch(t){case Le.OK:return R.OK;case Le.CANCELLED:return R.CANCELLED;case Le.UNKNOWN:return R.UNKNOWN;case Le.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Le.INTERNAL:return R.INTERNAL;case Le.UNAVAILABLE:return R.UNAVAILABLE;case Le.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Le.NOT_FOUND:return R.NOT_FOUND;case Le.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Le.ABORTED:return R.ABORTED;case Le.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Le.DATA_LOSS:return R.DATA_LOSS;default:return B(39323,{code:t})}}(le=Le||(Le={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var $S=null;var hj=new Jn([4294967295,4294967295],0);function HS(t){let e=h0().encode(t),n=new Hy;return n.update(e),new Uint8Array(n.digest())}function qS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jn([n,r],0),new Jn([i,s],0)]}var R_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ki(`Invalid padding: ${n}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Jn.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Jn.fromNumber(r)));return i.compare(hj)===1&&(i=new Jn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=HS(e),[r,i]=qS(n);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let n=HS(e),[r,i]=qS(n);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fh=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Q.min(),i,new ke(ee),rr(),oe())}},kc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,oe(),oe(),oe())}};var vo=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},ph=class{constructor(e,n){this.targetId=e,this.De=n}},gh=class{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},mh=class{constructor(){this.ve=0,this.Ce=WS(),this.Fe=dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=oe(),n=oe(),r=oe();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:s})}}),new kc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=WS()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},N_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=rr(),this.je=Zd(),this.Je=Zd(),this.He=new ke(ee)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let s=i.target;if(E_(s))if(r===0){let o=new V(s.path);this.Xe(n,o,cn.newNoDocument(o,Q.min()))}else fe(r===1,20013,{expectedCount:r});else{let o=this.ot(n);if(o!==r){let a=this._t(e),u=a?this.ut(a,e,o):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}$S?.ct(function(h,p,y,_,A){var N,P,x,H,Z,ye;let ht={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},pe=p.unchangedNames;return pe&&(ht.bloomFilter={applied:A===0,hashCount:(N=pe?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(H=(x=(P=pe?.bits)===null||P===void 0?void 0:P.bitmap)===null||x===void 0?void 0:x.length)!==null&&H!==void 0?H:0,padding:(ye=(Z=pe?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ye!==void 0?ye:0,mightContain:T=>{var v;return(v=_?.mightContain(T))!==null&&v!==void 0&&v}}),ht}(o,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=tr(r).toUint8Array()}catch(u){if(u instanceof ah)return jr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new R_(o,i,s)}catch(u){return jr(u instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&E_(a.target)){let u=new V(a.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,cn.newNoDocument(u,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=oe();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new fh(e,n,this.He,this.ze,r);return this.ze=rr(),this.je=Zd(),this.Je=Zd(),this.He=new ke(ee),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new mh,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ge(ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ge(ee),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mh),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Zd(){return new ke(V.comparator)}function WS(){return new ke(V.comparator)}var fj={asc:"ASCENDING",desc:"DESCENDING"},pj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gj={and:"AND",or:"OR"},P_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function k_(t,e){return t.useProto3Json||$h(e)?e:{value:e}}function yh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mj(t,e){return yh(t,e.toTimestamp())}function Pn(t){return fe(!!t,49232),Q.fromTimestamp(function(n){let r=er(n);return new Be(r.seconds,r.nanos)}(t))}function Qv(t,e){return M_(t,e).canonicalString()}function M_(t,e){let n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iR(t){let e=Se.fromString(t);return fe(uR(e),10190,{key:e.toString()}),e}function O_(t,e){return Qv(t.databaseId,e.path)}function Yy(t,e){let n=iR(e);if(n.get(1)!==t.databaseId.projectId)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(oR(n))}function sR(t,e){return Qv(t.databaseId,e)}function yj(t){let e=iR(t);return e.length===4?Se.emptyPath():oR(e)}function x_(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oR(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zS(t,e,n){return{name:O_(t,e),fields:n.value.mapValue.fields}}function _j(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(fe(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?R.UNKNOWN:nR(l.code);return new O(h,l.message||"")}(o);n=new gh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Yy(t,r.document.name),s=Pn(r.document.updateTime),o=r.document.createTime?Pn(r.document.createTime):Q.min(),a=new Pt({mapValue:{fields:r.document.fields}}),u=cn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new vo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Yy(t,r.document),s=r.readTime?Pn(r.readTime):Q.min(),o=cn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new vo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Yy(t,r.document),s=r.removedTargetIds||[];n=new vo([],s,i,null)}else{if(!("filter"in e))return B(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new S_(i,s),a=r.targetId;n=new ph(a,o)}}return n}function vj(t,e){let n;if(e instanceof es)n={update:zS(t,e.key,e.value)};else if(e instanceof Po)n={delete:O_(t,e.key)};else if(e instanceof Mn)n={update:zS(t,e.key,e.data),updateMask:Sj(e.fieldMask)};else{if(!(e instanceof D_))return B(16599,{Rt:e.type});n={verify:O_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof So)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ro)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw B(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:mj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B(27497)}(t,e.precondition)),n}function Ij(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Pn(i.updateTime):Pn(s);return o.isEqual(Q.min())&&(o=Pn(s)),new T_(o,i.transformResults||[])}(n,e))):[]}function Ej(t,e){return{documents:[sR(t,e.path)]}}function wj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sR(t,i);let s=function(l){if(l.length!==0)return cR(un.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:mo(y.field),direction:bj(y.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=k_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function Tj(t){let e=yj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){fe(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let y=aR(p);return y instanceof un&&U0(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(A){return new Xi(yo(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,$h(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,_=p.values||[];return new Co(_,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,_=p.values||[];return new Co(_,y)}(n.endAt)),QU(e,i,o,s,a,"F",u,l)}function Dj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=yo(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=yo(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=yo(n.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=yo(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(yo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>aR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}}(n.compositeFilter.op))}(t):B(30097,{filter:t})}function bj(t){return fj[t]}function Cj(t){return pj[t]}function Aj(t){return gj[t]}function mo(t){return{fieldPath:t.canonicalString()}}function yo(t){return kt.fromServerFormat(t.fieldPath)}function cR(t){return t instanceof Ue?function(n){if(n.op==="=="){if(MS(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NAN"}};if(kS(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MS(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NAN"}};if(kS(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(n.field),op:Cj(n.op),value:n.value}}}(t):t instanceof un?function(n){let r=n.getFilters().map(i=>cR(i));return r.length===1?r[0]:{compositeFilter:{op:Aj(n.op),filters:r}}}(t):B(54877,{filter:t})}function Sj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Mc=class t{constructor(e,n,r,i,s=Q.min(),o=Q.min(),a=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var F_=class{constructor(e){this.gt=e}};function Rj(t){let e=Tj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dh(e,e.limit,"L"):e}var _h=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Rc(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=er(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(tr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?F0(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):x0(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):B(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let s=e.fields||{};this.Ct(n,53);let o=To,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ae(a)),this.xt(o,n),this.Dt(s[o],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),V.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};_h.Ut=new _h;var L_=class{constructor(){this.Dn=new V_}addToCollectionParentIndex(e,n){return this.Dn.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(Zi.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},V_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ge(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Se.comparator)).toArray()}};var Pne=new Uint8Array(0);var GS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lR=41943040,Bt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(lR,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);var Oc=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var KS="LruGarbageCollector",Nj=1048576;function YS([t,e],[n,r]){let i=ee(t,n);return i===0?ee(e,r):i}var U_=class{constructor(e){this.Tr=e,this.buffer=new Ge(YS),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();YS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},j_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){F(KS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>m(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fo(n)?F(KS,"Ignoring IndexedDB error during garbage collection: ",n):yield xo(n)}yield this.Rr(3e5)}))}},B_=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return k.resolve(jv.ue);let r=new U_(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(GS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GS):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),po()<=ie.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function Pj(t,e){return new B_(t,e)}var $_=class{constructor(){this.changes=new nr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var H_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var q_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cc(r.mutation,i,$t.empty(),Be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){let i=Gi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=wc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Gi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=rr(),o=bc(),a=function(){return bc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Mn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Cc(h.mutation,l,h.mutation.getFieldMask(),Be.now())):o.set(l.key,$t.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new H_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=bc(),i=new ke((o,a)=>o-a),s=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||$t.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||oe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=K0();h.forEach(y=>{if(!s.has(y)){let _=eR(n.get(y),r.get(y));_!==null&&p.set(y,_),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return V.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(Gi()),a=Sc,u=s;return o.next(l=>k.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,oe())).next(h=>({batchId:a,changes:G0(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(r=>{let i=wc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=wc();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,u=>{let l=function(p,y){return new $r(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,cn.newInvalidDocument(h)))});let a=wc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Cc(h.mutation,l,$t.empty(),Be.now()),Wh(n,l)&&(a=a.insert(u,l))}),a})}};var W_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return k.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pn(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:Rj(i.bundledQuery),readTime:Pn(i.readTime)}}(n)),k.resolve()}};var z_=class{constructor(){this.overlays=new ke(V.comparator),this.kr=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Gi();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=Gi(),s=n.length+1,o=new V(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ke((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Gi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Gi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return k.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new A_(n,r));let s=this.kr.get(n);s===void 0&&(s=oe(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}};var G_=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var xc=class{constructor(){this.qr=new Ge(Ve.Qr),this.$r=new Ge(Ve.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ve(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new V(new Se([])),r=new Ve(n,e),i=new Ve(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new V(new Se([])),r=new Ve(n,e),i=new Ve(n,e+1),s=oe();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ve(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return V.comparator(e.key,n.key)||ee(e.Hr,n.Hr)}static Ur(e,n){return ee(e.Hr,n.Hr)||V.comparator(e.key,n.key)}};var K_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ge(Ve.Qr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new b_(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Ve(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?Bv:this.er-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ee);return n.forEach(i=>{let s=new Ve(i,0),o=new Ve(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),k.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;V.isDocumentKey(s)||(s=s.child(""));let o=new Ve(new V(s),0),a=new Ge(ee);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},o),k.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return k.forEach(n.mutations,i=>{let s=new Ve(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Ve(n,0),i=this.Yr.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Y_=class{constructor(e){this.ni=e,this.docs=function(){return new ke(V.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=rr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():cn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=rr(),o=n.path,a=new V(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||PU(NU(h),r)<=0||(i.has(h.key)||Wh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){B(9500)}ri(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Q_(this)}getSize(e){return k.resolve(this.size)}},Q_=class extends $_{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var J_=class{constructor(e){this.persistence=e,this.ii=new nr(n=>zv(n),Gv),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.si=0,this.oi=new xc,this.targetCount=0,this._i=Oc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),k.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Oc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.hr(n),k.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.oi.containsKey(n))}};var vh=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new jv(0),this.ci=!1,this.ci=!0,this.li=new G_,this.referenceDelegate=e(this),this.hi=new J_(this),this.indexManager=new L_,this.remoteDocumentCache=function(i){return new Y_(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new F_(n),this.Ti=new W_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new z_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new K_(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new Z_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return k.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},Z_=class extends c_{constructor(e){super(),this.currentSequenceNumber=e}},X_=class t{constructor(e){this.persistence=e,this.Ai=new xc,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw B(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),k.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.mi,r=>{let i=V.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,Q.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return k.or([()=>k.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Ih=class t{constructor(e,n){this.persistence=e,this.gi=new nr(r=>xU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Pj(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return k.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return k.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?k.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Q.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),k.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),k.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}Sr(e,n,r){return k.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var ev=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=oe(),i=oe();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var tv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nv=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return eS()?8:MU(We())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new tv;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(po()<=ie.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),k.resolve()):(po()<=ie.DEBUG&&F("QueryEngine","Query:",go(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(po()<=ie.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):k.resolve())}ps(e,n){if(LS(n))return k.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dh(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=oe(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,o,u.readTime)?this.ps(e,dh(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return LS(n)||i.isEqual(Q.min())?k.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(n,s);return this.Ds(n,o,r,i)?k.resolve(null):(po()<=ie.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),go(n)),this.vs(e,o,n,RU(i,Sc)).next(a=>a))})}bs(e,n){let r=new Ge(W0(e));return n.forEach((i,s)=>{Wh(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return po()<=ie.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",go(n)),this.gs.getDocumentsMatchingQuery(e,n,Zi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Jv="LocalStore",kj=3e8,rv=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ke(ee),this.Ms=new nr(s=>zv(s),Gv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function Mj(t,e,n,r){return new rv(t,e,n,r)}function dR(t,e){return m(this,null,function*(){let n=G(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=oe();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Oj(t,e){let n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),_=k.resolve();return y.forEach(A=>{_=_.next(()=>h.getEntry(u,A)).next(N=>{let P=l.docVersions.get(A);fe(P!==null,48541),N.version.compareTo(P)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=oe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hR(t){let e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function xj(t,e){let n=G(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(n.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,p)));let _=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(dt.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(N,P,x){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=kj?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(y,_,h)&&a.push(n.hi.updateTargetData(s,_))});let u=rr(),l=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Fj(s,o,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(Q.min())){let h=n.hi.getLastRemoteSnapshotVersion(s).next(p=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.Fs=i,s))}function Fj(t,e,n){let r=oe(),i=oe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=rr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F(Jv,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:o,ks:i}})}function Lj(t,e){let n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Bv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vj(t,e){let n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Mc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function iv(t,e,n){return m(this,null,function*(){let r=G(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Fo(o))throw o;F(Jv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function QS(t,e,n){let r=G(t),i=Q.min(),s=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=G(u),y=p.Ms.get(h);return y!==void 0?k.resolve(p.Fs.get(y)):p.hi.getTargetData(l,h)}(r,o,Nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:Q.min(),n?s:oe())).next(a=>(Uj(r,ZU(e),a),{documents:a,qs:s})))}function Uj(t,e,n){let r=t.xs.get(e)||Q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}var Eh=class{constructor(){this.activeTargetIds=ij()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var sv=class{constructor(){this.Fo=new Eh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Eh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ov=class{xo(e){}shutdown(){}};var JS="ConnectivityMonitor",wh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(JS,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){F(JS,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Xd=null;function av(){return Xd===null?Xd=function(){return 268435456+Math.round(2147483648*Math.random())}():Xd++,"0x"+Xd.toString(16)}var Qy="RestConnection",jj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},cv=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ch?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){let o=av(),a=this.Go(e,n.toUriEncodedString());F(Qy,`Sending RPC '${e}' ${o}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,s);let{host:l}=new URL(a),h=Mr(l);return this.jo(e,a,u,r,h).then(p=>(F(Qy,`Received RPC '${e}' ${o}: `,p),p),p=>{throw jr(Qy,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){let r=jj[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var uv=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var lt="WebChannelConnection",lv=class extends cv{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){let o=av();return new Promise((a,u)=>{let l=new qy;l.setWithCredentials(!0),l.listenOnce(Wy.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ec.NO_ERROR:let p=l.getResponseJson();F(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Ec.TIMEOUT:F(lt,`RPC '${e}' ${o} timed out`),u(new O(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ec.HTTP_ERROR:let y=l.getStatus();if(F(lt,`RPC '${e}' ${o} failed with status:`,y,"response text:",l.getResponseText()),y>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);let A=_?.error;if(A&&A.status&&A.message){let N=function(x){let H=x.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(H)>=0?H:R.UNKNOWN}(A.status);u(new O(N,A.message))}else u(new O(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(R.UNAVAILABLE,"Connection failed."));break;default:B(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{F(lt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);F(lt,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=av(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ky(),a=Gy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");F(lt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u);this.T_(p);let y=!1,_=!1,A=new uv({Ho:P=>{_?F(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(y||(F(lt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),F(lt,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},Yo:()=>p.close()}),N=(P,x,H)=>{P.listen(x,Z=>{try{H(Z)}catch(ye){setTimeout(()=>{throw ye},0)}})};return N(p,fo.EventType.OPEN,()=>{_||(F(lt,`RPC '${e}' stream ${i} transport opened.`),A.s_())}),N(p,fo.EventType.CLOSE,()=>{_||(_=!0,F(lt,`RPC '${e}' stream ${i} transport closed`),A.__(),this.I_(p))}),N(p,fo.EventType.ERROR,P=>{_||(_=!0,jr(lt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),A.__(new O(R.UNAVAILABLE,"The operation could not be completed")))}),N(p,fo.EventType.MESSAGE,P=>{var x;if(!_){let H=P.data[0];fe(!!H,16349);let Z=H,ye=Z?.error||((x=Z[0])===null||x===void 0?void 0:x.error);if(ye){F(lt,`RPC '${e}' stream ${i} received error:`,ye);let ht=ye.status,pe=function(E){let w=Le[E];if(w!==void 0)return nR(w)}(ht),T=ye.message;pe===void 0&&(pe=R.INTERNAL,T="Unknown error status: "+ht+" with message "+ye.message),_=!0,A.__(new O(pe,T)),p.close()}else F(lt,`RPC '${e}' stream ${i} received:`,H),A.a_(H)}}),N(a,zy.STAT_EVENT,P=>{P.stat===Qd.PROXY?F(lt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Qd.NOPROXY&&F(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function Jy(){return typeof document<"u"?document:null}function zh(t){return new P_(t,!0)}var Th=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ZS="PersistentStream",Dh=class{constructor(e,n,r,i,s,o,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Th(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return m(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return m(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return m(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Xn(n.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new O(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>m(this,null,function*(){this.state=0,this.start()}))}G_(e){return F(ZS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(F(ZS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dv=class extends Dh{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=_j(this.serializer,e),r=function(s){if(!("targetChange"in s))return Q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?Pn(o.readTime):Q.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=x_(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=E_(u)?{documents:Ej(s,u)}:{query:wj(s,u).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rR(s,o.resumeToken);let l=k_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Q.min())>0){a.readTime=yh(s,o.snapshotVersion.toTimestamp());let l=k_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Dj(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=x_(this.serializer),n.removeTarget=e,this.k_(n)}},hv=class extends Dh{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=Ij(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=x_(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>vj(this.serializer,r))};this.k_(n)}};var fv=class{},pv=class extends fv{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,M_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(R.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,M_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(R.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},gv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Xn(n),this._a=!1):F("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ts="RemoteStore",mv=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(()=>m(this,null,function*(){is(this)&&(F(ts,"Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let l=G(u);l.Ia.add(4),yield Uc(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Gh(l)})}(this))}))}),this.Aa=new gv(r,i)}};function Gh(t){return m(this,null,function*(){if(is(t))for(let e of t.da)yield e(!0)})}function Uc(t){return m(this,null,function*(){for(let e of t.da)yield e(!1)})}function fR(t,e){let n=G(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),tI(n)?eI(n):Lo(n).x_()&&Xv(n,e))}function Zv(t,e){let n=G(t),r=Lo(n);n.Ta.delete(e),r.x_()&&pR(n,e),n.Ta.size===0&&(r.x_()?r.B_():is(n)&&n.Aa.set("Unknown"))}function Xv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(t).H_(e)}function pR(t,e){t.Ra.$e(e),Lo(t).Y_(e)}function eI(t){t.Ra=new N_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Lo(t).start(),t.Aa.aa()}function tI(t){return is(t)&&!Lo(t).M_()&&t.Ta.size>0}function is(t){return G(t).Ia.size===0}function gR(t){t.Ra=void 0}function Bj(t){return m(this,null,function*(){t.Aa.set("Online")})}function $j(t){return m(this,null,function*(){t.Ta.forEach((e,n)=>{Xv(t,e)})})}function Hj(t,e){return m(this,null,function*(){gR(t),tI(t)?(t.Aa.la(e),eI(t)):t.Aa.set("Unknown")})}function qj(t,e,n){return m(this,null,function*(){if(t.Aa.set("Online"),e instanceof gh&&e.state===2&&e.cause)try{yield function(i,s){return m(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})}(t,e)}catch(r){F(ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bh(t,r)}else if(e instanceof vo?t.Ra.Ye(e):e instanceof ph?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Q.min()))try{let r=yield hR(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.Ta.get(l);h&&s.Ta.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.Ta.get(u);if(!h)return;s.Ta.set(u,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),pR(s,u);let p=new Mc(h.target,u,l,h.sequenceNumber);Xv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F(ts,"Failed to raise snapshot:",r),yield bh(t,r)}})}function bh(t,e,n){return m(this,null,function*(){if(!Fo(e))throw e;t.Ia.add(1),yield Uc(t),t.Aa.set("Offline"),n||(n=()=>hR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(null,null,function*(){F(ts,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Gh(t)}))})}function mR(t,e){return e().catch(n=>bh(t,n,e))}function Kh(t){return m(this,null,function*(){let e=G(t),n=Wr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Bv;for(;Wj(e);)try{let i=yield Lj(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,zj(e,i)}catch(i){yield bh(e,i)}yR(e)&&_R(e)})}function Wj(t){return is(t)&&t.Pa.length<10}function zj(t,e){t.Pa.push(e);let n=Wr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function yR(t){return is(t)&&!Wr(t).M_()&&t.Pa.length>0}function _R(t){Wr(t).start()}function Gj(t){return m(this,null,function*(){Wr(t).na()})}function Kj(t){return m(this,null,function*(){let e=Wr(t);for(let n of t.Pa)e.X_(n.mutations)})}function Yj(t,e,n){return m(this,null,function*(){let r=t.Pa.shift(),i=C_.from(r,e,n);yield mR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Kh(t)})}function Qj(t,e){return m(this,null,function*(){e&&Wr(t).Z_&&(yield function(r,i){return m(this,null,function*(){if(function(o){return dj(o)&&o!==R.ABORTED}(i.code)){let s=r.Pa.shift();Wr(r).N_(),yield mR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Kh(r)}})}(t,e)),yR(t)&&_R(t)})}function XS(t,e){return m(this,null,function*(){let n=G(t);n.asyncQueue.verifyOperationInProgress(),F(ts,"RemoteStore received new credentials");let r=is(n);n.Ia.add(3),yield Uc(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Gh(n)})}function Jj(t,e){return m(this,null,function*(){let n=G(t);e?(n.Ia.delete(2),yield Gh(n)):e||(n.Ia.add(2),yield Uc(n),n.Aa.set("Unknown"))})}function Lo(t){return t.Va||(t.Va=function(n,r,i){let s=G(n);return s.ia(),new dv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Bj.bind(null,t),e_:$j.bind(null,t),n_:Hj.bind(null,t),J_:qj.bind(null,t)}),t.da.push(e=>m(null,null,function*(){e?(t.Va.N_(),tI(t)?eI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),gR(t))}))),t.Va}function Wr(t){return t.ma||(t.ma=function(n,r,i){let s=G(n);return s.ia(),new hv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Gj.bind(null,t),n_:Qj.bind(null,t),ea:Kj.bind(null,t),ta:Yj.bind(null,t)}),t.da.push(e=>m(null,null,function*(){e?(t.ma.N_(),yield Kh(t)):(yield t.ma.stop(),t.Pa.length>0&&(F(ts,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var yv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new an,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nI(t,e){if(Xn("AsyncQueue",`${e}: ${t}`),Fo(t))return new O(R.UNAVAILABLE,`${e}: ${t}`);throw t}var Ch=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=wc(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ah=class{constructor(){this.fa=new ke(V.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):B(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},ko=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Ch.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var _v=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},vv=class{constructor(){this.queries=e0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=G(n),s=i.queries;i.queries=e0(),s.forEach((o,a)=>{for(let u of a.wa)u.onError(r)})})(this,new O(R.ABORTED,"Firestore shutting down"))}};function e0(){return new nr(t=>q0(t),qh)}function vR(t,e){return m(this,null,function*(){let n=G(t),r=3,i=e.query,s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new _v,r=e.ba()?0:1);try{switch(r){case 0:s.ya=yield n.onListen(i,!0);break;case 1:s.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=nI(o,`Initialization of query '${go(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&rI(n)})}function IR(t,e){return m(this,null,function*(){let n=G(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Zj(t,e){let n=G(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&rI(n)}function Xj(t,e,n){let r=G(t),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(n);r.queries.delete(e)}function rI(t){t.Da.forEach(e=>{e.next()})}var Iv,t0;(t0=Iv||(Iv={})).Fa="default",t0.Cache="cache";var Sh=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Iv.Cache}};var Rh=class{constructor(e){this.key=e}},Nh=class{constructor(e){this.key=e}},Ev=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=oe(),this.mutatedKeys=oe(),this.Xa=W0(e),this.eu=new Ch(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Ah,i=n?n.eu:this.eu,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),_=Wh(this.query,p)?p:null,A=!!y&&this.mutatedKeys.has(y.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),P=!1;y&&_?y.data.isEqual(_.data)?A!==N&&(r.track({type:3,doc:_}),P=!0):this.iu(y,_)||(r.track({type:2,doc:_}),P=!0,(u&&this.Xa(_,u)>0||l&&this.Xa(_,l)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),P=!0):y&&!_&&(r.track({type:1,doc:y}),P=!0,(u||l)&&(a=!0)),P&&(_?(o=o.add(_),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>function(_,A){let N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{At:P})}};return N(_)-N(A)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,o.length!==0||l?{snapshot:new ko(this.query,e.eu,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ah,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=oe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Nh(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Rh(r))}),n}uu(e){this.Ha=e.qs,this.Za=oe();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ko.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},iI="SyncEngine",wv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Tv=class{constructor(e){this.key=e,this.lu=!1}},Dv=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new nr(a=>q0(a),qh),this.Tu=new Map,this.Iu=new Set,this.du=new ke(V.comparator),this.Eu=new Map,this.Au=new xc,this.Ru={},this.Vu=new Map,this.mu=Oc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function eB(t,e,n=!0){return m(this,null,function*(){let r=CR(t),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=yield ER(r,e,n,!0),i})}function tB(t,e){return m(this,null,function*(){let n=CR(t);yield ER(n,e,!0,!1)})}function ER(t,e,n,r){return m(this,null,function*(){let i=yield Vj(t.localStore,Nn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield nB(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&fR(t.remoteStore,i),a})}function nB(t,e,n,r,i){return m(this,null,function*(){t.gu=(p,y,_)=>function(N,P,x,H){return m(this,null,function*(){let Z=P.view.nu(x);Z.Ds&&(Z=yield QS(N.localStore,P.query,!1).then(({documents:T})=>P.view.nu(T,Z)));let ye=H&&H.targetChanges.get(P.targetId),ht=H&&H.targetMismatches.get(P.targetId)!=null,pe=P.view.applyChanges(Z,N.isPrimaryClient,ye,ht);return r0(N,P.targetId,pe._u),pe.snapshot})}(t,p,y,_);let s=yield QS(t.localStore,e,!0),o=new Ev(e,s.qs),a=o.nu(s.documents),u=kc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);r0(t,n,l._u);let h=new wv(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function rB(t,e,n){return m(this,null,function*(){let r=G(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!qh(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield iv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zv(r.remoteStore,i.targetId),bv(r,i.targetId)}).catch(xo))):(bv(r,i.targetId),yield iv(r.localStore,i.targetId,!0))})}function iB(t,e){return m(this,null,function*(){let n=G(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zv(n.remoteStore,r.targetId))})}function sB(t,e,n){return m(this,null,function*(){let r=hB(t);try{let i=yield function(o,a){let u=G(o),l=Be.now(),h=a.reduce((_,A)=>_.add(A.key),oe()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=rr(),N=oe();return u.Os.getEntries(_,h).next(P=>{A=P,A.forEach((x,H)=>{H.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,A)).next(P=>{p=P;let x=[];for(let H of a){let Z=lj(H,p.get(H.key).overlayedDocument);Z!=null&&x.push(new Mn(H.key,Z,L0(Z.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,x,a)}).next(P=>{y=P;let x=P.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(_,P.batchId,x)})}).then(()=>({batchId:y.batchId,changes:G0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ru[o.currentUser.toKey()];l||(l=new ke(ee)),l=l.insert(a,u),o.Ru[o.currentUser.toKey()]=l}(r,i.batchId,n),yield jc(r,i.changes),yield Kh(r.remoteStore)}catch(i){let s=nI(i,"Failed to persist write");n.reject(s)}})}function wR(t,e){return m(this,null,function*(){let n=G(t);try{let r=yield xj(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Eu.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?fe(o.lu,14607):i.removedDocuments.size>0&&(fe(o.lu,42227),o.lu=!1))}),yield jc(n,r,e)}catch(r){yield xo(r)}})}function n0(t,e,n){let r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=G(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.wa)y.va(a)&&(l=!0)}),l&&rI(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oB(t,e,n){return m(this,null,function*(){let r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new ke(V.comparator);o=o.insert(s,cn.newNoDocument(s,Q.min()));let a=oe().add(s),u=new fh(Q.min(),new Map,new ke(ee),o,a);yield wR(r,u),r.du=r.du.remove(s),r.Eu.delete(e),sI(r)}else yield iv(r.localStore,e,!1).then(()=>bv(r,e,n)).catch(xo)})}function aB(t,e){return m(this,null,function*(){let n=G(t),r=e.batch.batchId;try{let i=yield Oj(n.localStore,e);DR(n,r,null),TR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield jc(n,i)}catch(i){yield xo(i)}})}function cB(t,e,n){return m(this,null,function*(){let r=G(t);try{let i=yield function(o,a){let u=G(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(fe(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);DR(r,e,n),TR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield jc(r,i)}catch(i){yield xo(i)}})}function TR(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function DR(t,e,n){let r=G(t),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function bv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||bR(t,r)})}function bR(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(Zv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),sI(t))}function r0(t,e,n){for(let r of n)r instanceof Rh?(t.Au.addReference(r.key,e),uB(t,r)):r instanceof Nh?(F(iI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||bR(t,r.key)):B(19791,{yu:r})}function uB(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(F(iI,"New document in limbo: "+n),t.Iu.add(r),sI(t))}function sI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new V(Se.fromString(e)),r=t.mu.next();t.Eu.set(r,new Tv(n)),t.du=t.du.insert(n,r),fR(t.remoteStore,new Mc(Nn(Kv(n.path)),r,"TargetPurposeLimboResolution",jv.ue))}}function jc(t,e,n){return m(this,null,function*(){let r=G(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{o.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=ev.Es(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.hu.J_(i),yield function(u,l){return m(this,null,function*(){let h=G(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,y=>k.forEach(y.Is,_=>h.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>k.forEach(y.ds,_=>h.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!Fo(p))throw p;F(Jv,"Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let _=h.Fs.get(y),A=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(A);h.Fs=h.Fs.insert(y,N)}}})}(r.localStore,s))})}function lB(t,e){return m(this,null,function*(){let n=G(t);if(!n.currentUser.isEqual(e)){F(iI,"User change. New user:",e.toKey());let r=yield dR(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(u=>{u.reject(new O(R.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield jc(n,r.Bs)}})}function dB(t,e){let n=G(t),r=n.Eu.get(e);if(r&&r.lu)return oe().add(r.key);{let i=oe(),s=n.Tu.get(e);if(!s)return i;for(let o of s){let a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function CR(t){let e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oB.bind(null,e),e.hu.J_=Zj.bind(null,e.eventManager),e.hu.pu=Xj.bind(null,e.eventManager),e}function hB(t){let e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cB.bind(null,e),e}var AR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return m(this,null,function*(){this.serializer=zh(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return Mj(this.persistence,new nv,n.initialUser,this.serializer)}Du(n){return new vh(X_.Vi,this.serializer)}bu(n){return new sv}terminate(){return m(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Cv=class extends AR{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){fe(this.persistence.referenceDelegate instanceof Ih,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new j_(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new vh(r=>Ih.Vi(r,n),this.serializer)}};var fB=(()=>{class t{initialize(n,r){return m(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>n0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lB.bind(null,this.syncEngine),yield Jj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new vv}()}createDatastore(n){let r=zh(n.databaseInfo.databaseId),i=function(o){return new lv(o)}(n.databaseInfo);return function(o,a,u,l){return new pv(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new mv(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>n0(this.syncEngine,r,0),function(){return wh.C()?new wh:new ov}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let y=new Dv(s,o,a,u,l,h);return p&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return m(this,null,function*(){var n,r;yield function(s){return m(this,null,function*(){let o=G(s);F(ts,"RemoteStore shutting down."),o.Ia.add(5),yield Uc(o),o.Ea.shutdown(),o.Aa.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Ph=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var zr="FirestoreClient",Av=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ze.UNAUTHENTICATED,this.clientId=Ac.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>m(this,null,function*(){F(zr,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F(zr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new an;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=nI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Zy(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F(zr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(null,null,function*(){r.isEqual(i)||(yield dR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{jr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{jr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function i0(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield pB(t);F(zr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>XS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>XS(e.remoteStore,i)),t._onlineComponents=e})}function pB(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(zr,"Using user provided OfflineComponentProvider");try{yield Zy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;jr("Error using user provided cache. Falling back to memory cache: "+n),yield Zy(t,new AR)}}else F(zr,"Using default OfflineComponentProvider"),yield Zy(t,new Cv(void 0));return t._offlineComponents})}function SR(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(zr,"Using user provided OnlineComponentProvider"),yield i0(t,t._uninitializedComponentsProvider._online)):(F(zr,"Using default OnlineComponentProvider"),yield i0(t,new fB))),t._onlineComponents})}function gB(t){return SR(t).then(e=>e.syncEngine)}function RR(t){return m(this,null,function*(){let e=yield SR(t),n=e.eventManager;return n.onListen=eB.bind(null,e.syncEngine),n.onUnlisten=rB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iB.bind(null,e.syncEngine),n})}function mB(t,e,n={}){let r=new an;return t.asyncQueue.enqueueAndForget(()=>m(null,null,function*(){return function(s,o,a,u,l){let h=new Ph({next:y=>{h.Ou(),o.enqueueAndForget(()=>IR(s,p));let _=y.docs.has(a);!_&&y.fromCache?l.reject(new O(R.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?l.reject(new O(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Sh(Kv(a.path),h,{includeMetadataChanges:!0,ka:!0});return vR(s,p)}(yield RR(t),t.asyncQueue,e,n,r)})),r.promise}function yB(t,e,n={}){let r=new an;return t.asyncQueue.enqueueAndForget(()=>m(null,null,function*(){return function(s,o,a,u,l){let h=new Ph({next:y=>{h.Ou(),o.enqueueAndForget(()=>IR(s,p)),y.fromCache&&u.source==="server"?l.reject(new O(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Sh(a,h,{includeMetadataChanges:!0,ka:!0});return vR(s,p)}(yield RR(t),t.asyncQueue,e,n,r)})),r.promise}function NR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var s0=new Map;var PR="firestore.googleapis.com",o0=!0,kh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PR,this.ssl=o0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:o0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nj)throw new O(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Mo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new e_;switch(r.type){case"firstParty":return new i_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=s0.get(n);r&&(F("ComponentProvider","Removing Datastore"),s0.delete(n),r.terminate())}(this),Promise.resolve()}};function kR(t,e,n,r={}){var i;t=Ht(t,Mo);let s=Mr(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(Hd(`https://${u}`),qd("Firestore",!0)),o.host!==PR&&o.host!==u&&jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:r});if(!jt(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ze.MOCK_USER;else{h=KA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new O(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ze(y)}t._authCredentials=new t_(new rh(h,p))}}var Gr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ke=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Vc(n,t._jsonSchema))return new t(e,r||null,new V(Se.fromString(n.referencePath)))}};Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:je("string",Ke._jsonSchemaVersion),referencePath:je("string")};var Fr=class t extends Gr{constructor(e,n,r){super(e,n,Kv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new V(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function MR(t,e,...n){if(t=Ce(t),f0("collection","path",e),t instanceof Mo){let r=Se.fromString(e,...n);return DS(r),new Fr(t,null,r)}{if(!(t instanceof Ke||t instanceof Fr))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return DS(r),new Fr(t.firestore,null,r)}}function oI(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=Ac.newId()),f0("doc","path",e),t instanceof Mo){let r=Se.fromString(e,...n);return TS(r),new Ke(t,null,new V(r))}{if(!(t instanceof Ke||t instanceof Fr))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return TS(r),new Ke(t.firestore,t instanceof Fr?t.converter:null,new V(r))}}var a0="AsyncQueue",Mh=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Th(this,"async_queue_retry"),this.oc=()=>{let r=Jy();r&&F(a0,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=Jy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=Jy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new an;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return m(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fo(e))throw e;F(a0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Xn("INTERNAL UNHANDLED ERROR: ",c0(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=yv.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&B(47125,{hc:c0(this.tc)})}verifyOperationInProgress(){}Pc(){return m(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function c0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var On=class extends Mo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Mh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Mh(e),this._firestoreClient=void 0,yield e}})}};function OR(t,e){let n=typeof t=="object"?t:zi(),r=typeof t=="string"?t:e||ch,i=ho(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=GA("firestore");s&&kR(i,...s)}return i}function Yh(t){if(t._terminated)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_B(t),t._firestoreClient}function _B(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new u_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Av(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Lr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(dt.fromBase64String(e))}catch(n){throw new O(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Lr._jsonSchemaVersion="firestore/bytes/1.0",Lr._jsonSchema={type:je("string",Lr._jsonSchemaVersion),bytes:je("string")};var ns=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rs=class{constructor(e){this._methodName=e}};var Vr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Vr._jsonSchemaVersion="firestore/geoPoint/1.0",Vr._jsonSchema={type:je("string",Vr._jsonSchemaVersion),latitude:je("number"),longitude:je("number")};var Ur=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new O(R.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ur._jsonSchemaVersion="firestore/vectorValue/1.0",Ur._jsonSchema={type:je("string",Ur._jsonSchemaVersion),vectorValues:je("object")};var vB=/^__.*__$/,Sv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mn(e,this.data,this.fieldMask,n,this.fieldTransforms):new es(e,this.data,n,this.fieldTransforms)}},Oh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function xR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{Ec:t})}}var xh=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Lh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(xR(this.Ec)&&vB.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Rv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zh(e)}Dc(e,n,r,i=!1){return new xh({Ec:e,methodName:n,bc:r,path:kt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bc(t){let e=t._freezeSettings(),n=zh(t._databaseId);return new Rv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aI(t,e,n,r,i,s={}){let o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);cI("Data must be an object, but it was:",o,r);let a=UR(r,o),u,l;if(s.merge)u=new $t(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=kv(e,p,n);if(!o.contains(y))throw new O(R.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);BR(h,y)||h.push(y)}u=new $t(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Sv(new Pt(a),u,l)}var Fh=class t extends rs{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function FR(t,e,n){return new xh({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Nv=class t extends rs{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){let n=FR(this,e,!0),r=this.vc.map(s=>ss(s,n)),i=new Hr(r);return new hh(e.path,i)}isEqual(e){return e instanceof t&&jt(this.vc,e.vc)}},Pv=class t extends rs{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){let n=FR(this,e,!0),r=this.vc.map(s=>ss(s,n)),i=new qr(r);return new hh(e.path,i)}isEqual(e){return e instanceof t&&jt(this.vc,e.vc)}};function LR(t,e,n,r){let i=t.Dc(1,e,n);cI("Data must be an object, but it was:",i,r);let s=[],o=Pt.empty();Kr(r,(u,l)=>{let h=uI(e,u,n);l=Ce(l);let p=i.gc(h);if(l instanceof Fh)s.push(h);else{let y=ss(l,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new $t(s);return new Oh(o,a,i.fieldTransforms)}function VR(t,e,n,r,i,s){let o=t.Dc(1,e,n),a=[kv(e,r,n)],u=[i];if(s.length%2!=0)throw new O(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(kv(e,s[y])),u.push(s[y+1]);let l=[],h=Pt.empty();for(let y=a.length-1;y>=0;--y)if(!BR(l,a[y])){let _=a[y],A=u[y];A=Ce(A);let N=o.gc(_);if(A instanceof Fh)l.push(_);else{let P=ss(A,N);P!=null&&(l.push(_),h.set(_,P))}}let p=new $t(l);return new Oh(h,p,o.fieldTransforms)}function IB(t,e,n,r=!1){return ss(n,t.Dc(r?4:3,e))}function ss(t,e){if(jR(t=Ce(t)))return cI("Unsupported field value:",e,t),UR(t,e);if(t instanceof rs)return function(r,i){if(!xR(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=ss(a,i.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Be.fromDate(r);return{timestampValue:yh(i.serializer,s)}}if(r instanceof Be){let s=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yh(i.serializer,s)}}if(r instanceof Vr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lr)return{bytesValue:rR(i.serializer,r._byteString)};if(r instanceof Ke){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Qv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ur)return function(o,a){return{mapValue:{fields:{[Hv]:{stringValue:qv},[To]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return Yv(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Bh(r)}`)}(t,e)}function UR(t,e){let n={};return R0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kr(t,(r,i)=>{let s=ss(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function jR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Vr||t instanceof Lr||t instanceof Ke||t instanceof rs||t instanceof Ur)}function cI(t,e,n){if(!jR(n)||!p0(n)){let r=Bh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function kv(t,e,n){if((e=Ce(e))instanceof ns)return e._internalPath;if(typeof e=="string")return uI(t,e);throw Lh("Field path arguments must be of type string or ",t,!1,void 0,n)}var EB=new RegExp("[~\\*/\\[\\]]");function uI(t,e,n){if(e.search(EB)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ns(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new O(R.INVALID_ARGUMENT,a+t+u)}function BR(t,e){return t.some(n=>n.isEqual(e))}var Vh=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Mv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Qh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Mv=class extends Vh{data(){return super.data()}};function Qh(t,e){return typeof e=="string"?uI(t,e):e instanceof ns?e._internalPath:e._delegate._internalPath}function wB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fc=class{},Lc=class extends Fc{};function $R(t,e,...n){let r=[];e instanceof Fc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof Ov).length,a=s.filter(u=>u instanceof Uh).length;if(o>1||o>0&&a>0)throw new O(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Uh=class t extends Lc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return zR(e._query,n),new Gr(e.firestore,e.converter,w_(e._query,n))}_parse(e){let n=Bc(e.firestore);return function(s,o,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new O(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){l0(p,h);let A=[];for(let N of p)A.push(u0(u,s,N));y={arrayValue:{values:A}}}else y=u0(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||l0(p,h),y=IB(a,o,p,h==="in"||h==="not-in");return Ue.create(l,h,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function HR(t,e,n){let r=e,i=Qh("where",t);return Uh._create(i,r,n)}var Ov=class t extends Fc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)zR(o,u),o=w_(o,u)}(e._query,n),new Gr(e.firestore,e.converter,w_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var xv=class t extends Lc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xi(s,o)}(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new $r(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function qR(t,e="asc"){let n=e,r=Qh("orderBy",t);return xv._create(r,n)}var Fv=class t extends Lc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Gr(e.firestore,e.converter,dh(e._query,this._limit,this._limitType))}};function WR(t){return SU("limit",t),Fv._create("limit",t,"F")}function u0(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new O(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H0(e)&&n.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Se.fromString(n));if(!V.isDocumentKey(r))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return PS(t,new V(r))}if(n instanceof Ke)return PS(t,n._key);throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bh(n)}.`)}function l0(t,e){if(!Array.isArray(t)||t.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zR(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Lv=class{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Kr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[To].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ae(o.doubleValue));return new Ur(s)}convertGeoPoint(e){return new Vr(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Hh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){let n=er(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);fe(uR(r),9688,{name:e});let i=new uh(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(n)||Xn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function lI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Yi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Qi=class t extends Vh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Io(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Qh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(R.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qi._jsonSchema={type:je("string",Qi._jsonSchemaVersion),bundleSource:je("string","DocumentSnapshot"),bundleName:je("string"),bundle:je("string")};var Io=class extends Qi{data(e={}){return super.data(e)}},Eo=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Yi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Io(this._firestore,this._userDataWriter,r.key,r,new Yi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Io(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Io(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:TB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(R.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ac.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function TB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:t})}}function GR(t){t=Ht(t,Ke);let e=Ht(t.firestore,On);return mB(Yh(e),t._key).then(n=>DB(e,t,n))}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:je("string",Eo._jsonSchemaVersion),bundleSource:je("string","QuerySnapshot"),bundleName:je("string"),bundle:je("string")};var jh=class extends Lv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,n)}};function KR(t){t=Ht(t,Gr);let e=Ht(t.firestore,On),n=Yh(e),r=new jh(e);return wB(t._query),yB(n,t._query).then(i=>new Eo(e,r,t,i))}function YR(t,e,n){t=Ht(t,Ke);let r=Ht(t.firestore,On),i=lI(t.converter,e,n);return $c(r,[aI(Bc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Mt.none())])}function QR(t,e,n,...r){t=Ht(t,Ke);let i=Ht(t.firestore,On),s=Bc(i),o;return o=typeof(e=Ce(e))=="string"||e instanceof ns?VR(s,"updateDoc",t._key,e,n,r):LR(s,"updateDoc",t._key,e),$c(i,[o.toMutation(t._key,Mt.exists(!0))])}function JR(t){return $c(Ht(t.firestore,On),[new Po(t._key,Mt.none())])}function ZR(t,e){let n=Ht(t.firestore,On),r=oI(t),i=lI(t.converter,e);return $c(n,[aI(Bc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Mt.exists(!1))]).then(()=>r)}function $c(t,e){return function(r,i){let s=new an;return r.asyncQueue.enqueueAndForget(()=>m(null,null,function*(){return sB(yield gB(r),i,s)})),s.promise}(Yh(t),e)}function DB(t,e,n){let r=n.docs.get(e._key),i=new jh(t);return new Qi(t,i,e._key,r,new Yi(n.hasPendingWrites,n.fromCache),e.converter)}var Vv=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bc(e)}set(e,n,r){this._verifyNotCommitted();let i=Xy(e,this._firestore),s=lI(i.converter,n,r),o=aI(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Mt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Xy(e,this._firestore),o;return o=typeof(n=Ce(n))=="string"||n instanceof ns?VR(this._dataReader,"WriteBatch.update",s._key,n,r,i):LR(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Mt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Xy(e,this._firestore);return this._mutations=this._mutations.concat(new Po(n._key,Mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Xy(t,e){if((t=Ce(t)).firestore!==e)throw new O(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function kne(...t){return new Nv("arrayUnion",t)}function Mne(...t){return new Pv("arrayRemove",t)}function XR(t){return Yh(t=Ht(t,On)),new Vv(t,e=>$c(t,e))}(function(e,n=!0){(function(i){Oo=i})(xr),on(new yt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new On(new n_(r.getProvider("auth-internal")),new s_(o,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pe(vS,IS,e),Pe(vS,IS,"esm2017")})();var bB="firebase",CB="11.10.0";Pe(bB,CB,"app");function eN(t){t===void 0&&(t=L($e));let e=t.get(qs);return n=>new te(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=n.subscribe({next:u=>{r.next(u),o()},complete:()=>{r.complete(),o()},error:u=>{r.error(u),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Yr=new Bi("ANGULARFIRE2_VERSION");function Hc(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Uo=(t,e)=>{let n=e?[e]:Kd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Vo=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(Vo||{}),tN=oy()&&typeof Zone<"u"?Vo.WARN:Vo.SILENT;var Jh=class{zone;delegate;constructor(e,n=bp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,n,r)}},Qr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=L(Te);this.outsideAngular=n.runOutsideAngular(()=>new Jh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Jh(typeof Zone>"u"?void 0:Zone.current,Dp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nN=!1;function AB(t,e){!nN&&(tN>Vo.SILENT||oy())&&(nN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),tN>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function SB(t){let e=L(Te,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function os(t){let e=L(Te,{optional:!0});return e?e.run(()=>t()):t()}var RB=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Dr(n,()=>os(()=>t.apply(void 0,r)))),Ee=(t,e,n)=>(n||=e?Vo.WARN:Vo.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=L(Qr),o=L(qs),a=L(vt)}catch{return AB(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=os(()=>o.add())),i[l]=RB(i[l],r,a));let u=SB(()=>t.apply(this,i));return e?u instanceof te?u.pipe(vr(s.outsideAngular),_r(s.insideAngular),eN(a)):u instanceof Promise?os(()=>{let l=o.add();return new Promise((h,p)=>{u.then(y=>Dr(a,()=>os(()=>h(y))),y=>Dr(a,()=>os(()=>p(y)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:os(()=>u):u instanceof te?u.pipe(vr(s.outsideAngular),_r(s.insideAngular)):os(()=>u)});var ir=class{constructor(e){return e}},as=class{constructor(){return Kd()}};function NB(t){return t&&t.length===1?t[0]:new ir(zi())}var dI=new $("angularfire2._apps"),PB={provide:ir,useFactory:NB,deps:[[new wt,dI]]},kB={provide:as,deps:[[new wt,dI]]};function MB(t){return(e,n)=>{let r=n.get(mm);Pe("angularfire",Yr.full,"core"),Pe("angularfire",Yr.full,"app"),Pe("angular",WC.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ir(i)}}function cre(t,...e){return mn([PB,kB,{provide:dI,useFactory:MB(t),multi:!0,deps:[Te,$e,Qr,...e]}])}var ure=Ee($y,!0);var OB=new Map,xB={activated:!1,tokenObservers:[]},FB={initialized:!1,enabled:!1};function ln(t){return OB.get(t)||Object.assign({},xB)}function oN(){return FB}var LB="https://content-firebaseappcheck.googleapis.com/v1";var VB="exchangeDebugToken",rN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},_re=24*60*60*1e3;var pI=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return m(this,null,function*(){this.stop();try{this.pending=new qi,this.pending.promise.catch(n=>{}),yield UB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new qi,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function UB(t){return new Promise(e=>{setTimeout(e,t)})}var jB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Jr=new sn("appCheck","AppCheck",jB);function aN(t){if(!ln(t).activated)throw Jr.create("use-before-activation",{appName:t.name})}function cN(r,i){return m(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let _=yield o.getHeartbeatsHeader();_&&(s["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(e),headers:s},u;try{u=yield fetch(t,a)}catch(_){throw Jr.create("fetch-network-error",{originalErrorMessage:_?.message})}if(u.status!==200)throw Jr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(_){throw Jr.create("fetch-parse-error",{originalErrorMessage:_?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Jr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,y=Date.now();return{token:l.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}})}function uN(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${LB}/projects/${n}/apps/${r}:${VB}?key=${i}`,body:{debug_token:e}}}var BB="firebase-app-check-database",$B=1,gI="firebase-app-check-store";var Zh=null;function HB(){return Zh||(Zh=new Promise((t,e)=>{try{let n=indexedDB.open(BB,$B);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Jr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(gI,{keyPath:"compositeKey"})}}}catch(n){e(Jr.create("storage-open",{originalErrorMessage:n?.message}))}}),Zh)}function qB(t,e){return WB(zB(t),e)}function WB(t,e){return m(this,null,function*(){let r=(yield HB()).transaction(gI,"readwrite"),s=r.objectStore(gI).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Jr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function zB(t){return`${t.options.appId}-${t.name}`}var qc=new An("@firebase/app-check");function hI(t,e){return yc()?qB(t,e).catch(n=>{qc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function lN(){return oN().enabled}function dN(){return m(this,null,function*(){let t=oN();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var GB={error:"UNKNOWN_ERROR"};function KB(t){return jd.encodeString(JSON.stringify(t),!1)}function mI(t,e=!1,n=!1){return m(this,null,function*(){let r=t.app;aN(r);let i=ln(r),s=i.token,o;if(s&&!Wc(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(Wc(l)?s=l:yield hI(r,void 0))}if(!e&&s&&Wc(s))return{token:s.token};let a=!1;if(lN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=cN(uN(r,yield dN()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield hI(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?qc.warn(l.message):n&&qc.error(l),fI(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=yield ln(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?qc.warn(l.message):n&&qc.error(l),o=l}let u;return s?o?Wc(s)?u={token:s.token,internalError:o}:u=fI(o):(u={token:s.token},i.token=s,yield hI(r,s)):u=fI(o),a&&ZB(r,u),u})}function YB(t){return m(this,null,function*(){let e=t.app;aN(e);let{provider:n}=ln(e);if(lN()){let r=yield dN(),{token:i}=yield cN(uN(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function QB(t,e,n,r){let{app:i}=t,s=ln(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Wc(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),iN(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>iN(t))}function hN(t,e){let n=ln(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function iN(t){let{app:e}=t,n=ln(e),r=n.tokenRefresher;r||(r=JB(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function JB(t){let{app:e}=t;return new pI(()=>m(null,null,function*(){let n=ln(e),r;if(n.token?r=yield mI(t,!0):r=yield mI(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=ln(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rN.RETRIAL_MIN_WAIT,rN.RETRIAL_MAX_WAIT)}function ZB(t,e){let n=ln(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Wc(t){return t.expireTimeMillis-Date.now()>0}function fI(t){return{token:KB(GB),error:t}}var yI=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=ln(this.app);for(let n of e)hN(this.app,n.next);return Promise.resolve()}};function XB(t,e){return new yI(t,e)}function e$(t){return{getToken:e=>mI(t,e),getLimitedUseToken:()=>YB(t),addTokenListener:e=>QB(t,"INTERNAL",e),removeTokenListener:e=>hN(t.app,e)}}var t$="@firebase/app-check",n$="0.10.1";var r$="app-check",sN="app-check-internal";function i$(){on(new yt(r$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return XB(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(sN).initialize()})),on(new yt(sN,t=>{let e=t.getProvider("app-check").getImmediate();return e$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Pe(t$,n$)}i$();var s$="app-check";var jo=class{constructor(){return Uo(s$)}};var o$=["localhost","0.0.0.0","127.0.0.1"],Pre=typeof window<"u"&&o$.includes(window.location.hostname);function SN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var RN=SN,NN=new sn("auth","Firebase",SN());var sf=new An("@firebase/auth");function a$(t,...e){sf.logLevel<=ie.WARN&&sf.warn(`Auth (${xr}): ${t}`,...e)}function ef(t,...e){sf.logLevel<=ie.ERROR&&sf.error(`Auth (${xr}): ${t}`,...e)}function Fn(t,...e){throw BI(t,...e)}function cs(t,...e){return BI(t,...e)}function PN(t,e,n){let r=Object.assign(Object.assign({},RN()),{[e]:n});return new sn("auth","Firebase",r).create(e,{appName:t.name})}function ar(t){return PN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BI(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NN.create(t,...e)}function U(t,e,...n){if(!t)throw BI(e,...n)}function sr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ef(e),new Error(e)}function ei(t,e){t||sr(e)}function EI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function c$(){return fN()==="http:"||fN()==="https:"}function fN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function u$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(c$()||JA()||"connection"in navigator)?navigator.onLine:!0}function l$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var us=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ei(n>e,"Short delay should be less than long delay!"),this.isMobile=YA()||ZA()}get(){return u$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $I(t,e){ei(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var of=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var d$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var h$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f$=new us(3e4,6e4);function cr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ln(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){return kN(t,i,()=>m(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=_c(Object.assign({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:y},l);return QA()||(_.referrerPolicy="no-referrer"),t.emulatorConfig&&Mr(t.emulatorConfig.host)&&(_.credentials="include"),of.fetch()(yield MN(t,t.config.apiHost,n,p),_)}))})}function kN(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},d$),e);try{let i=new wI(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Xh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Xh(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Xh(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw PN(t,h,l);Fn(t,h)}}catch(i){if(i instanceof Nt)throw i;Fn(t,"network-request-failed",{message:String(i)})}})}function Xc(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){let l=yield Ln(t,e,n,r,i);return"mfaPendingCredential"in l&&Fn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function MN(t,e,n,r){return m(this,null,function*(){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?$I(t.config,i):`${t.config.apiScheme}://${i}`;return h$.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function p$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var wI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cs(this.auth,"network-request-failed")),f$.get())})}};function Xh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=cs(t,e,r);return i.customData._tokenResponse=n,i}function pN(t){return t!==void 0&&t.enterprise!==void 0}var TI=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return p$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function g$(t,e){return m(this,null,function*(){return Ln(t,"GET","/v2/recaptchaConfig",cr(t,e))})}function m$(t,e){return m(this,null,function*(){return Ln(t,"POST","/v1/accounts:delete",e)})}function af(t,e){return m(this,null,function*(){return Ln(t,"POST","/v1/accounts:lookup",e)})}function Gc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function HI(t,e=!1){return m(this,null,function*(){let n=Ce(t),r=yield n.getIdToken(e),i=qI(r);U(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Gc(_I(i.auth_time)),issuedAtTime:Gc(_I(i.iat)),expirationTime:Gc(_I(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function _I(t){return Number(t)*1e3}function qI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ef("JWT malformed, contained fewer than 3 sections"),null;try{let i=Bd(n);return i?JSON.parse(i):(ef("Failed to decode base64 JWT payload"),null)}catch(i){return ef("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gN(t){let e=qI(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Bo(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Nt&&y$(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function y$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var DI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function cf(t){return m(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Bo(t,af(n,{idToken:r}));U(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ON(s.providerUserInfo):[],a=_$(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function WI(t){return m(this,null,function*(){let e=Ce(t);yield cf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ON(t){return t.map(e=>{var{providerId:n}=e,r=Cp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function v$(t,e){return m(this,null,function*(){let n=yield kN(t,{},()=>m(null,null,function*(){let r=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=yield MN(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Mr(t.emulatorConfig.host)&&(u.credentials="include"),of.fetch()(o,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function I$(t,e){return m(this,null,function*(){return Ln(t,"POST","/v2/accounts:revokeToken",cr(t,e))})}var Kc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){U(e.length!==0,"internal-error");let n=gN(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield v$(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(U(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(U(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(U(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return sr("not implemented")}};function Zr(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Xr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield Bo(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return HI(this,e)}reload(){return WI(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield cf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Dt(this.auth.app))return Promise.reject(ar(this.auth));let e=yield this.getIdToken();return yield Bo(this,m$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:ye,isAnonymous:ht,providerData:pe,stsTokenManager:T}=n;U(Z&&T,e,"internal-error");let v=Kc.fromJSON(this.name,T);U(typeof Z=="string",e,"internal-error"),Zr(p,e.name),Zr(y,e.name),U(typeof ye=="boolean",e,"internal-error"),U(typeof ht=="boolean",e,"internal-error"),Zr(_,e.name),Zr(A,e.name),Zr(N,e.name),Zr(P,e.name),Zr(x,e.name),Zr(H,e.name);let E=new t({uid:Z,auth:e,email:y,emailVerified:ye,displayName:p,isAnonymous:ht,photoURL:A,phoneNumber:_,tenantId:N,stsTokenManager:v,createdAt:x,lastLoginAt:H});return pe&&Array.isArray(pe)&&(E.providerData=pe.map(w=>Object.assign({},w))),P&&(E._redirectEventId=P),E}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new Kc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield cf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];U(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ON(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Kc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Yc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var mN=new Map;function or(t){ei(t instanceof Function,"Expected a class definition");let e=mN.get(t);return e?(ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mN.set(t,e),e)}var E$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),bI=E$;function tf(t,e,n){return`firebase:${t}:${e}:${n}`}var uf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=tf(this.userKey,i.apiKey,s),this.fullPersistenceKey=tf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield af(this.auth,{idToken:e}).catch(()=>{});return n?Xr._fromGetAccountInfoResponse(this.auth,n,e):null}return Xr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(or(bI),e,r);let i=(yield Promise.all(n.map(l=>m(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||or(bI),o=tf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p;if(typeof h=="string"){let y=yield af(e,{idToken:h}).catch(()=>{});if(!y)break;p=yield Xr._fromGetAccountInfoResponse(e,y,h)}else p=Xr._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(null,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function yN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jN(e))return"Blackberry";if(BN(e))return"Webos";if(FN(e))return"Safari";if((e.includes("chrome/")||LN(e))&&!e.includes("edge/"))return"Chrome";if(UN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function xN(t=We()){return/firefox\//i.test(t)}function FN(t=We()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LN(t=We()){return/crios\//i.test(t)}function VN(t=We()){return/iemobile/i.test(t)}function UN(t=We()){return/android/i.test(t)}function jN(t=We()){return/blackberry/i.test(t)}function BN(t=We()){return/webos/i.test(t)}function zI(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function w$(t=We()){var e;return zI(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function T$(){return XA()&&document.documentMode===10}function $N(t=We()){return zI(t)||UN(t)||BN(t)||jN(t)||/windows phone/i.test(t)||VN(t)}function HN(t,e=[]){let n;switch(t){case"Browser":n=yN(We());break;case"Worker":n=`${yN(We())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xr}/${r}`}var CI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function D$(n){return m(this,arguments,function*(t,e={}){return Ln(t,"GET","/v2/passwordPolicy",cr(t,e))})}var b$=6,AI=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:b$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var SI=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lf(this),this.idTokenSubscription=new lf(this),this.beforeStateQueue=new CI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=or(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield uf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield af(this,{idToken:e}),r=yield Xr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;if(Dt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield cf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=l$()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Dt(this.app))return Promise.reject(ar(this));let n=e?Ce(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Dt(this.app)?Promise.reject(ar(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Dt(this.app)?Promise.reject(ar(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(or(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield D$(this),n=new AI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield I$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&or(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=yield uf.create(this,[or(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var e;if(Dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&a$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ti(t){return Ce(t)}var lf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=rS(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _f={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C$(t){_f=t}function qN(t){return _f.loadJS(t)}function A$(){return _f.recaptchaEnterpriseScript}function S$(){return _f.gapiScript}function WN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var RI=class{constructor(){this.enterprise=new NI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},NI=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var R$="recaptcha-enterprise",zN="NO_RECAPTCHA",PI=class{constructor(e){this.type=R$,this.auth=ti(e)}verify(e="verify",n=!1){return m(this,null,function*(){function r(s){return m(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>m(null,null,function*(){g$(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new TI(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;pN(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(zN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RI().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&pN(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=A$();u.length!==0&&(u+=a),qN(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function zc(t,e,n,r=!1,i=!1){return m(this,null,function*(){let s=new PI(t),o;if(i)o=zN;else try{o=yield s.verify(n)}catch{o=yield s.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function df(t,e,n,r,i){return m(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield zc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>m(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield zc(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=yield zc(t,e,n);return r(t,a).catch(u=>m(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield zc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield zc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function GI(t,e){let n=ho(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(jt(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function N$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(or);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function KI(t,e,n){let r=ti(t);U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=GN(e),{host:o,port:a}=P$(e),u=a===null?"":`:${a}`,l={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){U(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),U(jt(l,r.config.emulator)&&jt(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Mr(o)?(Hd(`${s}//${o}${u}`),qd("Auth",!0)):i||k$()}function GN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P$(t){let e=GN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:_N(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:_N(o)}}}function _N(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function k$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Qc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sr("not implemented")}_getIdTokenResponse(e){return sr("not implemented")}_linkToIdToken(e,n){return sr("not implemented")}_getReauthenticationResolver(e){return sr("not implemented")}};function M$(t,e){return m(this,null,function*(){return Ln(t,"POST","/v1/accounts:signUp",e)})}function O$(t,e){return m(this,null,function*(){return Xc(t,"POST","/v1/accounts:signInWithPassword",cr(t,e))})}function x$(t,e){return m(this,null,function*(){return Ln(t,"POST","/v1/accounts:sendOobCode",cr(t,e))})}function F$(t,e){return m(this,null,function*(){return x$(t,e)})}function L$(t,e){return m(this,null,function*(){return Xc(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))})}function V$(t,e){return m(this,null,function*(){return Xc(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))})}var Jc=class t extends Qc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return df(e,n,"signInWithPassword",O$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return L$(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}})}_linkToIdToken(e,n){return m(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return df(e,r,"signUpPassword",M$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return V$(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function vI(t,e){return m(this,null,function*(){return Xc(t,"POST","/v1/accounts:signInWithIdp",cr(t,e))})}function U$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function j$(t){let e=uo(lo(t)).link,n=e?uo(lo(e)).deep_link_id:null,r=uo(lo(t)).deep_link_id;return(r?uo(lo(r)).link:null)||r||n||e||t}var hf=class t{constructor(e){var n,r,i,s,o,a;let u=uo(lo(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=U$((i=u.mode)!==null&&i!==void 0?i:null);U(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=j$(e);try{return new t(n)}catch{return null}}};var KN=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Jc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=hf.parseLink(r);return U(i,"argument-error"),Jc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),ff=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var kI=class extends ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function B$(t,e){return m(this,null,function*(){return Xc(t,"POST","/v1/accounts:signUp",cr(t,e))})}var $o=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(this,null,function*(){let s=yield Xr._fromIdTokenResponse(e,r,i),o=vN(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function vN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var MI=class t extends Nt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function YN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?MI._fromErrorAndOperation(t,s,e,r):s})}function $$(t,e,n=!1){return m(this,null,function*(){let r=yield Bo(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return $o._forOperation(t,"link",r)})}function H$(t,e,n=!1){return m(this,null,function*(){let{auth:r}=t;if(Dt(r.app))return Promise.reject(ar(r));let i="reauthenticate";try{let s=yield Bo(t,YN(r,i,e,t),n);U(s.idToken,r,"internal-error");let o=qI(s.idToken);U(o,r,"internal-error");let{sub:a}=o;return U(t.uid===a,r,"user-mismatch"),$o._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}})}function QN(t,e,n=!1){return m(this,null,function*(){if(Dt(t.app))return Promise.reject(ar(t));let r="signIn",i=yield YN(t,r,e),s=yield $o._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function YI(t,e){return m(this,null,function*(){return QN(ti(t),e)})}function q$(t,e,n){var r;U(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),U(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),U(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(U(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(U(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function JN(t){return m(this,null,function*(){let e=ti(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function QI(t,e,n){return m(this,null,function*(){let r=ti(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&q$(r,i,n),yield df(r,i,"getOobCode",F$,"EMAIL_PASSWORD_PROVIDER")})}function JI(t,e,n){return m(this,null,function*(){if(Dt(t.app))return Promise.reject(ar(t));let r=ti(t),o=yield df(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B$,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&JN(t),u}),a=yield $o._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function ZI(t,e,n){return Dt(t.app)?Promise.reject(ar(t)):YI(Ce(t),KN.credential(e,n)).catch(r=>m(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&JN(t),r}))}function W$(t,e){return m(this,null,function*(){return Ln(t,"POST","/v1/accounts:update",e)})}function XI(r,i){return m(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;let s=Ce(t),a={idToken:yield s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=yield Bo(s,W$(s.auth,a));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;let l=s.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),yield s._updateTokensIfNecessary(u)})}function eE(t,e,n,r){return Ce(t).onIdTokenChanged(e,n,r)}function tE(t,e,n){return Ce(t).beforeAuthStateChanged(e,n)}function nE(t,e,n,r){return Ce(t).onAuthStateChanged(e,n,r)}function rE(t){return Ce(t).signOut()}var pf="__sak";var gf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var z$=1e3,G$=10,K$=(()=>{class t extends gf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$N(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);T$()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,G$):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},z$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return m(this,null,function*(){yield $n(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return m(this,null,function*(){let r=yield $n(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return m(this,null,function*(){yield $n(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),ZN=K$;var Y$=(()=>{class t extends gf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),iE=Y$;function Q$(t){return Promise.all(t.map(e=>m(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var J$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>m(this,null,function*(){return h(r.origin,o)})),l=yield Q$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function XN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var OI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=XN("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function xn(){return window}function Z$(t){xn().location.href=t}function eP(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}function X$(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function eH(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tH(){return eP()?self:null}var tP="firebaseLocalStorageDb",nH=1,mf="firebaseLocalStorage",nP="fbase_key",ls=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function vf(t,e){return t.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function rH(){let t=indexedDB.deleteDatabase(tP);return new ls(t).toPromise()}function xI(){let t=indexedDB.open(tP,nH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(mf,{keyPath:nP})}catch(i){n(i)}}),t.addEventListener("success",()=>m(null,null,function*(){let r=t.result;r.objectStoreNames.contains(mf)?e(r):(r.close(),yield rH(),e(yield xI()))}))})}function IN(t,e,n){return m(this,null,function*(){let r=vf(t,!0).put({[nP]:e,value:n});return new ls(r).toPromise()})}function iH(t,e){return m(this,null,function*(){let n=vf(t,!1).get(e),r=yield new ls(n).toPromise();return r===void 0?null:r.value})}function EN(t,e){let n=vf(t,!0).delete(e);return new ls(n).toPromise()}var sH=800,oH=3,aH=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield xI(),this.db)})}_withRetries(n){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>oH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return eP()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=J$._getInstance(tH()),this.receiver._subscribe("keyChanged",(n,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var n,r;if(this.activeServiceWorker=yield X$(),!this.activeServiceWorker)return;this.sender=new OI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||eH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield xI();return yield IN(n,pf,"1"),yield EN(n,pf),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>IN(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let r=yield this._withRetries(i=>iH(i,n));return this.localCache[n]=r,r})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>EN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(s=>{let o=vf(s,!1).getAll();return new ls(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),sH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),rP=aH;var Ure=WN("rcb"),jre=new us(3e4,6e4);function cH(t,e){return e?or(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Zc=class extends Qc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vI(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vI(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vI(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function uH(t){return QN(t.auth,new Zc(t),t.bypassAuthState)}function lH(t){let{auth:e,user:n}=t;return U(n,e,"internal-error"),H$(n,new Zc(t),t.bypassAuthState)}function dH(t){return m(this,null,function*(){let{auth:e,user:n}=t;return U(n,e,"internal-error"),$$(n,new Zc(t),t.bypassAuthState)})}var FI=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uH;case"linkViaPopup":case"linkViaRedirect":return dH;case"reauthViaPopup":case"reauthViaRedirect":return lH;default:Fn(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Bre=new us(2e3,1e4);var hH="pendingRedirect",nf=new Map,LI=class t extends FI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=nf.get(this.auth._key());if(!e){try{let r=(yield fH(this.resolver,this.auth))?yield $n(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nf.set(this.auth._key(),e)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return $n(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,$n(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function fH(t,e){return m(this,null,function*(){let n=mH(e),r=gH(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function pH(t,e){nf.set(t._key(),e)}function gH(t){return or(t._redirectPersistence)}function mH(t){return tf(hH,t.config.apiKey,t.name)}function yH(t,e,n=!1){return m(this,null,function*(){if(Dt(t.app))return Promise.reject(ar(t));let r=ti(t),i=cH(r,e),o=yield new LI(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var _H=10*60*1e3,VI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_H&&this.cachedEventUids.clear(),this.cachedEventUids.has(wN(e))}saveEventToCache(e){this.cachedEventUids.add(wN(e)),this.lastProcessedEventTime=Date.now()}};function wN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iP({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function vH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iP(t);default:return!1}}function IH(n){return m(this,arguments,function*(t,e={}){return Ln(t,"GET","/v1/projects",e)})}var EH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wH=/^https?/;function TH(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield IH(t);for(let n of e)try{if(DH(n))return}catch{}Fn(t,"unauthorized-domain")})}function DH(t){let e=EI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wH.test(n))return!1;if(EH.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var bH=new us(3e4,6e4);function TN(){let t=xn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function CH(t){return new Promise((e,n)=>{var r,i,s;function o(){TN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TN(),n(cs(t,"network-request-failed"))},timeout:bH.get()})}if(!((i=(r=xn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=xn().gapi)===null||s===void 0)&&s.load)o();else{let a=WN("iframefcb");return xn()[a]=()=>{gapi.load?o():n(cs(t,"network-request-failed"))},qN(`${S$()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw rf=null,e})}var rf=null;function AH(t){return rf=rf||CH(t),rf}var SH=new us(5e3,15e3),RH="__/auth/iframe",NH="emulator/auth/iframe",PH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MH(t){let e=t.config;U(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?$I(e,NH):`https://${t.config.authDomain}/${RH}`,r={apiKey:e.apiKey,appName:t.name,v:xr},i=kH.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_c(r).slice(1)}`}function OH(t){return m(this,null,function*(){let e=yield AH(t),n=xn().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:MH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PH,dontclear:!0},r=>new Promise((i,s)=>m(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=cs(t,"network-request-failed"),a=xn().setTimeout(()=>{s(o)},SH.get());function u(){xn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var xH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FH=500,LH=600,VH="_blank",UH="http://localhost",yf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function jH(t,e,n,r=FH,i=LH){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},xH),{width:r.toString(),height:i.toString(),top:s,left:o}),l=We().toLowerCase();n&&(a=LN(l)?VH:n),xN(l)&&(e=e||UH,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,A])=>`${y}${_}=${A},`,"");if(w$(l)&&a!=="_self")return BH(e||"",a),new yf(null);let p=window.open(e||"",a,h);U(p,t,"popup-blocked");try{p.focus()}catch{}return new yf(p)}function BH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var $H="__/auth/handler",HH="emulator/auth/handler",qH=encodeURIComponent("fac");function DN(t,e,n,r,i,s){return m(this,null,function*(){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(e instanceof ff){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof kI){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${qH}=${encodeURIComponent(u)}`:"";return`${WH(t)}?${_c(a).slice(1)}${l}`})}function WH({config:t}){return t.emulator?$I(t,HH):`https://${t.authDomain}/${$H}`}var II="webStorageSupport",UI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iE,this._completeRedirectFn=yH,this._overrideRedirectResult=pH}_openPopup(e,n,r,i){return m(this,null,function*(){var s;ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield DN(e,n,r,EI(),i);return jH(e,o,XN())})}_openRedirect(e,n,r,i){return m(this,null,function*(){yield this._originValidation(e);let s=yield DN(e,n,r,EI(),i);return Z$(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ei(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return m(this,null,function*(){let n=yield OH(e),r=new VI(e);return n.register("authEvent",i=>(U(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(II,{type:II},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[II];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $N()||FN()||zI()}},sP=UI;var bN="@firebase/auth",CN="1.10.8";var jI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function zH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GH(t){on(new yt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;U(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HN(t)},l=new SI(r,i,s,u);return N$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),on(new yt("auth-internal",e=>{let n=ti(e.getProvider("auth").getImmediate());return(r=>new jI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pe(bN,CN,zH(t)),Pe(bN,CN,"esm2017")}var KH=5*60,YH=Ay("authIdTokenMaxAge")||KH,AN=null,QH=t=>e=>m(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YH)return;let i=n?.token;AN!==i&&(AN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function sE(t=zi()){let e=ho(t,"auth");if(e.isInitialized())return e.getImmediate();let n=GI(t,{popupRedirectResolver:sP,persistence:[rP,ZN,iE]}),r=Ay("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=QH(s.toString());tE(n,o,()=>o(n.currentUser)),eE(n,a=>o(a))}}let i=by("auth");return i&&KI(n,`http://${i}`),n}function JH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}C$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=cs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",JH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GH("Browser");var oP="auth",ds=class{constructor(e){return e}},eu=class{constructor(){return Uo(oP)}};var oE=new $("angularfire2.auth-instances");function L4(t,e){let n=Hc(oP,t,e);return n&&new ds(n)}function V4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ds(r)}}var U4={provide:eu,deps:[[new wt,oE]]},j4={provide:ds,useFactory:L4,deps:[[new wt,oE],ir]};function Aie(t,...e){return Pe("angularfire",Yr.full,"auth"),mn([j4,U4,{provide:oE,useFactory:V4(t),multi:!0,deps:[Te,$e,Qr,as,[new wt,jo],...e]}])}var aP=Ee(JI,!0,2);var Sie=Ee(sE,!0);var cP=Ee(nE,!0);var uP=Ee(QI,!0,2);var lP=Ee(ZI,!0,2);var dP=Ee(rE,!0,2);var hP=Ee(XI,!0,2);var hs=class{constructor(e){return e}},fP="firestore",aE=class{constructor(){return Uo(fP)}};var cE=new $("angularfire2.firestore-instances");function $4(t,e){let n=Hc(fP,t,e);return n&&new hs(n)}function H4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new hs(r)}}var q4={provide:aE,deps:[[new wt,cE]]},W4={provide:hs,useFactory:$4,deps:[[new wt,cE],ir]};function Rse(t,...e){return Pe("angularfire",Yr.full,"fst"),mn([W4,q4,{provide:cE,useFactory:H4(t),multi:!0,deps:[Te,$e,Qr,as,[new wt,eu],[new wt,jo],...e]}])}var Nse=Ee(ZR,!0,2);var pP=Ee(MR,!0,2);var Pse=Ee(JR,!0,2);var fs=Ee(oI,!0,2);var If=Ee(GR,!0);var gP=Ee(KR,!0);var kse=Ee(OR,!0);var Mse=Ee(WR,!0,2);var Ose=Ee(qR,!0,2),xse=Ee($R,!0,2);var tu=Ee(YR,!0,2);var Fse=Ee(QR,!0,2);var Lse=Ee(HR,!0,2),Vse=Ee(XR,!0,2);var mP=()=>{};var yP=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},G4=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_P={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(y=64)),r.push(n[h],n[p],n[y],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):G4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new lE;let y=s<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},lE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},K4=function(t){let e=yP(t);return _P.encodeByteArray(e,!0)},hE=function(t){return K4(t).replace(/\./g,"")},Ef=function(t){try{return _P.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Y4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Q4=()=>Y4().__FIREBASE_DEFAULTS__,J4=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Z4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Ef(t[1]);return e&&JSON.parse(e)},X4=()=>{try{return mP()||Q4()||J4()||Z4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};var vP=t=>X4()?.[`_${t}`];function fE(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function EP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wP(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DP(){try{return typeof indexedDB=="object"}catch{return!1}}function bP(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var e6="FirebaseError",dn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e6,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ur.prototype.create)}},ur=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?t6(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new dn(i,a,r)}};function t6(t,e){return t.replace(n6,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var n6=/\{\$([^}]+)}/g;function wf(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function CP(t,e){let n=new dE(t,e);return n.subscribe.bind(n)}var dE=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");r6(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=uE),i.error===void 0&&(i.error=uE),i.complete===void 0&&(i.complete=uE);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function r6(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uE(){}var $se=4*60*60*1e3;function nu(t){return t&&t._delegate?t._delegate:t}var lr=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var i6=[],ve=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ve||{}),s6={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},o6=ve.INFO,a6={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},c6=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=a6[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ho=class{constructor(e){this.name=e,this._logLevel=o6,this._logHandler=c6,this._userLogHandler=null,i6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};var gE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l6(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function l6(t){return t.getComponent()?.type==="VERSION"}var mE="@firebase/app",AP="0.14.0";var dr=new Ho("@firebase/app"),d6="@firebase/app-compat",h6="@firebase/analytics-compat",f6="@firebase/analytics",p6="@firebase/app-check-compat",g6="@firebase/app-check",m6="@firebase/auth",y6="@firebase/auth-compat",_6="@firebase/database",v6="@firebase/data-connect",I6="@firebase/database-compat",E6="@firebase/functions",w6="@firebase/functions-compat",T6="@firebase/installations",D6="@firebase/installations-compat",b6="@firebase/messaging",C6="@firebase/messaging-compat",A6="@firebase/performance",S6="@firebase/performance-compat",R6="@firebase/remote-config",N6="@firebase/remote-config-compat",P6="@firebase/storage",k6="@firebase/storage-compat",M6="@firebase/firestore",O6="@firebase/ai",x6="@firebase/firestore-compat",F6="firebase",L6="12.0.0";var V6={[mE]:"fire-core",[d6]:"fire-core-compat",[f6]:"fire-analytics",[h6]:"fire-analytics-compat",[g6]:"fire-app-check",[p6]:"fire-app-check-compat",[m6]:"fire-auth",[y6]:"fire-auth-compat",[_6]:"fire-rtdb",[v6]:"fire-data-connect",[I6]:"fire-rtdb-compat",[E6]:"fire-fn",[w6]:"fire-fn-compat",[T6]:"fire-iid",[D6]:"fire-iid-compat",[b6]:"fire-fcm",[C6]:"fire-fcm-compat",[A6]:"fire-perf",[S6]:"fire-perf-compat",[R6]:"fire-rc",[N6]:"fire-rc-compat",[P6]:"fire-gcs",[k6]:"fire-gcs-compat",[M6]:"fire-fst",[x6]:"fire-fst-compat",[O6]:"fire-vertex","fire-js":"fire-js",[F6]:"fire-js-all"};var U6=new Map,j6=new Map,SP=new Map;function RP(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wo(t){let e=t.name;if(SP.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;SP.set(e,t);for(let n of U6.values())RP(n,t);for(let n of j6.values())RP(n,t);return!0}function Vn(t){return t==null?!1:t.settings!==void 0}var B6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vE=new ur("app","Firebase",B6);var Tf=L6;function qo(t,e,n){let r=V6[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(o.join(" "));return}Wo(new lr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var $6="firebase-heartbeat-database",H6=1,ru="firebase-heartbeat-store",pE=null;function MP(){return pE||(pE=Gd($6,H6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(t=>{throw vE.create("idb-open",{originalErrorMessage:t.message})})),pE}function q6(t){return m(this,null,function*(){try{let n=(yield MP()).transaction(ru),r=yield n.objectStore(ru).get(OP(t));return yield n.done,r}catch(e){if(e instanceof dn)dr.warn(e.message);else{let n=vE.create("idb-get",{originalErrorMessage:e?.message});dr.warn(n.message)}}})}function NP(t,e){return m(this,null,function*(){try{let r=(yield MP()).transaction(ru,"readwrite");yield r.objectStore(ru).put(e,OP(t)),yield r.done}catch(n){if(n instanceof dn)dr.warn(n.message);else{let r=vE.create("idb-set",{originalErrorMessage:n?.message});dr.warn(r.message)}}})}function OP(t){return`${t.name}!${t.options.appId}`}var W6=1024,z6=30,yE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new _E(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=PP();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>z6){let i=K6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dr.warn(e)}})}getHeartbeatsHeader(){return m(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=PP(),{heartbeatsToSend:n,unsentEntries:r}=G6(this._heartbeatsCache.heartbeats),i=hE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return dr.warn(e),""}})}};function PP(){return new Date().toISOString().substring(0,10)}function G6(t,e=W6){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),kP(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var _E=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return DP()?bP().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield q6(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return NP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return NP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function kP(t){return hE(JSON.stringify({version:2,heartbeats:t})).length}function K6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Y6(t){Wo(new lr("platform-logger",e=>new gE(e),"PRIVATE")),Wo(new lr("heartbeat",e=>new yE(e),"PRIVATE")),qo(mE,AP,t),qo(mE,AP,"esm2020"),qo("fire-js","")}Y6("");function $P(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HP=$P,qP=new ur("auth","Firebase",$P());var Cf=new Ho("@firebase/auth");function Q6(t,...e){Cf.logLevel<=ve.WARN&&Cf.warn(`Auth (${Tf}): ${t}`,...e)}function bf(t,...e){Cf.logLevel<=ve.ERROR&&Cf.error(`Auth (${Tf}): ${t}`,...e)}function gs(t,...e){throw ME(t,...e)}function ps(t,...e){return ME(t,...e)}function kE(t,e,n){let r=ce(q({},HP()),{[e]:n});return new ur("auth","Firebase",r).create(e,{appName:t.name})}function zo(t){return kE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J6(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&gs(t,"argument-error"),kE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ME(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qP.create(t,...e)}function re(t,e,...n){if(!t)throw ME(e,...n)}function hr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw bf(e),new Error(e)}function ms(t,e){t||hr(e)}function Z6(){return xP()==="http:"||xP()==="https:"}function xP(){return typeof self<"u"&&self.location?.protocol||null}function X6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z6()||wP()||"connection"in navigator)?navigator.onLine:!0}function e3(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ys=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ms(n>e,"Short delay should be less than long delay!"),this.isMobile=IP()||TP()}get(){return X6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function t3(t,e){ms(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Af=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var n3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var r3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i3=new ys(3e4,6e4);function OE(t,e){return t.tenantId&&!e.tenantId?ce(q({},e),{tenantId:t.tenantId}):e}function du(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){return WP(t,i,()=>m(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=wf(q({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let _=q({method:e,headers:y},l);return EP()||(_.referrerPolicy="no-referrer"),t.emulatorConfig&&fE(t.emulatorConfig.host)&&(_.credentials="include"),Af.fetch()(yield zP(t,t.config.apiHost,n,p),_)}))})}function WP(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=q(q({},n3),e);try{let i=new wE(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Df(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Df(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Df(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Df(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw kE(t,h,l);gs(t,h)}}catch(i){if(i instanceof dn)throw i;gs(t,"network-request-failed",{message:String(i)})}})}function s3(s,o,a,u){return m(this,arguments,function*(t,e,n,r,i={}){let l=yield du(t,e,n,r,i);return"mfaPendingCredential"in l&&gs(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function zP(t,e,n,r){return m(this,null,function*(){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?t3(t.config,i):`${t.config.apiScheme}://${i}`;return r3.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var wE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ps(this.auth,"network-request-failed")),i3.get())})}};function Df(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ps(t,e,r);return i.customData._tokenResponse=n,i}function o3(t,e){return m(this,null,function*(){return du(t,"POST","/v1/accounts:delete",e)})}function Sf(t,e){return m(this,null,function*(){return du(t,"POST","/v1/accounts:lookup",e)})}function iu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function GP(t,e=!1){return m(this,null,function*(){let n=nu(t),r=yield n.getIdToken(e),i=xE(r);re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:iu(IE(i.auth_time)),issuedAtTime:iu(IE(i.iat)),expirationTime:iu(IE(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function IE(t){return Number(t)*1e3}function xE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ef(n);return i?JSON.parse(i):(bf("Failed to decode base64 JWT payload"),null)}catch(i){return bf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function FP(t){let e=xE(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ou(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof dn&&a3(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function a3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var TE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var au=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Rf(t){return m(this,null,function*(){let e=t.auth,n=yield t.getIdToken(),r=yield ou(t,Sf(e,{idToken:n}));re(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let s=i.providerUserInfo?.length?YP(i.providerUserInfo):[],o=c3(t.providerData,s),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new au(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,h)})}function KP(t){return m(this,null,function*(){let e=nu(t);yield Rf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function c3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YP(t){return t.map(r=>{var i=r,{providerId:e}=i,n=Nu(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function u3(t,e){return m(this,null,function*(){let n=yield WP(t,{},()=>m(null,null,function*(){let r=wf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=yield zP(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&fE(t.emulatorConfig.host)&&(u.credentials="include"),Af.fetch()(o,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function l3(t,e){return m(this,null,function*(){return du(t,"POST","/v2/accounts:revokeToken",OE(t,e))})}var su=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");let n=FP(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield u3(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return hr("not implemented")}};function ni(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ri=class t{constructor(s){var o=s,{uid:e,auth:n,stsTokenManager:r}=o,i=Nu(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new au(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield ou(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return GP(this,e)}reload(){return KP(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>q({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(ce(q({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Rf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Vn(this.auth.app))return Promise.reject(zo(this.auth));let e=yield this.getIdToken();return yield ou(this,o3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return ce(q({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>q({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:y,isAnonymous:_,providerData:A,stsTokenManager:N}=n;re(p&&N,e,"internal-error");let P=su.fromJSON(this.name,N);re(typeof p=="string",e,"internal-error"),ni(r,e.name),ni(i,e.name),re(typeof y=="boolean",e,"internal-error"),re(typeof _=="boolean",e,"internal-error"),ni(s,e.name),ni(o,e.name),ni(a,e.name),ni(u,e.name),ni(l,e.name),ni(h,e.name);let x=new t({uid:p,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:l,lastLoginAt:h});return A&&Array.isArray(A)&&(x.providerData=A.map(H=>q({},H))),u&&(x._redirectEventId=u),x}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new su;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Rf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];re(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?YP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new su;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new au(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var LP=new Map;function ii(t){ms(t instanceof Function,"Expected a class definition");let e=LP.get(t);return e?(ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LP.set(t,e),e)}var d3=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),DE=d3;function EE(t,e,n){return`firebase:${t}:${e}:${n}`}var Nf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=EE(this.userKey,i.apiKey,s),this.fullPersistenceKey=EE("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Sf(this.auth,{idToken:e}).catch(()=>{});return n?ri._fromGetAccountInfoResponse(this.auth,n,e):null}return ri._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(ii(DE),e,r);let i=(yield Promise.all(n.map(l=>m(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ii(DE),o=EE(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p;if(typeof h=="string"){let y=yield Sf(e,{idToken:h}).catch(()=>{});if(!y)break;p=yield ri._fromGetAccountInfoResponse(e,y,h)}else p=ri._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(null,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function VP(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y3(e))return"Blackberry";if(_3(e))return"Webos";if(f3(e))return"Safari";if((e.includes("chrome/")||p3(e))&&!e.includes("edge/"))return"Chrome";if(m3(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function h3(t=hn()){return/firefox\//i.test(t)}function f3(t=hn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p3(t=hn()){return/crios\//i.test(t)}function g3(t=hn()){return/iemobile/i.test(t)}function m3(t=hn()){return/android/i.test(t)}function y3(t=hn()){return/blackberry/i.test(t)}function _3(t=hn()){return/webos/i.test(t)}function QP(t,e=[]){let n;switch(t){case"Browser":n=VP(hn());break;case"Worker":n=`${VP(hn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tf}/${r}`}var bE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function v3(n){return m(this,arguments,function*(t,e={}){return du(t,"GET","/v2/passwordPolicy",OE(t,e))})}var I3=6,CE=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??I3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var AE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pf(this),this.idTokenSubscription=new Pf(this),this.beforeStateQueue=new bE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Nf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield Sf(this,{idToken:e}),r=yield ri._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){if(Vn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Rf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=e3()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Vn(this.app))return Promise.reject(zo(this));let n=e?nu(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Vn(this.app)?Promise.reject(zo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vn(this.app)?Promise.reject(zo(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(ii(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield v3(this),n=new CE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ur("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield l3(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ii(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=yield Nf.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return m(this,null,function*(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Q6(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function JP(t){return nu(t)}var Pf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=CP(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var E3={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w3(t){E3=t}function T3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function D3(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ii);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var cu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}};function Go(t,e){return m(this,null,function*(){return s3(t,"POST","/v1/accounts:signInWithIdp",OE(t,e))})}var b3="http://localhost",kf=class t extends cu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,s=Nu(a,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return Go(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Go(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Go(e,n)}buildRequest(){let e={requestUri:b3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wf(n)}return e}};var Mf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var SE=class extends Mf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var FE=(()=>{class t extends SE{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return kf._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var uu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(this,null,function*(){let s=yield ri._fromIdTokenResponse(e,r,i),o=UP(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=UP(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function UP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var RE=class t extends dn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function ZP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?RE._fromErrorAndOperation(t,s,e,r):s})}function C3(t,e,n=!1){return m(this,null,function*(){let r=yield ou(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return uu._forOperation(t,"link",r)})}function A3(t,e,n=!1){return m(this,null,function*(){let{auth:r}=t;if(Vn(r.app))return Promise.reject(zo(r));let i="reauthenticate";try{let s=yield ou(t,ZP(r,i,e,t),n);re(s.idToken,r,"internal-error");let o=xE(s.idToken);re(o,r,"internal-error");let{sub:a}=o;return re(t.uid===a,r,"user-mismatch"),uu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&gs(r,"user-mismatch"),s}})}function S3(t,e,n=!1){return m(this,null,function*(){if(Vn(t.app))return Promise.reject(zo(t));let r="signIn",i=yield ZP(t,r,e),s=yield uu._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function R3(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var woe=T3("rcb"),Toe=new ys(3e4,6e4);function N3(t,e){return e?ii(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var lu=class extends cu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Go(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function P3(t){return S3(t.auth,new lu(t),t.bypassAuthState)}function k3(t){let{auth:e,user:n}=t;return re(n,e,"internal-error"),A3(n,new lu(t),t.bypassAuthState)}function M3(t){return m(this,null,function*(){let{auth:e,user:n}=t;return re(n,e,"internal-error"),C3(n,new lu(t),t.bypassAuthState)})}var NE=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P3;case"linkViaPopup":case"linkViaRedirect":return M3;case"reauthViaPopup":case"reauthViaRedirect":return k3;default:gs(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var O3=new ys(2e3,1e4);function LE(t,e,n){return m(this,null,function*(){if(Vn(t.app))return Promise.reject(ps(t,"operation-not-supported-in-this-environment"));let r=JP(t);J6(t,e,Mf);let i=N3(r,n);return new x3(r,"signInViaPopup",e,i).executeNotNull()})}var x3=(()=>{class t extends NE{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return m(this,null,function*(){let n=yield this.execute();return re(n,this.auth,"internal-error"),n})}onExecution(){return m(this,null,function*(){ms(this.filter.length===1,"Popup operations only handle one event");let n=R3();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,O3.get())};n()}}t.currentPopupAction=null;return t})();var Doe=10*60*1e3;var boe=new ys(3e4,6e4);var Coe=new ys(5e3,15e3);var Aoe=encodeURIComponent("fac");var jP="@firebase/auth",BP="1.11.0";var PE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function F3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L3(t){Wo(new lr("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QP(t)},l=new AE(r,i,s,u);return D3(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wo(new lr("auth-internal",e=>{let n=JP(e.getProvider("auth").getImmediate());return(r=>new PE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qo(jP,BP,F3(t)),qo(jP,BP,"esm2020")}var V3=5*60,Soe=vP("authIdTokenMaxAge")||V3;function U3(){return document.getElementsByTagName("head")?.[0]??document}w3({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ps("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",U3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L3("Browser");var XP=class t{constructor(e,n){this.auth=e;this.firestore=n;cP(this.auth,r=>m(this,null,function*(){if(this.userSubject.next(r),r){let s=(yield If(fs(this.firestore,"users",r.uid))).data(),o=Array.isArray(s?.roles)?s.roles:[];this.rolesSubject.next(o)}else this.rolesSubject.next([])}))}userSubject=new Hn(null);currentUser=this.userSubject.asObservable();rolesSubject=new Hn([]);currentRoles=this.rolesSubject.asObservable();viewAsRoleSubject=new Hn(null);viewAsRole$=this.viewAsRoleSubject.asObservable();effectiveRoles=Ap([this.currentRoles,this.viewAsRole$]).pipe(Gt(([e,n])=>n?[n]:e));get getCurrentUser(){return this.auth.currentUser}setViewAsRole(e){this.viewAsRoleSubject.next(e)}register(e){return m(this,null,function*(){let n=yield aP(this.auth,e.email,e.password);return yield hP(n.user,{displayName:e.username}),yield tu(fs(this.firestore,"users",n.user.uid),{uid:n.user.uid,displayName:e.username,email:e.email,roles:["viewer"]}),yield tu(fs(this.firestore,"usernames",e.username),{email:e.email,uid:n.user.uid}),this.userSubject.next(n.user),this.rolesSubject.next(["viewer"]),n.user})}login(e,n){return this.getUserEmailByDisplayName(e).then(r=>{if(!r)throw new Error("Username not found");return lP(this.auth,r,n).then(i=>m(this,null,function*(){this.userSubject.next(i.user);let o=(yield If(fs(this.firestore,"users",i.user.uid))).data(),a=Array.isArray(o?.roles)?o.roles:[];return this.rolesSubject.next(a),i.user}))})}getUserEmailByDisplayName(e){return m(this,null,function*(){try{let n=pP(this.firestore,"users"),r=yield gP(n);for(let i of r.docs){let s=i.data();if(s.displayName===e)return s.email}return null}catch(n){return console.error("Error finding user by display name:",n),null}})}forgotPassword(e){return uP(this.auth,e)}logout(){return this.userSubject.next(null),this.rolesSubject.next([]),this.viewAsRoleSubject.next(null),dP(this.auth)}signInWithGoogle(){let e=new FE;return e.addScope("email"),e.addScope("profile"),LE(this.auth,e).then(n=>m(this,null,function*(){let r=n.user;this.userSubject.next(r);let i=fs(this.firestore,"users",r.uid),s=yield If(i);if(!s.exists())yield tu(i,{uid:r.uid,displayName:r.displayName,email:r.email,roles:["viewer"]}),r.displayName&&(yield tu(fs(this.firestore,"usernames",r.displayName),{email:r.email,uid:r.uid})),this.rolesSubject.next(["viewer"]);else{let o=s.data(),a=Array.isArray(o?.roles)?o.roles:[];this.rolesSubject.next(a)}return r}))}static \u0275fac=function(n){return new(n||t)(Ne(ds),Ne(hs))};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})};export{q as a,ce as b,m as c,Oe as d,Yk as e,te as f,Ep as g,wp as h,zt as i,Hn as j,ya as k,pn as l,sM as m,oM as n,aM as o,gi as p,Gt as q,Ap as r,mi as s,Sp as t,dl as u,mM as v,_a as w,yT as x,yM as y,va as z,Np as A,vM as B,IM as C,Pp as D,EM as E,wM as F,TM as G,DM as H,bM as I,CM as J,j as K,ae as L,wi as M,RM as N,$ as O,Ne as P,L as Q,mn as R,cg as S,vt as T,Dr as U,WT as V,zT as W,$e as X,Mi as Y,Sr as Z,wr as _,En as $,Rr as aa,Nr as ba,wt as ca,za as da,Tn as ea,pm as fa,tn as ga,kO as ha,MO as ia,ab as ja,mm as ka,xO as la,Ys as ma,pb as na,WO as oa,GO as pa,_x as qa,Ba as ra,Ha as sa,Dn as ta,Y as ua,y1 as va,Ya as wa,Qa as xa,Qb as ya,Jb as za,Y1 as Aa,Xs as Ba,De as Ca,eC as Da,Ja as Ea,Et as Fa,Te as Ga,Hm as Ha,_F as Ia,eo as Ja,vF as Ka,aC as La,ji as Ma,to as Na,lC as Oa,Gm as Pa,Km as Qa,dC as Ra,Ym as Sa,Qm as Ta,hC as Ua,pC as Va,gC as Wa,wF as Xa,bn as Ya,AF as Za,SF as _a,IC as $a,Xa as ab,UF as bb,QF as cb,CC as db,Jm as eb,AC as fb,SC as gb,RC as hb,tL as ib,NC as jb,nL as kb,aL as lb,cL as mb,lL as nb,hL as ob,fL as pb,pL as qb,gL as rb,yL as sb,Cn as tb,VC as ub,zX as vb,nc as wb,GX as xb,vd as yb,KX as zb,$i as Ab,jL as Bb,cy as Cb,BL as Db,ro as Eb,QC as Fb,JC as Gb,WL as Hb,iV as Ib,fA as Jb,sV as Kb,aV as Lb,uV as Mb,lV as Nb,dV as Ob,fy as Pb,dte as Qb,hte as Rb,pV as Sb,AA as Tb,xte as Ub,Fte as Vb,qV as Wb,GV as Xb,Vte as Yb,YV as Zb,ZV as _b,jA as $b,Ute as ac,jte as bc,i2 as cc,o2 as dc,c2 as ec,Bte as fc,GA as gc,Mr as hc,Hd as ic,KA as jc,qd as kc,Nt as lc,Ce as mc,yt as nc,on as oc,ho as pc,Dt as qc,xr as rc,zi as sc,Pe as tc,Yr as uc,Hc as vc,Uo as wc,Qr as xc,Ee as yc,ir as zc,as as Ac,cre as Bc,ure as Cc,jo as Dc,ds as Ec,eu as Fc,Aie as Gc,Sie as Hc,kne as Ic,Mne as Jc,hs as Kc,Rse as Lc,Nse as Mc,pP as Nc,Pse as Oc,fs as Pc,If as Qc,gP as Rc,kse as Sc,Mse as Tc,Ose as Uc,xse as Vc,tu as Wc,Fse as Xc,Lse as Yc,Vse as Zc,XP as _c};
