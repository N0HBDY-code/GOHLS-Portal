import{a as Lt,b as Wt,c as Ft,d as Ut,e as B,f as Ee,g as Bt,h as ge}from"./chunk-HCFPR3S6.js";import{$a as Dt,$b as Pe,Aa as V,Ac as di,Bc as ci,Cc as mi,Da as g,Dc as pi,Ec as Xe,Fc as gi,Ga as Mt,Gc as ui,Hc as fi,Ib as Vt,Jb as ne,Kb as K,Kc as oe,Lb as ze,Lc as _i,Mb as qe,Mc as Ae,Nb as X,Nc as M,O as Et,Oa as m,Oc as hi,Pa as i,Pc as A,Q as G,Qa as n,Qc as F,R as Pt,Ra as _,Rc as k,Sa as He,Sb as Ht,Sc as yi,Ta as je,Tb as ae,Tc as he,Ua as pt,Ub as Z,Uc as Me,V as u,Va as kt,Vb as ue,Vc as N,W as f,Wa as Ot,Wb as fe,Wc as Ne,X as Tt,Xa as w,Xb as J,Xc as ve,Ya as P,Yb as _e,Yc as D,Za as c,Zb as Re,_a as At,_c as H,a as j,ab as O,ac as Te,b as pe,bb as xe,bc as Ie,c as E,ca as We,cb as r,cc as Ye,db as p,dc as Ge,eb as b,ec as Ke,fb as W,fc as ee,gb as gt,gc as jt,hb as x,hc as $t,ib as v,ic as zt,jb as S,jc as qt,kb as $e,kc as Yt,lb as Rt,lc as Kt,mb as ut,mc as Xt,na as Y,nb as re,nc as Qt,oa as It,ob as Oe,oc as Zt,pb as Ce,pc as Jt,q as Be,qa as s,qb as Gt,qc as ei,rc as ti,sb as Nt,sc as ii,tc as Fe,ua as te,uc as ni,vc as ai,w as Ct,wc as ri,xc as oi,yc as si,zc as li}from"./chunk-ENPAMTHP.js";function Li(t,a){if(t&1&&(i(0,"div",6)(1,"div",19),r(2),n()()),t&2){let e=c();s(2),b(" ",e.errorMessage," ")}}var Qe=class t{authService=G(H);router=G(B);username="";password="";errorMessage="";login(){if(this.username===""){alert("Please enter your username");return}if(this.password===""){alert("Please enter your password");return}this.authService.login(this.username,this.password).then(()=>{this.router.navigate(["/dashboard"]),this.username="",this.password=""}).catch(a=>{console.error("Login failed:",a),this.errorMessage="Login failed: "+a.message})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-login"]],decls:31,vars:3,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["class","mb-3",4,"ngIf"],["for","username",1,"form-label"],["type","text","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/register",2,"text-decoration","none"],[1,"text-danger"],["routerLink","/forgot-password",1,"text-dark",2,"text-decoration","none"],["role","alert",1,"alert","alert-danger"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1),_(2,"div",2),i(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),r(9,"Login"),n()(),g(10,Li,3,1,"div",8),i(11,"div",6)(12,"label",9),r(13,"Username"),n(),i(14,"input",10),S("ngModelChange",function(d){return v(l.username,d)||(l.username=d),d}),n()(),i(15,"div",6)(16,"label",11),r(17,"Password"),n(),i(18,"input",12),S("ngModelChange",function(d){return v(l.password,d)||(l.password=d),d}),n()(),i(19,"button",13),P("click",function(){return l.login()}),r(20," Login "),n(),i(21,"div",14)(22,"div",15)(23,"a",16),r(24,"Need Account? "),i(25,"span",17),r(26,"Register"),n()()(),i(27,"div",15)(28,"a",18),r(29,"Forgot Password? "),n()()()()()()(),_(30,"div",2),n()()),e&2&&(s(10),m("ngIf",l.errorMessage),s(4),x("ngModel",l.username),s(4),x("ngModel",l.password))},dependencies:[X,K,ee,_e,ae,Z,ue,J,fe,ge,Ee],styles:[".container-fluid[_ngcontent-%COMP%]{background:#f8f9fa;min-height:100vh}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 8px 25px #0000001a}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.btn[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1.5rem;font-weight:500;transition:all .2s ease}.btn-info[_ngcontent-%COMP%]{background:#0d6efd;border-color:#0d6efd;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#0b5ed7;border-color:#0a58ca;transform:translateY(-1px)}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-dark[_ngcontent-%COMP%]{color:#495057!important}a[_ngcontent-%COMP%]{text-decoration:none;transition:color .2s ease}a[_ngcontent-%COMP%]:hover{color:#0d6efd!important}"]})};function Wi(t,a){t&1&&(i(0,"div",37),_(1,"div",38),i(2,"p",39),r(3,"Loading games..."),n()())}function Fi(t,a){t&1&&(i(0,"div",40),_(1,"i",41),i(2,"p",5),r(3,"No games scheduled for today"),n()())}function Ui(t,a){if(t&1){let e=w();i(0,"div",48)(1,"button",49),P("click",function(){u(e);let o=c(2);return f(o.previousGame())}),_(2,"i",50),n(),i(3,"button",51),P("click",function(){u(e);let o=c(2);return f(o.nextGame())}),_(4,"i",52),n()()}}function Bi(t,a){if(t&1&&(i(0,"div",69)(1,"span",70),r(2),n()()),t&2){let e=c().ngIf;s(),O("live",e.period&&e.period!=="Final")("final",e.period==="Final"),s(),b(" ",e.period||"Live"," ")}}function Hi(t,a){if(t&1&&_(0,"img",71),t&2){let e=c().ngIf;m("src",e.awayTeamLogo,Y)("alt",e.awayTeam)}}function ji(t,a){t&1&&(i(0,"div",72)(1,"span",73),r(2,"VS"),n()())}function $i(t,a){if(t&1&&(i(0,"div",74)(1,"div",75)(2,"span",76),r(3),n(),i(4,"span",77),r(5,"-"),n(),i(6,"span",78),r(7),n()()()),t&2){let e=c().ngIf;s(3),p(e.awayScore||0),s(4),p(e.homeScore||0)}}function zi(t,a){if(t&1&&_(0,"img",71),t&2){let e=c().ngIf;m("src",e.homeTeamLogo,Y)("alt",e.homeTeam)}}function qi(t,a){if(t&1&&(i(0,"div",53)(1,"div",54)(2,"div",55)(3,"span",56),r(4),n(),i(5,"span",57),r(6),n()(),g(7,Bi,3,5,"div",58),n(),i(8,"div",59)(9,"div",60),g(10,Hi,1,2,"img",61),i(11,"div",62)(12,"div",63),r(13),n(),i(14,"div",64),r(15,"Away"),n()()(),i(16,"div",65),g(17,ji,3,0,"div",66)(18,$i,8,2,"div",67),n(),i(19,"div",68)(20,"div",62)(21,"div",63),r(22),n(),i(23,"div",64),r(24,"Home"),n()(),g(25,zi,1,2,"img",61),n()()()),t&2){let e=a.ngIf,l=c(2);s(4),b("Week ",e.week),s(2),p(e.day),s(),m("ngIf",l.hasScore(e)),s(3),m("ngIf",e.awayTeamLogo),s(3),p(e.awayTeam),s(4),m("ngIf",!l.hasScore(e)),s(),m("ngIf",l.hasScore(e)),s(4),p(e.homeTeam),s(3),m("ngIf",e.homeTeamLogo)}}function Yi(t,a){if(t&1){let e=w();i(0,"button",81),P("click",function(){let o=u(e).index,d=c(3);return f(d.goToGame(o))}),n()}if(t&2){let e=a.index,l=c(3);O("active",e===l.currentGameIndex)}}function Ki(t,a){if(t&1&&(i(0,"div",79),g(1,Yi,1,2,"button",80),n()),t&2){let e=c(2);s(),m("ngForOf",e.todaysGames)}}function Xi(t,a){if(t&1&&(i(0,"div",82)(1,"small",83),_(2,"i",84),r(3),n()()),t&2){let e=c(2);s(3),b(" Auto-rotating every ",e.autoRotateInterval/1e3," seconds ")}}function Qi(t,a){if(t&1){let e=w();i(0,"div",42),g(1,Ui,5,0,"div",43),i(2,"div",44),P("click",function(){u(e);let o=c();return f(o.navigateToSpecificGame())}),g(3,qi,26,9,"div",45),n(),g(4,Ki,2,1,"div",46)(5,Xi,4,1,"div",47),n()}if(t&2){let e=c();s(),m("ngIf",e.todaysGames.length>1),s(2),m("ngIf",e.todaysGames[e.currentGameIndex]),s(),m("ngIf",e.todaysGames.length>1),s(),m("ngIf",e.todaysGames.length>1)}}function Zi(t,a){t&1&&(i(0,"div",37),_(1,"div",85),i(2,"p",39),r(3,"Loading players..."),n()())}function Ji(t,a){t&1&&(i(0,"div",40),_(1,"i",86),i(2,"p",5),r(3,"No new players recently"),n()())}function en(t,a){if(t&1&&(i(0,"div",87)(1,"div",88)(2,"div",89),r(3),n(),i(4,"div",90)(5,"h6",91),r(6),n(),i(7,"div",92)(8,"small",83),r(9),n(),i(10,"span",93),r(11),n()(),i(12,"small",94),r(13),n()()(),i(14,"div",95)(15,"small",83),r(16),n()()()),t&2){let e=a.$implicit,l=c();s(3),W(" ",e.firstName.charAt(0),"",e.lastName.charAt(0)," "),s(3),W("",e.firstName," ",e.lastName),s(3),W("",e.position," \u2022 ",e.archetype),s(2),b("Age ",e.age),s(2),p(e.teamName),s(3),p(l.getTimeAgo(e.createdDate))}}function tn(t,a){t&1&&(i(0,"div",37),_(1,"div",96),i(2,"p",39),r(3,"Loading transactions..."),n()())}function nn(t,a){t&1&&(i(0,"div",40),_(1,"i",97),i(2,"p",5),r(3,"No recent transactions"),n()())}function an(t,a){if(t&1&&(i(0,"div",98)(1,"div",99),_(2,"i"),i(3,"div",90)(4,"p",91),r(5),n(),i(6,"small",83),r(7),n()()()()),t&2){let e=a.$implicit,l=c();s(2),xe(l.getTransactionIcon(e.type)+" "+l.getTransactionColor(e.type)+" me-2 mt-1"),s(3),p(e.description),s(2),p(l.getTimeAgo(e.timestamp))}}var Ze=class t{constructor(a,e,l){this.authService=a;this.firestore=e;this.router=l}user=null;userSub;today=new Date;newestPlayers=[];recentTransactions=[];todaysGames=[];loadingPlayers=!1;loadingTransactions=!1;loadingGames=!1;currentGameIndex=0;autoRotateTimer;ROTATION_INTERVAL=3e3;ngOnInit(){return E(this,null,function*(){this.userSub=this.authService.currentUser.subscribe(a=>{this.user=a}),yield Promise.all([this.loadNewestPlayers(),this.loadRecentTransactions(),this.loadTodaysGames()]),this.startAutoRotation()})}ngOnDestroy(){this.userSub&&this.userSub.unsubscribe(),this.stopAutoRotation()}startAutoRotation(){this.stopAutoRotation(),this.todaysGames.length>1?(console.log(`\u{1F3A0} Starting carousel rotation: ${this.todaysGames.length} games, ${this.ROTATION_INTERVAL}ms interval`),this.autoRotateTimer=setInterval(()=>{let a=this.currentGameIndex;this.nextGame(),console.log(`\u{1F504} Carousel rotated from game ${a} to game ${this.currentGameIndex}`)},this.ROTATION_INTERVAL)):console.log(`\u{1F3A0} Not starting carousel rotation: only ${this.todaysGames.length} game(s)`)}stopAutoRotation(){this.autoRotateTimer&&(console.log("\u23F9\uFE0F Stopping carousel auto-rotation"),clearInterval(this.autoRotateTimer),this.autoRotateTimer=null)}nextGame(){this.todaysGames.length>1&&(this.currentGameIndex=(this.currentGameIndex+1)%this.todaysGames.length)}previousGame(){this.todaysGames.length>1&&(this.currentGameIndex=this.currentGameIndex===0?this.todaysGames.length-1:this.currentGameIndex-1,this.startAutoRotation())}goToGame(a){a>=0&&a<this.todaysGames.length&&(this.currentGameIndex=a,this.startAutoRotation())}navigateToSpecificGame(){let a=this.todaysGames[this.currentGameIndex];a&&a.gameId&&a.homeTeamId?this.router.navigate(["/games",a.homeTeamId,a.gameId]):this.router.navigate(["/games"])}loadNewestPlayers(){return E(this,null,function*(){this.loadingPlayers=!0;try{let a=M(this.firestore,"players"),e=N(a,D("status","==","active"),Me("createdDate","desc"),he(5)),l=yield k(e);this.newestPlayers=yield Promise.all(l.docs.map(o=>E(this,null,function*(){let d=o.data(),y="Free Agent";if(d.teamId&&d.teamId!=="none"){let h=A(this.firestore,`teams/${d.teamId}`),C=yield F(h);if(C.exists()){let I=C.data();y=`${I.city} ${I.mascot}`}}return{id:o.id,firstName:d.firstName||"",lastName:d.lastName||"",position:d.position||"",archetype:d.archetype||"",age:d.age||19,createdDate:d.createdDate,teamId:d.teamId||"none",teamName:y}})))}catch(a){console.error("Error loading newest players:",a)}finally{this.loadingPlayers=!1}})}loadRecentTransactions(){return E(this,null,function*(){this.loadingTransactions=!0;try{let a=[],e=M(this.firestore,"players"),l=yield k(e);for(let o of l.docs){let d=M(this.firestore,`players/${o.id}/history`),y=N(d,Me("timestamp","desc"),he(2)),h=yield k(y);for(let C of h.docs){let I=C.data(),T=o.data();if(["signed","traded","retired"].includes(I.action)){let L="",R=`${T.firstName} ${T.lastName}`;switch(I.action){case"signed":L=`${R} signed with a team`;break;case"traded":L=`${R} was traded`;break;case"retired":L=`${R} announced retirement`;break}a.push({id:C.id,type:I.action,description:L,timestamp:I.timestamp,playersInvolved:[o.id]})}}}this.recentTransactions=a.sort((o,d)=>{let y=o.timestamp?.toDate?.()||new Date(o.timestamp);return(d.timestamp?.toDate?.()||new Date(d.timestamp)).getTime()-y.getTime()}).slice(0,5)}catch(a){console.error("Error loading recent transactions:",a)}finally{this.loadingTransactions=!1}})}loadTodaysGames(){return E(this,null,function*(){this.loadingGames=!0;try{let a=A(this.firestore,"gameScheduleSettings/current"),e=yield F(a);if(!e.exists()){this.todaysGames=[];return}let l=e.data(),o=l.week||1,d=l.day||"D1",y=M(this.firestore,"games"),h=N(y,D("week","==",o),D("day","==",d)),C=yield k(h);this.todaysGames=yield Promise.all(C.docs.map(I=>E(this,null,function*(){let T=I.data(),[L,R]=yield Promise.all([F(A(this.firestore,`teams/${T.homeTeamId}`)),F(A(this.firestore,`teams/${T.awayTeamId}`))]),$=L.exists()?L.data():{},z=R.exists()?R.data():{};return{gameId:I.id,homeTeam:`${$.city} ${$.mascot}`,awayTeam:`${z.city} ${z.mascot}`,homeTeamId:T.homeTeamId,awayTeamId:T.awayTeamId,homeTeamLogo:$.logoUrl,awayTeamLogo:z.logoUrl,week:T.week,day:T.day,time:T.time||"TBD",homeScore:T.homeScore,awayScore:T.awayScore,period:T.period}}))),this.currentGameIndex=0,console.log(`\u{1F3AE} Loaded ${this.todaysGames.length} games for Week ${o}, ${d}`),this.startAutoRotation()}catch(a){console.error("Error loading today's games:",a)}finally{this.loadingGames=!1}})}getTimeAgo(a){let e=a?.toDate?.()||new Date(a),o=new Date().getTime()-e.getTime(),d=Math.floor(o/(1e3*60*60)),y=Math.floor(d/24);return y>0?`${y} day${y>1?"s":""} ago`:d>0?`${d} hour${d>1?"s":""} ago`:"Less than an hour ago"}getTransactionIcon(a){switch(a){case"trade":return"fas fa-exchange-alt";case"signing":return"fas fa-pen-nib";case"retirement":return"fas fa-medal";default:return"fas fa-info-circle"}}getTransactionColor(a){switch(a){case"trade":return"text-primary";case"signing":return"text-success";case"retirement":return"text-warning";default:return"text-muted"}}hasScore(a){return a.homeScore!==void 0&&a.homeScore!==null||a.awayScore!==void 0&&a.awayScore!==null}get autoRotateInterval(){return this.ROTATION_INTERVAL}static \u0275fac=function(e){return new(e||t)(te(H),te(oe),te(B))};static \u0275cmp=V({type:t,selectors:[["app-dashboard"]],decls:79,vars:11,consts:[[1,"container","mt-4"],[1,"row","mb-4"],[1,"col-12"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-calendar-day","me-2"],[1,"card-body"],["class","text-center py-3",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["class","games-carousel-container",4,"ngIf"],[1,"row","mb-5"],[1,"card","bg-dark","text-white"],[1,"card-body","text-center","py-5"],[1,"display-4","mb-3"],[1,"lead","mb-4"],[1,"ratio","ratio-16x9","mb-4",2,"max-width","800px","margin","0 auto"],["src",It`https://player.twitch.tv/?channel=gohls_official&parent=localhost&parent=127.0.0.1&parent=your-domain.com&autoplay=false`,"allowfullscreen",""],["href","https://www.twitch.tv/gohls_official","target","_blank",1,"btn","btn-primary","btn-lg"],[1,"fab","fa-twitch","me-2"],[1,"row"],[1,"col-lg-6","mb-4"],[1,"card","h-100"],[1,"card-header","bg-success","text-white"],[1,"fas","fa-user-plus","me-2"],["class","player-item mb-3 p-3 border rounded",4,"ngFor","ngForOf"],[1,"card-header","bg-warning","text-dark"],[1,"fas","fa-exchange-alt","me-2"],["class","transaction-item mb-3 p-3 border rounded",4,"ngFor","ngForOf"],[1,"col-md-3","mb-3"],[1,"card","text-center"],[1,"fas","fa-users","fa-2x","text-primary","mb-2"],[1,"card-title"],[1,"card-text","display-6"],[1,"fas","fa-trophy","fa-2x","text-warning","mb-2"],[1,"fas","fa-gamepad","fa-2x","text-success","mb-2"],[1,"fas","fa-calendar","fa-2x","text-info","mb-2"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","text-primary"],[1,"mt-2","mb-0","text-muted"],[1,"text-center","py-4","text-muted"],[1,"fas","fa-calendar-times","fa-2x","mb-2"],[1,"games-carousel-container"],["class","carousel-nav",4,"ngIf"],[1,"single-game-container",3,"click"],["class","game-card-single",4,"ngIf"],["class","carousel-indicators",4,"ngIf"],["class","auto-rotation-info",4,"ngIf"],[1,"carousel-nav"],[1,"carousel-btn","carousel-btn-prev",3,"click"],[1,"fas","fa-chevron-left"],[1,"carousel-btn","carousel-btn-next",3,"click"],[1,"fas","fa-chevron-right"],[1,"game-card-single"],[1,"game-header"],[1,"game-week-info"],[1,"week-badge"],[1,"day-badge"],["class","game-status",4,"ngIf"],[1,"teams-container"],[1,"team-display","away-team"],["class","team-logo",3,"src","alt",4,"ngIf"],[1,"team-info"],[1,"team-name"],[1,"team-record"],[1,"vs-section"],["class","vs-display",4,"ngIf"],["class","score-display",4,"ngIf"],[1,"team-display","home-team"],[1,"game-status"],[1,"status-badge"],[1,"team-logo",3,"src","alt"],[1,"vs-display"],[1,"vs-text"],[1,"score-display"],[1,"score-line"],[1,"away-score"],[1,"score-separator"],[1,"home-score"],[1,"carousel-indicators"],["class","indicator-dot",3,"active","click",4,"ngFor","ngForOf"],[1,"indicator-dot",3,"click"],[1,"auto-rotation-info"],[1,"text-muted"],[1,"fas","fa-sync-alt","me-1"],[1,"spinner-border","spinner-border-sm","text-success"],[1,"fas","fa-user-slash","fa-2x","mb-2"],[1,"player-item","mb-3","p-3","border","rounded"],[1,"d-flex","align-items-center"],[1,"player-avatar","me-3"],[1,"flex-grow-1"],[1,"mb-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"badge","bg-light","text-dark"],[1,"text-primary"],[1,"mt-2"],[1,"spinner-border","spinner-border-sm","text-warning"],[1,"fas","fa-clipboard-list","fa-2x","mb-2"],[1,"transaction-item","mb-3","p-3","border","rounded"],[1,"d-flex","align-items-start"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),_(6,"i",6),r(7,"Today's Games "),n()(),i(8,"div",7),g(9,Wi,4,0,"div",8)(10,Fi,4,0,"div",9)(11,Qi,6,4,"div",10),n()()()(),i(12,"div",11)(13,"div",2)(14,"div",12)(15,"div",13)(16,"h1",14),r(17,"Welcome to GOHLS"),n(),i(18,"p",15),r(19,"Watch live games and stay updated with the latest league action"),n(),i(20,"div",16),_(21,"iframe",17),n(),i(22,"a",18),_(23,"i",19),r(24,"Watch on Twitch "),n()()()()(),i(25,"div",20)(26,"div",21)(27,"div",22)(28,"div",23)(29,"h5",5),_(30,"i",24),r(31,"Newest Players "),n()(),i(32,"div",7),g(33,Zi,4,0,"div",8)(34,Ji,4,0,"div",9)(35,en,17,9,"div",25),n()()(),i(36,"div",21)(37,"div",22)(38,"div",26)(39,"h5",5),_(40,"i",27),r(41,"Recent Transactions "),n()(),i(42,"div",7),g(43,tn,4,0,"div",8)(44,nn,4,0,"div",9)(45,an,8,4,"div",28),n()()()(),i(46,"div",20)(47,"div",29)(48,"div",30)(49,"div",7),_(50,"i",31),i(51,"h5",32),r(52,"Active Players"),n(),i(53,"p",33),r(54),n()()()(),i(55,"div",29)(56,"div",30)(57,"div",7),_(58,"i",34),i(59,"h5",32),r(60,"Teams"),n(),i(61,"p",33),r(62,"32"),n()()()(),i(63,"div",29)(64,"div",30)(65,"div",7),_(66,"i",35),i(67,"h5",32),r(68,"Games Played"),n(),i(69,"p",33),r(70),n()()()(),i(71,"div",29)(72,"div",30)(73,"div",7),_(74,"i",36),i(75,"h5",32),r(76,"Current Season"),n(),i(77,"p",33),r(78,"2025"),n()()()()()()),e&2&&(s(9),m("ngIf",l.loadingGames),s(),m("ngIf",!l.loadingGames&&l.todaysGames.length===0),s(),m("ngIf",!l.loadingGames&&l.todaysGames.length>0),s(22),m("ngIf",l.loadingPlayers),s(),m("ngIf",!l.loadingPlayers&&l.newestPlayers.length===0),s(),m("ngForOf",l.newestPlayers),s(8),m("ngIf",l.loadingTransactions),s(),m("ngIf",!l.loadingTransactions&&l.recentTransactions.length===0),s(),m("ngForOf",l.recentTransactions),s(9),p(l.newestPlayers.length>0?"500+":"0"),s(16),p(l.todaysGames.length>0?"1000+":"0"))},dependencies:[ge,X,ne,K],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;background:#fff;min-height:100vh;padding:2rem 0}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;box-shadow:0 2px 4px #0000000d;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background:#f8f9fa;border-bottom:1px solid #dee2e6;border-radius:8px 8px 0 0;padding:1rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.games-carousel-container[_ngcontent-%COMP%]{position:relative;border-radius:12px;background:#f8f9fa;padding:2rem;box-shadow:0 4px 12px #0000001a;border:1px solid #dee2e6;min-height:320px}.carousel-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;display:flex;justify-content:space-between;width:100%;pointer-events:none}.carousel-btn[_ngcontent-%COMP%]{background:#495057cc;border:none;border-radius:50%;width:48px;height:48px;color:#fff;cursor:pointer;pointer-events:auto;transition:all .2s ease;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.carousel-btn[_ngcontent-%COMP%]:hover{background:#495057;transform:scale(1.1)}.carousel-btn-prev[_ngcontent-%COMP%]{left:1rem}.carousel-btn-next[_ngcontent-%COMP%]{right:1rem}.game-card-single[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 25px #0000001a;border:2px solid #e9ecef;cursor:pointer;transition:transform .2s ease}.game-card-single[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:1.5rem;position:relative}.game-week-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.week-badge[_ngcontent-%COMP%], .day-badge[_ngcontent-%COMP%]{background:#6c757d;color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.9rem}.game-status[_ngcontent-%COMP%]{position:absolute;right:0}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.85rem}.status-badge.live[_ngcontent-%COMP%]{background:#dc3545;color:#fff;animation:_ngcontent-%COMP%_pulse 2s infinite}.status-badge.final[_ngcontent-%COMP%]{background:#198754;color:#fff}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.teams-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;width:100%;padding:0 1rem}.team-display[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:1rem;min-width:0}.team-display.away-team[_ngcontent-%COMP%]{justify-content:flex-start}.team-display.home-team[_ngcontent-%COMP%]{justify-content:flex-end;flex-direction:row-reverse}.team-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;min-width:0}.team-display.away-team[_ngcontent-%COMP%]   .team-info[_ngcontent-%COMP%]{text-align:left}.team-display.home-team[_ngcontent-%COMP%]   .team-info[_ngcontent-%COMP%]{text-align:right}.team-logo[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:contain;border-radius:12px;flex-shrink:0;box-shadow:0 4px 8px #0000001a}.team-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#212529;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.team-record[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;font-weight:500;margin:0}.vs-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex-shrink:0;padding:0 2rem}.vs-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.vs-text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:900;color:#495057;text-shadow:0 2px 4px rgba(0,0,0,.1)}.score-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem}.score-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.away-score[_ngcontent-%COMP%], .home-score[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:900;color:#212529;background:#f8f9fa;padding:.5rem 1rem;border-radius:12px;border:2px solid #dee2e6;min-width:60px;text-align:center;box-shadow:0 2px 4px #0000001a}.score-separator[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#6c757d}.carousel-indicators[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-top:1.5rem}.indicator-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;border:none;background:#dee2e6;cursor:pointer;transition:all .2s ease}.indicator-dot.active[_ngcontent-%COMP%]{background:#0d6efd;transform:scale(1.2)}.indicator-dot[_ngcontent-%COMP%]:hover{background:#6c757d}.auto-rotation-info[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem 0}.games-carousel-container[_ngcontent-%COMP%]{padding:1.5rem;min-height:280px}.teams-container[_ngcontent-%COMP%]{flex-direction:column;gap:1.5rem}.team-display.away-team[_ngcontent-%COMP%], .team-display.home-team[_ngcontent-%COMP%]{align-items:center;text-align:center}.team-logo[_ngcontent-%COMP%]{width:60px;height:60px}.vs-text[_ngcontent-%COMP%], .away-score[_ngcontent-%COMP%], .home-score[_ngcontent-%COMP%]{font-size:2rem}.carousel-nav[_ngcontent-%COMP%]{position:static;transform:none;justify-content:center;gap:1rem;margin-bottom:1rem}.carousel-btn-prev[_ngcontent-%COMP%], .carousel-btn-next[_ngcontent-%COMP%]{position:static}}"]})};var Je=class t{user={username:"",email:"",password:""};authService=G(H);router=G(B);register(){if(this.user.username===""){alert("Please enter a username");return}if(this.user.email===""){alert("Please enter email");return}if(this.user.password===""){alert("Please enter your password");return}this.authService.register(this.user).then(()=>{this.router.navigate(["/dashboard"]),this.user={username:"",email:"",password:""}}).catch(a=>{console.error("Registration failed:",a),alert("Registration failed: "+a.message)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-register"]],decls:31,vars:3,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","username",1,"form-label"],["type","text","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1),_(2,"div",2),i(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),r(9,"Register"),n()(),i(10,"div",6)(11,"label",8),r(12,"Username"),n(),i(13,"input",9),S("ngModelChange",function(d){return v(l.user.username,d)||(l.user.username=d),d}),n()(),i(14,"div",6)(15,"label",10),r(16,"Email"),n(),i(17,"input",11),S("ngModelChange",function(d){return v(l.user.email,d)||(l.user.email=d),d}),n()(),i(18,"div",6)(19,"label",12),r(20,"Password"),n(),i(21,"input",13),S("ngModelChange",function(d){return v(l.user.password,d)||(l.user.password=d),d}),n()(),i(22,"button",14),P("click",function(){return l.register()}),r(23," Register "),n(),i(24,"div",15)(25,"div",16)(26,"a",17),r(27,"Have an Account? "),i(28,"span",18),r(29,"Login"),n()()()()()()()(),_(30,"div",2),n()()),e&2&&(s(13),x("ngModel",l.user.username),s(4),x("ngModel",l.user.email),s(4),x("ngModel",l.user.password))},dependencies:[ee,_e,ae,Z,ue,J,fe,ge,Ee],encapsulation:2})};var et=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-verify-email"]],decls:13,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(e,l){e&1&&(He(0,"div",0)(1,"div",1),pt(2,"div",2),He(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h4",7),r(8,"Welcome"),je()(),He(9,"div",6)(10,"p",8),r(11," Link has been sent to your registered email. Please verify it. "),je()()()()(),pt(12,"div",2),je()())},encapsulation:2})};var tt=class t{authService=G(H);email="";forgotPassword(){this.authService.forgotPassword(this.email),this.email=""}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-forgot-password"]],decls:23,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1),_(2,"div",2),i(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),r(9,"Forgot Password"),n()(),i(10,"div",6)(11,"label",8),r(12,"Email"),n(),i(13,"input",9),S("ngModelChange",function(d){return v(l.email,d)||(l.email=d),d}),n()(),i(14,"button",10),P("click",function(){return l.forgotPassword()}),r(15," Send Link "),n(),i(16,"div",11)(17,"div",12)(18,"a",13),r(19,"Back to "),i(20,"span",14),r(21,"Login"),n()()()()()()()(),_(22,"div",2),n()()),e&2&&(s(13),x("ngModel",l.email))},dependencies:[ee,_e,ae,Z,ue,J,fe,ge,Ee],encapsulation:2})};var rn=()=>[];function on(t,a){if(t&1&&(i(0,"option",30),r(1),n()),t&2){let e=a.$implicit;m("value",e.id),s(),p(e.name)}}function sn(t,a){if(t&1&&(i(0,"option",30),r(1),n()),t&2){let e=a.$implicit;m("value",e.id),s(),p(e.name)}}function ln(t,a){if(t&1){let e=w();i(0,"div",14)(1,"div",4)(2,"h5",6),r(3,"Add New Game"),n()(),i(4,"div",8)(5,"form",15),P("ngSubmit",function(){u(e);let o=c();return f(o.addGame())}),i(6,"div",16)(7,"label",17),r(8,"Home Team"),n(),i(9,"select",18),S("ngModelChange",function(o){u(e);let d=c();return v(d.newGame.homeTeamId,o)||(d.newGame.homeTeamId=o),f(o)}),i(10,"option",19),r(11,"Select Home Team"),n(),g(12,on,2,2,"option",20),n()(),i(13,"div",16)(14,"label",17),r(15,"Away Team"),n(),i(16,"select",21),S("ngModelChange",function(o){u(e);let d=c();return v(d.newGame.awayTeamId,o)||(d.newGame.awayTeamId=o),f(o)}),i(17,"option",19),r(18,"Select Away Team"),n(),g(19,sn,2,2,"option",20),n()(),i(20,"div",22)(21,"label",17),r(22,"Week"),n(),i(23,"input",23),S("ngModelChange",function(o){u(e);let d=c();return v(d.newGame.week,o)||(d.newGame.week=o),f(o)}),n()(),i(24,"div",22)(25,"label",17),r(26,"Day"),n(),i(27,"input",24),S("ngModelChange",function(o){u(e);let d=c();return v(d.newGame.day,o)||(d.newGame.day=o),f(o)}),n()(),i(28,"div",25)(29,"div",26)(30,"input",27),S("ngModelChange",function(o){u(e);let d=c();return v(d.newGame.isRival,o)||(d.newGame.isRival=o),f(o)}),n(),i(31,"label",28),r(32,"Rivalry Game"),n()()(),i(33,"div",25)(34,"button",29),r(35,"Add Game"),n()()()()()}if(t&2){let e=c();s(9),x("ngModel",e.newGame.homeTeamId),s(3),m("ngForOf",e.teams),s(4),x("ngModel",e.newGame.awayTeamId),s(3),m("ngForOf",e.teams),s(4),x("ngModel",e.newGame.week),s(4),x("ngModel",e.newGame.day),s(3),x("ngModel",e.newGame.isRival)}}function dn(t,a){if(t&1){let e=w();i(0,"button",31),P("click",function(){u(e);let o=c();return f(o.clearAllGames())}),r(1),n()}if(t&2){let e=c();m("disabled",e.isClearing),s(),b(" ",e.isClearing?"Clearing...":"Clear All Games"," ")}}function cn(t,a){if(t&1){let e=w();i(0,"button",32),P("click",function(){let o=u(e).$implicit,d=c();return f(d.onWeekChange(o))}),r(1),n()}if(t&2){let e=a.$implicit,l=c();O("btn-primary",l.selectedWeek===e)("btn-outline-primary",l.selectedWeek!==e),s(),b(" Week ",e," ")}}function mn(t,a){t&1&&(i(0,"div",33)(1,"div",34)(2,"span",35),r(3,"Loading..."),n()()())}function pn(t,a){if(t&1&&_(0,"img",49),t&2){let e=c().$implicit;m("src",e.homeLogo,Y)("alt",e.homeTeam)}}function gn(t,a){if(t&1&&(i(0,"div",50)(1,"div",51)(2,"span",52),r(3),n(),i(4,"span",53),r(5,"-"),n(),i(6,"span",52),r(7),n()(),i(8,"div",54)(9,"span",55),r(10),n()()()),t&2){let e=c().$implicit;s(3),p(e.homeScore||0),s(4),p(e.awayScore||0),s(2),O("bg-warning",e.period&&e.period!=="Final")("bg-success",e.period==="Final"),s(),b(" ",e.period||"In Progress"," ")}}function un(t,a){t&1&&(i(0,"div",50)(1,"span",56),r(2,"VS"),n()())}function fn(t,a){if(t&1&&_(0,"img",49),t&2){let e=c().$implicit;m("src",e.awayLogo,Y)("alt",e.awayTeam)}}function _n(t,a){if(t&1&&(i(0,"span",57),r(1),n()),t&2){let e=a.$implicit;O("bg-danger",e==="rival")("bg-primary",e==="division")("bg-success",e==="conference"),s(),b(" ",e," ")}}function hn(t,a){if(t&1){let e=w();i(0,"div",41)(1,"div",42),P("click",function(){let o=u(e).$implicit,d=c(3);return f(d.viewGame(o))}),i(2,"div",43),g(3,pn,1,2,"img",44),i(4,"span",45),r(5),n()(),g(6,gn,11,7,"div",46)(7,un,3,0,"ng-template",null,0,Gt),i(9,"div",43),g(10,fn,1,2,"img",44),i(11,"span",45),r(12),n()(),i(13,"div",47),g(14,_n,2,7,"span",48),n()()()}if(t&2){let e=a.$implicit,l=At(8),o=c(3);s(3),m("ngIf",e.homeLogo),s(2),p(e.homeTeam),s(),m("ngIf",o.hasScore(e))("ngIfElse",l),s(4),m("ngIf",e.awayLogo),s(2),p(e.awayTeam),s(2),m("ngForOf",e.tags)}}function yn(t,a){t&1&&_(0,"div",41)}function xn(t,a){if(t&1&&(i(0,"div",37)(1,"h6",38),r(2),n(),i(3,"div",39),g(4,hn,15,7,"div",40)(5,yn,1,0,"div",40),n()()),t&2){let e=a.$implicit,l=c().ngIf,o=c();s(2),p(e),s(2),m("ngForOf",o.getGamesForDay(l,e)),s(),m("ngForOf",Rt(3,rn).constructor(5-o.getGamesForDay(l,e).length%5))}}function vn(t,a){if(t&1&&(kt(0),g(1,xn,6,4,"div",36),Ot()),t&2){let e=a.ngIf,l=c();s(),m("ngForOf",l.getDays(e))}}function Sn(t,a){if(t&1&&(i(0,"div",58),r(1),n()),t&2){let e=c();s(),b(" No games scheduled for Week ",e.selectedWeek," ")}}var it=class t{constructor(a,e,l){this.firestore=a;this.router=e;this.authService=l}teams=[];currentSeason=1;loading=!1;isClearing=!1;selectedWeek=1;activeWeeks=[];weekSchedule=new Map;gamesCache=new Map;canManageGames=!1;isDeveloper=!1;newGame={homeTeamId:"",awayTeamId:"",week:1,day:1,season:1,isRival:!1};ngOnInit(){return E(this,null,function*(){this.authService.effectiveRoles.subscribe(l=>{this.canManageGames=l.some(o=>["developer","commissioner"].includes(o)),this.isDeveloper=l.includes("developer")}),yield this.loadCurrentSeason();let a=M(this.firestore,"teams"),e=yield k(a);this.teams=e.docs.map(l=>j({id:l.id},l.data())),yield this.loadActiveWeeks(),this.activeWeeks.length>0&&(this.selectedWeek=this.activeWeeks[0],yield this.loadWeek(this.selectedWeek))})}loadCurrentSeason(){return E(this,null,function*(){try{let a=A(this.firestore,"gameScheduleSettings/current"),e=yield F(a);if(e.exists()){let l=e.data();this.currentSeason=l.season||1,this.newGame.season=this.currentSeason}}catch(a){console.error("Error loading current season:",a)}})}loadActiveWeeks(){return E(this,null,function*(){let a=N(M(this.firestore,"games"),D("season","==",this.currentSeason)),e=yield k(a),l=new Set(e.docs.map(o=>o.data().week));this.activeWeeks=Array.from(l).sort((o,d)=>o-d)})}onWeekChange(a){return E(this,null,function*(){this.selectedWeek=a,yield this.loadWeek(a)})}loadWeek(a){return E(this,null,function*(){if(!this.loading){this.loading=!0;try{let e=N(M(this.firestore,"games"),D("season","==",this.currentSeason),D("week","==",a)),l=yield k(e),o=yield Promise.all(l.docs.map(d=>E(this,null,function*(){let y=d.data(),h=this.teams.find(I=>I.id===y.homeTeamId),C=this.teams.find(I=>I.id===y.awayTeamId);return pe(j({id:d.id},y),{homeTeam:h?.name||"Unknown Team",awayTeam:C?.name||"Unknown Team",homeLogo:h?.logoUrl,awayLogo:C?.logoUrl,tags:y.tags||[],homeScore:y.homeScore,awayScore:y.awayScore,period:y.period})})));this.weekSchedule.set(a,o)}finally{this.loading=!1}}})}getWeekSchedule(a){return this.weekSchedule.get(a)}getDays(a){if(!a)return[];let e=new Set(a.map(l=>l.day));return Array.from(e).sort()}getGamesForDay(a,e){return a?a.filter(l=>l.day===e):[]}formatDay(a){return`D${a}`}hasScore(a){return a.homeScore!==void 0&&a.homeScore!==null||a.awayScore!==void 0&&a.awayScore!==null||a.period!==void 0&&a.period!==null}addGame(){return E(this,null,function*(){if(!this.canManageGames)return;if(!this.newGame.homeTeamId||!this.newGame.awayTeamId||!this.newGame.day){alert("Please fill in all required fields");return}let a=this.teams.find(h=>h.id===this.newGame.homeTeamId),e=this.teams.find(h=>h.id===this.newGame.awayTeamId);if(!a||!e)return;let l=[];this.newGame.isRival?l.push("rival"):a.division===e.division?l.push("division"):a.conference===e.conference&&l.push("conference");let o=pe(j({},this.newGame),{day:this.formatDay(this.newGame.day),season:this.currentSeason,tags:l}),y=(yield Ae(M(this.firestore,"games"),o)).id;yield Promise.all([Ne(A(this.firestore,`teams/${a.id}/games/${y}`),pe(j({},o),{isHome:!0,opponent:e.name,opponentId:e.id})),Ne(A(this.firestore,`teams/${e.id}/games/${y}`),pe(j({},o),{isHome:!1,opponent:a.name,opponentId:a.id}))]),this.newGame={homeTeamId:"",awayTeamId:"",week:this.newGame.week,day:1,season:this.currentSeason,isRival:!1},yield this.loadActiveWeeks(),yield this.loadWeek(this.selectedWeek)})}clearAllGames(){return E(this,null,function*(){if(this.isDeveloper&&confirm("Are you sure you want to clear all games? This cannot be undone.")){this.isClearing=!0;try{let a=N(M(this.firestore,"games"),D("season","==",this.currentSeason)),e=yield k(a);for(let l of e.docs)yield hi(l.ref);this.weekSchedule.clear(),this.activeWeeks=[],this.selectedWeek=1}finally{this.isClearing=!1}}})}viewGame(a){!a.id||!a.homeTeamId||this.router.navigate(["/games",a.homeTeamId,a.id])}static \u0275fac=function(e){return new(e||t)(te(oe),te(B),te(H))};static \u0275cmp=V({type:t,selectors:[["app-games"]],decls:14,vars:7,consts:[["vsDisplay",""],[1,"container","mt-4"],["class","card mb-4",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"card-body"],[1,"btn-group","mb-4"],["class","btn",3,"btn-primary","btn-outline-primary","click",4,"ngFor","ngForOf"],["class","text-center my-4",4,"ngIf"],[4,"ngIf"],["class","text-center text-muted my-4",4,"ngIf"],[1,"card","mb-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-4"],[1,"form-label"],["name","homeTeam","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","awayTeam","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"col-md-2"],["type","number","name","week","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","day","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],[1,"form-check"],["type","checkbox","name","isRival","id","isRival",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isRival",1,"form-check-label"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"btn","btn-danger",3,"click","disabled"],[1,"btn",3,"click"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"text-muted","mb-3"],[1,"row","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"game-card",3,"click"],[1,"team-row"],["class","team-logo",3,"src","alt",4,"ngIf"],[1,"team-name"],["class","text-center my-2",4,"ngIf","ngIfElse"],[1,"mt-3"],["class","badge me-1",3,"bg-danger","bg-primary","bg-success",4,"ngFor","ngForOf"],[1,"team-logo",3,"src","alt"],[1,"text-center","my-2"],[1,"score-display"],[1,"score-number"],[1,"score-divider"],[1,"game-status"],[1,"badge"],[1,"vs-text"],[1,"badge","me-1"],[1,"text-center","text-muted","my-4"]],template:function(e,l){e&1&&(i(0,"div",1),g(1,ln,36,7,"div",2),i(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),r(6),n(),g(7,dn,2,2,"button",7),n()(),i(8,"div",8)(9,"div",9),g(10,cn,2,5,"button",10),n(),g(11,mn,4,0,"div",11)(12,vn,2,1,"ng-container",12)(13,Sn,2,1,"div",13),n()()()),e&2&&(s(),m("ngIf",l.canManageGames),s(5),b("Season ",l.currentSeason," Schedule"),s(),m("ngIf",l.isDeveloper),s(3),m("ngForOf",l.activeWeeks),s(),m("ngIf",l.loading),s(),m("ngIf",l.getWeekSchedule(l.selectedWeek)),s(),m("ngIf",!l.loading&&(!l.getWeekSchedule(l.selectedWeek)||l.getDays(l.getWeekSchedule(l.selectedWeek)).length===0)))},dependencies:[X,ne,K,ee,_e,Te,Ie,ae,Re,Ht,Pe,Z,ue,Ke,Ge,J,fe],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;min-width:150px;padding:1rem}.badge[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:600;letter-spacing:.5px}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.btn-group[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.25rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:.25rem}.game-card[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:8px;padding:1rem;margin-bottom:1rem;background-color:#fff;transition:all .2s ease;cursor:pointer;box-shadow:0 2px 4px #0000000d}.game-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#dee2e6}.team-logo[_ngcontent-%COMP%]{width:36px;height:36px;object-fit:contain;margin-right:.75rem}.team-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem;border-radius:6px;background-color:#f8f9fa;margin-bottom:.5rem}.team-name[_ngcontent-%COMP%]{font-weight:500;color:#495057}.vs-text[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;font-size:.9rem}.score-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:.5rem}.score-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#212529;background:#f8f9fa;padding:.25rem .75rem;border-radius:6px;border:2px solid #e9ecef;min-width:50px;text-align:center}.score-divider[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#6c757d}.game-status[_ngcontent-%COMP%]{text-align:center}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .65rem;width:fit-content}.badge.bg-primary[_ngcontent-%COMP%]{background-color:#0d6efd!important}.badge.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600;text-transform:uppercase;font-size:.9rem;letter-spacing:.5px;padding:1rem}.row[_ngcontent-%COMP%]{--bs-gutter-x: 1.5rem;--bs-gutter-y: 1.5rem;display:flex;flex-wrap:wrap}.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}@media (max-width: 1200px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 25%;max-width:25%}}@media (max-width: 992px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 33.333333%;max-width:33.333333%}}@media (max-width: 768px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media (max-width: 576px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}}"]})};function bn(t,a){if(t&1){let e=w();i(0,"button",31),P("click",function(){u(e);let o=c(2);return f(o.showPlayoffManager=!o.showPlayoffManager)}),_(1,"i",32),r(2,"Manage Playoffs "),n()}}function wn(t,a){if(t&1&&_(0,"img",50),t&2){let e=c().$implicit;m("src",e.logoUrl,Y)("alt",e.name)}}function Cn(t,a){if(t&1){let e=w();i(0,"div",39)(1,"div",40)(2,"div",12)(3,"div",41),g(4,wn,1,2,"img",42),i(5,"strong"),r(6),n()(),i(7,"select",43),P("change",function(o){let d=u(e).$implicit,y=c(3);return f(y.updateTeamPlayoffStatus(d.id,o.target.value))}),i(8,"option",44),r(9,"No Status"),n(),i(10,"option",45),r(11,"League Championship Clinched (P)"),n(),i(12,"option",46),r(13,"Conference Championship Clinched (z)"),n(),i(14,"option",47),r(15,"Division Championship Clinched (y)"),n(),i(16,"option",48),r(17,"Playoff Spot Clinched (x)"),n(),i(18,"option",49),r(19,"Eliminated (e)"),n()()()()()}if(t&2){let e=a.$implicit,l=c(3);s(4),m("ngIf",e.logoUrl),s(2),p(e.name),s(),m("value",l.getTeamPlayoffStatus(e.id))}}function En(t,a){if(t&1&&(i(0,"div",33)(1,"div",34)(2,"h5",14),_(3,"i",35),r(4,"Playoff Status Management "),n()(),i(5,"div",12)(6,"p",36),r(7,"Set playoff clinching status for teams. This will add visual indicators to the standings."),n(),i(8,"div",37),g(9,Cn,20,3,"div",38),n()()()),t&2){let e=c(2);s(9),m("ngForOf",e.filteredTeams)}}function Pn(t,a){t&1&&(i(0,"div",51)(1,"div",52)(2,"span",53),r(3,"Loading standings..."),n()()())}function Tn(t,a){if(t&1&&_(0,"img",50),t&2){let e=c().$implicit;m("alt",$e(e.name))("src",e.logoUrl,Y)}}function In(t,a){if(t&1&&(i(0,"span",63),r(1),n()),t&2){let e=a.ngIf;xe(e.class),s(),b(" ",e.text," ")}}function Mn(t,a){if(t&1&&(i(0,"tr")(1,"td")(2,"div",61),g(3,Tn,1,3,"img",42),i(4,"span"),r(5),n(),g(6,In,2,3,"span",62),n()(),i(7,"td"),r(8),n(),i(9,"td"),r(10),n(),i(11,"td"),r(12),n(),i(13,"td"),r(14),n(),i(15,"td")(16,"strong"),r(17),n()(),i(18,"td"),r(19),n(),i(20,"td"),r(21),n(),i(22,"td"),r(23),n()()),t&2){let e=a.$implicit,l=c(5);xe(l.getPlayoffStatusClass(e)),s(3),m("ngIf",e.logoUrl),s(2),p(e.name),s(),m("ngIf",l.getPlayoffStatusBadge(e)),s(2),p(e.gamesPlayed),s(2),p(e.wins),s(2),p(e.losses),s(2),p(e.overtimeLosses),s(3),p(e.points),s(2),p(e.goalsFor),s(2),p(e.goalsAgainst),s(),O("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),s(),W(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function kn(t,a){if(t&1&&(i(0,"div",56)(1,"div",40)(2,"div",57)(3,"h5",14),r(4),n()(),i(5,"div",58)(6,"table",59)(7,"thead")(8,"tr")(9,"th"),r(10,"Team"),n(),i(11,"th"),r(12,"GP"),n(),i(13,"th"),r(14,"W"),n(),i(15,"th"),r(16,"L"),n(),i(17,"th"),r(18,"OTL"),n(),i(19,"th"),r(20,"PTS"),n(),i(21,"th"),r(22,"GF"),n(),i(23,"th"),r(24,"GA"),n(),i(25,"th"),r(26,"DIFF"),n()()(),i(27,"tbody"),g(28,Mn,24,18,"tr",60),n()()()()()),t&2){let e=a.$implicit,l=c().$implicit,o=c(3);s(4),p(e),s(24),m("ngForOf",o.getStandingsForDivision(l.name,e))}}function On(t,a){if(t&1&&(i(0,"div",3)(1,"h3"),r(2),n(),i(3,"div",37),g(4,kn,29,2,"div",55),n()()),t&2){let e=a.$implicit;s(2),p(e.name),s(2),m("ngForOf",e.divisions)}}function An(t,a){if(t&1&&(i(0,"div"),g(1,On,5,2,"div",54),n()),t&2){let e=c(2);s(),m("ngForOf",e.conferences)}}function Dn(t,a){if(t&1&&_(0,"img",50),t&2){let e=c().$implicit;m("alt",$e(e.name))("src",e.logoUrl,Y)}}function Rn(t,a){if(t&1&&(i(0,"span",63),r(1),n()),t&2){let e=a.ngIf;xe(e.class),s(),b(" ",e.text," ")}}function Gn(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),n(),i(3,"td")(4,"div",61),g(5,Dn,1,3,"img",42),i(6,"span"),r(7),n(),g(8,Rn,2,3,"span",62),n()(),i(9,"td"),r(10),n(),i(11,"td"),r(12),n(),i(13,"td"),r(14),n(),i(15,"td"),r(16),n(),i(17,"td")(18,"strong"),r(19),n()(),i(20,"td"),r(21),n(),i(22,"td"),r(23),n(),i(24,"td"),r(25),n(),i(26,"td"),r(27),n()()),t&2){let e=a.$implicit,l=a.index,o=c(4);xe(o.getPlayoffStatusClass(e)),s(2),p(l+1),s(3),m("ngIf",e.logoUrl),s(2),p(e.name),s(),m("ngIf",o.getPlayoffStatusBadge(e)),s(2),p(e.gamesPlayed),s(2),p(e.wins),s(2),p(e.losses),s(2),p(e.overtimeLosses),s(3),p(e.points),s(2),b("",(e.pointPercentage*100).toFixed(1),"%"),s(2),p(e.goalsFor),s(2),p(e.goalsAgainst),s(),O("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),s(),W(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function Nn(t,a){if(t&1&&(i(0,"div",3)(1,"div",40)(2,"div",64)(3,"h4",14),r(4),n()(),i(5,"div",58)(6,"table",65)(7,"thead")(8,"tr")(9,"th"),r(10,"Rank"),n(),i(11,"th"),r(12,"Team"),n(),i(13,"th"),r(14,"GP"),n(),i(15,"th"),r(16,"W"),n(),i(17,"th"),r(18,"L"),n(),i(19,"th"),r(20,"OTL"),n(),i(21,"th"),r(22,"PTS"),n(),i(23,"th"),r(24,"P%"),n(),i(25,"th"),r(26,"GF"),n(),i(27,"th"),r(28,"GA"),n(),i(29,"th"),r(30,"DIFF"),n()()(),i(31,"tbody"),g(32,Gn,28,20,"tr",60),n()()()()()),t&2){let e=a.$implicit,l=c(3);s(4),p(e.name),s(28),m("ngForOf",l.getStandingsForConference(e.name))}}function Vn(t,a){if(t&1&&(i(0,"div"),g(1,Nn,33,2,"div",54),n()),t&2){let e=c(2);s(),m("ngForOf",e.conferences)}}function Ln(t,a){if(t&1&&_(0,"img",50),t&2){let e=c().$implicit;m("alt",$e(e.name))("src",e.logoUrl,Y)}}function Wn(t,a){if(t&1&&(i(0,"span",63),r(1),n()),t&2){let e=a.ngIf;xe(e.class),s(),b(" ",e.text," ")}}function Fn(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),n(),i(3,"td")(4,"div",61),g(5,Ln,1,3,"img",42),i(6,"span"),r(7),n(),g(8,Wn,2,3,"span",62),n()(),i(9,"td")(10,"small",28),r(11),n()(),i(12,"td")(13,"small",28),r(14),n()(),i(15,"td"),r(16),n(),i(17,"td"),r(18),n(),i(19,"td"),r(20),n(),i(21,"td"),r(22),n(),i(23,"td")(24,"strong"),r(25),n()(),i(26,"td"),r(27),n(),i(28,"td"),r(29),n(),i(30,"td"),r(31),n(),i(32,"td"),r(33),n()()),t&2){let e=a.$implicit,l=a.index,o=c(3);xe(o.getPlayoffStatusClass(e)),s(2),p(l+1),s(3),m("ngIf",e.logoUrl),s(2),p(e.name),s(),m("ngIf",o.getPlayoffStatusBadge(e)),s(3),p(e.conference),s(3),p(e.division),s(2),p(e.gamesPlayed),s(2),p(e.wins),s(2),p(e.losses),s(2),p(e.overtimeLosses),s(3),p(e.points),s(2),b("",(e.pointPercentage*100).toFixed(1),"%"),s(2),p(e.goalsFor),s(2),p(e.goalsAgainst),s(),O("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),s(),W(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function Un(t,a){if(t&1&&(i(0,"div")(1,"div",40)(2,"div",66)(3,"h4",14),r(4),re(5,"titlecase"),n()(),i(6,"div",58)(7,"table",65)(8,"thead")(9,"tr")(10,"th"),r(11,"Rank"),n(),i(12,"th"),r(13,"Team"),n(),i(14,"th"),r(15,"Conference"),n(),i(16,"th"),r(17,"Division"),n(),i(18,"th"),r(19,"GP"),n(),i(20,"th"),r(21,"W"),n(),i(22,"th"),r(23,"L"),n(),i(24,"th"),r(25,"OTL"),n(),i(26,"th"),r(27,"PTS"),n(),i(28,"th"),r(29,"P%"),n(),i(30,"th"),r(31,"GF"),n(),i(32,"th"),r(33,"GA"),n(),i(34,"th"),r(35,"DIFF"),n()()(),i(36,"tbody"),g(37,Fn,34,22,"tr",60),n()()(),i(38,"div",67)(39,"div",68)(40,"div",69)(41,"span",70),r(42,"P"),n(),i(43,"small"),r(44,"League Championship"),n()(),i(45,"div",69)(46,"span",71),r(47,"z"),n(),i(48,"small"),r(49,"Conference Championship"),n()(),i(50,"div",69)(51,"span",72),r(52,"y"),n(),i(53,"small"),r(54,"Division Championship"),n()(),i(55,"div",69)(56,"span",73),r(57,"x"),n(),i(58,"small"),r(59,"Playoff Spot"),n()(),i(60,"div",69)(61,"span",74),r(62,"e"),n(),i(63,"small"),r(64,"Eliminated"),n()(),i(65,"div",69)(66,"small",28),r(67,"No indicator - Still competing"),n()()()()()()),t&2){let e=c(2);s(4),b("",Oe(5,2,e.selectedLeague)," League Overall Standings"),s(33),m("ngForOf",e.getOverallStandings())}}function Bn(t,a){if(t&1){let e=w();i(0,"div")(1,"div",11)(2,"div",12)(3,"div",13)(4,"h5",14),r(5,"League Standings"),n(),i(6,"div",15)(7,"div",16)(8,"button",17),P("click",function(){u(e);let o=c();return o.standingsViewType="division",f(o.onStandingsViewChange())}),_(9,"i",18),r(10,"By Division "),n(),i(11,"button",17),P("click",function(){u(e);let o=c();return o.standingsViewType="conference",f(o.onStandingsViewChange())}),_(12,"i",19),r(13,"By Conference "),n(),i(14,"button",17),P("click",function(){u(e);let o=c();return o.standingsViewType="overall",f(o.onStandingsViewChange())}),_(15,"i",20),r(16,"Overall "),n()(),i(17,"div",16)(18,"button",21),P("click",function(){u(e);let o=c();return o.selectedLeague="major",f(o.onLeagueChange())}),r(19," Major League "),n(),i(20,"button",21),P("click",function(){u(e);let o=c();return o.selectedLeague="minor",f(o.onLeagueChange())}),r(21," Minor League "),n()(),i(22,"div",16),g(23,bn,3,0,"button",22),i(24,"button",23),P("click",function(){u(e);let o=c();return f(o.refreshStandings())}),_(25,"i",24),n()()()()()(),g(26,En,10,1,"div",25)(27,Pn,4,0,"div",26)(28,An,2,1,"div",10)(29,Vn,2,1,"div",10)(30,Un,68,4,"div",10),i(31,"div",27)(32,"small",28),_(33,"i",29),r(34," Data cached for faster loading \u2022 "),i(35,"button",30),P("click",function(){u(e);let o=c();return f(o.clearCache())}),r(36,"Clear cache"),n()()()()}if(t&2){let e=c();s(8),O("btn-info",e.standingsViewType==="division")("btn-outline-info",e.standingsViewType!=="division"),s(3),O("btn-info",e.standingsViewType==="conference")("btn-outline-info",e.standingsViewType!=="conference"),s(3),O("btn-info",e.standingsViewType==="overall")("btn-outline-info",e.standingsViewType!=="overall"),s(4),O("btn-primary",e.selectedLeague==="major")("btn-outline-primary",e.selectedLeague!=="major"),s(2),O("btn-primary",e.selectedLeague==="minor")("btn-outline-primary",e.selectedLeague!=="minor"),s(3),m("ngIf",e.canManagePlayoffs),s(),m("disabled",e.loadingStandings),s(),O("fa-spin",e.loadingStandings),s(),m("ngIf",e.showPlayoffManager&&e.canManagePlayoffs),s(),m("ngIf",e.loadingStandings),s(),m("ngIf",e.standingsViewType==="division"&&!e.loadingStandings),s(),m("ngIf",e.standingsViewType==="conference"&&!e.loadingStandings),s(),m("ngIf",e.standingsViewType==="overall"&&!e.loadingStandings)}}function Hn(t,a){if(t&1&&(i(0,"option",81),r(1),n()),t&2){let e=a.$implicit;m("value",e.id),s(),p(e.name)}}function jn(t,a){if(t&1&&(i(0,"div",37)(1,"div",82)(2,"div",83)(3,"div",12),_(4,"i",84),i(5,"h5",85),r(6,"Total Games"),n(),i(7,"h2",86),r(8),n()()()(),i(9,"div",82)(10,"div",83)(11,"div",12),_(12,"i",87),i(13,"h5",85),r(14,"Total Points"),n(),i(15,"h2",88),r(16),n(),i(17,"small",28),r(18),n()()()(),i(19,"div",82)(20,"div",83)(21,"div",12),_(22,"i",89),i(23,"h5",85),r(24,"Total Assists"),n(),i(25,"h2",90),r(26),n(),i(27,"small",28),r(28),n()()()(),i(29,"div",82)(30,"div",83)(31,"div",12),_(32,"i",91),i(33,"h5",85),r(34,"Total Rebounds"),n(),i(35,"h2",92),r(36),n(),i(37,"small",28),r(38),n()()()()()),t&2){let e=c(2);s(8),p(e.totalGames),s(8),p(e.totalPoints),s(2),b("Avg: ",e.avgPoints),s(8),p(e.totalAssists),s(2),b("Avg: ",e.avgAssists),s(8),p(e.totalRebounds),s(2),b("Avg: ",e.avgRebounds)}}function $n(t,a){if(t&1&&(i(0,"div",93)(1,"div",40)(2,"div",57)(3,"h6",14),r(4),n()(),i(5,"div",12)(6,"div",68)(7,"div",94)(8,"div",95)(9,"h6",28),r(10,"Games Played"),n(),i(11,"h4",86),r(12),n()()(),i(13,"div",94)(14,"div",95)(15,"h6",28),r(16,"Average Points per Game"),n(),i(17,"h4",88),r(18),n()()(),i(19,"div",94)(20,"div",95)(21,"h6",28),r(22,"Average Assists per Game"),n(),i(23,"h4",90),r(24),n()()()()()()()),t&2){let e=c(2);s(4),b("",e.selectedTeamName," Team Statistics"),s(8),p(e.totalGames),s(6),p(e.avgPoints),s(6),p(e.avgAssists)}}function zn(t,a){if(t&1){let e=w();i(0,"div")(1,"div",11)(2,"div",57)(3,"h5",14),r(4,"Team Analytics"),n()(),i(5,"div",12)(6,"div",36)(7,"label",75),r(8,"Select Team"),n(),i(9,"select",76),S("ngModelChange",function(o){u(e);let d=c();return v(d.selectedTeamId,o)||(d.selectedTeamId=o),f(o)}),P("change",function(){u(e);let o=c();return f(o.onTeamSelect())}),i(10,"option",77),r(11,"-- Choose a Team --"),n(),g(12,Hn,2,2,"option",78),n()(),g(13,jn,39,7,"div",79)(14,$n,25,4,"div",80),n()()()}if(t&2){let e=c();s(9),x("ngModel",e.selectedTeamId),s(3),m("ngForOf",e.teams),s(),m("ngIf",e.selectedTeamId),s(),m("ngIf",e.selectedTeamId)}}function qn(t,a){if(t&1&&(i(0,"option",81),r(1),n()),t&2){let e=a.$implicit;m("value",e.id),s(),p(e.name)}}function Yn(t,a){if(t&1&&(i(0,"option",81),r(1),re(2,"date"),n()),t&2){let e=a.$implicit;m("value",e.id),s(),W(" ",!(e.date==null||e.date.toDate==null)&&e.date.toDate()?Ce(2,3,e.date.toDate(),"mediumDate"):e.date," vs ",e.opponent," ")}}function Kn(t,a){if(t&1){let e=w();i(0,"div",36)(1,"label",102),r(2,"Select Game"),n(),i(3,"select",103),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.selectedExportGameId,o)||(d.selectedExportGameId=o),f(o)}),i(4,"option",77),r(5,"-- Choose a Game --"),n(),g(6,Yn,3,6,"option",78),n()()}if(t&2){let e=c(2);s(3),x("ngModel",e.selectedExportGameId),s(3),m("ngForOf",e.exportGames)}}function Xn(t,a){if(t&1){let e=w();i(0,"div")(1,"div",40)(2,"div",57)(3,"h5",14),r(4,"Export Game Data"),n()(),i(5,"div",12)(6,"div",36)(7,"label",96),r(8,"Select Team"),n(),i(9,"select",97),S("ngModelChange",function(o){u(e);let d=c();return v(d.selectedExportTeamId,o)||(d.selectedExportTeamId=o),f(o)}),P("change",function(){u(e);let o=c();return f(o.onExportTeamSelect())}),i(10,"option",77),r(11,"-- Choose a Team --"),n(),g(12,qn,2,2,"option",78),n()(),g(13,Kn,7,2,"div",98),i(14,"div",99)(15,"button",100),P("click",function(){u(e);let o=c();return f(o.exportSelectedGameToCSV())}),_(16,"i",101),r(17,"Export Selected Game to CSV "),n()()()()()}if(t&2){let e=c();s(9),x("ngModel",e.selectedExportTeamId),s(3),m("ngForOf",e.teams),s(),m("ngIf",e.selectedExportTeamId),s(2),m("disabled",!e.selectedExportTeamId||!e.selectedExportGameId)}}var nt=class t{currentView="standings";selectedLeague="major";standingsViewType="division";teams=[];filteredTeams=[];loadingStandings=!1;showPlayoffManager=!1;canManagePlayoffs=!1;conferences=[{name:"Mr. Hockey Conference",divisions:["Europe Division","Great Lakes Division","Atlantic Division"]},{name:"The Rocket Conference",divisions:["Northwest Division","Pacific Division","South Division"]}];selectedTeamId="";selectedTeamName="";totalGames=0;totalPoints=0;totalAssists=0;totalRebounds=0;avgPoints="0.0";avgAssists="0.0";avgRebounds="0.0";exportGames=[];selectedExportTeamId="";selectedExportGameId="";firestore=G(oe);authService=G(H);ngOnInit(){return E(this,null,function*(){this.authService.effectiveRoles.subscribe(a=>{this.canManagePlayoffs=a.some(e=>["developer","commissioner"].includes(e))}),yield this.loadTeams()})}loadTeams(){return E(this,null,function*(){this.loadingStandings=!0;try{let a=M(this.firestore,"teams"),e=yield k(a);this.teams=yield Promise.all(e.docs.map(l=>E(this,null,function*(){let o=l.data(),d=M(this.firestore,"games"),y=N(d,D("homeTeamId","==",l.id)),h=N(d,D("awayTeamId","==",l.id)),[C,I]=yield Promise.all([k(y),k(h)]),T=0,L=0,R=0,$=0,z=0,ie=0;C.docs.forEach(we=>{let U=we.data();if(U.homeScore!==void 0&&U.awayScore!==void 0){ie++;let Q=U.homeScore||0,me=U.awayScore||0;$+=Q,z+=me,Q>me?T++:U.period==="OT"||U.period==="SO"?R++:L++}}),I.docs.forEach(we=>{let U=we.data();if(U.homeScore!==void 0&&U.awayScore!==void 0){ie++;let Q=U.homeScore||0,me=U.awayScore||0;$+=me,z+=Q,me>Q?T++:U.period==="OT"||U.period==="SO"?R++:L++}});let q=T*2+R,ce=ie>0?q/(ie*2):0;return{id:l.id,name:`${o.city} ${o.mascot}`,league:o.league||"major",conference:o.conference||"",division:o.division||"",logoUrl:o.logoUrl,wins:T,losses:L,overtimeLosses:R,points:q,gamesPlayed:ie,goalsFor:$,goalsAgainst:z,goalDifferential:$-z,pointPercentage:ce,playoffStatus:o.playoffStatus}}))),this.filteredTeams=this.teams.filter(l=>l.league===this.selectedLeague)}catch(a){console.error("Error loading teams:",a)}finally{this.loadingStandings=!1}})}onLeagueChange(){return E(this,null,function*(){this.filteredTeams=this.teams.filter(a=>a.league===this.selectedLeague)})}onStandingsViewChange(){}refreshStandings(){return E(this,null,function*(){yield this.loadTeams()})}clearCache(){console.log("Cache cleared")}getStandingsForDivision(a,e){return this.filteredTeams.filter(l=>l.conference===a&&l.division===e).sort((l,o)=>o.points!==l.points?o.points-l.points:o.pointPercentage!==l.pointPercentage?o.pointPercentage-l.pointPercentage:o.goalDifferential-l.goalDifferential)}getStandingsForConference(a){return this.filteredTeams.filter(e=>e.conference===a).sort((e,l)=>l.points!==e.points?l.points-e.points:l.pointPercentage!==e.pointPercentage?l.pointPercentage-e.pointPercentage:l.goalDifferential-e.goalDifferential)}getOverallStandings(){return[...this.filteredTeams].sort((a,e)=>e.points!==a.points?e.points-a.points:e.pointPercentage!==a.pointPercentage?e.pointPercentage-a.pointPercentage:e.goalDifferential-a.goalDifferential)}getTeamPlayoffStatus(a){return this.teams.find(l=>l.id===a)?.playoffStatus||"none"}updateTeamPlayoffStatus(a,e){return E(this,null,function*(){try{let l=e==="none"?null:e;yield ve(A(this.firestore,"teams",a),{playoffStatus:l});let o=this.teams.find(d=>d.id===a);o&&(o.playoffStatus=l||void 0)}catch(l){console.error("Error updating playoff status:",l)}})}getPlayoffStatusClass(a){if(!a.playoffStatus)return"";switch(a.playoffStatus){case"league":return"table-success";case"conference":return"table-info";case"division":return"table-warning";case"playoff":return"table-primary";case"eliminated":return"table-danger";default:return""}}getPlayoffStatusBadge(a){if(!a.playoffStatus)return null;switch(a.playoffStatus){case"league":return{text:"P",class:"badge bg-success"};case"conference":return{text:"z",class:"badge bg-info"};case"division":return{text:"y",class:"badge bg-warning"};case"playoff":return{text:"x",class:"badge bg-primary"};case"eliminated":return{text:"e",class:"badge bg-danger"};default:return null}}onTeamSelect(){return E(this,null,function*(){if(!this.selectedTeamId){this.resetAnalytics();return}let a=this.teams.find(e=>e.id===this.selectedTeamId);this.selectedTeamName=a?.name||"";try{let e=N(M(this.firestore,"games"),D("teamId","==",this.selectedTeamId)),o=(yield k(e)).docs.map(d=>d.data());this.calculateAnalytics(o)}catch(e){console.error("Error loading team analytics:",e)}})}calculateAnalytics(a){this.totalGames=a.length;let e=0,l=0,o=0;a.forEach(d=>{d.players.forEach(y=>{e+=y.points,l+=y.assists,o+=y.rebounds})}),this.totalPoints=e,this.totalAssists=l,this.totalRebounds=o,this.avgPoints=this.totalGames>0?(e/this.totalGames).toFixed(1):"0.0",this.avgAssists=this.totalGames>0?(l/this.totalGames).toFixed(1):"0.0",this.avgRebounds=this.totalGames>0?(o/this.totalGames).toFixed(1):"0.0"}resetAnalytics(){this.totalGames=0,this.totalPoints=0,this.totalAssists=0,this.totalRebounds=0,this.avgPoints="0.0",this.avgAssists="0.0",this.avgRebounds="0.0",this.selectedTeamName=""}onExportTeamSelect(){return E(this,null,function*(){if(!this.selectedExportTeamId){this.exportGames=[],this.selectedExportGameId="";return}try{let a=N(M(this.firestore,"games"),D("teamId","==",this.selectedExportTeamId),Me("date","desc")),e=yield k(a);this.exportGames=e.docs.map(l=>j({id:l.id},l.data()))}catch(a){console.error("Error loading games for export:",a)}})}exportSelectedGameToCSV(){if(!this.selectedExportGameId)return;let a=this.exportGames.find(d=>d.id===this.selectedExportGameId);if(!a)return;let e=this.generateCSV(a),l=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=`game-${a.id}-${a.date?.toDate?.()?a.date.toDate().toISOString().split("T")[0]:"unknown"}.csv`;this.downloadCSV(e,o)}generateCSV(a){let e=["Player Name","Points","Assists","Rebounds"],l=a.players.map(d=>[d.name,d.points.toString(),d.assists.toString(),d.rebounds.toString()]);return[e.join(","),...l.map(d=>d.join(","))].join(`
`)}downloadCSV(a,e){let l=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(l),d=document.createElement("a");d.href=o,d.download=e,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(o)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-analytics"]],decls:21,vars:9,consts:[[1,"container","mt-4"],[1,"page-title"],[1,"fas","fa-chart-line","me-2"],[1,"mb-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-trophy","me-1"],[1,"fas","fa-chart-line","me-1"],[1,"fas","fa-file-export","me-1"],[4,"ngIf"],[1,"card","mb-4"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap","gap-3"],[1,"mb-0"],[1,"d-flex","gap-3","align-items-center","flex-wrap"],[1,"btn-group"],[1,"btn","btn-sm",3,"click"],[1,"fas","fa-layer-group","me-1"],[1,"fas","fa-sitemap","me-1"],[1,"fas","fa-globe","me-1"],[1,"btn",3,"click"],["class","btn btn-outline-warning btn-sm","title","Manage playoff clinching status",3,"click",4,"ngIf"],["title","Refresh standings data",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"fas","fa-sync-alt"],["class","card mb-4 border-warning",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[1,"mt-4","text-center"],[1,"text-muted"],[1,"fas","fa-clock","me-1"],[1,"btn","btn-link","btn-sm","p-0",3,"click"],["title","Manage playoff clinching status",1,"btn","btn-outline-warning","btn-sm",3,"click"],[1,"fas","fa-cog","me-1"],[1,"card","mb-4","border-warning"],[1,"card-header","bg-warning","text-dark"],[1,"fas","fa-trophy","me-2"],[1,"mb-3"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card"],[1,"d-flex","align-items-center","mb-2"],["class","team-logo-small me-2",3,"src","alt",4,"ngIf"],[1,"form-select","form-select-sm",3,"change","value"],["value","none"],["value","league"],["value","conference"],["value","division"],["value","playoff"],["value","eliminated"],[1,"team-logo-small","me-2",3,"src","alt"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["class","mb-4",4,"ngFor","ngForOf"],["class","col-lg-4 mb-3",4,"ngFor","ngForOf"],[1,"col-lg-4","mb-3"],[1,"card-header"],[1,"table-responsive"],[1,"table","table-sm","mb-0"],[3,"class",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],["class","ms-1",3,"class",4,"ngIf"],[1,"ms-1"],[1,"card-header","bg-primary","text-white"],[1,"table","table-striped","mb-0"],[1,"card-header","bg-success","text-white"],[1,"card-footer","bg-light"],[1,"row","text-center"],[1,"col-md-2"],[1,"badge","bg-success","me-2"],[1,"badge","bg-info","me-2"],[1,"badge","bg-warning","me-2"],[1,"badge","bg-primary","me-2"],[1,"badge","bg-danger","me-2"],["for","teamSelect",1,"form-label"],["id","teamSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["class","mt-4",4,"ngIf"],[3,"value"],[1,"col-md-3"],[1,"card","text-center"],[1,"fas","fa-gamepad","fa-2x","text-primary","mb-2"],[1,"card-title"],[1,"text-primary"],[1,"fas","fa-bullseye","fa-2x","text-success","mb-2"],[1,"text-success"],[1,"fas","fa-hands-helping","fa-2x","text-info","mb-2"],[1,"text-info"],[1,"fas","fa-undo","fa-2x","text-warning","mb-2"],[1,"text-warning"],[1,"mt-4"],[1,"col-md-4"],[1,"border","rounded","p-3"],["for","exportTeamSelect",1,"form-label"],["id","exportTeamSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["class","mb-3",4,"ngIf"],[1,"text-center","mt-4"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-download","me-2"],["for","exportGameSelect",1,"form-label"],["id","exportGameSelect",1,"form-select",3,"ngModelChange","ngModel"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"h2",1),_(2,"i",2),r(3,"Stats and Standings "),n(),i(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),P("click",function(){return l.currentView="standings"}),_(8,"i",7),r(9," Standings "),n()(),i(10,"li",5)(11,"a",6),P("click",function(){return l.currentView="analytics"}),_(12,"i",8),r(13," Team Analytics "),n()(),i(14,"li",5)(15,"a",6),P("click",function(){return l.currentView="reports"}),_(16,"i",9),r(17," Export Reports "),n()()()(),g(18,Bn,37,29,"div",10)(19,zn,15,4,"div",10)(20,Xn,18,4,"div",10),n()),e&2&&(s(7),O("active",l.currentView==="standings"),s(4),O("active",l.currentView==="analytics"),s(4),O("active",l.currentView==="reports"),s(3),m("ngIf",l.currentView==="standings"),s(),m("ngIf",l.currentView==="analytics"),s(),m("ngIf",l.currentView==="reports"))},dependencies:[X,ne,K,ee,Te,Ie,Pe,Z,J,ze,qe],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;background-color:#fff;min-height:100vh;padding:2rem 0}.page-title[_ngcontent-%COMP%]{color:#495057;font-weight:600;margin-bottom:2rem;font-size:1.75rem}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6;margin-bottom:2rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#6c757d;font-weight:500;padding:1rem 1.5rem;border-radius:0;border-bottom:3px solid transparent;transition:all .2s ease}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border-color:transparent;color:#0d6efd;border-bottom-color:#0d6efd}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0d6efd;background-color:transparent;border-color:transparent;border-bottom-color:#0d6efd;font-weight:600}.team-logo-small[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain}.table-dark[_ngcontent-%COMP%]{background-color:#212529}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd) > td[_ngcontent-%COMP%]{background-color:#0000000d}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000013}.fw-semibold[_ngcontent-%COMP%]{font-weight:600}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:500}.card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.table-success[_ngcontent-%COMP%]{background-color:#1987541a!important}.table-warning[_ngcontent-%COMP%]{background-color:#ffc1071a!important}.table-danger[_ngcontent-%COMP%]{background-color:#dc35451a!important}.btn-info[_ngcontent-%COMP%]{background-color:#0dcaf0;border-color:#0dcaf0;color:#000}.btn-outline-info[_ngcontent-%COMP%]{color:#0dcaf0;border-color:#0dcaf0}.btn-outline-info[_ngcontent-%COMP%]:hover{background-color:#0dcaf0;border-color:#0dcaf0;color:#000}.border-warning[_ngcontent-%COMP%]{border-color:#ffc107!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.text-dark[_ngcontent-%COMP%]{color:#212529!important}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem;border-radius:.375rem;font-weight:600}.badge.bg-success[_ngcontent-%COMP%]{background-color:#198754!important;color:#fff!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important;color:#fff!important}.btn-outline-warning[_ngcontent-%COMP%]{color:#ffc107;border-color:#ffc107}.btn-outline-warning[_ngcontent-%COMP%]:hover{background-color:#ffc107;border-color:#ffc107;color:#000}@media (max-width: 768px){.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.btn-group[_ngcontent-%COMP%]{flex-wrap:wrap}.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem}.card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{margin-bottom:1rem}}.card-header.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#0d6efd,#6610f2)!important}.card-header.bg-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#198754,#20c997)!important}.card-header.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ffc107,#fd7e14)!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;text-transform:uppercase;font-size:.875rem;letter-spacing:.5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.fa-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fa-spin 2s infinite linear}@keyframes _ngcontent-%COMP%_fa-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.playoff-management-card[_ngcontent-%COMP%]{border-left:4px solid #ffc107}.playoff-status-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem}.team-status-card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.375rem;padding:1rem;background:#f8f9fa}.team-status-card[_ngcontent-%COMP%]:hover{background:#e9ecef;transition:background-color .2s ease}.form-select[_ngcontent-%COMP%]:focus{border-color:#86b7fe;box-shadow:0 0 0 .25rem #0d6efd40}.form-select-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.alert[_ngcontent-%COMP%]{border:none;border-radius:.5rem}.alert-info[_ngcontent-%COMP%]{background-color:#cff4fc;color:#055160;border-left:4px solid #0dcaf0}.alert-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#664d03;border-left:4px solid #ffc107}.alert-success[_ngcontent-%COMP%]{background-color:#d1e7dd;color:#0f5132;border-left:4px solid #198754}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-left:4px solid #dc3545}"]})};var vi=t=>({"table-success":t});function Qn(t,a){t&1&&(i(0,"div",3)(1,"div",4)(2,"span",5),r(3,"Loading..."),n()()())}function Zn(t,a){if(t&1&&(i(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),r(5),n()(),i(6,"div",11)(7,"h1",12),r(8),n(),i(9,"div",13),r(10),n(),i(11,"div",14),_(12,"i",15),r(13,"Pending Approval "),n()(),i(14,"div",16)(15,"div",17)(16,"div",18)(17,"div",19),r(18,"Age"),n(),i(19,"div",20),r(20),n()(),i(21,"div",18)(22,"div",19),r(23,"Height"),n(),i(24,"div",20),r(25),n()(),i(26,"div",18)(27,"div",19),r(28,"Weight"),n(),i(29,"div",20),r(30),n()(),i(31,"div",18)(32,"div",19),r(33,"Hand"),n(),i(34,"div",20),r(35),n()()()()()(),i(36,"div",21)(37,"div",22)(38,"div",23)(39,"h4"),_(40,"i",24),r(41,"Player Pending Approval"),n(),i(42,"p",25),r(43," Your player "),i(44,"strong"),r(45),n(),r(46," has been submitted for approval by league management. "),n(),i(47,"p",25)(48,"small",26),r(49),re(50,"date"),_(51,"br"),r(52," This process typically takes 24-48 hours. You will be notified once your player has been approved. "),n()(),i(53,"div",27)(54,"div",28)(55,"h6"),r(56,"Player Details"),n(),i(57,"ul",29)(58,"li")(59,"strong"),r(60,"Position:"),n(),r(61),n(),i(62,"li")(63,"strong"),r(64,"Archetype:"),n(),r(65),n(),i(66,"li")(67,"strong"),r(68,"Jersey Number:"),n(),r(69),n(),i(70,"li")(71,"strong"),r(72,"Handedness:"),n(),r(73),n(),i(74,"li")(75,"strong"),r(76,"Height:"),n(),r(77),n(),i(78,"li")(79,"strong"),r(80,"Weight:"),n(),r(81),n()()(),i(82,"div",28)(83,"h6"),r(84,"Additional Info"),n(),i(85,"ul",29)(86,"li")(87,"strong"),r(88,"Origin:"),n(),r(89),n(),i(90,"li")(91,"strong"),r(92,"Fighting:"),n(),r(93),n(),i(94,"li")(95,"strong"),r(96,"Twitch:"),n(),r(97),n(),i(98,"li")(99,"strong"),r(100,"Referral:"),n(),r(101),n(),i(102,"li")(103,"strong"),r(104,"Invited By:"),n(),r(105),n()()()()()()()()),t&2){let e=c();s(5),W(" ",e.pendingPlayer.firstName==null?null:e.pendingPlayer.firstName.charAt(0),"",e.pendingPlayer.lastName==null?null:e.pendingPlayer.lastName.charAt(0)," "),s(3),W("",e.pendingPlayer.firstName," ",e.pendingPlayer.lastName),s(2),gt(" ",e.pendingPlayer.position," \u2022 ",e.pendingPlayer.archetype," \u2022 #",e.pendingPlayer.jerseyNumber," "),s(10),p(e.pendingPlayer.age),s(5),b("",e.pendingPlayer.height,'"'),s(5),b("",e.pendingPlayer.weight," lbs"),s(5),p(e.pendingPlayer.handedness),s(10),W("",e.pendingPlayer.firstName," ",e.pendingPlayer.lastName),s(4),b(" Submitted on ",Ce(50,25,e.pendingPlayer.submittedDate==null||e.pendingPlayer.submittedDate.toDate==null?null:e.pendingPlayer.submittedDate.toDate(),"medium")),s(12),b(" ",e.pendingPlayer.position),s(4),b(" ",e.pendingPlayer.archetype),s(4),b(" #",e.pendingPlayer.jerseyNumber),s(4),b(" ",e.pendingPlayer.handedness),s(4),b(" ",e.pendingPlayer.height,'"'),s(4),b(" ",e.pendingPlayer.weight," lbs"),s(8),b(" ",e.pendingPlayer.origin||"N/A"),s(4),b(" ",e.pendingPlayer.fight||"N/A"),s(4),b(" ",e.pendingPlayer.twitch||"N/A"),s(4),b(" ",e.pendingPlayer.referral||"N/A"),s(4),b(" ",e.pendingPlayer.invitedBy||"N/A")}}function Jn(t,a){if(t&1&&_(0,"img",52),t&2){let e=c(3);m("src",e.teamLogo,Y)("alt",e.teamName)}}function ea(t,a){if(t&1&&(i(0,"div",49),g(1,Jn,1,2,"img",50),i(2,"span",51),r(3),n()()),t&2){let e=c(2);s(),m("ngIf",e.teamLogo),s(2),p(e.teamName)}}function ta(t,a){if(t&1&&(i(0,"th"),r(1),n()),t&2){let e=a.$implicit;s(),p(e)}}function ia(t,a){if(t&1&&(i(0,"span",61),r(1),n()),t&2){let e=c(4);s(),b(" +",e.getAttributeDelta()," ")}}function na(t,a){if(t&1&&(i(0,"td",57)(1,"div",58)(2,"span",59),r(3),n(),g(4,ia,2,1,"span",60),n()()),t&2){let e=a.$implicit,l=c(3);m("ngClass",ut(3,vi,l.isAttributeAffected(e))),s(3),p(l.playerAttributes[e]||0),s(),m("ngIf",l.isAttributeAffected(e)&&!l.trainingProcessed)}}function aa(t,a){if(t&1&&(i(0,"div",53)(1,"table",54)(2,"thead")(3,"tr"),g(4,ta,2,1,"th",55),n()(),i(5,"tbody")(6,"tr"),g(7,na,5,5,"td",56),n()()()()),t&2){let e=c(2);s(4),m("ngForOf",e.skaterAttributeOrder),s(3),m("ngForOf",e.skaterAttributeOrder)}}function ra(t,a){if(t&1&&(i(0,"th"),r(1),n()),t&2){let e=a.$implicit;s(),p(e)}}function oa(t,a){if(t&1&&(i(0,"span",61),r(1),n()),t&2){let e=c(4);s(),b(" +",e.getAttributeDelta()," ")}}function sa(t,a){if(t&1&&(i(0,"td",57)(1,"div",58)(2,"span",59),r(3),n(),g(4,oa,2,1,"span",60),n()()),t&2){let e=a.$implicit,l=c(3);m("ngClass",ut(3,vi,l.isAttributeAffected(e))),s(3),p(l.playerAttributes[e]||0),s(),m("ngIf",l.isAttributeAffected(e)&&!l.trainingProcessed)}}function la(t,a){if(t&1&&(i(0,"div",53)(1,"table",54)(2,"thead")(3,"tr"),g(4,ra,2,1,"th",55),n()(),i(5,"tbody")(6,"tr"),g(7,sa,5,5,"td",56),n()()()()),t&2){let e=c(2);s(4),m("ngForOf",e.goalieAttributeOrder),s(3),m("ngForOf",e.goalieAttributeOrder)}}function da(t,a){if(t&1&&(i(0,"div",62)(1,"span",63),r(2,"Enhanced"),n(),i(3,"small")(4,"strong"),r(5),n(),r(6," will improve the highlighted attributes by "),i(7,"strong"),r(8),n()()()),t&2){let e=c(2);s(5),p(e.tempTrainingType),s(3),W("",e.getAttributeDelta()>0?"+":"","",e.getAttributeDelta()," points")}}function ca(t,a){if(t&1&&(i(0,"div",62)(1,"span",64),r(2,"Applied"),n(),i(3,"small")(4,"strong"),r(5),n(),r(6," has been processed and applied to your player's attributes. "),n()()),t&2){let e=c(2);s(5),p(e.trainingType)}}function ma(t,a){if(t&1&&(i(0,"div",23),_(1,"i",82),i(2,"strong"),r(3,"Training Submissions Closed"),n(),_(4,"br"),r(5),n()),t&2){let e=c(3);s(5),b(" Training submissions are currently closed for Week ",e.currentProgressionWeek,". Please wait for the next progression period to open. ")}}function pa(t,a){if(t&1&&(i(0,"div",83),_(1,"i",84),i(2,"strong"),r(3,"Training Processed"),n(),_(4,"br"),r(5),n()),t&2){let e=c(3);s(5),b(" Your training for Week ",e.currentProgressionWeek," has been processed and applied to your player. You cannot modify processed training. Please wait for the next week to submit new training. ")}}function ga(t,a){if(t&1&&(i(0,"div",83),_(1,"i",84),i(2,"strong"),r(3,"Training Already Submitted"),n(),_(4,"br"),r(5),n()),t&2){let e=c(3);s(5),b(" You have already submitted training for Week ",e.currentProgressionWeek,". You can only submit one training per week. ")}}function ua(t,a){t&1&&(i(0,"span",94),_(1,"i",95),r(2,"Locked "),n())}function fa(t,a){if(t&1){let e=w();i(0,"div",85)(1,"div",86)(2,"div")(3,"h6",87),r(4),n(),i(5,"p",88)(6,"strong"),r(7,"Program:"),n(),r(8),n(),i(9,"p",89)(10,"strong"),r(11,"Status:"),n(),i(12,"span",90),r(13),re(14,"titlecase"),n(),g(15,ua,3,0,"span",91),n()(),i(16,"button",92),P("click",function(){u(e);let o=c(3);return f(o.trainingSubmitted=!1)}),_(17,"i",93),r(18),n()()()}if(t&2){let e=c(3);s(4),b("\u2705 Training Submitted for Week ",e.currentProgressionWeek),s(4),b(" ",e.trainingType),s(4),O("bg-warning",e.trainingStatus==="pending")("bg-success",e.trainingStatus==="processed"),s(),b(" ",Oe(14,11,e.trainingStatus)," "),s(2),m("ngIf",e.trainingStatus==="processed"),s(),m("disabled",!e.canEditTraining())("title",e.trainingProcessed?"Cannot edit processed training":e.progressionsOpen?"Edit training":"Progressions are closed"),s(2),b(" ",e.trainingProcessed?"Locked":"Edit Training"," ")}}function _a(t,a){if(t&1&&(i(0,"option",103),r(1),n()),t&2){let e=a.$implicit;m("value",e),s(),b(" ",e," ")}}function ha(t,a){if(t&1){let e=w();i(0,"div",96)(1,"label",97),r(2),n(),i(3,"select",98),S("ngModelChange",function(o){u(e);let d=c(3);return v(d.tempTrainingType,o)||(d.tempTrainingType=o),f(o)}),P("change",function(){u(e);let o=c(3);return f(o.onTrainingChange())}),i(4,"option",99),r(5,"-- Choose Your Training --"),n(),g(6,_a,2,2,"option",100),n(),i(7,"button",101),P("click",function(){u(e);let o=c(3);return f(o.submitTraining())}),_(8,"i",102),r(9),n()()}if(t&2){let e=c(3);s(2),b("Select Training Program for Week ",e.currentProgressionWeek),s(),x("ngModel",e.tempTrainingType),m("disabled",!e.progressionsOpen||e.trainingProcessed),s(3),m("ngForOf",e.trainingOptions),s(),m("disabled",!e.tempTrainingType||!e.progressionsOpen||e.trainingProcessed),s(2),b(" Submit Training for Week ",e.currentProgressionWeek," ")}}function ya(t,a){if(t&1&&(i(0,"div",104),_(1,"i",105),r(2),n()),t&2){let e=c(3);s(2),b(" Secondary Position Progress: ",e.secondaryProgress,"/3 weeks completed ")}}function xa(t,a){if(t&1){let e=w();i(0,"div")(1,"div",65)(2,"div",66)(3,"div",67)(4,"h5",25),r(5,"Player Details"),n(),i(6,"div",65)(7,"div",68)(8,"div",19),r(9,"Call Name"),n(),i(10,"div",20),r(11),n()(),i(12,"div",68)(13,"div",19),r(14,"Origin"),n(),i(15,"div",20),r(16),n()(),i(17,"div",68)(18,"div",19),r(19,"Fighting"),n(),i(20,"div",20),r(21),n()(),i(22,"div",68)(23,"div",19),r(24,"Race"),n(),i(25,"div",20),r(26),n()(),i(27,"div",68)(28,"div",19),r(29,"Hair"),n(),i(30,"div",20),r(31),n()(),i(32,"div",68)(33,"div",19),r(34,"Beard"),n(),i(35,"div",20),r(36),n()(),i(37,"div",68)(38,"div",19),r(39,"Stick Tape"),n(),i(40,"div",20),r(41),n()(),i(42,"div",68)(43,"div",19),r(44,"Twitch"),n(),i(45,"div",20),r(46),n()(),i(47,"div",69)(48,"div",19),r(49,"Referral"),n(),i(50,"div",20),r(51),n()(),i(52,"div",70)(53,"div",19),r(54,"Invited By"),n(),i(55,"div",20),r(56),n()()(),i(57,"div",71)(58,"button",72),P("click",function(){u(e);let o=c(2);return f(o.showRetireModal=!0)}),_(59,"i",73),r(60,"Retire Player "),n()()()(),i(61,"div",66)(62,"div",74)(63,"h5",75),r(64),i(65,"span",76),r(66),n()(),g(67,ma,6,1,"div",77)(68,pa,6,1,"div",78)(69,ga,6,1,"div",78)(70,fa,19,13,"div",79)(71,ha,10,6,"div",80)(72,ya,3,1,"div",81),n()()()()}if(t&2){let e=c(2);s(11),p(e.player.callName||"N/A"),s(5),p(e.player.origin||"N/A"),s(5),p(e.player.fightTendency||"N/A"),s(5),p(e.player.race||"N/A"),s(5),p(e.player.hair||"N/A"),s(5),p(e.player.beard||"N/A"),s(5),p(e.player.stickTapeColor||"N/A"),s(5),p(e.player.twitch||"N/A"),s(5),p(e.player.referralSource||"N/A"),s(5),p(e.player.invitedBy||"N/A"),s(8),b(" Weekly Training Program - Week ",e.currentProgressionWeek," "),s(),O("bg-success",e.progressionsOpen)("bg-danger",!e.progressionsOpen),s(),b(" ",e.progressionsOpen?"Open":"Closed"," "),s(),m("ngIf",!e.progressionsOpen),s(),m("ngIf",e.trainingProcessed),s(),m("ngIf",e.hasSubmittedThisWeek&&!e.trainingSubmitted&&!e.trainingProcessed),s(),m("ngIf",e.trainingSubmitted),s(),m("ngIf",!e.trainingSubmitted&&e.progressionsOpen&&!e.hasSubmittedThisWeek&&!e.trainingProcessed),s(),m("ngIf",e.trainingType==="Learn Secondary Position")}}function va(t,a){if(t&1&&_(0,"img",116),t&2){let e=c().$implicit;m("src",e.teamLogo,Y)("alt",e.teamName)}}function Sa(t,a){if(t&1&&(i(0,"div",112)(1,"div",113),g(2,va,1,2,"img",114),i(3,"div",115)(4,"h6",88),r(5),n(),i(6,"small",26),r(7),re(8,"titlecase"),re(9,"date"),n()()()()),t&2){let e=a.$implicit;s(2),m("ngIf",e.teamLogo),s(3),p(e.teamName),s(2),W(" ",Oe(8,4,e.action)," on ",Ce(9,6,e.joinDate,"mediumDate")," ")}}function ba(t,a){t&1&&(i(0,"div",117),r(1," No team history available "),n())}function wa(t,a){if(t&1&&_(0,"img",124),t&2){let e=c().$implicit;m("src",e.teamLogo,Y)("alt",e.teamName)}}function Ca(t,a){if(t&1&&(i(0,"p",125),r(1),n()),t&2){let e=c().$implicit;s(),p(e.details)}}function Ea(t,a){if(t&1&&(i(0,"div",118)(1,"div",119)(2,"div",115)(3,"div",113),g(4,wa,1,2,"img",120),i(5,"div")(6,"h6",88),r(7),re(8,"titlecase"),n(),i(9,"p",121),r(10),n()()(),i(11,"small",26),r(12),re(13,"date"),n()(),i(14,"span",122),r(15),n()(),g(16,Ca,2,1,"p",123),n()),t&2){let e=a.$implicit;s(4),m("ngIf",e.teamLogo),s(3),p(Oe(8,6,e.action)),s(3),p(e.teamName),s(2),p(Ce(13,8,e.timestamp,"medium")),s(3),p(e.action),s(),m("ngIf",e.details)}}function Pa(t,a){t&1&&(i(0,"div",117),r(1," No career history available "),n())}function Ta(t,a){if(t&1&&(i(0,"div")(1,"div",65)(2,"div",28)(3,"div",67)(4,"h5",25),_(5,"i",106),r(6,"Team History "),n(),g(7,Sa,10,9,"div",107)(8,ba,2,0,"div",108),n()(),i(9,"div",28)(10,"div",67)(11,"h5",25),_(12,"i",109),r(13,"Career Timeline "),n(),i(14,"div",110),g(15,Ea,17,11,"div",111),n(),g(16,Pa,2,0,"div",108),n()()()()),t&2){let e=c(2);s(7),m("ngForOf",e.getTeamHistory()),s(),m("ngIf",e.getTeamHistory().length===0),s(7),m("ngForOf",e.playerHistory),s(),m("ngIf",e.playerHistory.length===0)}}function Ia(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),re(3,"date"),n(),i(4,"td"),r(5),n(),i(6,"td"),r(7),n(),i(8,"td"),r(9),n(),i(10,"td"),r(11),n(),i(12,"td"),r(13),n(),i(14,"td"),r(15),n(),i(16,"td"),r(17),n(),i(18,"td"),r(19),n(),i(20,"td"),r(21),n()()),t&2){let e=a.$implicit;s(2),p(Ce(3,11,e.date,"shortDate")),s(3),p(e.teamName),s(2),W("",e.isHome?"vs":"@"," ",e.opponent),s(2),p(e.goals||0),s(2),p(e.assists||0),s(2),p((e.goals||0)+(e.assists||0)),s(2),p(e.plusMinus||0),s(2),p(e.pim||0),s(2),p(e.hits||0),s(2),p(e.shots||0)}}function Ma(t,a){t&1&&(i(0,"div",117),r(1," No game stats available "),n())}function ka(t,a){if(t&1&&(i(0,"div")(1,"div",126)(2,"h5",25),_(3,"i",127),r(4,"Career Totals "),n(),i(5,"div",128)(6,"div",129)(7,"div",18)(8,"div",19),r(9,"Games"),n(),i(10,"div",20),r(11),n()()(),i(12,"div",129)(13,"div",18)(14,"div",19),r(15,"Goals"),n(),i(16,"div",20),r(17),n()()(),i(18,"div",129)(19,"div",18)(20,"div",19),r(21,"Assists"),n(),i(22,"div",20),r(23),n()()(),i(24,"div",129)(25,"div",18)(26,"div",19),r(27,"Points"),n(),i(28,"div",20),r(29),n()()(),i(30,"div",129)(31,"div",18)(32,"div",19),r(33,"PIM"),n(),i(34,"div",20),r(35),n()()(),i(36,"div",129)(37,"div",18)(38,"div",19),r(39,"Hits"),n(),i(40,"div",20),r(41),n()()()()(),i(42,"div",67)(43,"h5",25),_(44,"i",130),r(45,"Game by Game Stats "),n(),i(46,"div",53)(47,"table",131)(48,"thead")(49,"tr")(50,"th"),r(51,"Date"),n(),i(52,"th"),r(53,"Team"),n(),i(54,"th"),r(55,"vs"),n(),i(56,"th"),r(57,"G"),n(),i(58,"th"),r(59,"A"),n(),i(60,"th"),r(61,"PTS"),n(),i(62,"th"),r(63,"+/-"),n(),i(64,"th"),r(65,"PIM"),n(),i(66,"th"),r(67,"Hits"),n(),i(68,"th"),r(69,"Shots"),n()()(),i(70,"tbody"),g(71,Ia,22,14,"tr",55),n()()(),g(72,Ma,2,0,"div",108),n()()),t&2){let e=c(2);s(11),p(e.getTotalStats().games),s(6),p(e.getTotalStats().goals),s(6),p(e.getTotalStats().assists),s(6),p(e.getTotalStats().points),s(6),p(e.getTotalStats().pim),s(6),p(e.getTotalStats().hits),s(30),m("ngForOf",e.gameStats),s(),m("ngIf",e.gameStats.length===0)}}function Oa(t,a){t&1&&(i(0,"span",134),_(1,"i",135),n())}function Aa(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),re(3,"date"),n(),i(4,"td"),r(5),n(),i(6,"td")(7,"span",90),r(8),re(9,"titlecase"),n(),g(10,Oa,2,0,"span",133),n(),i(11,"td"),r(12),n(),i(13,"td"),r(14),n()()),t&2){let e=a.$implicit;s(2),p(Ce(3,10,e.timestamp,"mediumDate")),s(3),p(e.training),s(2),O("bg-warning",e.status==="pending")("bg-success",e.status==="processed"),s(),b(" ",Oe(9,13,e.status)," "),s(2),m("ngIf",e.status==="processed"),s(2),p(e.week||"N/A"),s(2),p(e.season||"N/A")}}function Da(t,a){t&1&&(i(0,"div",117),r(1," No training history available "),n())}function Ra(t,a){if(t&1&&(i(0,"div")(1,"div",67)(2,"h5",25),_(3,"i",132),r(4,"Training History "),n(),i(5,"div",53)(6,"table",131)(7,"thead")(8,"tr")(9,"th"),r(10,"Date"),n(),i(11,"th"),r(12,"Training Program"),n(),i(13,"th"),r(14,"Status"),n(),i(15,"th"),r(16,"Week"),n(),i(17,"th"),r(18,"Season"),n()()(),i(19,"tbody"),g(20,Aa,15,15,"tr",55),n()()(),g(21,Da,2,0,"div",108),n()()),t&2){let e=c(2);s(20),m("ngForOf",e.trainingHistory),s(),m("ngIf",e.trainingHistory.length===0)}}function Ga(t,a){if(t&1){let e=w();i(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),r(5),n()(),i(6,"div",28)(7,"h1",12),r(8),n(),i(9,"div",13),r(10),n(),g(11,ea,4,2,"div",30),n(),i(12,"div",31)(13,"div",17)(14,"div",32)(15,"div",19),r(16,"Overall"),n(),i(17,"div",33)(18,"div",34)(19,"div",35),r(20),n()()()(),i(21,"div",18)(22,"div",19),r(23,"Age"),n(),i(24,"div",20),r(25),n()(),i(26,"div",18)(27,"div",19),r(28,"Height"),n(),i(29,"div",20),r(30),n()(),i(31,"div",18)(32,"div",19),r(33,"Weight"),n(),i(34,"div",20),r(35),n()(),i(36,"div",18)(37,"div",19),r(38,"Hand"),n(),i(39,"div",20),r(40),n()()()()()(),i(41,"div",36)(42,"h5",37),r(43," Player Attributes "),n(),g(44,aa,8,2,"div",38)(45,la,8,2,"div",38)(46,da,9,3,"div",39)(47,ca,7,1,"div",39),n(),i(48,"div",40)(49,"ul",41)(50,"li",42)(51,"a",43),P("click",function(){u(e);let o=c();return f(o.onTabChange("overview"))}),_(52,"i",44),r(53," Overview "),n()(),i(54,"li",42)(55,"a",43),P("click",function(){u(e);let o=c();return f(o.onTabChange("history"))}),_(56,"i",45),r(57," Career History "),n()(),i(58,"li",42)(59,"a",43),P("click",function(){u(e);let o=c();return f(o.onTabChange("stats"))}),_(60,"i",46),r(61," Game Stats "),n()(),i(62,"li",42)(63,"a",43),P("click",function(){u(e);let o=c();return f(o.onTabChange("trainings"))}),_(64,"i",47),r(65," Training History "),n()()()(),g(66,xa,73,22,"div",48)(67,Ta,17,4,"div",48)(68,ka,73,8,"div",48)(69,Ra,22,2,"div",48),n()}if(t&2){let e=c();s(5),W(" ",e.player.firstName==null?null:e.player.firstName.charAt(0),"",e.player.lastName==null?null:e.player.lastName.charAt(0)," "),s(3),W("",e.player.firstName," ",e.player.lastName),s(2),gt(" ",e.player.position," \u2022 ",e.player.archetype," \u2022 #",e.player.jerseyNumber," "),s(),m("ngIf",e.teamName),s(7),Dt("background","conic-gradient(#0d6efd 0deg "+(e.playerAttributes.OVERALL||50)*3.6+"deg, #e9ecef "+(e.playerAttributes.OVERALL||50)*3.6+"deg 360deg)"),s(2),b(" ",e.playerAttributes.OVERALL||50," "),s(5),p(e.player.age),s(5),b("",e.player.height,'"'),s(5),b("",e.player.weight," lbs"),s(5),p(e.player.handedness),s(4),m("ngIf",e.player.position!=="G"),s(),m("ngIf",e.player.position==="G"),s(),m("ngIf",e.tempTrainingType&&!e.trainingProcessed),s(),m("ngIf",e.trainingProcessed&&e.trainingType),s(4),O("active",e.currentView==="overview"),s(4),O("active",e.currentView==="history"),s(4),O("active",e.currentView==="stats"),s(4),O("active",e.currentView==="trainings"),s(3),m("ngIf",e.currentView==="overview"),s(),m("ngIf",e.currentView==="history"),s(),m("ngIf",e.currentView==="stats"),s(),m("ngIf",e.currentView==="trainings")}}function Na(t,a){if(t&1){let e=w();i(0,"div",136)(1,"div",137)(2,"div",138)(3,"div",139)(4,"h5",140),_(5,"i",141),r(6,"Retire Player "),n(),i(7,"button",142),P("click",function(){u(e);let o=c();return f(o.showRetireModal=!1)}),n()(),i(8,"div",143)(9,"div",23)(10,"strong"),r(11,"Warning:"),n(),r(12," This action cannot be undone. Your player will be permanently retired from the league. "),n(),i(13,"p"),r(14,"Are you sure you want to retire "),i(15,"strong"),r(16),n(),r(17,"?"),n(),i(18,"p"),r(19,"To confirm, please type "),i(20,"strong"),r(21,"RETIRE"),n(),r(22," in the box below:"),n(),i(23,"input",144),S("ngModelChange",function(o){u(e);let d=c();return v(d.retireConfirmation,o)||(d.retireConfirmation=o),f(o)}),n()(),i(24,"div",145)(25,"button",146),P("click",function(){u(e);let o=c();return f(o.showRetireModal=!1)}),r(26,"Cancel"),n(),i(27,"button",147),P("click",function(){u(e);let o=c();return f(o.retirePlayer())}),_(28,"i",148),r(29,"Retire Player "),n()()()()()}if(t&2){let e=c();s(16),W("",e.player.firstName," ",e.player.lastName),s(7),x("ngModel",e.retireConfirmation),s(4),m("disabled",e.retireConfirmation!=="RETIRE")}}var at=class t{firestore=G(oe);auth=G(Xe);router=G(B);player=null;pendingPlayer=null;teamName="";teamLogo="";loading=!0;isPendingPlayer=!1;trainingType="";tempTrainingType="";trainingOptions=[];trainingSubmitted=!1;trainingStatus=null;trainingProcessed=!1;progressionsOpen=!0;currentProgressionWeek=1;hasSubmittedThisWeek=!1;secondaryProgress=0;existingTrainingId=null;playerAttributes={};skaterAttributeOrder=["SPEED","BODY CHK","ENDUR","PK CTRL","PASSING","SHT/PSS","SLAP PWR","SLAP ACC","WRI PWR","WRI ACC","AGILITY","STRENGTH","ACCEL","BALANCE","FACEOFF","DRBLTY","DEKE","AGGRE","POISE","HND EYE","SHT BLK","OFF AWR","DEF AWR","DISCIP","FIGHTING","STK CHK"];goalieAttributeOrder=["GLV LOW","GLV HIGH","STK LOW","STK HIGH","5 HOLE","SPEED","AGILITY","CONSIS","PK CTRL","ENDUR","BRK AWAY","RBD CTRL","RECOV","POISE","PASSING","ANGLES","PK PL FRQ","AGGRE","DRBLTY","VISION"];trainingMap={"Speed Skating":["SPEED","ACCEL","AGILITY"],"Distance Skating":["ENDUR","BALANCE","DRBLTY"],"Stick Handling":["PK CTRL","DEKE","HND EYE"],MMA:["BODY CHK","STRENGTH","AGGRE","FIGHTING"],Marksmanship:["WRI PWR","SLAP PWR","PASSING"],"Hit the Targets":["WRI ACC","SLAP ACC","POISE"],"Study Film":["OFF AWR","DEF AWR","DISCIP"],"Special Teams":["STK CHK","SHT BLK","FACEOFF"],"Learn Secondary Position":[],"Shots High":["GLV HIGH","STK HIGH","VISION"],"Shots Low":["GLV LOW","STK LOW","5 HOLE"],"Side to Sides":["SPEED","AGILITY","POISE"],"Puck Skills":["PK CTRL","PASSING","PK PL FRQ"],"Laps in Pads":["ENDUR","DRBLTY","AGGRE"],Positioning:["BRK AWAY","ANGLES"],"Under Pressure":["RBD CTRL","RECOV"]};playerHistory=[];gameStats=[];trainingHistory=[];currentView="overview";showRetireModal=!1;retireConfirmation="";teamCache=new Map;gameStatsCache=null;historyCache=null;weekChangeListener;ngOnInit(){return E(this,null,function*(){let a=this.auth.currentUser;if(!a){this.loading=!1;return}console.log("PlayerManager: Initializing for user:",a.uid),this.weekChangeListener=()=>{console.log("\u{1F504} Week change detected, refreshing progression settings..."),this.loadProgressionSettings()},window.addEventListener("weekChanged",this.weekChangeListener);try{let[e,l]=yield Promise.all([this.loadPlayerData(a.uid),this.loadProgressionSettings()]);e&&(yield this.initializePlayerData(e))}catch(e){console.error("Error initializing player manager:",e)}finally{this.loading=!1}})}ngOnDestroy(){this.weekChangeListener&&window.removeEventListener("weekChanged",this.weekChangeListener)}loadPlayerData(a){return E(this,null,function*(){console.log("\u{1F50D} Loading player data for user:",a);let[e,l]=yield Promise.all([k(N(M(this.firestore,"players"),D("userId","==",a),D("status","==","active"),he(1))),k(N(M(this.firestore,"pendingPlayers"),D("userId","==",a),D("status","==","pending"),he(1)))]);if(!e.empty){let o=e.docs[0].data();return o.id=e.docs[0].id,this.player=o,this.isPendingPlayer=!1,console.log("\u26A1 Active player found"),{type:"active",data:o}}if(!l.empty){let o=l.docs[0].data();return o.id=l.docs[0].id,this.pendingPlayer=o,this.isPendingPlayer=!0,console.log("\u23F3 Pending player found"),{type:"pending",data:o}}return console.log("\u274C No player found"),null})}initializePlayerData(a){return E(this,null,function*(){if(a.type==="pending")return;this.setTrainingOptions(this.player.position);let e=[this.loadPlayerAttributes(),this.loadProgressionData(),this.loadTeamData()];this.currentView==="history"&&e.push(this.loadPlayerHistory()),this.currentView==="stats"&&e.push(this.loadGameStats()),this.currentView==="trainings"&&e.push(this.loadTrainingHistory()),yield Promise.all(e)})}loadProgressionData(){return E(this,null,function*(){if(!this.player?.id)return;let[a,e]=yield Promise.all([k(N(M(this.firestore,`players/${this.player.id}/progressions`),D("training","==","Learn Secondary Position"))),k(N(M(this.firestore,`players/${this.player.id}/progressions`),D("week","==",this.currentProgressionWeek),D("season","==",new Date().getFullYear()),he(1)))]);if(this.secondaryProgress=a.docs.length,!e.empty){let l=e.docs[0].data();this.hasSubmittedThisWeek=!0,this.trainingType=l.training,this.tempTrainingType=this.trainingType,this.trainingStatus=l.status||"pending",this.trainingProcessed=this.trainingStatus==="processed",this.trainingSubmitted=!0,this.existingTrainingId=e.docs[0].id}})}loadTeamData(){return E(this,null,function*(){if(!this.player?.id||this.player.teamId==="none")return;if(this.teamCache.has(this.player.teamId)){let l=this.teamCache.get(this.player.teamId);this.teamName=l.name,this.teamLogo=l.logo;return}let a=A(this.firestore,`teams/${this.player.teamId}`),e=yield F(a);if(e.exists()){let l=e.data(),o=`${l.city} ${l.mascot}`.trim(),d=l.logoUrl||"";this.teamCache.set(this.player.teamId,{name:o,logo:d}),this.teamName=o,this.teamLogo=d}})}loadGameStats(){return E(this,null,function*(){if(this.player?.id){if(this.gameStatsCache){this.gameStats=this.gameStatsCache;return}console.log("\u{1F4CA} Loading game stats..."),this.gameStats=[];try{let a=M(this.firestore,"teams"),e=yield k(a),l=[],o=new Map;for(let d of e.docs){let y=d.id,h=d.data(),C=A(this.firestore,`teams/${y}/roster/${this.player.id}`);if(!(yield F(C)).exists())continue;let T=`${h.city} ${h.mascot}`;l.push(this.loadTeamGamesForPlayer(y,T,o))}yield Promise.all(l),this.gameStats=Array.from(o.values()).sort((d,y)=>y.date.getTime()-d.date.getTime()),this.gameStatsCache=this.gameStats,console.log(`\u2705 Loaded ${this.gameStats.length} game stats`)}catch(a){console.error("Error loading game stats:",a)}}})}loadTeamGamesForPlayer(a,e,l){return E(this,null,function*(){let o=M(this.firestore,`teams/${a}/games`),d=yield k(o);for(let y of d.docs){let h=y.data(),C=h.homePlayerStats?.[this.player.id],I=h.awayPlayerStats?.[this.player.id];if(!C&&!I)continue;let T=C||I,L=!!C,R=L?h.awayTeamId:h.homeTeamId,$="Unknown Opponent";if(R&&this.teamCache.has(R))$=this.teamCache.get(R).name;else if(R){let ie=A(this.firestore,`teams/${R}`),q=yield F(ie);if(q.exists()){let ce=q.data(),we=`${ce.city} ${ce.mascot}`;this.teamCache.set(R,{name:we,logo:ce.logoUrl||""}),$=we}}let z=`${h.week}-${h.day}-${h.homeTeamId}-${h.awayTeamId}`;l.has(z)||l.set(z,{gameId:y.id,teamName:e,opponent:$,date:h.date?.toDate?.()||new Date,week:h.week,day:h.day,isHome:L,goals:T.goals||0,assists:T.assists||0,plusMinus:T.plusMinus||0,shots:T.shots||0,pim:T.pim||0,hits:T.hits||0,ppg:T.ppg||0,shg:T.shg||0,fot:T.fot||0,fow:T.fow||0})}})}loadPlayerHistory(){return E(this,null,function*(){if(!this.player?.id)return;if(this.historyCache){this.playerHistory=this.historyCache;return}console.log("\u{1F4DC} Loading player history...");let a=M(this.firestore,`players/${this.player.id}/history`),e=N(a,Me("timestamp","desc"),he(20)),l=yield k(e);this.playerHistory=yield Promise.all(l.docs.map(o=>E(this,null,function*(){let d=o.data(),y="Unknown Team",h="";if(d.teamId&&d.teamId!=="none")if(this.teamCache.has(d.teamId)){let C=this.teamCache.get(d.teamId);y=C.name,h=C.logo}else{let C=A(this.firestore,`teams/${d.teamId}`),I=yield F(C);if(I.exists()){let T=I.data();y=`${T.city} ${T.mascot}`,h=T.logoUrl||"",this.teamCache.set(d.teamId,{name:y,logo:h})}}return pe(j({id:o.id},d),{teamName:y,teamLogo:h,timestamp:d.timestamp?.toDate?.()||new Date(d.timestamp)})}))),this.historyCache=this.playerHistory,console.log(`\u2705 Loaded ${this.playerHistory.length} history entries`)})}loadPlayerAttributes(){return E(this,null,function*(){if(!this.player?.id)return;let a=A(this.firestore,`players/${this.player.id}/meta/attributes`),e=yield F(a);e.exists()&&(this.playerAttributes=e.data())})}loadTrainingHistory(){return E(this,null,function*(){if(!this.player?.id)return;let a=M(this.firestore,`players/${this.player.id}/progressions`),e=N(a,Me("timestamp","desc"),he(10)),l=yield k(e);this.trainingHistory=l.docs.map(o=>pe(j({id:o.id},o.data()),{timestamp:o.data().timestamp?.toDate?.()||new Date(o.data().timestamp)}))})}onTabChange(a){return E(this,null,function*(){switch(this.currentView=a,a){case"history":this.historyCache||(yield this.loadPlayerHistory());break;case"stats":this.gameStatsCache||(yield this.loadGameStats());break;case"trainings":this.trainingHistory.length===0&&(yield this.loadTrainingHistory());break}})}loadProgressionSettings(){return E(this,null,function*(){try{let a=A(this.firestore,"progressionSettings/config"),e=yield F(a),l=this.currentProgressionWeek;if(e.exists()){let o=e.data();this.progressionsOpen=o.open??!0,this.currentProgressionWeek=o.week??1}else this.progressionsOpen=!0,this.currentProgressionWeek=1;l!==this.currentProgressionWeek&&l!==0&&(console.log(`\u{1F4C5} Week changed from ${l} to ${this.currentProgressionWeek}`),yield this.handleWeekChange()),this.player?.id&&(yield this.checkCurrentWeekSubmission())}catch(a){console.error("Error loading progression settings:",a),this.progressionsOpen=!0,this.currentProgressionWeek=1}})}handleWeekChange(){return E(this,null,function*(){console.log("\u{1F504} Handling week change..."),this.tempTrainingType="",this.trainingType="",this.trainingSubmitted=!1,this.trainingStatus=null,this.trainingProcessed=!1,this.existingTrainingId=null,this.hasSubmittedThisWeek=!1,console.log("\u2705 Training selection cleared for new week")})}checkCurrentWeekSubmission(){return E(this,null,function*(){if(this.player?.id)try{let a=M(this.firestore,`players/${this.player.id}/progressions`),e=N(a,D("week","==",this.currentProgressionWeek),D("season","==",new Date().getFullYear()),he(1)),l=yield k(e);if(l.empty)this.hasSubmittedThisWeek=!1,this.trainingSubmitted=!1,this.trainingProcessed=!1;else{let o=l.docs[0].data();this.hasSubmittedThisWeek=!0,this.trainingType=o.training,this.tempTrainingType=this.trainingType,this.trainingStatus=o.status||"pending",this.trainingProcessed=this.trainingStatus==="processed",this.trainingSubmitted=!0,this.existingTrainingId=l.docs[0].id}}catch(a){console.error("Error checking current week submission:",a)}})}setTrainingOptions(a){a==="G"?this.trainingOptions=["Shots High","Shots Low","Side to Sides","Puck Skills","Laps in Pads","Positioning","Under Pressure"]:(this.trainingOptions=["Speed Skating","Distance Skating","Stick Handling","MMA","Marksmanship","Hit the Targets","Study Film","Special Teams"],a!=="D"&&this.trainingOptions.push("Learn Secondary Position"))}onTrainingChange(){}isAttributeAffected(a){return this.tempTrainingType?(this.trainingMap[this.tempTrainingType]||[]).includes(a):!1}getAttributeDelta(){if(!this.player?.age)return 0;let a=this.player.age,e=this.currentProgressionWeek;return a<=26?e<=5?3:2:a<=29||a===30?1:a===31?-1:a===32||a===33?-2:-3}canEditTraining(){return!this.trainingProcessed&&this.progressionsOpen}submitTraining(){return E(this,null,function*(){if(!this.tempTrainingType||!this.player?.id||!this.player?.teamId)return;if(!this.progressionsOpen){alert("Training submissions are currently closed. Please wait for the next progression period to open.");return}if(this.trainingProcessed){alert("Your training has already been processed and cannot be modified. Please wait for the next week.");return}if(this.hasSubmittedThisWeek&&!this.existingTrainingId){alert(`You have already submitted training for Week ${this.currentProgressionWeek}. Please wait for the next week.`);return}let a=new Date().getFullYear(),e={training:this.tempTrainingType,timestamp:new Date,status:"pending",week:this.currentProgressionWeek,season:a},l=M(this.firestore,`players/${this.player.id}/progressions`),o=M(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression`);if(this.existingTrainingId){if(this.trainingProcessed){alert("Your training has already been processed and cannot be modified.");return}let d=A(this.firestore,`players/${this.player.id}/progressions/${this.existingTrainingId}`);yield ve(d,e);let y=A(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression/${this.existingTrainingId}`);yield Ne(y,e)}else{let d=yield Ae(l,e);this.existingTrainingId=d.id;let y=A(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression/${d.id}`);yield Ne(y,e)}this.trainingType=this.tempTrainingType,this.trainingStatus="pending",this.trainingProcessed=!1,this.hasSubmittedThisWeek=!0,this.trainingType==="Learn Secondary Position"&&(this.secondaryProgress++,this.secondaryProgress>=3&&alert("You have successfully learned your secondary position!")),this.trainingSubmitted=!0,yield this.loadTrainingHistory()})}retirePlayer(){return E(this,null,function*(){if(this.retireConfirmation!=="RETIRE"){alert('Please type "RETIRE" to confirm retirement');return}if(this.player?.id)try{let a=M(this.firestore,`players/${this.player.id}/history`);yield Ae(a,{action:"retired",teamId:this.player.teamId,timestamp:new Date,details:"Player announced retirement from professional hockey"});let e=A(this.firestore,`players/${this.player.id}`);if(yield ve(e,{status:"retired",retiredDate:new Date,teamId:"retired"}),this.player.teamId&&this.player.teamId!=="none"){let l=A(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}`);yield ve(l,{status:"retired",retiredDate:new Date})}this.showRetireModal=!1,this.player.status="retired",window.dispatchEvent(new CustomEvent("playerRetired")),alert("Your player has been retired. Thank you for your service to the league!")}catch(a){console.error("Error retiring player:",a),alert("Failed to retire player. Please try again.")}})}getTotalStats(){return this.gameStats.reduce((a,e)=>(a.games+=1,a.goals+=e.goals||0,a.assists+=e.assists||0,a.points+=(e.goals||0)+(e.assists||0),a.pim+=e.pim||0,a.hits+=e.hits||0,a.shots+=e.shots||0,a),{games:0,goals:0,assists:0,points:0,pim:0,hits:0,shots:0})}getTeamHistory(){let a=new Map;return this.playerHistory.forEach(e=>{(e.action==="signed"||e.action==="traded")&&a.set(e.teamId,{teamName:e.teamName,teamLogo:e.teamLogo,joinDate:e.timestamp,action:e.action})}),Array.from(a.values()).sort((e,l)=>l.joinDate.getTime()-e.joinDate.getTime())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-player-manager"]],decls:4,vars:4,consts:[["class","loading-container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["class","modal fade show","tabindex","-1","style","display: block; background: rgba(0,0,0,0.5);",4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"container","mt-4"],[1,"player-header"],[1,"row","align-items-center"],[1,"col-md-2","text-center"],[1,"player-avatar"],[1,"col-md-7"],[1,"player-name"],[1,"player-position"],[1,"team-badge","bg-warning","text-dark"],[1,"fas","fa-clock","me-2"],[1,"col-md-3"],[1,"stat-grid"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"card"],[1,"card-body","text-center"],[1,"alert","alert-warning"],[1,"fas","fa-hourglass-half","me-2"],[1,"mb-3"],[1,"text-muted"],[1,"row","mt-4"],[1,"col-md-6"],[1,"list-unstyled","text-start"],["class","team-display",4,"ngIf"],[1,"col-md-4"],[1,"stat-item","overall-rating"],[1,"overall-container"],[1,"circular-progress"],[1,"overall-value",2,"color","#0d6efd"],[1,"attributes-section-full"],[1,"attributes-title"],["class","table-responsive",4,"ngIf"],["class","training-legend",4,"ngIf"],[1,"mb-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-user","me-1"],[1,"fas","fa-history","me-1"],[1,"fas","fa-chart-line","me-1"],[1,"fas","fa-dumbbell","me-1"],[4,"ngIf"],[1,"team-display"],["class","team-logo-small",3,"src","alt",4,"ngIf"],[1,"team-name-text"],[1,"team-logo-small",3,"src","alt"],[1,"table-responsive"],[1,"table","table-bordered","attributes-table"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"attribute-cell"],[1,"attribute-value"],["class","training-impact",4,"ngIf"],[1,"training-impact"],[1,"training-legend"],[1,"legend-badge"],[1,"legend-badge","bg-success"],[1,"row"],[1,"col-lg-6"],[1,"stat-card"],[1,"col-6","mb-3"],[1,"col-12","mb-3"],[1,"col-12"],[1,"mt-4","pt-3","border-top"],[1,"btn","btn-danger","w-100",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],[1,"training-section"],[1,"training-title"],[1,"badge","ms-2"],["class","alert alert-warning",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","training-submitted",4,"ngIf"],["class","training-form",4,"ngIf"],["class","progress-indicator",4,"ngIf"],[1,"fas","fa-lock","me-2"],[1,"alert","alert-info"],[1,"fas","fa-check-circle","me-2"],[1,"training-submitted"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1","text-success"],[1,"mb-1"],[1,"mb-0"],[1,"badge"],["class","ms-2 text-success",4,"ngIf"],[1,"btn","btn-warning",3,"click","disabled","title"],[1,"fas","fa-edit","me-1"],[1,"ms-2","text-success"],[1,"fas","fa-lock","me-1"],[1,"training-form"],["for","trainingSelect",1,"form-label","fw-bold"],["name","training","id","trainingSelect",1,"form-select","mb-3",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-paper-plane","me-1"],[3,"value"],[1,"progress-indicator"],[1,"fas","fa-chart-line","me-2"],[1,"fas","fa-building","me-2"],["class","mb-3 p-3 border rounded team-history-item",4,"ngFor","ngForOf"],["class","text-muted text-center py-3",4,"ngIf"],[1,"fas","fa-timeline","me-2"],[1,"timeline"],["class","timeline-item mb-3 p-3 border-start border-3 border-primary",4,"ngFor","ngForOf"],[1,"mb-3","p-3","border","rounded","team-history-item"],[1,"d-flex","align-items-center","mb-2"],["class","team-logo-history me-3",3,"src","alt",4,"ngIf"],[1,"flex-grow-1"],[1,"team-logo-history","me-3",3,"src","alt"],[1,"text-muted","text-center","py-3"],[1,"timeline-item","mb-3","p-3","border-start","border-3","border-primary"],[1,"d-flex","justify-content-between","align-items-start"],["class","team-logo-timeline me-2",3,"src","alt",4,"ngIf"],[1,"mb-1","text-muted"],[1,"badge","bg-primary"],["class","mt-2 mb-0 small",4,"ngIf"],[1,"team-logo-timeline","me-2",3,"src","alt"],[1,"mt-2","mb-0","small"],[1,"stat-card","mb-4"],[1,"fas","fa-trophy","me-2"],[1,"row","text-center"],[1,"col-md-2"],[1,"fas","fa-list","me-2"],[1,"table","table-striped"],[1,"fas","fa-dumbbell","me-2"],["class","ms-1",4,"ngIf"],[1,"ms-1"],["title","Training has been processed and locked",1,"fas","fa-lock","text-success"],["tabindex","-1",1,"modal","fade","show",2,"display","block","background","rgba(0,0,0,0.5)"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],["type","text","placeholder","Type RETIRE to confirm",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-sign-out-alt","me-1"]],template:function(e,l){e&1&&g(0,Qn,4,0,"div",0)(1,Zn,106,28,"div",1)(2,Ga,70,31,"div",1)(3,Na,30,4,"div",2),e&2&&(m("ngIf",l.loading),s(),m("ngIf",!l.loading&&l.isPendingPlayer&&l.pendingPlayer),s(),m("ngIf",!l.loading&&!l.isPendingPlayer&&l.player&&(l.player==null?null:l.player.status)!=="retired"),s(),m("ngIf",l.showRetireModal))},dependencies:[X,Vt,ne,K,ee,Te,Ie,ae,Pe,Z,J,ze,qe],styles:['.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:300px;flex-direction:column;gap:1rem}.player-header[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:2rem;margin-bottom:2rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.player-avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#0d6efd;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;color:#fff;font-weight:700;margin-bottom:1rem}.player-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#212529;margin-bottom:.5rem}.team-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;background:#f8f9fa;padding:.75rem 1rem;border-radius:8px;border:1px solid #dee2e6;margin-top:.5rem}.team-logo-small[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain;border-radius:4px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.stat-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:.75rem;background:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.circular-progress[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative}.circular-progress[_ngcontent-%COMP%]:before{content:"";position:absolute;width:46px;height:46px;border-radius:50%;background:#fff;z-index:1}.overall-value[_ngcontent-%COMP%]{position:relative;z-index:2;font-size:1.25rem;font-weight:700;color:#0d6efd}.training-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.attributes-section-full[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef;margin-bottom:2rem}.attributes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;font-weight:600;text-align:center;padding:.75rem .5rem;font-size:.8rem;text-transform:uppercase;border:1px solid #dee2e6}.attributes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:.75rem .5rem;font-weight:600;border:1px solid #dee2e6}.training-impact[_ngcontent-%COMP%]{background:#198754;color:#fff;padding:.2rem .5rem;border-radius:12px;font-size:.7rem;font-weight:700}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#6c757d;font-weight:500;padding:1rem 1.5rem;border-radius:0;border-bottom:3px solid transparent}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0d6efd;background-color:transparent;border-color:transparent;border-bottom-color:#0d6efd;font-weight:600}@media (max-width: 768px){.player-header[_ngcontent-%COMP%]{padding:1.5rem}.stat-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.attributes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .attributes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem;font-size:.75rem}}']})};function Va(t,a){t&1&&(i(0,"div",3)(1,"div",4)(2,"span",5),r(3,"Loading..."),n()(),i(4,"p",6),r(5,"Checking player status..."),n()())}function La(t,a){if(t&1){let e=w();i(0,"div",7)(1,"div",8)(2,"h4"),_(3,"i",9),r(4),n(),i(5,"p",10),r(6,"Your player has retired from professional hockey. Thank you for your service to the league!"),n(),i(7,"button",11),P("click",function(){u(e);let o=c();return f(o.createNewPlayer())}),_(8,"i",12),r(9,"Create New Player "),n()()()}if(t&2){let e=c();s(4),b("",e.retiredPlayerName," Has Retired")}}function Wa(t,a){if(t&1&&(i(0,"option",61),r(1),n()),t&2){let e=a.$implicit;m("value",e),s(),p(e)}}function Fa(t,a){if(t&1){let e=w();i(0,"div",21)(1,"label",22),r(2,"Archetype"),n(),i(3,"select",59),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.playerForm.archetype,o)||(d.playerForm.archetype=o),f(o)}),g(4,Wa,2,2,"option",60),n()()}if(t&2){let e=c(2);s(3),x("ngModel",e.playerForm.archetype),s(),m("ngForOf",e.filteredArchetypes)}}function Ua(t,a){if(t&1){let e=w();i(0,"div")(1,"div",7)(2,"div",13)(3,"div",14)(4,"h4",15),_(5,"i",16),r(6,"Create Your Player "),n()(),i(7,"div",17)(8,"div",18),_(9,"i",19),i(10,"strong"),r(11,"Player Creation Process:"),n(),r(12," Your player will be submitted for approval by league management. Once approved, your player will be created with the appropriate attributes and you'll be able to start playing! "),n(),i(13,"form",20),P("ngSubmit",function(){u(e);let o=c();return f(o.createPlayer())}),i(14,"div",21)(15,"label",22),r(16,"First Name"),n(),i(17,"input",23),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.firstName,o)||(d.playerForm.firstName=o),f(o)}),n()(),i(18,"div",21)(19,"label",22),r(20,"Last Name"),n(),i(21,"input",24),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.lastName,o)||(d.playerForm.lastName=o),f(o)}),n()(),i(22,"div",25)(23,"label",22),r(24,"Play by Play Name"),n(),i(25,"input",26),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.gamertag,o)||(d.playerForm.gamertag=o),f(o)}),n()(),i(26,"div",21)(27,"label",22),r(28,"Position"),n(),i(29,"select",27),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.position,o)||(d.playerForm.position=o),f(o)}),P("change",function(){u(e);let o=c();return f(o.onPositionChange())}),i(30,"option",28),r(31,"Select Position"),n(),i(32,"option",29),r(33,"Left Wing"),n(),i(34,"option",30),r(35,"Center"),n(),i(36,"option",31),r(37,"Right Wing"),n(),i(38,"option",32),r(39,"Defense"),n(),i(40,"option",33),r(41,"Goalie"),n()()(),g(42,Fa,5,2,"div",34),i(43,"div",21)(44,"label",22),r(45,"Jersey Number"),n(),i(46,"input",35),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.jerseyNumber,o)||(d.playerForm.jerseyNumber=o),f(o)}),n()(),i(47,"div",21)(48,"label",22),r(49,"Handedness"),n(),i(50,"select",36),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.handedness,o)||(d.playerForm.handedness=o),f(o)}),i(51,"option",37),r(52,"Left"),n(),i(53,"option",38),r(54,"Right"),n()()(),i(55,"div",21)(56,"label",22),r(57,"Height (inches)"),n(),i(58,"input",39),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.height,o)||(d.playerForm.height=o),f(o)}),n()(),i(59,"div",21)(60,"label",22),r(61,"Weight (lbs)"),n(),i(62,"input",40),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.weight,o)||(d.playerForm.weight=o),f(o)}),n()(),i(63,"div",25)(64,"label",22),r(65,"Fighter Tendency"),n(),i(66,"select",41),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.fight,o)||(d.playerForm.fight=o),f(o)}),i(67,"option",42),r(68,"Never"),n(),i(69,"option",43),r(70,"Rarely"),n(),i(71,"option",44),r(72,"Sometimes"),n(),i(73,"option",45),r(74,"Often"),n()()(),i(75,"div",21)(76,"label",22),r(77,"Place of Origin"),n(),i(78,"input",46),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.origin,o)||(d.playerForm.origin=o),f(o)}),n()(),i(79,"div",21)(80,"label",22),r(81,"Hair Style / Color (1\u201373)"),n(),i(82,"input",47),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.hair,o)||(d.playerForm.hair=o),f(o)}),n()(),i(83,"div",25)(84,"label",22),r(85,"Beard"),n(),i(86,"input",48),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.beard,o)||(d.playerForm.beard=o),f(o)}),n()(),i(87,"div",25)(88,"label",22),r(89,"Stick Tape Color"),n(),i(90,"input",49),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.tape,o)||(d.playerForm.tape=o),f(o)}),n()(),i(91,"div",25)(92,"label",22),r(93,"Ethnicity"),n(),i(94,"select",50),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.ethnicity,o)||(d.playerForm.ethnicity=o),f(o)}),i(95,"option",51),r(96,"Caucasian"),n(),i(97,"option",52),r(98,"African-American"),n()()(),i(99,"div",25)(100,"label",22),r(101,"Twitch Name"),n(),i(102,"input",53),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.twitch,o)||(d.playerForm.twitch=o),f(o)}),n()(),i(103,"div",25)(104,"label",22),r(105,"How did you find us?"),n(),i(106,"input",54),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.referral,o)||(d.playerForm.referral=o),f(o)}),n()(),i(107,"div",25)(108,"label",22),r(109,"Who invited you (bonus)?"),n(),i(110,"input",55),S("ngModelChange",function(o){u(e);let d=c();return v(d.playerForm.invitedBy,o)||(d.playerForm.invitedBy=o),f(o)}),n()(),i(111,"div",56)(112,"button",57),_(113,"i",58),r(114,"Submit Player for Approval "),n()()()()()()()}if(t&2){let e=c();s(17),x("ngModel",e.playerForm.firstName),s(4),x("ngModel",e.playerForm.lastName),s(4),x("ngModel",e.playerForm.gamertag),s(4),x("ngModel",e.playerForm.position),s(13),m("ngIf",e.filteredArchetypes.length>0),s(4),x("ngModel",e.playerForm.jerseyNumber),s(4),x("ngModel",e.playerForm.handedness),s(8),x("ngModel",e.playerForm.height),s(4),x("ngModel",e.playerForm.weight),s(4),x("ngModel",e.playerForm.fight),s(12),x("ngModel",e.playerForm.origin),s(4),x("ngModel",e.playerForm.hair),s(4),x("ngModel",e.playerForm.beard),s(4),x("ngModel",e.playerForm.tape),s(4),x("ngModel",e.playerForm.ethnicity),s(8),x("ngModel",e.playerForm.twitch),s(4),x("ngModel",e.playerForm.referral),s(4),x("ngModel",e.playerForm.invitedBy)}}function Ba(t,a){t&1&&(i(0,"div"),_(1,"app-player-manager"),n())}var rt=class t{firestore=G(oe);auth=G(Xe);router=G(B);hasActivePlayer=!1;hasRetiredPlayer=!1;hasPendingPlayer=!1;loading=!0;retiredPlayerName="";pendingPlayerName="";showCreateForm=!1;filteredArchetypes=[];retirementListener;approvalListener;playerForm={firstName:"",lastName:"",gamertag:"",position:"",archetype:"",jerseyNumber:0,handedness:"",height:72,weight:180,fight:"",origin:"",hair:"",beard:"",tape:"",ethnicity:"",twitch:"",referral:"",invitedBy:"",age:19};ngOnInit(){return E(this,null,function*(){let a=this.auth.currentUser;if(!a){this.loading=!1;return}this.retirementListener=()=>{console.log("\u{1F3C6} Player retirement event received, refreshing status..."),this.refreshPlayerStatus()},this.approvalListener=()=>{console.log("\u2705 Player approval event received, refreshing status..."),this.refreshPlayerStatus()},window.addEventListener("playerRetired",this.retirementListener),window.addEventListener("playerApproved",this.approvalListener),yield this.checkPlayerStatus(a.uid),this.loading=!1})}ngOnDestroy(){this.retirementListener&&window.removeEventListener("playerRetired",this.retirementListener),this.approvalListener&&window.removeEventListener("playerApproved",this.approvalListener)}checkPlayerStatus(a){return E(this,null,function*(){try{console.log("\u{1F50D} Checking player status for user:",a),this.resetAllStates();let[e,l,o]=yield Promise.all([k(N(M(this.firestore,"players"),D("userId","==",a),D("status","==","active"))),k(N(M(this.firestore,"players"),D("userId","==",a),D("status","==","retired"))),k(N(M(this.firestore,"pendingPlayers"),D("userId","==",a),D("status","==","pending")))]);if(console.log("\u{1F4CA} Query results:",{active:e.docs.length,retired:l.docs.length,pending:o.docs.length}),!e.empty){this.hasActivePlayer=!0,console.log("\u26A1 Active player found - showing player manager");return}if(!o.empty){let d=o.docs[0].data();this.hasPendingPlayer=!0,this.pendingPlayerName=`${d.firstName} ${d.lastName}`,console.log("\u23F3 Pending player found:",this.pendingPlayerName);return}if(!l.empty){let d=l.docs[0].data();this.hasRetiredPlayer=!0,this.retiredPlayerName=`${d.firstName} ${d.lastName}`,console.log("\u{1F3C6} Retired player found:",this.retiredPlayerName);return}console.log("\u2795 No player found, showing create form"),this.showCreateForm=!0}catch(e){console.error("\u274C Error checking player status:",e),this.showCreateForm=!0}})}resetAllStates(){this.hasActivePlayer=!1,this.hasRetiredPlayer=!1,this.hasPendingPlayer=!1,this.showCreateForm=!1,this.retiredPlayerName="",this.pendingPlayerName=""}refreshPlayerStatus(){return E(this,null,function*(){let a=this.auth.currentUser;a&&(console.log("\u{1F504} Manually refreshing player status..."),this.loading=!0,yield new Promise(e=>setTimeout(e,500)),yield this.checkPlayerStatus(a.uid),this.loading=!1)})}onPositionChange(){let a=this.playerForm.position;["LW","C","RW"].includes(a)?this.filteredArchetypes=["Playmaker","Sniper","2-Way Forward","Power Forward","Enforcer Forward","Grinder"]:a==="D"?this.filteredArchetypes=["Defensive Defense","Offensive Defense","2-Way Defense","Enforcer Defense"]:a==="G"?this.filteredArchetypes=["Hybrid","Butterfly","Standup"]:this.filteredArchetypes=[],this.playerForm.archetype=""}createPlayer(){return E(this,null,function*(){let a=this.auth.currentUser;if(a)try{console.log("\u{1F4DD} Creating pending player request...");let e=A(this.firestore,"progressionSettings/config"),l=yield F(e),o=l.exists()&&l.data().week||1,d=A(this.firestore,"leagueSettings/season"),y=yield F(d),h=y.exists()&&y.data().currentSeason||1,C=o<=5?20:19;yield Ae(M(this.firestore,"pendingPlayers"),pe(j({},this.playerForm),{userId:a.uid,status:"pending",submittedDate:new Date,userEmail:a.email,userDisplayName:a.displayName,age:C,draftClass:h})),console.log("\u2705 Pending player created successfully"),this.resetAllStates(),this.hasPendingPlayer=!0,this.pendingPlayerName=`${this.playerForm.firstName} ${this.playerForm.lastName}`,console.log("\u{1F3AF} Component state updated to show pending player:",this.pendingPlayerName),alert("Your player has been submitted for approval! You can now view your pending player below.")}catch(e){console.error("\u274C Error submitting player:",e),alert("Failed to submit player. Please try again.")}})}createNewPlayer(){console.log("\u2795 Creating new player - resetting form..."),this.playerForm={firstName:"",lastName:"",gamertag:"",position:"",archetype:"",jerseyNumber:0,handedness:"",height:72,weight:180,fight:"",origin:"",hair:"",beard:"",tape:"",ethnicity:"",twitch:"",referral:"",invitedBy:"",age:19},this.filteredArchetypes=[],this.resetAllStates(),this.showCreateForm=!0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-player"]],decls:4,vars:4,consts:[["class","loading-container",4,"ngIf"],["class","container mt-4",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"container","mt-4"],[1,"alert","alert-info","text-center"],[1,"fas","fa-medal","me-2"],[1,"mb-3"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fas","fa-plus","me-2"],[1,"card","shadow-lg"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-user-plus","me-2"],[1,"card-body"],[1,"alert","alert-info"],[1,"fas","fa-info-circle","me-2"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-6","mb-3"],[1,"form-label"],["type","text","name","firstName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","lastName","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],["type","text","name","gamertag",1,"form-control",3,"ngModelChange","ngModel"],["name","position","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","LW"],["value","C"],["value","RW"],["value","D"],["value","G"],["class","col-md-6 mb-3",4,"ngIf"],["type","number","name","jerseyNumber","min","0","max","99",1,"form-control",3,"ngModelChange","ngModel"],["name","handedness",1,"form-select",3,"ngModelChange","ngModel"],["value","Left"],["value","Right"],["type","number","name","height","min","67","max","81",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","weight","min","129","max","290",1,"form-control",3,"ngModelChange","ngModel"],["name","fight",1,"form-select",3,"ngModelChange","ngModel"],["value","Never"],["value","Rarely"],["value","Sometimes"],["value","Often"],["type","text","name","origin",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","hair",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","beard",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","tape",1,"form-control",3,"ngModelChange","ngModel"],["name","ethnicity",1,"form-select",3,"ngModelChange","ngModel"],["value","Caucasian"],["value","African-American"],["type","text","name","twitch",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","referral",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","invitedBy",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","submit",1,"btn","btn-primary","btn-lg","w-100"],[1,"fas","fa-paper-plane","me-2"],["name","archetype",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,l){e&1&&g(0,Va,6,0,"div",0)(1,La,10,1,"div",1)(2,Ua,115,18,"div",2)(3,Ba,2,0,"div",2),e&2&&(m("ngIf",l.loading),s(),m("ngIf",!l.loading&&l.hasRetiredPlayer&&!l.showCreateForm),s(),m("ngIf",!l.loading&&l.showCreateForm),s(),m("ngIf",!l.loading&&(l.hasActivePlayer||l.hasPendingPlayer)))},dependencies:[X,ne,K,ee,_e,Te,Ie,ae,Re,Pe,Z,ue,Ke,Ge,Ye,J,fe,at],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:300px;flex-direction:column;gap:1rem}.spinner-border[_ngcontent-%COMP%]{color:#0d6efd;width:3rem;height:3rem}.alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000001a}.alert-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7f3ff,#cff4fc);color:#055160;border-left:4px solid #0dcaf0}.alert-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#664d03;border-left:4px solid #ffc107}.alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;margin-bottom:1rem}.btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#0d6efd,#6610f2);border:none;box-shadow:0 4px 6px #0d6efd4d}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#0b5ed7,#5a0fc8);transform:translateY(-2px);box-shadow:0 6px 12px #0d6efd66}.btn-outline-primary[_ngcontent-%COMP%]{color:#0d6efd;border:2px solid #0d6efd;background:transparent}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#0d6efd;color:#fff;transform:translateY(-1px);box-shadow:0 4px 8px #0d6efd4d}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 2rem;font-size:1.1rem}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 8px 25px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#1a237e,#283593);color:#fff;border-bottom:none;padding:1.5rem}.card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;margin-bottom:.75rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #ced4da;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.fas[_ngcontent-%COMP%]{margin-right:.5rem}@media (max-width: 768px){.alert[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1.5rem}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem}.loading-container[_ngcontent-%COMP%]{height:200px}}.alert[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.container[_ngcontent-%COMP%]{max-width:800px}.row.g-3[_ngcontent-%COMP%]{--bs-gutter-x: 1.5rem;--bs-gutter-y: 1rem}.alert.alert-info[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:.95rem;line-height:1.6}.alert.alert-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}"]})};function Ha(t,a){t&1&&(i(0,"div",4)(1,"div",5)(2,"span",6),r(3,"Loading..."),n()()())}function ja(t,a){if(t&1){let e=w();i(0,"button",41),P("click",function(){u(e);let o=c(2);return f(o.toggleEdit())}),r(1),n()}if(t&2){let e=c(2);s(),b(" ",e.isEditing?"Save":"Edit"," ")}}function $a(t,a){if(t&1){let e=w();i(0,"button",45),P("click",function(){let o=u(e).$implicit,d=c(3);return f(d.updatePeriod(o))}),r(1),n()}if(t&2){let e=a.$implicit,l=c(3);O("active",l.currentPeriod===e),s(),b(" ",e," ")}}function za(t,a){if(t&1&&(i(0,"div",42)(1,"div",43),g(2,$a,2,3,"button",44),n()()),t&2){let e=c(2);s(2),m("ngForOf",e.periods)}}function qa(t,a){if(t&1&&(i(0,"div",42)(1,"span",46),r(2),n()()),t&2){let e=c(2);s(2),p(e.currentPeriod)}}function Ya(t,a){if(t&1){let e=w();i(0,"input",47),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayScore,o)||(d.awayScore=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.awayScore)}}function Ka(t,a){if(t&1&&(i(0,"span",48),r(1),n()),t&2){let e=c(2);s(),p(e.awayScore)}}function Xa(t,a){if(t&1){let e=w();i(0,"input",47),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeScore,o)||(d.homeScore=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.homeScore)}}function Qa(t,a){if(t&1&&(i(0,"span",48),r(1),n()),t&2){let e=c(2);s(),p(e.homeScore)}}function Za(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.totalShots,o)||(d.awayStats.totalShots=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.awayStats.totalShots)}}function Ja(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.awayStats.totalShots)}}function er(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.totalShots,o)||(d.homeStats.totalShots=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.homeStats.totalShots)}}function tr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.homeStats.totalShots)}}function ir(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.hits,o)||(d.awayStats.hits=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.awayStats.hits)}}function nr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.awayStats.hits)}}function ar(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.hits,o)||(d.homeStats.hits=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.homeStats.hits)}}function rr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.homeStats.hits)}}function or(t,a){if(t&1){let e=w();i(0,"div",50)(1,"input",51),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.timeOnAttack.minutes,o)||(d.awayStats.timeOnAttack.minutes=o),f(o)}),n(),i(2,"span"),r(3,":"),n(),i(4,"input",51),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.timeOnAttack.seconds,o)||(d.awayStats.timeOnAttack.seconds=o),f(o)}),n()()}if(t&2){let e=c(2);s(),x("ngModel",e.awayStats.timeOnAttack.minutes),s(3),x("ngModel",e.awayStats.timeOnAttack.seconds)}}function sr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.formatTime(e.awayStats.timeOnAttack.minutes,e.awayStats.timeOnAttack.seconds))}}function lr(t,a){if(t&1){let e=w();i(0,"div",50)(1,"input",51),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.timeOnAttack.minutes,o)||(d.homeStats.timeOnAttack.minutes=o),f(o)}),n(),i(2,"span"),r(3,":"),n(),i(4,"input",51),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.timeOnAttack.seconds,o)||(d.homeStats.timeOnAttack.seconds=o),f(o)}),n()()}if(t&2){let e=c(2);s(),x("ngModel",e.homeStats.timeOnAttack.minutes),s(3),x("ngModel",e.homeStats.timeOnAttack.seconds)}}function dr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.formatTime(e.homeStats.timeOnAttack.minutes,e.homeStats.timeOnAttack.seconds))}}function cr(t,a){if(t&1){let e=w();i(0,"input",52),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.passingPercentage,o)||(d.awayStats.passingPercentage=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.awayStats.passingPercentage)}}function mr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),b("",e.awayStats.passingPercentage,"%")}}function pr(t,a){if(t&1){let e=w();i(0,"input",52),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.passingPercentage,o)||(d.homeStats.passingPercentage=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.homeStats.passingPercentage)}}function gr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),b("",e.homeStats.passingPercentage,"%")}}function ur(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.faceoffsWon,o)||(d.awayStats.faceoffsWon=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.awayStats.faceoffsWon)}}function fr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.awayStats.faceoffsWon)}}function _r(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.faceoffsWon,o)||(d.homeStats.faceoffsWon=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.homeStats.faceoffsWon)}}function hr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.homeStats.faceoffsWon)}}function yr(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.penaltyMinutes,o)||(d.awayStats.penaltyMinutes=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.awayStats.penaltyMinutes)}}function xr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.awayStats.penaltyMinutes)}}function vr(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.penaltyMinutes,o)||(d.homeStats.penaltyMinutes=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.homeStats.penaltyMinutes)}}function Sr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.homeStats.penaltyMinutes)}}function br(t,a){if(t&1){let e=w();i(0,"div",53)(1,"input",54),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.powerplays.successful,o)||(d.awayStats.powerplays.successful=o),f(o)}),n(),i(2,"span"),r(3,"/"),n(),i(4,"input",54),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.powerplays.total,o)||(d.awayStats.powerplays.total=o),f(o)}),n()()}if(t&2){let e=c(2);s(),x("ngModel",e.awayStats.powerplays.successful),s(3),x("ngModel",e.awayStats.powerplays.total)}}function wr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.formatPowerplays(e.awayStats.powerplays.successful,e.awayStats.powerplays.total))}}function Cr(t,a){if(t&1){let e=w();i(0,"div",53)(1,"input",54),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.powerplays.successful,o)||(d.homeStats.powerplays.successful=o),f(o)}),n(),i(2,"span"),r(3,"/"),n(),i(4,"input",54),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.powerplays.total,o)||(d.homeStats.powerplays.total=o),f(o)}),n()()}if(t&2){let e=c(2);s(),x("ngModel",e.homeStats.powerplays.successful),s(3),x("ngModel",e.homeStats.powerplays.total)}}function Er(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.formatPowerplays(e.homeStats.powerplays.successful,e.homeStats.powerplays.total))}}function Pr(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.powerplayMinutes,o)||(d.awayStats.powerplayMinutes=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.awayStats.powerplayMinutes)}}function Tr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.awayStats.powerplayMinutes)}}function Ir(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.powerplayMinutes,o)||(d.homeStats.powerplayMinutes=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.homeStats.powerplayMinutes)}}function Mr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.homeStats.powerplayMinutes)}}function kr(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.awayStats.shorthandedGoals,o)||(d.awayStats.shorthandedGoals=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.awayStats.shorthandedGoals)}}function Or(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.awayStats.shorthandedGoals)}}function Ar(t,a){if(t&1){let e=w();i(0,"input",49),S("ngModelChange",function(o){u(e);let d=c(2);return v(d.homeStats.shorthandedGoals,o)||(d.homeStats.shorthandedGoals=o),f(o)}),n()}if(t&2){let e=c(2);x("ngModel",e.homeStats.shorthandedGoals)}}function Dr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);s(),p(e.homeStats.shorthandedGoals)}}function Rr(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.goals,o)||(d.goals=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.goals)}}function Gr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.goals)}}function Nr(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.assists,o)||(d.assists=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.assists)}}function Vr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.assists)}}function Lr(t,a){if(t&1){let e=w();i(0,"input",58),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.plusMinus,o)||(d.plusMinus=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.plusMinus)}}function Wr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.plusMinus)}}function Fr(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.shots,o)||(d.shots=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.shots)}}function Ur(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.shots)}}function Br(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.pim,o)||(d.pim=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.pim)}}function Hr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.pim)}}function jr(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.hits,o)||(d.hits=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.hits)}}function $r(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.hits)}}function zr(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.ppg,o)||(d.ppg=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.ppg)}}function qr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.ppg)}}function Yr(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.shg,o)||(d.shg=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.shg)}}function Kr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.shg)}}function Xr(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.fot,o)||(d.fot=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.fot)}}function Qr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.fot)}}function Zr(t,a){if(t&1){let e=w();i(0,"input",57),S("ngModelChange",function(o){u(e);let d=c().$implicit;return v(d.fow,o)||(d.fow=o),f(o)}),n()}if(t&2){let e=c().$implicit;x("ngModel",e.fow)}}function Jr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;s(),p(e.fow)}}function eo(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),n(),i(3,"td"),r(4),n(),i(5,"td"),r(6),n(),i(7,"td"),g(8,Rr,1,1,"input",55)(9,Gr,2,1,"span",27),n(),i(10,"td"),g(11,Nr,1,1,"input",55)(12,Vr,2,1,"span",27),n(),i(13,"td"),r(14),n(),i(15,"td"),g(16,Lr,1,1,"input",56)(17,Wr,2,1,"span",27),n(),i(18,"td"),g(19,Fr,1,1,"input",55)(20,Ur,2,1,"span",27),n(),i(21,"td"),r(22),n(),i(23,"td"),g(24,Br,1,1,"input",55)(25,Hr,2,1,"span",27),n(),i(26,"td"),g(27,jr,1,1,"input",55)(28,$r,2,1,"span",27),n(),i(29,"td"),g(30,zr,1,1,"input",55)(31,qr,2,1,"span",27),n(),i(32,"td"),g(33,Yr,1,1,"input",55)(34,Kr,2,1,"span",27),n(),i(35,"td"),g(36,Xr,1,1,"input",55)(37,Qr,2,1,"span",27),n(),i(38,"td"),g(39,Zr,1,1,"input",55)(40,Jr,2,1,"span",27),n(),i(41,"td"),r(42),n()()),t&2){let e=a.$implicit,l=c(2);s(2),p(e.number),s(2),p(e.name),s(2),p(e.position),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),p(e.points),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),p(l.formatPercentage(e.shotPercentage)),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),m("ngIf",l.isEditing),s(),m("ngIf",!l.isEditing),s(2),p(l.formatPercentage(e.foPercentage))}}function to(t,a){if(t&1){let e=w();i(0,"div",7)(1,"div",8)(2,"div",9),g(3,ja,2,1,"button",10),i(4,"div",11),r(5),n(),g(6,za,3,1,"div",12)(7,qa,3,1,"div",12),i(8,"div",13)(9,"div",14),_(10,"img",15),i(11,"span",16),r(12),n()(),i(13,"div",17),g(14,Ya,1,1,"input",18)(15,Ka,2,1,"span",19),i(16,"span",20),r(17,"-"),n(),g(18,Xa,1,1,"input",18)(19,Qa,2,1,"span",19),n(),i(20,"div",14)(21,"span",16),r(22),n(),_(23,"img",15),n()()(),i(24,"div",21)(25,"h5",22),r(26,"Game Statistics"),n(),i(27,"div",23)(28,"div",24)(29,"div",25),g(30,Za,1,1,"input",26)(31,Ja,2,1,"span",27),n(),i(32,"div",28),r(33,"TOTAL SHOTS"),n(),i(34,"div",29),g(35,er,1,1,"input",26)(36,tr,2,1,"span",27),n()(),i(37,"div",24)(38,"div",25),g(39,ir,1,1,"input",26)(40,nr,2,1,"span",27),n(),i(41,"div",28),r(42,"HITS"),n(),i(43,"div",29),g(44,ar,1,1,"input",26)(45,rr,2,1,"span",27),n()(),i(46,"div",24)(47,"div",25),g(48,or,5,2,"div",30)(49,sr,2,1,"span",27),n(),i(50,"div",28),r(51,"TIME ON ATTACK"),n(),i(52,"div",29),g(53,lr,5,2,"div",30)(54,dr,2,1,"span",27),n()(),i(55,"div",24)(56,"div",25),g(57,cr,1,1,"input",31)(58,mr,2,1,"span",27),n(),i(59,"div",28),r(60,"PASSING"),n(),i(61,"div",29),g(62,pr,1,1,"input",31)(63,gr,2,1,"span",27),n()(),i(64,"div",24)(65,"div",25),g(66,ur,1,1,"input",26)(67,fr,2,1,"span",27),n(),i(68,"div",28),r(69,"FACEOFFS WON"),n(),i(70,"div",29),g(71,_r,1,1,"input",26)(72,hr,2,1,"span",27),n()(),i(73,"div",24)(74,"div",25),g(75,yr,1,1,"input",26)(76,xr,2,1,"span",27),n(),i(77,"div",28),r(78,"PENALTY MINUTES"),n(),i(79,"div",29),g(80,vr,1,1,"input",26)(81,Sr,2,1,"span",27),n()(),i(82,"div",24)(83,"div",25),g(84,br,5,2,"div",32)(85,wr,2,1,"span",27),n(),i(86,"div",28),r(87,"POWERPLAYS"),n(),i(88,"div",29),g(89,Cr,5,2,"div",32)(90,Er,2,1,"span",27),n()(),i(91,"div",24)(92,"div",25),g(93,Pr,1,1,"input",26)(94,Tr,2,1,"span",27),n(),i(95,"div",28),r(96,"POWERPLAY MINUTES"),n(),i(97,"div",29),g(98,Ir,1,1,"input",26)(99,Mr,2,1,"span",27),n()(),i(100,"div",24)(101,"div",25),g(102,kr,1,1,"input",26)(103,Or,2,1,"span",27),n(),i(104,"div",28),r(105,"SHORTHANDED GOALS"),n(),i(106,"div",29),g(107,Ar,1,1,"input",26)(108,Dr,2,1,"span",27),n()()()(),i(109,"div",33)(110,"div",7)(111,"div",34)(112,"h5",35),r(113,"Player Statistics"),n(),i(114,"div",36)(115,"button",37),P("click",function(){u(e);let o=c();return f(o.selectedTeamView="home")}),r(116),n(),i(117,"button",37),P("click",function(){u(e);let o=c();return f(o.selectedTeamView="away")}),r(118),n()()(),i(119,"div",8)(120,"div",38)(121,"table",39)(122,"thead")(123,"tr")(124,"th"),r(125,"#"),n(),i(126,"th"),r(127,"Player"),n(),i(128,"th"),r(129,"POS"),n(),i(130,"th"),r(131,"G"),n(),i(132,"th"),r(133,"A"),n(),i(134,"th"),r(135,"PTS"),n(),i(136,"th"),r(137,"+/-"),n(),i(138,"th"),r(139,"SHOTS"),n(),i(140,"th"),r(141,"S%"),n(),i(142,"th"),r(143,"PIM"),n(),i(144,"th"),r(145,"HITS"),n(),i(146,"th"),r(147,"PPG"),n(),i(148,"th"),r(149,"SHG"),n(),i(150,"th"),r(151,"FOT"),n(),i(152,"th"),r(153,"FOW"),n(),i(154,"th"),r(155,"FO%"),n()()(),i(156,"tbody"),g(157,eo,43,26,"tr",40),n()()()()()()()()}if(t&2){let e=c();s(3),m("ngIf",e.canEditScores),s(2),W("W",e.game.week," ",e.game.day),s(),m("ngIf",e.isEditing&&e.canEditScores),s(),m("ngIf",!e.isEditing),s(3),m("src",e.awayTeamLogo,Y)("alt",e.awayTeamName),s(2),p(e.awayTeamName),s(2),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),p(e.homeTeamName),s(),m("src",e.homeTeamLogo,Y)("alt",e.homeTeamName),s(7),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(3),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(4),m("ngIf",e.isEditing),s(),m("ngIf",!e.isEditing),s(7),O("btn-primary",e.selectedTeamView==="home")("btn-outline-primary",e.selectedTeamView==="away"),s(),b(" ",e.homeTeamName," "),s(),O("btn-primary",e.selectedTeamView==="away")("btn-outline-primary",e.selectedTeamView==="home"),s(),b(" ",e.awayTeamName," "),s(39),m("ngForOf",e.getDisplayPlayerStats())}}function io(t,a){t&1&&(i(0,"div",59),r(1," Game not found "),n())}var ot=class t{constructor(a,e,l){this.route=a;this.firestore=e;this.authService=l;this.gameId=this.route.snapshot.paramMap.get("gameId")||"",this.teamId=this.route.snapshot.paramMap.get("teamId")||""}gameId;teamId;game;loading=!0;awayTeamLogo="";awayTeamName="";homeTeamLogo="";homeTeamName="";awayScore=0;homeScore=0;canEditScores=!1;isEditing=!1;currentPeriod="1st";periods=["1st","2nd","3rd","OT","Final"];selectedTeamView="home";homeStats={totalShots:0,hits:0,timeOnAttack:{minutes:0,seconds:0},passingPercentage:0,faceoffsWon:0,penaltyMinutes:0,powerplays:{successful:0,total:0},powerplayMinutes:0,shorthandedGoals:0};awayStats={totalShots:0,hits:0,timeOnAttack:{minutes:0,seconds:0},passingPercentage:0,faceoffsWon:0,penaltyMinutes:0,powerplays:{successful:0,total:0},powerplayMinutes:0,shorthandedGoals:0};homePlayerStats=[];awayPlayerStats=[];ngOnInit(){return E(this,null,function*(){this.authService.effectiveRoles.subscribe(a=>{this.canEditScores=a.some(e=>["developer","commissioner","stats monkey","gm"].includes(e))}),yield this.loadGameData()})}loadGameData(){return E(this,null,function*(){if(this.gameId&&this.teamId){let a=A(this.firestore,`teams/${this.teamId}/games/${this.gameId}`),e=yield F(a);if(e.exists()){this.game=j({id:e.id},e.data()),this.awayScore=this.game.awayScore||0,this.homeScore=this.game.homeScore||0,this.currentPeriod=this.game.period||"1st",this.game.homeStats&&(this.homeStats=j(j({},this.homeStats),this.game.homeStats)),this.game.awayStats&&(this.awayStats=j(j({},this.awayStats),this.game.awayStats));let l=A(this.firestore,`teams/${this.game.homeTeamId}`),o=yield F(l);if(o.exists()){let h=o.data();this.homeTeamLogo=h.logoUrl||"",this.homeTeamName=h.mascot||""}let d=A(this.firestore,`teams/${this.game.awayTeamId}`),y=yield F(d);if(y.exists()){let h=y.data();this.awayTeamLogo=h.logoUrl||"",this.awayTeamName=h.mascot||""}yield this.loadPlayerStats()}}this.loading=!1})}loadPlayerStats(){return E(this,null,function*(){let a=M(this.firestore,`teams/${this.game.homeTeamId}/roster`),e=yield k(a);this.homePlayerStats=e.docs.map(d=>{let y=d.data(),h=this.game.homePlayerStats?.[d.id]||{},C=h.fow||0,I=h.fot||0;return{id:d.id,number:y.jerseyNumber||0,name:`${y.firstName} ${y.lastName}`,position:y.position||"",goals:h.goals||0,assists:h.assists||0,points:(h.goals||0)+(h.assists||0),plusMinus:h.plusMinus||0,shots:h.shots||0,shotPercentage:h.shots?(h.goals||0)/h.shots*100:0,pim:h.pim||0,hits:h.hits||0,ppg:h.ppg||0,shg:h.shg||0,fot:I,fow:C,foPercentage:I>0?C/I*100:0}}).sort((d,y)=>d.number-y.number);let l=M(this.firestore,`teams/${this.game.awayTeamId}/roster`),o=yield k(l);this.awayPlayerStats=o.docs.map(d=>{let y=d.data(),h=this.game.awayPlayerStats?.[d.id]||{},C=h.fow||0,I=h.fot||0;return{id:d.id,number:y.jerseyNumber||0,name:`${y.firstName} ${y.lastName}`,position:y.position||"",goals:h.goals||0,assists:h.assists||0,points:(h.goals||0)+(h.assists||0),plusMinus:h.plusMinus||0,shots:h.shots||0,shotPercentage:h.shots?(h.goals||0)/h.shots*100:0,pim:h.pim||0,hits:h.hits||0,ppg:h.ppg||0,shg:h.shg||0,fot:I,fow:C,foPercentage:I>0?C/I*100:0}}).sort((d,y)=>d.number-y.number)})}saveGameData(){return E(this,null,function*(){if(!this.game||!this.canEditScores)return;let a={homeScore:this.homeScore,awayScore:this.awayScore,period:this.currentPeriod,homeStats:this.homeStats,awayStats:this.awayStats,homePlayerStats:this.createPlayerStatsMap(this.homePlayerStats),awayPlayerStats:this.createPlayerStatsMap(this.awayPlayerStats)},e=A(this.firestore,`teams/${this.game.homeTeamId}/games/${this.gameId}`),l=A(this.firestore,`teams/${this.game.awayTeamId}/games/${this.gameId}`);yield Promise.all([ve(e,a),ve(l,a)]),yield this.loadGameData(),this.isEditing=!1})}createPlayerStatsMap(a){let e={};return a.forEach(l=>{e[l.id]={goals:l.goals,assists:l.assists,plusMinus:l.plusMinus,shots:l.shots,pim:l.pim,hits:l.hits,ppg:l.ppg,shg:l.shg,fot:l.fot,fow:l.fow}}),e}toggleEdit(){this.canEditScores&&(this.isEditing?this.saveGameData():this.isEditing=!0)}updatePeriod(a){return E(this,null,function*(){this.canEditScores&&(this.currentPeriod=a,yield this.saveGameData())})}formatTime(a,e){return`${a.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}formatPowerplays(a,e){return`${a}/${e}`}formatPercentage(a){return`${a.toFixed(1)}%`}getDisplayPlayerStats(){return this.selectedTeamView==="home"?this.homePlayerStats:this.awayPlayerStats}getDisplayTeamName(){return this.selectedTeamView==="home"?this.homeTeamName:this.awayTeamName}static \u0275fac=function(e){return new(e||t)(te(Ft),te(oe),te(H))};static \u0275cmp=V({type:t,selectors:[["app-game-detail"]],decls:4,vars:3,consts:[[1,"container","mt-4"],["class","text-center",4,"ngIf"],["class","card",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"card"],[1,"card-body"],[1,"scoreboard"],["class","edit-button",3,"click",4,"ngIf"],[1,"game-info"],["class","period-indicator",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"team-section"],[1,"team-logo",3,"src","alt"],[1,"team-name"],[1,"score-section"],["type","number","class","score-input","min","0",3,"ngModel","ngModelChange",4,"ngIf"],["class","score-display",4,"ngIf"],[1,"score-divider"],[1,"game-stats","mt-4"],[1,"text-center","mb-4"],[1,"stats-grid"],[1,"stat-row"],[1,"away-stat"],["type","number","class","stat-input",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"stat-label"],[1,"home-stat"],["class","time-input-group",4,"ngIf"],["type","number","class","stat-input","min","0","max","100",3,"ngModel","ngModelChange",4,"ngIf"],["class","powerplay-input-group",4,"ngIf"],[1,"player-stats","mt-4"],[1,"card-header","bg-dark","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn-group"],[1,"btn",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"edit-button",3,"click"],[1,"period-indicator"],[1,"period-buttons"],["class","period-button",3,"active","click",4,"ngFor","ngForOf"],[1,"period-button",3,"click"],[1,"period-display"],["type","number","min","0",1,"score-input",3,"ngModelChange","ngModel"],[1,"score-display"],["type","number",1,"stat-input",3,"ngModelChange","ngModel"],[1,"time-input-group"],["type","number","min","0","max","59",1,"time-input",3,"ngModelChange","ngModel"],["type","number","min","0","max","100",1,"stat-input",3,"ngModelChange","ngModel"],[1,"powerplay-input-group"],["type","number","min","0",1,"powerplay-input",3,"ngModelChange","ngModel"],["type","number","class","form-control form-control-sm stat-input","min","0",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control form-control-sm stat-input",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","min","0",1,"form-control","form-control-sm","stat-input",3,"ngModelChange","ngModel"],["type","number",1,"form-control","form-control-sm","stat-input",3,"ngModelChange","ngModel"],[1,"alert","alert-warning"]],template:function(e,l){e&1&&(i(0,"div",0),g(1,Ha,4,0,"div",1)(2,to,158,62,"div",2)(3,io,2,0,"div",3),n()),e&2&&(s(),m("ngIf",l.loading),s(),m("ngIf",!l.loading&&l.game),s(),m("ngIf",!l.loading&&!l.game))},dependencies:[X,ne,K,ee,ae,Re,Z,Ge,Ye,J],styles:[".scoreboard[_ngcontent-%COMP%]{background:#1a1a1a;color:#fff;padding:2rem;border-radius:10px;margin-bottom:2rem;position:relative}.period-indicator[_ngcontent-%COMP%]{position:absolute;top:1.5rem;left:50%;transform:translate(-50%);display:flex;flex-direction:column;align-items:center;gap:.5rem}.period-button[_ngcontent-%COMP%]{background:#333;border:none;color:#999;padding:.25rem .75rem;border-radius:4px;cursor:pointer}.period-button.active[_ngcontent-%COMP%]{background:#666;color:#fff}.team-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;min-width:200px;justify-content:center}.team-logo[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:contain;border-radius:50%}.score-input[_ngcontent-%COMP%]{width:80px;font-size:2.5rem;font-weight:700;background:transparent;border:2px solid #333;border-radius:8px;color:#fff;text-align:center;padding:.25rem}.score-display[_ngcontent-%COMP%]{width:80px;font-size:2.5rem;font-weight:700;text-align:center;color:#fff}.game-stats[_ngcontent-%COMP%]{background:#1a1a1a;color:#fff;padding:2rem;border-radius:10px}.stat-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1fr;align-items:center;gap:1rem;padding:.5rem;border-bottom:1px solid #333}.stat-input[_ngcontent-%COMP%]{width:50px;background:transparent;border:1px solid #444;color:#fff;padding:.25rem;text-align:center}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{color:#fff;font-size:.9rem}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#1a1a1a;border-color:#333;color:#999}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:#333;background:#1a1a1a;color:#fff}"]})};var st=t=>()=>{let a=G(H),e=G(B);return a.effectiveRoles.pipe(Be(l=>l.some(d=>t.includes(d))?!0:(e.navigate(["/unauthorized"]),!1)))};var de=()=>{let t=G(H),a=G(B);return t.currentUser.pipe(Be(e=>e?!0:(a.navigate(["/login"]),!1)))};var Si=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Qe,title:"Login"},{path:"dashboard",component:Ze,title:"Dashboard",canActivate:[de]},{path:"register",component:Je,title:"Register"},{path:"verify-email",component:et},{path:"forgot-password",component:tt},{path:"analytics",component:nt,title:"Stats and Standings",canActivate:[de]},{path:"games",component:it,title:"Games",canActivate:[de]},{path:"games/:teamId/:gameId",component:ot,title:"Game Details",canActivate:[de]},{path:"teams",loadComponent:()=>import("./chunk-BP4PE3SA.js").then(t=>t.Teams),title:"Teams",canActivate:[de]},{path:"teams/:id",loadComponent:()=>import("./chunk-A7K5T7LH.js").then(t=>t.TeamDetail),title:"Team Details",canActivate:[de]},{path:"player",component:rt,title:"Player",canActivate:[de]},{path:"headquarters",loadComponent:()=>import("./chunk-7CRMTN3M.js").then(t=>t.Headquarters),title:"Headquarters",canActivate:[de,st(["developer","commissioner"])]},{path:"progression-tracker",loadComponent:()=>import("./chunk-Z7SC5T7Y.js").then(t=>t.ProgressionTracker),title:"Progression Tracker",canActivate:[de,st(["developer","commissioner","progression tracker"])]},{path:"draft",loadComponent:()=>import("./chunk-6PATZQ3H.js").then(t=>t.Draft),title:"Draft Central",canActivate:[de,st(["developer","commissioner","gm"])]},{path:"**",redirectTo:"/login"}];var Ti="firebasestorage.googleapis.com",no="storageBucket",ao=2*60*1e3,ro=10*60*1e3;var ye=class t extends Kt{constructor(a,e,l=0){super(_t(a),`Firebase Storage: ${e} (${_t(a)})`),this.status_=l,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return _t(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},be=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(be||{});function _t(t){return"storage/"+t}function oo(){let t="An unknown error occurred, please check the error payload for server response.";return new ye(be.UNKNOWN,t)}function so(){return new ye(be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lo(){return new ye(be.CANCELED,"User canceled the upload/download.")}function co(t){return new ye(be.INVALID_URL,"Invalid URL '"+t+"'.")}function mo(t){return new ye(be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bi(t){return new ye(be.INVALID_ARGUMENT,t)}function Ii(){return new ye(be.APP_DELETED,"The Firebase app was deleted.")}function po(t){return new ye(be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Se=class t{constructor(a,e){this.bucket=a,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,e){let l;try{l=t.makeFromUrl(a,e)}catch{return new t(a,"")}if(l.path==="")return l;throw mo(a)}static makeFromUrl(a,e){let l=null,o="([A-Za-z0-9.\\-_]+)";function d(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}let y="(/(.*))?$",h=new RegExp("^gs://"+o+y,"i"),C={bucket:1,path:3};function I(Q){Q.path_=decodeURIComponent(Q.path)}let T="v[A-Za-z0-9_]+",L=e.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",$=new RegExp(`^https?://${L}/${T}/b/${o}/o${R}`,"i"),z={bucket:1,path:3},ie=e===Ti?"(?:storage.googleapis.com|storage.cloud.google.com)":e,q="([^?#]*)",ce=new RegExp(`^https?://${ie}/${o}/${q}`,"i"),U=[{regex:h,indices:C,postModify:d},{regex:$,indices:z,postModify:I},{regex:ce,indices:{bucket:1,path:2},postModify:I}];for(let Q=0;Q<U.length;Q++){let me=U[Q],ct=me.regex.exec(a);if(ct){let Vi=ct[me.indices.bucket],mt=ct[me.indices.path];mt||(mt=""),l=new t(Vi,mt),me.postModify(l);break}}if(l==null)throw co(a);return l}},ht=class{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}};function go(t,a,e){let l=1,o=null,d=null,y=!1,h=0;function C(){return h===2}let I=!1;function T(...q){I||(I=!0,a.apply(null,q))}function L(q){o=setTimeout(()=>{o=null,t($,C())},q)}function R(){d&&clearTimeout(d)}function $(q,...ce){if(I){R();return}if(q){R(),T.call(null,q,...ce);return}if(C()||y){R(),T.call(null,q,...ce);return}l<64&&(l*=2);let U;h===1?(h=2,U=0):U=(l+Math.random())*1e3,L(U)}let z=!1;function ie(q){z||(z=!0,R(),!I&&(o!==null?(q||(h=2),clearTimeout(o),L(0)):q||(h=1)))}return L(0),d=setTimeout(()=>{y=!0,ie(!0)},e),ie}function uo(t){t(!1)}function fo(t){return t!==void 0}function wi(t,a,e,l){if(l<a)throw bi(`Invalid value for '${t}'. Expected ${a} or greater.`);if(l>e)throw bi(`Invalid value for '${t}'. Expected ${e} or less.`)}function _o(t){let a=encodeURIComponent,e="?";for(let l in t)if(t.hasOwnProperty(l)){let o=a(l)+"="+a(t[l]);e=e+o+"&"}return e=e.slice(0,-1),e}var yt=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(yt||{});function ho(t,a){let e=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,d=a.indexOf(t)!==-1;return e||o||d}var xt=class{constructor(a,e,l,o,d,y,h,C,I,T,L,R=!0,$=!1){this.url_=a,this.method_=e,this.headers_=l,this.body_=o,this.successCodes_=d,this.additionalRetryCodes_=y,this.callback_=h,this.errorCallback_=C,this.timeout_=I,this.progressCallback_=T,this.connectionFactory_=L,this.retry=R,this.isUsingEmulator=$,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,ie)=>{this.resolve_=z,this.reject_=ie,this.start_()})}start_(){let a=(l,o)=>{if(o){l(!1,new Le(!1,null,!0));return}let d=this.connectionFactory_();this.pendingConnection_=d;let y=h=>{let C=h.loaded,I=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(C,I)};this.progressCallback_!==null&&d.addUploadProgressListener(y),d.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&d.removeUploadProgressListener(y),this.pendingConnection_=null;let h=d.getErrorCode()===yt.NO_ERROR,C=d.getStatus();if(!h||ho(C,this.additionalRetryCodes_)&&this.retry){let T=d.getErrorCode()===yt.ABORT;l(!1,new Le(!1,null,T));return}let I=this.successCodes_.indexOf(C)!==-1;l(!0,new Le(I,d))})},e=(l,o)=>{let d=this.resolve_,y=this.reject_,h=o.connection;if(o.wasSuccessCode)try{let C=this.callback_(h,h.getResponse());fo(C)?d(C):d()}catch(C){y(C)}else if(h!==null){let C=oo();C.serverResponse=h.getErrorText(),this.errorCallback_?y(this.errorCallback_(h,C)):y(C)}else if(o.canceled){let C=this.appDelete_?Ii():lo();y(C)}else{let C=so();y(C)}};this.canceled_?e(!1,new Le(!1,null,!0)):this.backoffId_=go(a,e,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,this.backoffId_!==null&&uo(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Le=class{constructor(a,e,l){this.wasSuccessCode=a,this.connection=e,this.canceled=!!l}};function yo(t,a){a!==null&&a.length>0&&(t.Authorization="Firebase "+a)}function xo(t,a){t["X-Firebase-Storage-Version"]="webjs/"+(a??"AppManager")}function vo(t,a){a&&(t["X-Firebase-GMPID"]=a)}function So(t,a){a!==null&&(t["X-Firebase-AppCheck"]=a)}function bo(t,a,e,l,o,d,y=!0,h=!1){let C=_o(t.urlParams),I=t.url+C,T=Object.assign({},t.headers);return vo(T,a),yo(T,e),xo(T,d),So(T,l),new xt(I,t.method,T,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,y,h)}function wo(t){if(t.length===0)return null;let a=t.lastIndexOf("/");return a===-1?"":t.slice(0,a)}function Co(t){let a=t.lastIndexOf("/",t.length-2);return a===-1?t:t.slice(a+1)}var Vl=256*1024;var vt=class t{constructor(a,e){this._service=a,e instanceof Se?this._location=e:this._location=Se.makeFromUrl(e,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,e){return new t(a,e)}get root(){let a=new Se(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Co(this._location.path)}get storage(){return this._service}get parent(){let a=wo(this._location.path);if(a===null)return null;let e=new Se(this._location.bucket,a);return new t(this._service,e)}_throwIfRoot(a){if(this._location.path==="")throw po(a)}};function Ci(t,a){let e=a?.[no];return e==null?null:Se.makeFromBucketSpec(e,t)}function Eo(t,a,e,l={}){t.host=`${a}:${e}`;let o=$t(a);o&&(zt(`https://${t.host}/b`),Yt("Storage",!0)),t._isUsingEmulator=!0,t._protocol=o?"https":"http";let{mockUserToken:d}=l;d&&(t._overrideAuthToken=typeof d=="string"?d:qt(d,t.app.options.projectId))}var St=class{constructor(a,e,l,o,d,y=!1){this.app=a,this._authProvider=e,this._appCheckProvider=l,this._url=o,this._firebaseVersion=d,this._isUsingEmulator=y,this._bucket=null,this._host=Ti,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ao,this._maxUploadRetryTime=ro,this._requests=new Set,o!=null?this._bucket=Se.makeFromBucketSpec(o,this._host):this._bucket=Ci(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._url!=null?this._bucket=Se.makeFromBucketSpec(this._url,a):this._bucket=Ci(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){wi("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){wi("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){return E(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let a=this._authProvider.getImmediate({optional:!0});if(a){let e=yield a.getToken();if(e!==null)return e.accessToken}return null})}_getAppCheckToken(){return E(this,null,function*(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let a=this._appCheckProvider.getImmediate({optional:!0});return a?(yield a.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new vt(this,a)}_makeRequest(a,e,l,o,d=!0){if(this._deleted)return new ht(Ii());{let y=bo(a,this._appId,l,o,e,this._firebaseVersion,d,this._isUsingEmulator);return this._requests.add(y),y.getPromise().then(()=>this._requests.delete(y),()=>this._requests.delete(y)),y}}makeRequestWithTokens(a,e){return E(this,null,function*(){let[l,o]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(a,e,l,o).getPromise()})}},Ei="@firebase/storage",Pi="0.13.14";var Mi="storage";function ki(t=ii(),a){t=Xt(t);let l=Jt(t,Mi).getImmediate({identifier:a}),o=jt("storage");return o&&Oi(l,...o),l}function Oi(t,a,e,l={}){Eo(t,a,e,l)}function Po(t,{instanceIdentifier:a}){let e=t.getProvider("app").getImmediate(),l=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new St(e,l,o,a,ti)}function To(){Zt(new Qt(Mi,Po,"PUBLIC").setMultipleInstances(!0)),Fe(Ei,Pi,""),Fe(Ei,Pi,"esm2017")}To();var Ue=class{constructor(a){return a}},Ai="storage",bt=class{constructor(){return ri(Ai)}};var wt=new Et("angularfire2.storage-instances");function Io(t,a){let e=ai(Ai,t,a);return e&&new Ue(e)}function Mo(t){return(a,e)=>{let l=a.runOutsideAngular(()=>t(e));return new Ue(l)}}var ko={provide:bt,deps:[[new We,wt]]},Oo={provide:Ue,useFactory:Io,deps:[[new We,wt],li]};function Di(t,...a){return Fe("angularfire",ni.full,"gcs"),Pt([Oo,ko,{provide:wt,useFactory:Mo(t),multi:!0,deps:[Mt,Tt,oi,di,[new We,gi],[new We,pi],...a]}])}var Ri=si(ki,!0);var Gi={production:!0,firebase:{apiKey:"AIzaSyBSJztG4qQ9ddB24kYd3UHV0n1bnyLImO8",authDomain:"gohls-3033e.firebaseapp.com",projectId:"gohls-3033e",storageBucket:"gohls-3033e.firebasestorage.app",messagingSenderId:"1043263476189",appId:"1:1043263476189:web:18604bd169a5a513e22634"}};var Ao=Gi.firebase,Ni={providers:[Nt({eventCoalescing:!0}),Bt(Si),ci(()=>mi(Ao)),ui(()=>fi()),_i(()=>yi()),Di(()=>Ri())]};function Do(t,a){t&1&&(i(0,"li",8)(1,"a",18),r(2,"Draft"),n()())}function Ro(t,a){t&1&&(i(0,"li",8)(1,"a",19),r(2,"Headquarters"),n()())}function Go(t,a){t&1&&(i(0,"li",8)(1,"a",20),r(2,"Progressions"),n()())}function No(t,a){if(t&1&&(i(0,"option",26),r(1),n()),t&2){let e=a.$implicit;m("value",e),s(),p(e)}}function Vo(t,a){if(t&1){let e=w();i(0,"div",21)(1,"label",22),r(2,"View as:"),n(),i(3,"select",23),P("change",function(o){u(e);let d=c(2);return f(d.onRoleChange(o))}),i(4,"option",24),r(5,"Developer"),n(),g(6,No,2,2,"option",25),n()()}if(t&2){let e=c(2);s(6),m("ngForOf",e.allRoles)}}function Lo(t,a){if(t&1){let e=w();i(0,"nav",1)(1,"div",2)(2,"a",3),r(3,"GOHLS"),n(),i(4,"button",4),_(5,"span",5),n(),i(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),r(10,"Dashboard"),n()(),i(11,"li",8)(12,"a",10),r(13,"Teams"),n()(),i(14,"li",8)(15,"a",11),r(16,"Games"),n()(),i(17,"li",8)(18,"a",12),r(19,"Stats and Standings"),n()(),i(20,"li",8)(21,"a",13),r(22,"Player"),n()(),g(23,Do,3,0,"li",14)(24,Ro,3,0,"li",14)(25,Go,3,0,"li",14),n(),g(26,Vo,7,1,"div",15),i(27,"div",16)(28,"button",17),P("click",function(){u(e);let o=c();return f(o.logout())}),r(29,"Logout"),n()()()()()}if(t&2){let e=c();s(23),m("ngIf",e.viewAsRoles.includes("developer")||e.viewAsRoles.includes("commissioner")||e.viewAsRoles.includes("gm")),s(),m("ngIf",e.viewAsRoles.includes("developer")||e.viewAsRoles.includes("commissioner")),s(),m("ngIf",e.canSeeProgression),s(),m("ngIf",e.isDeveloper)}}var lt=class t{constructor(a,e){this.authService=a;this.router=e}isDeveloper=!1;isLoggedIn=!1;viewAsRoles=[];allRoles=["viewer","commissioner","gm","stats monkey","finance officer","progression tracker"];rolesSub;viewAsSub;userSub;allowedRolesForProgression=["developer","commissioner","progression tracker"];canSeeProgression=!1;ngOnInit(){this.userSub=this.authService.currentUser.subscribe(a=>{this.isLoggedIn=!!a}),this.rolesSub=this.authService.currentRoles.subscribe(a=>{this.isDeveloper=a.includes("developer")}),this.viewAsSub=this.authService.effectiveRoles.subscribe(a=>{this.viewAsRoles=a,this.canSeeProgression=a.some(e=>this.allowedRolesForProgression.includes(e))})}onRoleChange(a){let e=a.target.value;this.authService.setViewAsRole(e==="real"?null:e)}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}ngOnDestroy(){this.userSub?.unsubscribe(),this.rolesSub?.unsubscribe(),this.viewAsSub?.unsubscribe()}static \u0275fac=function(e){return new(e||t)(te(H),te(B))};static \u0275cmp=V({type:t,selectors:[["app-navbar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-light bg-light px-3",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light","px-3"],[1,"container-fluid"],["routerLink","/dashboard",1,"navbar-brand","fw-bold"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/dashboard",1,"nav-link"],["routerLink","/teams",1,"nav-link"],["routerLink","/games",1,"nav-link"],["routerLink","/analytics",1,"nav-link"],["routerLink","/player",1,"nav-link"],["class","nav-item",4,"ngIf"],["class","d-flex align-items-center me-3",4,"ngIf"],[1,"d-flex"],[1,"btn","btn-outline-danger",3,"click"],["routerLink","/draft",1,"nav-link"],["routerLink","/headquarters",1,"nav-link"],["routerLink","/progression-tracker",1,"nav-link"],[1,"d-flex","align-items-center","me-3"],[1,"me-2","mb-0"],[1,"form-select",3,"change"],["value","real"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,l){e&1&&g(0,Lo,30,4,"nav",0),e&2&&m("ngIf",l.isLoggedIn)},dependencies:[X,ne,K,ge,Ee],encapsulation:2})};function Wo(t,a){t&1&&_(0,"app-navbar")}var dt=class t{showNavbar=!0;router=G(B);title="GOHLS";constructor(){this.router.events.pipe(Ct(a=>a instanceof Wt)).subscribe(a=>{let e=["/login","/register","/forgot-password"];this.showNavbar=!e.includes(a.urlAfterRedirects)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(e,l){e&1&&(g(0,Wo,1,0,"app-navbar",0),_(1,"router-outlet")),e&2&&m("ngIf",l.showNavbar)},dependencies:[Ut,X,K,lt],encapsulation:2})};Lt(dt,Ni).catch(t=>console.error(t));
