import{a as Lt,b as Wt,c as Ft,d as Ut,e as q,f as Ee,g as Bt,h as ue}from"./chunk-FSTB6FAV.js";import{$a as At,$b as Te,Aa as H,Ac as ci,Bc as mi,Cc as pi,Da as g,Dc as Qe,Ec as gi,Fc as ui,Ga as Mt,Gc as fi,Ib as Vt,Jb as ae,Jc as se,Kb as X,Kc as _i,Lb as qe,Lc as Oe,Mb as Ye,Mc as O,Nb as Q,Nc as hi,O as Et,Oa as m,Oc as R,Pa as i,Pc as $,Q as W,Qa as n,Qc as A,R as Pt,Ra as _,Rc as yi,Sa as $e,Sb as Ht,Sc as ye,Ta as je,Tb as re,Tc as De,Ua as gt,Ub as ee,Uc as U,V as u,Va as kt,Vb as fe,Vc as Ge,W as f,Wa as Ot,Wb as _e,Wc as be,X as Tt,Xa as C,Xb as te,Xc as N,Ya as I,Yb as he,Za as c,Zb as Re,Zc as Y,_a as Dt,_b as Pe,a as K,ab as G,ac as Ie,b as ge,bb as ve,bc as Ke,c as E,ca as We,cb as r,cc as Ne,db as p,dc as Xe,eb as w,ec as ie,fb as Z,fc as $t,gb as Fe,gc as jt,hb as v,hc as zt,ib as b,ic as qt,jb as S,jc as Yt,kb as ze,kc as Kt,lb as Rt,lc as Xt,mb as ut,mc as Qt,na as z,nb as oe,nc as Zt,oa as It,ob as ke,oc as Jt,pb as Ce,pc as ei,q as He,qa as o,qb as Nt,qc as ti,rc as ii,sb as Gt,sc as Ue,tc as ni,ua as ne,uc as ai,vc as ri,w as Ct,wc as oi,xc as si,yc as li,zc as di}from"./chunk-75EH5XHB.js";function Li(t,a){if(t&1&&(i(0,"div",6)(1,"div",19),r(2),n()()),t&2){let e=c();o(2),w(" ",e.errorMessage," ")}}var Ze=class t{authService=W(Y);router=W(q);username="";password="";errorMessage="";login(){if(this.username===""){this.errorMessage="Please enter your username";return}if(this.password===""){this.errorMessage="Please enter your password";return}this.errorMessage="",this.authService.login(this.username,this.password).then(()=>{this.router.navigate(["/dashboard"]),this.username="",this.password="",this.errorMessage=""}).catch(a=>{console.error("Login failed:",a),a.code==="auth/user-not-found"?this.errorMessage="Username not found. Please check your username or register for a new account.":a.code==="auth/wrong-password"?this.errorMessage="Incorrect password. Please try again.":a.code==="auth/invalid-email"?this.errorMessage="Invalid email format.":a.message==="Username not found"?this.errorMessage="Username not found. Please check your username or register for a new account.":this.errorMessage="Login failed: "+a.message})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-login"]],decls:31,vars:3,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["class","mb-3",4,"ngIf"],["for","username",1,"form-label"],["type","text","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/register",2,"text-decoration","none"],[1,"text-danger"],["routerLink","/forgot-password",1,"text-dark",2,"text-decoration","none"],["role","alert",1,"alert","alert-danger"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1),_(2,"div",2),i(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),r(9,"Login"),n()(),g(10,Li,3,1,"div",8),i(11,"div",6)(12,"label",9),r(13,"Username"),n(),i(14,"input",10),S("ngModelChange",function(d){return b(l.username,d)||(l.username=d),d}),n()(),i(15,"div",6)(16,"label",11),r(17,"Password"),n(),i(18,"input",12),S("ngModelChange",function(d){return b(l.password,d)||(l.password=d),d}),n()(),i(19,"button",13),I("click",function(){return l.login()}),r(20," Login "),n(),i(21,"div",14)(22,"div",15)(23,"a",16),r(24,"Need Account? "),i(25,"span",17),r(26,"Register"),n()()(),i(27,"div",15)(28,"a",18),r(29,"Forgot Password? "),n()()()()()()(),_(30,"div",2),n()()),e&2&&(o(10),m("ngIf",l.errorMessage),o(4),v("ngModel",l.username),o(4),v("ngModel",l.password))},dependencies:[Q,X,ie,he,re,ee,fe,te,_e,ue,Ee],styles:[".container-fluid[_ngcontent-%COMP%]{background:#f8f9fa;min-height:100vh}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 8px 25px #0000001a}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.btn[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1.5rem;font-weight:500;transition:all .2s ease}.btn-info[_ngcontent-%COMP%]{background:#0d6efd;border-color:#0d6efd;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#0b5ed7;border-color:#0a58ca;transform:translateY(-1px)}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-dark[_ngcontent-%COMP%]{color:#495057!important}a[_ngcontent-%COMP%]{text-decoration:none;transition:color .2s ease}a[_ngcontent-%COMP%]:hover{color:#0d6efd!important}"]})};function Wi(t,a){t&1&&(i(0,"div",37),_(1,"div",38),i(2,"p",39),r(3,"Loading games..."),n()())}function Fi(t,a){t&1&&(i(0,"div",40),_(1,"i",41),i(2,"p",5),r(3,"No games scheduled for today"),n()())}function Ui(t,a){if(t&1){let e=C();i(0,"div",48)(1,"button",49),I("click",function(){u(e);let s=c(2);return f(s.previousGame())}),_(2,"i",50),n(),i(3,"button",51),I("click",function(){u(e);let s=c(2);return f(s.nextGame())}),_(4,"i",52),n()()}}function Bi(t,a){if(t&1&&(i(0,"div",69)(1,"span",70),r(2),n()()),t&2){let e=c().ngIf;o(),G("live",e.period&&e.period!=="Final")("final",e.period==="Final"),o(),w(" ",e.period||"Live"," ")}}function Hi(t,a){if(t&1&&_(0,"img",71),t&2){let e=c().ngIf;m("src",e.awayTeamLogo,z)("alt",e.awayTeam)}}function $i(t,a){t&1&&(i(0,"div",72)(1,"span",73),r(2,"VS"),n()())}function ji(t,a){if(t&1&&(i(0,"div",74)(1,"div",75)(2,"span",76),r(3),n(),i(4,"span",77),r(5,"-"),n(),i(6,"span",78),r(7),n()()()),t&2){let e=c().ngIf;o(3),p(e.awayScore||0),o(4),p(e.homeScore||0)}}function zi(t,a){if(t&1&&_(0,"img",71),t&2){let e=c().ngIf;m("src",e.homeTeamLogo,z)("alt",e.homeTeam)}}function qi(t,a){if(t&1&&(i(0,"div",53)(1,"div",54)(2,"div",55)(3,"span",56),r(4),n(),i(5,"span",57),r(6),n()(),g(7,Bi,3,5,"div",58),n(),i(8,"div",59)(9,"div",60),g(10,Hi,1,2,"img",61),i(11,"div",62)(12,"div",63),r(13),n(),i(14,"div",64),r(15,"Away"),n()()(),i(16,"div",65),g(17,$i,3,0,"div",66)(18,ji,8,2,"div",67),n(),i(19,"div",68)(20,"div",62)(21,"div",63),r(22),n(),i(23,"div",64),r(24,"Home"),n()(),g(25,zi,1,2,"img",61),n()()()),t&2){let e=a.ngIf,l=c(2);o(4),w("Week ",e.week),o(2),p(e.day),o(),m("ngIf",l.hasScore(e)),o(3),m("ngIf",e.awayTeamLogo),o(3),p(e.awayTeam),o(4),m("ngIf",!l.hasScore(e)),o(),m("ngIf",l.hasScore(e)),o(4),p(e.homeTeam),o(3),m("ngIf",e.homeTeamLogo)}}function Yi(t,a){if(t&1){let e=C();i(0,"button",81),I("click",function(){let s=u(e).index,d=c(3);return f(d.goToGame(s))}),n()}if(t&2){let e=a.index,l=c(3);G("active",e===l.currentGameIndex)}}function Ki(t,a){if(t&1&&(i(0,"div",79),g(1,Yi,1,2,"button",80),n()),t&2){let e=c(2);o(),m("ngForOf",e.todaysGames)}}function Xi(t,a){if(t&1&&(i(0,"div",82)(1,"small",83),_(2,"i",84),r(3),n()()),t&2){let e=c(2);o(3),w(" Auto-rotating every ",e.autoRotateInterval/1e3," seconds ")}}function Qi(t,a){if(t&1){let e=C();i(0,"div",42),g(1,Ui,5,0,"div",43),i(2,"div",44),I("click",function(){u(e);let s=c();return f(s.navigateToSpecificGame())}),g(3,qi,26,9,"div",45),n(),g(4,Ki,2,1,"div",46)(5,Xi,4,1,"div",47),n()}if(t&2){let e=c();o(),m("ngIf",e.todaysGames.length>1),o(2),m("ngIf",e.todaysGames[e.currentGameIndex]),o(),m("ngIf",e.todaysGames.length>1),o(),m("ngIf",e.todaysGames.length>1)}}function Zi(t,a){t&1&&(i(0,"div",37),_(1,"div",85),i(2,"p",39),r(3,"Loading users..."),n()())}function Ji(t,a){t&1&&(i(0,"div",40),_(1,"i",86),i(2,"p",5),r(3,"No new users recently"),n()())}function en(t,a){if(t&1&&(i(0,"small",83),r(1),n()),t&2){let e=c().$implicit;o(),Fe(" ",e.player.firstName," ",e.player.lastName," (",e.player.position,") ")}}function tn(t,a){t&1&&(i(0,"small",83),r(1,"No player"),n())}function nn(t,a){if(t&1&&(i(0,"span",96),r(1),n()),t&2){let e=c().$implicit;o(),p(e.player.teamName||"Free Agent")}}function an(t,a){if(t&1&&(i(0,"div",87)(1,"div",88)(2,"div",89),r(3),n(),i(4,"div",90)(5,"h6",91),r(6),n(),i(7,"div",92),g(8,en,2,3,"small",93)(9,tn,2,0,"small",93)(10,nn,2,1,"span",94),n()()(),i(11,"div",95)(12,"small",83),r(13),n()()()),t&2){let e=a.$implicit,l=c();o(3),w(" ",e.displayName.charAt(0)," "),o(3),p(e.displayName),o(2),m("ngIf",e.player),o(),m("ngIf",!e.player),o(),m("ngIf",e.player),o(3),w("Joined ",l.getTimeAgo(e.createdDate))}}function rn(t,a){t&1&&(i(0,"div",37),_(1,"div",97),i(2,"p",39),r(3,"Loading transactions..."),n()())}function on(t,a){t&1&&(i(0,"div",40),_(1,"i",98),i(2,"p",5),r(3,"No recent transactions"),n()())}function sn(t,a){if(t&1&&_(0,"img",113),t&2){let e=c(2).$implicit;m("src",e.tradeData.fromTeam.logo,z)("alt",e.tradeData.fromTeam.name)}}function ln(t,a){if(t&1&&(i(0,"div",114),r(1),n()),t&2){let e=a.$implicit;o(),w(" ",e," ")}}function dn(t,a){if(t&1&&_(0,"img",113),t&2){let e=c(2).$implicit;m("src",e.tradeData.toTeam.logo,z)("alt",e.tradeData.toTeam.name)}}function cn(t,a){if(t&1&&(i(0,"div",114),r(1),n()),t&2){let e=a.$implicit;o(),w(" ",e," ")}}function mn(t,a){if(t&1&&(i(0,"div",102)(1,"div",103)(2,"h6",5),r(3),n(),i(4,"small",83),r(5),n()(),i(6,"div",104)(7,"div",105),g(8,sn,1,2,"img",106),i(9,"div",107),r(10),n(),i(11,"div",108)(12,"small",109),r(13,"Traded:"),n(),g(14,ln,2,1,"div",110),n()(),i(15,"div",111),_(16,"i",112),n(),i(17,"div",105),g(18,dn,1,2,"img",106),i(19,"div",107),r(20),n(),i(21,"div",108)(22,"small",109),r(23,"Traded:"),n(),g(24,cn,2,1,"div",110),n()()()()),t&2){let e=c().$implicit,l=c();o(3),p(e.description),o(2),p(l.getTimeAgo(e.timestamp)),o(3),m("ngIf",e.tradeData.fromTeam.logo),o(2),p(e.tradeData.fromTeam.name),o(4),m("ngForOf",e.tradeData.offeredPlayers),o(4),m("ngIf",e.tradeData.toTeam.logo),o(2),p(e.tradeData.toTeam.name),o(4),m("ngForOf",e.tradeData.requestedPlayers)}}function pn(t,a){if(t&1&&_(0,"img",120),t&2){let e=c(2).$implicit;m("src",e.teamLogo,z)("alt",e.teamName)}}function gn(t,a){if(t&1&&_(0,"i"),t&2){let e=c(2).$implicit,l=c();ve(l.getTransactionIcon(e.type)+" "+l.getTransactionColor(e.type))}}function un(t,a){if(t&1&&(i(0,"div",115)(1,"div",116)(2,"div",117),g(3,pn,1,2,"img",118)(4,gn,1,2,"i",119),n(),i(5,"div",90)(6,"p",91),r(7),n(),i(8,"small",83),r(9),n()()()()),t&2){let e=c().$implicit,l=c();o(3),m("ngIf",e.teamLogo),o(),m("ngIf",!e.teamLogo),o(3),p(e.description),o(2),p(l.getTimeAgo(e.timestamp))}}function fn(t,a){if(t&1&&(i(0,"div",99),g(1,mn,25,8,"div",100)(2,un,10,4,"div",101),n()),t&2){let e=a.$implicit;o(),m("ngIf",e.type==="trade"&&e.tradeData),o(),m("ngIf",e.type!=="trade")}}var Je=class t{constructor(a,e,l){this.authService=a;this.firestore=e;this.router=l}user=null;userSub;today=new Date;newestUsers=[];recentTransactions=[];todaysGames=[];loadingUsers=!1;loadingTransactions=!1;loadingGames=!1;currentGameIndex=0;autoRotateTimer;ROTATION_INTERVAL=3e3;ngOnInit(){return E(this,null,function*(){this.userSub=this.authService.currentUser.subscribe(a=>{this.user=a}),yield Promise.all([this.loadNewestUsers(),this.loadRecentTransactions(),this.loadTodaysGames()]),this.startAutoRotation()})}ngOnDestroy(){this.userSub&&this.userSub.unsubscribe(),this.stopAutoRotation()}startAutoRotation(){this.stopAutoRotation(),this.todaysGames.length>1?(console.log(`\u{1F3A0} Starting carousel rotation: ${this.todaysGames.length} games, ${this.ROTATION_INTERVAL}ms interval`),this.autoRotateTimer=setInterval(()=>{let a=this.currentGameIndex;this.nextGame(),console.log(`\u{1F504} Carousel rotated from game ${a} to game ${this.currentGameIndex}`)},this.ROTATION_INTERVAL)):console.log(`\u{1F3A0} Not starting carousel rotation: only ${this.todaysGames.length} game(s)`)}stopAutoRotation(){this.autoRotateTimer&&(console.log("\u23F9\uFE0F Stopping carousel auto-rotation"),clearInterval(this.autoRotateTimer),this.autoRotateTimer=null)}nextGame(){this.todaysGames.length>1&&(this.currentGameIndex=(this.currentGameIndex+1)%this.todaysGames.length)}previousGame(){this.todaysGames.length>1&&(this.currentGameIndex=this.currentGameIndex===0?this.todaysGames.length-1:this.currentGameIndex-1,this.startAutoRotation())}goToGame(a){a>=0&&a<this.todaysGames.length&&(this.currentGameIndex=a,this.startAutoRotation())}navigateToSpecificGame(){let a=this.todaysGames[this.currentGameIndex];a&&a.gameId&&a.homeTeamId?this.router.navigate(["/games",a.homeTeamId,a.gameId]):this.router.navigate(["/games"])}loadNewestUsers(){return E(this,null,function*(){this.loadingUsers=!0;try{let a=O(this.firestore,"users"),e=yield A(a),l=yield Promise.all(e.docs.map(s=>E(this,null,function*(){let d=s.data(),y;try{let x=U(O(this.firestore,"players"),N("userId","==",s.id),N("status","==","active"),ye(1)),T=yield A(x);if(!T.empty){let P=T.docs[0].data(),M="Free Agent";if(P.teamId&&P.teamId!=="none"){let k=R(this.firestore,`teams/${P.teamId}`),D=yield $(k);if(D.exists()){let V=D.data();M=`${V.city} ${V.mascot}`}}y={firstName:P.firstName||"",lastName:P.lastName||"",position:P.position||"",teamName:M}}}catch(x){console.error("Error loading player for user:",x)}let h=d.createdAt||new Date(parseInt(s.id.substring(0,8),16)*1e3);return{id:s.id,displayName:d.displayName||"Unknown User",email:d.email||"",createdDate:h,player:y}})));this.newestUsers=l.sort((s,d)=>{let y=s.createdDate instanceof Date?s.createdDate:new Date(s.createdDate);return(d.createdDate instanceof Date?d.createdDate:new Date(d.createdDate)).getTime()-y.getTime()}).slice(0,5)}catch(a){console.error("Error loading newest users:",a)}finally{this.loadingUsers=!1}})}loadRecentTransactions(){return E(this,null,function*(){this.loadingTransactions=!0;try{let a=[],e=new Map,l=new Map,s=x=>E(this,null,function*(){if(e.has(x))return e.get(x);try{let T=R(this.firestore,`teams/${x}`),P=yield $(T);if(P.exists()){let M=P.data(),k={name:`${M.city} ${M.mascot}`,logo:M.logoUrl||""};return e.set(x,k),k}}catch(T){console.error("Error loading team:",T)}return{name:"Unknown Team",logo:""}}),d=x=>E(this,null,function*(){if(l.has(x))return l.get(x);try{let T=R(this.firestore,`players/${x}`),P=yield $(T);if(P.exists()){let M=P.data(),k=`${M.firstName} ${M.lastName}`;return l.set(x,k),k}}catch(T){console.error("Error loading player:",T)}return"Unknown Player"}),y=O(this.firestore,"players"),h=yield A(y);for(let x of h.docs){let T=O(this.firestore,`players/${x.id}/history`),P=U(T,De("timestamp","desc"),ye(3)),M=yield A(P);for(let k of M.docs){let D=k.data(),V=x.data();if(["signed","traded","retired"].includes(D.action)){let F="",L={name:"",logo:""},J=`${V.firstName} ${V.lastName}`;switch(D.teamId&&D.teamId!=="none"&&(L=yield s(D.teamId)),D.action){case"signed":F=`${J} signed with ${L.name||"a team"}`;break;case"traded":F=`${J} was traded to ${L.name||"a team"}`;break;case"retired":F=`${J} announced retirement`;break}a.push({id:k.id,type:D.action,description:F,timestamp:D.timestamp,playersInvolved:[x.id],teamLogo:L.logo,teamName:L.name})}}}try{let x=O(this.firestore,"tradeOffers"),P=(yield A(x)).docs.filter(M=>M.data().status==="approved").sort((M,k)=>{let D=M.data().timestamp?.toDate?.()||new Date(M.data().timestamp);return(k.data().timestamp?.toDate?.()||new Date(k.data().timestamp)).getTime()-D.getTime()}).slice(0,10);for(let M of P){let k=M.data(),[D,V]=yield Promise.all([s(k.fromTeamId),s(k.toTeamId)]),F=[],L=[],J=[...k.playersOffered||[],...k.playersRequested||[]];for(let B of k.playersOffered||[]){let j=yield d(B);F.push(j)}for(let B of k.playersRequested||[]){let j=yield d(B);L.push(j)}let me=`Trade completed between ${D.name} and ${V.name}`;a.push({id:M.id,type:"trade",description:me,timestamp:k.timestamp,playersInvolved:J,teamLogo:D.logo,teamName:D.name,tradeData:{fromTeam:D,toTeam:V,offeredPlayers:F,requestedPlayers:L}})}}catch(x){console.error("Error loading trade transactions:",x)}this.recentTransactions=a.sort((x,T)=>{let P=x.timestamp?.toDate?.()||new Date(x.timestamp);return(T.timestamp?.toDate?.()||new Date(T.timestamp)).getTime()-P.getTime()}).slice(0,5)}catch(a){console.error("Error loading recent transactions:",a)}finally{this.loadingTransactions=!1}})}loadTodaysGames(){return E(this,null,function*(){this.loadingGames=!0;try{let a=R(this.firestore,"gameScheduleSettings/current"),e=yield $(a);if(!e.exists()){console.log("\u274C No game schedule settings found"),this.todaysGames=[],this.loadingGames=!1;return}let l=e.data(),s=l.season||1,d=l.week||1,y=l.day||"D1";console.log(`\u{1F3AE} Loading games for Season ${s}, Week ${d}, ${y}`);let h=O(this.firestore,"games"),x=U(h,N("season","==",s),N("week","==",d),N("day","==",y)),T=yield A(x);console.log(`\u{1F4CA} Found ${T.docs.length} games matching criteria`),this.todaysGames=yield Promise.all(T.docs.map(P=>E(this,null,function*(){let M=P.data();console.log(`\u{1F3D2} Processing game: ${M.homeTeamId} vs ${M.awayTeamId}`);let[k,D]=yield Promise.all([$(R(this.firestore,`teams/${M.homeTeamId}`)),$(R(this.firestore,`teams/${M.awayTeamId}`))]),V=k.exists()?k.data():{},F=D.exists()?D.data():{};return{gameId:P.id,homeTeam:`${V.city} ${V.mascot}`,awayTeam:`${F.city} ${F.mascot}`,homeTeamId:M.homeTeamId,awayTeamId:M.awayTeamId,homeTeamLogo:V.logoUrl,awayTeamLogo:F.logoUrl,week:M.week,day:M.day,time:M.time||"TBD",homeScore:M.homeScore,awayScore:M.awayScore,period:M.period}}))),this.currentGameIndex=0,console.log(`\u{1F3AE} Loaded ${this.todaysGames.length} games for Season ${s}, Week ${d}, ${y}`),this.startAutoRotation()}catch(a){console.error("Error loading today's games:",a),this.todaysGames=[]}finally{this.loadingGames=!1}})}getTimeAgo(a){let e=a?.toDate?.()||new Date(a),s=new Date().getTime()-e.getTime(),d=Math.floor(s/(1e3*60*60)),y=Math.floor(d/24);return y>0?`${y} day${y>1?"s":""} ago`:d>0?`${d} hour${d>1?"s":""} ago`:"Less than an hour ago"}getTransactionIcon(a){switch(a){case"trade":return"fas fa-exchange-alt";case"signing":return"fas fa-pen-nib";case"retirement":return"fas fa-medal";default:return"fas fa-info-circle"}}getTransactionColor(a){switch(a){case"trade":return"text-primary";case"signing":return"text-success";case"retirement":return"text-warning";default:return"text-muted"}}hasScore(a){return a.homeScore!==void 0&&a.homeScore!==null||a.awayScore!==void 0&&a.awayScore!==null}get autoRotateInterval(){return this.ROTATION_INTERVAL}static \u0275fac=function(e){return new(e||t)(ne(Y),ne(se),ne(q))};static \u0275cmp=H({type:t,selectors:[["app-dashboard"]],decls:79,vars:11,consts:[[1,"container","mt-4"],[1,"row","mb-4"],[1,"col-12"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-calendar-day","me-2"],[1,"card-body"],["class","text-center py-3",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["class","games-carousel-container",4,"ngIf"],[1,"row","mb-5"],[1,"card","bg-dark","text-white"],[1,"card-body","text-center","py-5"],[1,"display-4","mb-3"],[1,"lead","mb-4"],[1,"ratio","ratio-16x9","mb-4",2,"max-width","800px","margin","0 auto"],["src",It`https://player.twitch.tv/?channel=gohls_official&parent=localhost&parent=127.0.0.1&parent=your-domain.com&autoplay=false`,"allowfullscreen",""],["href","https://www.twitch.tv/gohls_official","target","_blank",1,"btn","btn-primary","btn-lg"],[1,"fab","fa-twitch","me-2"],[1,"row"],[1,"col-lg-6","mb-4"],[1,"card","h-100"],[1,"card-header","bg-success","text-white"],[1,"fas","fa-user-plus","me-2"],["class","user-item mb-3 p-3 border rounded",4,"ngFor","ngForOf"],[1,"card-header","bg-warning","text-dark"],[1,"fas","fa-exchange-alt","me-2"],["class","transaction-item mb-3 p-3 border rounded",4,"ngFor","ngForOf"],[1,"col-md-3","mb-3"],[1,"card","text-center"],[1,"fas","fa-users","fa-2x","text-primary","mb-2"],[1,"card-title"],[1,"card-text","display-6"],[1,"fas","fa-trophy","fa-2x","text-warning","mb-2"],[1,"fas","fa-gamepad","fa-2x","text-success","mb-2"],[1,"fas","fa-calendar","fa-2x","text-info","mb-2"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","text-primary"],[1,"mt-2","mb-0","text-muted"],[1,"text-center","py-4","text-muted"],[1,"fas","fa-calendar-times","fa-2x","mb-2"],[1,"games-carousel-container"],["class","carousel-nav",4,"ngIf"],[1,"single-game-container",3,"click"],["class","game-card-single",4,"ngIf"],["class","carousel-indicators",4,"ngIf"],["class","auto-rotation-info",4,"ngIf"],[1,"carousel-nav"],[1,"carousel-btn","carousel-btn-prev",3,"click"],[1,"fas","fa-chevron-left"],[1,"carousel-btn","carousel-btn-next",3,"click"],[1,"fas","fa-chevron-right"],[1,"game-card-single"],[1,"game-header"],[1,"game-week-info"],[1,"week-badge"],[1,"day-badge"],["class","game-status",4,"ngIf"],[1,"teams-container"],[1,"team-display","away-team"],["class","team-logo",3,"src","alt",4,"ngIf"],[1,"team-info"],[1,"team-name"],[1,"team-record"],[1,"vs-section"],["class","vs-display",4,"ngIf"],["class","score-display",4,"ngIf"],[1,"team-display","home-team"],[1,"game-status"],[1,"status-badge"],[1,"team-logo",3,"src","alt"],[1,"vs-display"],[1,"vs-text"],[1,"score-display"],[1,"score-line"],[1,"away-score"],[1,"score-separator"],[1,"home-score"],[1,"carousel-indicators"],["class","indicator-dot",3,"active","click",4,"ngFor","ngForOf"],[1,"indicator-dot",3,"click"],[1,"auto-rotation-info"],[1,"text-muted"],[1,"fas","fa-sync-alt","me-1"],[1,"spinner-border","spinner-border-sm","text-success"],[1,"fas","fa-user-slash","fa-2x","mb-2"],[1,"user-item","mb-3","p-3","border","rounded"],[1,"d-flex","align-items-center"],[1,"user-avatar","me-3"],[1,"flex-grow-1"],[1,"mb-1"],[1,"d-flex","justify-content-between","align-items-center"],["class","text-muted",4,"ngIf"],["class","badge bg-light text-dark",4,"ngIf"],[1,"mt-2"],[1,"badge","bg-light","text-dark"],[1,"spinner-border","spinner-border-sm","text-warning"],[1,"fas","fa-clipboard-list","fa-2x","mb-2"],[1,"transaction-item","mb-3","p-3","border","rounded"],["class","trade-transaction",4,"ngIf"],["class","regular-transaction",4,"ngIf"],[1,"trade-transaction"],[1,"trade-header","mb-2"],[1,"trade-details","d-flex","justify-content-between","align-items-start"],[1,"trade-side","text-center",2,"flex","1"],["class","team-logo-trade mb-2",3,"src","alt",4,"ngIf"],[1,"team-name-small","mb-1"],[1,"traded-players"],[1,"text-muted","d-block"],["class","player-name-small",4,"ngFor","ngForOf"],[1,"trade-arrow","mx-3","align-self-center"],[1,"fas","fa-exchange-alt","text-primary","fa-lg"],[1,"team-logo-trade","mb-2",3,"src","alt"],[1,"player-name-small"],[1,"regular-transaction"],[1,"d-flex","align-items-start"],[1,"transaction-icon","me-3"],["class","team-logo-transaction",3,"src","alt",4,"ngIf"],[3,"class",4,"ngIf"],[1,"team-logo-transaction",3,"src","alt"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),_(6,"i",6),r(7,"Today's Games "),n()(),i(8,"div",7),g(9,Wi,4,0,"div",8)(10,Fi,4,0,"div",9)(11,Qi,6,4,"div",10),n()()()(),i(12,"div",11)(13,"div",2)(14,"div",12)(15,"div",13)(16,"h1",14),r(17,"Welcome to GOHLS"),n(),i(18,"p",15),r(19,"Watch live games and stay updated with the latest league action"),n(),i(20,"div",16),_(21,"iframe",17),n(),i(22,"a",18),_(23,"i",19),r(24,"Watch on Twitch "),n()()()()(),i(25,"div",20)(26,"div",21)(27,"div",22)(28,"div",23)(29,"h5",5),_(30,"i",24),r(31,"Newest Users "),n()(),i(32,"div",7),g(33,Zi,4,0,"div",8)(34,Ji,4,0,"div",9)(35,an,14,6,"div",25),n()()(),i(36,"div",21)(37,"div",22)(38,"div",26)(39,"h5",5),_(40,"i",27),r(41,"Recent Transactions "),n()(),i(42,"div",7),g(43,rn,4,0,"div",8)(44,on,4,0,"div",9)(45,fn,3,2,"div",28),n()()()(),i(46,"div",20)(47,"div",29)(48,"div",30)(49,"div",7),_(50,"i",31),i(51,"h5",32),r(52,"Active Players"),n(),i(53,"p",33),r(54),n()()()(),i(55,"div",29)(56,"div",30)(57,"div",7),_(58,"i",34),i(59,"h5",32),r(60,"Teams"),n(),i(61,"p",33),r(62,"32"),n()()()(),i(63,"div",29)(64,"div",30)(65,"div",7),_(66,"i",35),i(67,"h5",32),r(68,"Games Played"),n(),i(69,"p",33),r(70),n()()()(),i(71,"div",29)(72,"div",30)(73,"div",7),_(74,"i",36),i(75,"h5",32),r(76,"Current Season"),n(),i(77,"p",33),r(78,"2025"),n()()()()()()),e&2&&(o(9),m("ngIf",l.loadingGames),o(),m("ngIf",!l.loadingGames&&l.todaysGames.length===0),o(),m("ngIf",!l.loadingGames&&l.todaysGames.length>0),o(22),m("ngIf",l.loadingUsers),o(),m("ngIf",!l.loadingUsers&&l.newestUsers.length===0),o(),m("ngForOf",l.newestUsers),o(8),m("ngIf",l.loadingTransactions),o(),m("ngIf",!l.loadingTransactions&&l.recentTransactions.length===0),o(),m("ngForOf",l.recentTransactions),o(9),p(l.newestUsers.length>0?"500+":"0"),o(16),p(l.todaysGames.length>0?"1000+":"0"))},dependencies:[ue,Q,ae,X],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;background:#fff;min-height:100vh;padding:2rem 0}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;box-shadow:0 2px 4px #0000000d;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background:#f8f9fa;border-bottom:1px solid #dee2e6;border-radius:8px 8px 0 0;padding:1rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.games-carousel-container[_ngcontent-%COMP%]{position:relative;border-radius:12px;background:#f8f9fa;padding:2rem;box-shadow:0 4px 12px #0000001a;border:1px solid #dee2e6;min-height:320px}.carousel-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;display:flex;justify-content:space-between;width:100%;pointer-events:none}.carousel-btn[_ngcontent-%COMP%]{background:#495057cc;border:none;border-radius:50%;width:48px;height:48px;color:#fff;cursor:pointer;pointer-events:auto;transition:all .2s ease;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.carousel-btn[_ngcontent-%COMP%]:hover{background:#495057;transform:scale(1.1)}.carousel-btn-prev[_ngcontent-%COMP%]{left:1rem}.carousel-btn-next[_ngcontent-%COMP%]{right:1rem}.game-card-single[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 25px #0000001a;border:2px solid #e9ecef;cursor:pointer;transition:transform .2s ease}.game-card-single[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:1.5rem;position:relative}.game-week-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.week-badge[_ngcontent-%COMP%], .day-badge[_ngcontent-%COMP%]{background:#6c757d;color:#fff;padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.9rem}.game-status[_ngcontent-%COMP%]{position:absolute;right:0}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.85rem}.status-badge.live[_ngcontent-%COMP%]{background:#dc3545;color:#fff;animation:_ngcontent-%COMP%_pulse 2s infinite}.status-badge.final[_ngcontent-%COMP%]{background:#198754;color:#fff}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.teams-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;width:100%;padding:0 1rem}.team-display[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:1rem;min-width:0}.team-display.away-team[_ngcontent-%COMP%]{justify-content:flex-start}.team-display.home-team[_ngcontent-%COMP%]{justify-content:flex-end;flex-direction:row-reverse}.team-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;min-width:0}.team-display.away-team[_ngcontent-%COMP%]   .team-info[_ngcontent-%COMP%]{text-align:left}.team-display.home-team[_ngcontent-%COMP%]   .team-info[_ngcontent-%COMP%]{text-align:right}.team-logo[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:contain;border-radius:12px;flex-shrink:0;box-shadow:0 4px 8px #0000001a}.team-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#212529;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.team-record[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;font-weight:500;margin:0}.vs-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex-shrink:0;padding:0 2rem}.vs-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.vs-text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:900;color:#495057;text-shadow:0 2px 4px rgba(0,0,0,.1)}.score-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem}.score-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.away-score[_ngcontent-%COMP%], .home-score[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:900;color:#212529;background:#f8f9fa;padding:.5rem 1rem;border-radius:12px;border:2px solid #dee2e6;min-width:60px;text-align:center;box-shadow:0 2px 4px #0000001a}.score-separator[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#6c757d}.carousel-indicators[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-top:1.5rem}.indicator-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;border:none;background:#dee2e6;cursor:pointer;transition:all .2s ease}.indicator-dot.active[_ngcontent-%COMP%]{background:#0d6efd;transform:scale(1.2)}.indicator-dot[_ngcontent-%COMP%]:hover{background:#6c757d}.auto-rotation-info[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem 0}.games-carousel-container[_ngcontent-%COMP%]{padding:1.5rem;min-height:280px}.teams-container[_ngcontent-%COMP%]{flex-direction:column;gap:1.5rem}.team-display.away-team[_ngcontent-%COMP%], .team-display.home-team[_ngcontent-%COMP%]{align-items:center;text-align:center}.team-logo[_ngcontent-%COMP%]{width:60px;height:60px}.vs-text[_ngcontent-%COMP%], .away-score[_ngcontent-%COMP%], .home-score[_ngcontent-%COMP%]{font-size:2rem}.carousel-nav[_ngcontent-%COMP%]{position:static;transform:none;justify-content:center;gap:1rem;margin-bottom:1rem}.carousel-btn-prev[_ngcontent-%COMP%], .carousel-btn-next[_ngcontent-%COMP%]{position:static}}.user-item[_ngcontent-%COMP%]{transition:all .2s ease}.user-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa!important;border-color:#dee2e6!important}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:#28a745;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff;font-weight:700}.transaction-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px}.team-logo-transaction[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain;border-radius:4px}.trade-transaction[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1rem}.trade-header[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding-bottom:.5rem}.trade-details[_ngcontent-%COMP%]{padding-top:.75rem}.trade-side[_ngcontent-%COMP%]{background:#fff;border-radius:6px;padding:.75rem;border:1px solid #dee2e6}.team-logo-trade[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain;border-radius:4px}.team-name-small[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#495057}.player-name-small[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;background:#e9ecef;padding:.25rem .5rem;border-radius:12px;margin-bottom:.25rem;display:inline-block}.trade-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]})};var et=class t{user={username:"",email:"",password:""};authService=W(Y);router=W(q);register(){if(this.user.username===""){alert("Please enter a username");return}if(this.user.email===""){alert("Please enter email");return}if(this.user.password===""){alert("Please enter your password");return}this.authService.register(this.user).then(()=>{this.router.navigate(["/dashboard"]),this.user={username:"",email:"",password:""}}).catch(a=>{console.error("Registration failed:",a),alert("Registration failed: "+a.message)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-register"]],decls:31,vars:3,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","username",1,"form-label"],["type","text","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1),_(2,"div",2),i(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),r(9,"Register"),n()(),i(10,"div",6)(11,"label",8),r(12,"Username"),n(),i(13,"input",9),S("ngModelChange",function(d){return b(l.user.username,d)||(l.user.username=d),d}),n()(),i(14,"div",6)(15,"label",10),r(16,"Email"),n(),i(17,"input",11),S("ngModelChange",function(d){return b(l.user.email,d)||(l.user.email=d),d}),n()(),i(18,"div",6)(19,"label",12),r(20,"Password"),n(),i(21,"input",13),S("ngModelChange",function(d){return b(l.user.password,d)||(l.user.password=d),d}),n()(),i(22,"button",14),I("click",function(){return l.register()}),r(23," Register "),n(),i(24,"div",15)(25,"div",16)(26,"a",17),r(27,"Have an Account? "),i(28,"span",18),r(29,"Login"),n()()()()()()()(),_(30,"div",2),n()()),e&2&&(o(13),v("ngModel",l.user.username),o(4),v("ngModel",l.user.email),o(4),v("ngModel",l.user.password))},dependencies:[ie,he,re,ee,fe,te,_e,ue,Ee],encapsulation:2})};var tt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-verify-email"]],decls:13,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(e,l){e&1&&($e(0,"div",0)(1,"div",1),gt(2,"div",2),$e(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h4",7),r(8,"Welcome"),je()(),$e(9,"div",6)(10,"p",8),r(11," Link has been sent to your registered email. Please verify it. "),je()()()()(),gt(12,"div",2),je()())},encapsulation:2})};var it=class t{authService=W(Y);email="";forgotPassword(){this.authService.forgotPassword(this.email),this.email=""}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-forgot-password"]],decls:23,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1),_(2,"div",2),i(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),r(9,"Forgot Password"),n()(),i(10,"div",6)(11,"label",8),r(12,"Email"),n(),i(13,"input",9),S("ngModelChange",function(d){return b(l.email,d)||(l.email=d),d}),n()(),i(14,"button",10),I("click",function(){return l.forgotPassword()}),r(15," Send Link "),n(),i(16,"div",11)(17,"div",12)(18,"a",13),r(19,"Back to "),i(20,"span",14),r(21,"Login"),n()()()()()()()(),_(22,"div",2),n()()),e&2&&(o(13),v("ngModel",l.email))},dependencies:[ie,he,re,ee,fe,te,_e,ue,Ee],encapsulation:2})};var _n=()=>[];function hn(t,a){if(t&1&&(i(0,"option",30),r(1),n()),t&2){let e=a.$implicit;m("value",e.id),o(),p(e.name)}}function yn(t,a){if(t&1&&(i(0,"option",30),r(1),n()),t&2){let e=a.$implicit;m("value",e.id),o(),p(e.name)}}function xn(t,a){if(t&1){let e=C();i(0,"div",14)(1,"div",4)(2,"h5",6),r(3,"Add New Game"),n()(),i(4,"div",8)(5,"form",15),I("ngSubmit",function(){u(e);let s=c();return f(s.addGame())}),i(6,"div",16)(7,"label",17),r(8,"Home Team"),n(),i(9,"select",18),S("ngModelChange",function(s){u(e);let d=c();return b(d.newGame.homeTeamId,s)||(d.newGame.homeTeamId=s),f(s)}),i(10,"option",19),r(11,"Select Home Team"),n(),g(12,hn,2,2,"option",20),n()(),i(13,"div",16)(14,"label",17),r(15,"Away Team"),n(),i(16,"select",21),S("ngModelChange",function(s){u(e);let d=c();return b(d.newGame.awayTeamId,s)||(d.newGame.awayTeamId=s),f(s)}),i(17,"option",19),r(18,"Select Away Team"),n(),g(19,yn,2,2,"option",20),n()(),i(20,"div",22)(21,"label",17),r(22,"Week"),n(),i(23,"input",23),S("ngModelChange",function(s){u(e);let d=c();return b(d.newGame.week,s)||(d.newGame.week=s),f(s)}),n()(),i(24,"div",22)(25,"label",17),r(26,"Day"),n(),i(27,"input",24),S("ngModelChange",function(s){u(e);let d=c();return b(d.newGame.day,s)||(d.newGame.day=s),f(s)}),n()(),i(28,"div",25)(29,"div",26)(30,"input",27),S("ngModelChange",function(s){u(e);let d=c();return b(d.newGame.isRival,s)||(d.newGame.isRival=s),f(s)}),n(),i(31,"label",28),r(32,"Rivalry Game"),n()()(),i(33,"div",25)(34,"button",29),r(35,"Add Game"),n()()()()()}if(t&2){let e=c();o(9),v("ngModel",e.newGame.homeTeamId),o(3),m("ngForOf",e.teams),o(4),v("ngModel",e.newGame.awayTeamId),o(3),m("ngForOf",e.teams),o(4),v("ngModel",e.newGame.week),o(4),v("ngModel",e.newGame.day),o(3),v("ngModel",e.newGame.isRival)}}function vn(t,a){if(t&1){let e=C();i(0,"button",31),I("click",function(){u(e);let s=c();return f(s.clearAllGames())}),r(1),n()}if(t&2){let e=c();m("disabled",e.isClearing),o(),w(" ",e.isClearing?"Clearing...":"Clear All Games"," ")}}function bn(t,a){if(t&1){let e=C();i(0,"button",32),I("click",function(){let s=u(e).$implicit,d=c();return f(d.onWeekChange(s))}),r(1),n()}if(t&2){let e=a.$implicit,l=c();G("btn-primary",l.selectedWeek===e)("btn-outline-primary",l.selectedWeek!==e),o(),w(" Week ",e," ")}}function Sn(t,a){t&1&&(i(0,"div",33)(1,"div",34)(2,"span",35),r(3,"Loading..."),n()()())}function wn(t,a){if(t&1&&_(0,"img",49),t&2){let e=c().$implicit;m("src",e.homeLogo,z)("alt",e.homeTeam)}}function Cn(t,a){if(t&1&&(i(0,"div",50)(1,"div",51)(2,"span",52),r(3),n(),i(4,"span",53),r(5,"-"),n(),i(6,"span",52),r(7),n()(),i(8,"div",54)(9,"span",55),r(10),n()()()),t&2){let e=c().$implicit;o(3),p(e.homeScore||0),o(4),p(e.awayScore||0),o(2),G("bg-warning",e.period&&e.period!=="Final")("bg-success",e.period==="Final"),o(),w(" ",e.period||"In Progress"," ")}}function En(t,a){t&1&&(i(0,"div",50)(1,"span",56),r(2,"VS"),n()())}function Pn(t,a){if(t&1&&_(0,"img",49),t&2){let e=c().$implicit;m("src",e.awayLogo,z)("alt",e.awayTeam)}}function Tn(t,a){if(t&1&&(i(0,"span",57),r(1),n()),t&2){let e=a.$implicit;G("bg-danger",e==="rival")("bg-primary",e==="division")("bg-success",e==="conference"),o(),w(" ",e," ")}}function In(t,a){if(t&1){let e=C();i(0,"div",41)(1,"div",42),I("click",function(){let s=u(e).$implicit,d=c(3);return f(d.viewGame(s))}),i(2,"div",43),g(3,wn,1,2,"img",44),i(4,"span",45),r(5),n()(),g(6,Cn,11,7,"div",46)(7,En,3,0,"ng-template",null,0,Nt),i(9,"div",43),g(10,Pn,1,2,"img",44),i(11,"span",45),r(12),n()(),i(13,"div",47),g(14,Tn,2,7,"span",48),n()()()}if(t&2){let e=a.$implicit,l=Dt(8),s=c(3);o(3),m("ngIf",e.homeLogo),o(2),p(e.homeTeam),o(),m("ngIf",s.hasScore(e))("ngIfElse",l),o(4),m("ngIf",e.awayLogo),o(2),p(e.awayTeam),o(2),m("ngForOf",e.tags)}}function Mn(t,a){t&1&&_(0,"div",41)}function kn(t,a){if(t&1&&(i(0,"div",37)(1,"h6",38),r(2),n(),i(3,"div",39),g(4,In,15,7,"div",40)(5,Mn,1,0,"div",40),n()()),t&2){let e=a.$implicit,l=c().ngIf,s=c();o(2),p(e),o(2),m("ngForOf",s.getGamesForDay(l,e)),o(),m("ngForOf",Rt(3,_n).constructor(5-s.getGamesForDay(l,e).length%5))}}function On(t,a){if(t&1&&(kt(0),g(1,kn,6,4,"div",36),Ot()),t&2){let e=a.ngIf,l=c();o(),m("ngForOf",l.getDays(e))}}function Dn(t,a){if(t&1&&(i(0,"div",58),r(1),n()),t&2){let e=c();o(),w(" No games scheduled for Week ",e.selectedWeek," ")}}var nt=class t{constructor(a,e,l){this.firestore=a;this.router=e;this.authService=l}teams=[];currentSeason=1;loading=!1;isClearing=!1;selectedWeek=1;activeWeeks=[];weekSchedule=new Map;gamesCache=new Map;canManageGames=!1;isDeveloper=!1;newGame={homeTeamId:"",awayTeamId:"",week:1,day:1,season:1,isRival:!1};ngOnInit(){return E(this,null,function*(){this.authService.effectiveRoles.subscribe(l=>{this.canManageGames=l.some(s=>["developer","commissioner"].includes(s)),this.isDeveloper=l.includes("developer")}),yield this.loadCurrentSeason();let a=O(this.firestore,"teams"),e=yield A(a);this.teams=e.docs.map(l=>K({id:l.id},l.data())),yield this.loadActiveWeeks(),this.activeWeeks.length>0&&(this.selectedWeek=this.activeWeeks[0],yield this.loadWeek(this.selectedWeek))})}loadCurrentSeason(){return E(this,null,function*(){try{let a=R(this.firestore,"gameScheduleSettings/current"),e=yield $(a);if(e.exists()){let l=e.data();this.currentSeason=l.season||1,this.newGame.season=this.currentSeason}}catch(a){console.error("Error loading current season:",a)}})}loadActiveWeeks(){return E(this,null,function*(){let a=U(O(this.firestore,"games"),N("season","==",this.currentSeason)),e=yield A(a),l=new Set(e.docs.map(s=>s.data().week));this.activeWeeks=Array.from(l).sort((s,d)=>s-d)})}onWeekChange(a){return E(this,null,function*(){this.selectedWeek=a,yield this.loadWeek(a)})}loadWeek(a){return E(this,null,function*(){if(!this.loading){this.loading=!0;try{let e=U(O(this.firestore,"games"),N("season","==",this.currentSeason),N("week","==",a)),l=yield A(e),s=yield Promise.all(l.docs.map(d=>E(this,null,function*(){let y=d.data(),h=this.teams.find(T=>T.id===y.homeTeamId),x=this.teams.find(T=>T.id===y.awayTeamId);return ge(K({id:d.id},y),{homeTeam:h?.name||"Unknown Team",awayTeam:x?.name||"Unknown Team",homeLogo:h?.logoUrl,awayLogo:x?.logoUrl,tags:y.tags||[],homeScore:y.homeScore,awayScore:y.awayScore,period:y.period})})));this.weekSchedule.set(a,s)}finally{this.loading=!1}}})}getWeekSchedule(a){return this.weekSchedule.get(a)}getDays(a){if(!a)return[];let e=new Set(a.map(l=>l.day));return Array.from(e).sort()}getGamesForDay(a,e){return a?a.filter(l=>l.day===e):[]}formatDay(a){return`D${a}`}hasScore(a){return a.homeScore!==void 0&&a.homeScore!==null||a.awayScore!==void 0&&a.awayScore!==null||a.period!==void 0&&a.period!==null}addGame(){return E(this,null,function*(){if(!this.canManageGames)return;if(!this.newGame.homeTeamId||!this.newGame.awayTeamId||!this.newGame.day){alert("Please fill in all required fields");return}let a=this.teams.find(h=>h.id===this.newGame.homeTeamId),e=this.teams.find(h=>h.id===this.newGame.awayTeamId);if(!a||!e)return;let l=[];this.newGame.isRival?l.push("rival"):a.division===e.division?l.push("division"):a.conference===e.conference&&l.push("conference");let s=ge(K({},this.newGame),{day:this.formatDay(this.newGame.day),season:this.currentSeason,tags:l}),y=(yield Oe(O(this.firestore,"games"),s)).id;yield Promise.all([Ge(R(this.firestore,`teams/${a.id}/games/${y}`),ge(K({},s),{isHome:!0,opponent:e.name,opponentId:e.id})),Ge(R(this.firestore,`teams/${e.id}/games/${y}`),ge(K({},s),{isHome:!1,opponent:a.name,opponentId:a.id}))]),this.newGame={homeTeamId:"",awayTeamId:"",week:this.newGame.week,day:1,season:this.currentSeason,isRival:!1},yield this.loadActiveWeeks(),yield this.loadWeek(this.selectedWeek)})}clearAllGames(){return E(this,null,function*(){if(this.isDeveloper&&confirm("Are you sure you want to clear all games? This cannot be undone.")){this.isClearing=!0;try{let a=U(O(this.firestore,"games"),N("season","==",this.currentSeason)),e=yield A(a);for(let l of e.docs)yield hi(l.ref);this.weekSchedule.clear(),this.activeWeeks=[],this.selectedWeek=1}finally{this.isClearing=!1}}})}viewGame(a){!a.id||!a.homeTeamId||this.router.navigate(["/games",a.homeTeamId,a.id])}static \u0275fac=function(e){return new(e||t)(ne(se),ne(q),ne(Y))};static \u0275cmp=H({type:t,selectors:[["app-games"]],decls:14,vars:7,consts:[["vsDisplay",""],[1,"container","mt-4"],["class","card mb-4",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"card-body"],[1,"btn-group","mb-4"],["class","btn",3,"btn-primary","btn-outline-primary","click",4,"ngFor","ngForOf"],["class","text-center my-4",4,"ngIf"],[4,"ngIf"],["class","text-center text-muted my-4",4,"ngIf"],[1,"card","mb-4"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-4"],[1,"form-label"],["name","homeTeam","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","awayTeam","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"col-md-2"],["type","number","name","week","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","day","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],[1,"form-check"],["type","checkbox","name","isRival","id","isRival",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isRival",1,"form-check-label"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"btn","btn-danger",3,"click","disabled"],[1,"btn",3,"click"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"text-muted","mb-3"],[1,"row","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"game-card",3,"click"],[1,"team-row"],["class","team-logo",3,"src","alt",4,"ngIf"],[1,"team-name"],["class","text-center my-2",4,"ngIf","ngIfElse"],[1,"mt-3"],["class","badge me-1",3,"bg-danger","bg-primary","bg-success",4,"ngFor","ngForOf"],[1,"team-logo",3,"src","alt"],[1,"text-center","my-2"],[1,"score-display"],[1,"score-number"],[1,"score-divider"],[1,"game-status"],[1,"badge"],[1,"vs-text"],[1,"badge","me-1"],[1,"text-center","text-muted","my-4"]],template:function(e,l){e&1&&(i(0,"div",1),g(1,xn,36,7,"div",2),i(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),r(6),n(),g(7,vn,2,2,"button",7),n()(),i(8,"div",8)(9,"div",9),g(10,bn,2,5,"button",10),n(),g(11,Sn,4,0,"div",11)(12,On,2,1,"ng-container",12)(13,Dn,2,1,"div",13),n()()()),e&2&&(o(),m("ngIf",l.canManageGames),o(5),w("Season ",l.currentSeason," Schedule"),o(),m("ngIf",l.isDeveloper),o(3),m("ngForOf",l.activeWeeks),o(),m("ngIf",l.loading),o(),m("ngIf",l.getWeekSchedule(l.selectedWeek)),o(),m("ngIf",!l.loading&&(!l.getWeekSchedule(l.selectedWeek)||l.getDays(l.getWeekSchedule(l.selectedWeek)).length===0)))},dependencies:[Q,ae,X,ie,he,Te,Ie,re,Re,Ht,Pe,ee,fe,Xe,Ne,te,_e],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;min-width:150px;padding:1rem}.badge[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:600;letter-spacing:.5px}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.btn-group[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.25rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:.25rem}.game-card[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:8px;padding:1rem;margin-bottom:1rem;background-color:#fff;transition:all .2s ease;cursor:pointer;box-shadow:0 2px 4px #0000000d}.game-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#dee2e6}.team-logo[_ngcontent-%COMP%]{width:36px;height:36px;object-fit:contain;margin-right:.75rem}.team-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem;border-radius:6px;background-color:#f8f9fa;margin-bottom:.5rem}.team-name[_ngcontent-%COMP%]{font-weight:500;color:#495057}.vs-text[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;font-size:.9rem}.score-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:.5rem}.score-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#212529;background:#f8f9fa;padding:.25rem .75rem;border-radius:6px;border:2px solid #e9ecef;min-width:50px;text-align:center}.score-divider[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#6c757d}.game-status[_ngcontent-%COMP%]{text-align:center}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .65rem;width:fit-content}.badge.bg-primary[_ngcontent-%COMP%]{background-color:#0d6efd!important}.badge.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600;text-transform:uppercase;font-size:.9rem;letter-spacing:.5px;padding:1rem}.row[_ngcontent-%COMP%]{--bs-gutter-x: 1.5rem;--bs-gutter-y: 1.5rem;display:flex;flex-wrap:wrap}.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}@media (max-width: 1200px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 25%;max-width:25%}}@media (max-width: 992px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 33.333333%;max-width:33.333333%}}@media (max-width: 768px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media (max-width: 576px){.row[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}}"]})};function An(t,a){if(t&1){let e=C();i(0,"button",31),I("click",function(){u(e);let s=c(2);return f(s.showPlayoffManager=!s.showPlayoffManager)}),_(1,"i",32),r(2,"Manage Playoffs "),n()}}function Rn(t,a){if(t&1&&_(0,"img",50),t&2){let e=c().$implicit;m("src",e.logoUrl,z)("alt",e.name)}}function Nn(t,a){if(t&1){let e=C();i(0,"div",39)(1,"div",40)(2,"div",12)(3,"div",41),g(4,Rn,1,2,"img",42),i(5,"strong"),r(6),n()(),i(7,"select",43),I("change",function(s){let d=u(e).$implicit,y=c(3);return f(y.updateTeamPlayoffStatus(d.id,s.target.value))}),i(8,"option",44),r(9,"No Status"),n(),i(10,"option",45),r(11,"League Championship Clinched (P)"),n(),i(12,"option",46),r(13,"Conference Championship Clinched (z)"),n(),i(14,"option",47),r(15,"Division Championship Clinched (y)"),n(),i(16,"option",48),r(17,"Playoff Spot Clinched (x)"),n(),i(18,"option",49),r(19,"Eliminated (e)"),n()()()()()}if(t&2){let e=a.$implicit,l=c(3);o(4),m("ngIf",e.logoUrl),o(2),p(e.name),o(),m("value",l.getTeamPlayoffStatus(e.id))}}function Gn(t,a){if(t&1&&(i(0,"div",33)(1,"div",34)(2,"h5",14),_(3,"i",35),r(4,"Playoff Status Management "),n()(),i(5,"div",12)(6,"p",36),r(7,"Set playoff clinching status for teams. This will add visual indicators to the standings."),n(),i(8,"div",37),g(9,Nn,20,3,"div",38),n()()()),t&2){let e=c(2);o(9),m("ngForOf",e.filteredTeams)}}function Vn(t,a){t&1&&(i(0,"div",51)(1,"div",52)(2,"span",53),r(3,"Loading standings..."),n()()())}function Ln(t,a){if(t&1&&_(0,"img",50),t&2){let e=c().$implicit;m("alt",ze(e.name))("src",e.logoUrl,z)}}function Wn(t,a){if(t&1&&(i(0,"span",63),r(1),n()),t&2){let e=a.ngIf;ve(e.class),o(),w(" ",e.text," ")}}function Fn(t,a){if(t&1&&(i(0,"tr")(1,"td")(2,"div",61),g(3,Ln,1,3,"img",42),i(4,"span"),r(5),n(),g(6,Wn,2,3,"span",62),n()(),i(7,"td"),r(8),n(),i(9,"td"),r(10),n(),i(11,"td"),r(12),n(),i(13,"td"),r(14),n(),i(15,"td")(16,"strong"),r(17),n()(),i(18,"td"),r(19),n(),i(20,"td"),r(21),n(),i(22,"td"),r(23),n()()),t&2){let e=a.$implicit,l=c(5);ve(l.getPlayoffStatusClass(e)),o(3),m("ngIf",e.logoUrl),o(2),p(e.name),o(),m("ngIf",l.getPlayoffStatusBadge(e)),o(2),p(e.gamesPlayed),o(2),p(e.wins),o(2),p(e.losses),o(2),p(e.overtimeLosses),o(3),p(e.points),o(2),p(e.goalsFor),o(2),p(e.goalsAgainst),o(),G("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),o(),Z(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function Un(t,a){if(t&1&&(i(0,"div",56)(1,"div",40)(2,"div",57)(3,"h5",14),r(4),n()(),i(5,"div",58)(6,"table",59)(7,"thead")(8,"tr")(9,"th"),r(10,"Team"),n(),i(11,"th"),r(12,"GP"),n(),i(13,"th"),r(14,"W"),n(),i(15,"th"),r(16,"L"),n(),i(17,"th"),r(18,"OTL"),n(),i(19,"th"),r(20,"PTS"),n(),i(21,"th"),r(22,"GF"),n(),i(23,"th"),r(24,"GA"),n(),i(25,"th"),r(26,"DIFF"),n()()(),i(27,"tbody"),g(28,Fn,24,18,"tr",60),n()()()()()),t&2){let e=a.$implicit,l=c().$implicit,s=c(3);o(4),p(e),o(24),m("ngForOf",s.getStandingsForDivision(l.name,e))}}function Bn(t,a){if(t&1&&(i(0,"div",3)(1,"h3"),r(2),n(),i(3,"div",37),g(4,Un,29,2,"div",55),n()()),t&2){let e=a.$implicit;o(2),p(e.name),o(2),m("ngForOf",e.divisions)}}function Hn(t,a){if(t&1&&(i(0,"div"),g(1,Bn,5,2,"div",54),n()),t&2){let e=c(2);o(),m("ngForOf",e.conferences)}}function $n(t,a){if(t&1&&_(0,"img",50),t&2){let e=c().$implicit;m("alt",ze(e.name))("src",e.logoUrl,z)}}function jn(t,a){if(t&1&&(i(0,"span",63),r(1),n()),t&2){let e=a.ngIf;ve(e.class),o(),w(" ",e.text," ")}}function zn(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),n(),i(3,"td")(4,"div",61),g(5,$n,1,3,"img",42),i(6,"span"),r(7),n(),g(8,jn,2,3,"span",62),n()(),i(9,"td"),r(10),n(),i(11,"td"),r(12),n(),i(13,"td"),r(14),n(),i(15,"td"),r(16),n(),i(17,"td")(18,"strong"),r(19),n()(),i(20,"td"),r(21),n(),i(22,"td"),r(23),n(),i(24,"td"),r(25),n(),i(26,"td"),r(27),n()()),t&2){let e=a.$implicit,l=a.index,s=c(4);ve(s.getPlayoffStatusClass(e)),o(2),p(l+1),o(3),m("ngIf",e.logoUrl),o(2),p(e.name),o(),m("ngIf",s.getPlayoffStatusBadge(e)),o(2),p(e.gamesPlayed),o(2),p(e.wins),o(2),p(e.losses),o(2),p(e.overtimeLosses),o(3),p(e.points),o(2),w("",(e.pointPercentage*100).toFixed(1),"%"),o(2),p(e.goalsFor),o(2),p(e.goalsAgainst),o(),G("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),o(),Z(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function qn(t,a){if(t&1&&(i(0,"div",3)(1,"div",40)(2,"div",64)(3,"h4",14),r(4),n()(),i(5,"div",58)(6,"table",65)(7,"thead")(8,"tr")(9,"th"),r(10,"Rank"),n(),i(11,"th"),r(12,"Team"),n(),i(13,"th"),r(14,"GP"),n(),i(15,"th"),r(16,"W"),n(),i(17,"th"),r(18,"L"),n(),i(19,"th"),r(20,"OTL"),n(),i(21,"th"),r(22,"PTS"),n(),i(23,"th"),r(24,"P%"),n(),i(25,"th"),r(26,"GF"),n(),i(27,"th"),r(28,"GA"),n(),i(29,"th"),r(30,"DIFF"),n()()(),i(31,"tbody"),g(32,zn,28,20,"tr",60),n()()()()()),t&2){let e=a.$implicit,l=c(3);o(4),p(e.name),o(28),m("ngForOf",l.getStandingsForConference(e.name))}}function Yn(t,a){if(t&1&&(i(0,"div"),g(1,qn,33,2,"div",54),n()),t&2){let e=c(2);o(),m("ngForOf",e.conferences)}}function Kn(t,a){if(t&1&&_(0,"img",50),t&2){let e=c().$implicit;m("alt",ze(e.name))("src",e.logoUrl,z)}}function Xn(t,a){if(t&1&&(i(0,"span",63),r(1),n()),t&2){let e=a.ngIf;ve(e.class),o(),w(" ",e.text," ")}}function Qn(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),n(),i(3,"td")(4,"div",61),g(5,Kn,1,3,"img",42),i(6,"span"),r(7),n(),g(8,Xn,2,3,"span",62),n()(),i(9,"td")(10,"small",28),r(11),n()(),i(12,"td")(13,"small",28),r(14),n()(),i(15,"td"),r(16),n(),i(17,"td"),r(18),n(),i(19,"td"),r(20),n(),i(21,"td"),r(22),n(),i(23,"td")(24,"strong"),r(25),n()(),i(26,"td"),r(27),n(),i(28,"td"),r(29),n(),i(30,"td"),r(31),n(),i(32,"td"),r(33),n()()),t&2){let e=a.$implicit,l=a.index,s=c(3);ve(s.getPlayoffStatusClass(e)),o(2),p(l+1),o(3),m("ngIf",e.logoUrl),o(2),p(e.name),o(),m("ngIf",s.getPlayoffStatusBadge(e)),o(3),p(e.conference),o(3),p(e.division),o(2),p(e.gamesPlayed),o(2),p(e.wins),o(2),p(e.losses),o(2),p(e.overtimeLosses),o(3),p(e.points),o(2),w("",(e.pointPercentage*100).toFixed(1),"%"),o(2),p(e.goalsFor),o(2),p(e.goalsAgainst),o(),G("text-success",e.goalDifferential>0)("text-danger",e.goalDifferential<0),o(),Z(" ",e.goalDifferential>0?"+":"","",e.goalDifferential," ")}}function Zn(t,a){if(t&1&&(i(0,"div")(1,"div",40)(2,"div",66)(3,"h4",14),r(4),oe(5,"titlecase"),n()(),i(6,"div",58)(7,"table",65)(8,"thead")(9,"tr")(10,"th"),r(11,"Rank"),n(),i(12,"th"),r(13,"Team"),n(),i(14,"th"),r(15,"Conference"),n(),i(16,"th"),r(17,"Division"),n(),i(18,"th"),r(19,"GP"),n(),i(20,"th"),r(21,"W"),n(),i(22,"th"),r(23,"L"),n(),i(24,"th"),r(25,"OTL"),n(),i(26,"th"),r(27,"PTS"),n(),i(28,"th"),r(29,"P%"),n(),i(30,"th"),r(31,"GF"),n(),i(32,"th"),r(33,"GA"),n(),i(34,"th"),r(35,"DIFF"),n()()(),i(36,"tbody"),g(37,Qn,34,22,"tr",60),n()()(),i(38,"div",67)(39,"div",68)(40,"div",69)(41,"span",70),r(42,"P"),n(),i(43,"small"),r(44,"League Championship"),n()(),i(45,"div",69)(46,"span",71),r(47,"z"),n(),i(48,"small"),r(49,"Conference Championship"),n()(),i(50,"div",69)(51,"span",72),r(52,"y"),n(),i(53,"small"),r(54,"Division Championship"),n()(),i(55,"div",69)(56,"span",73),r(57,"x"),n(),i(58,"small"),r(59,"Playoff Spot"),n()(),i(60,"div",69)(61,"span",74),r(62,"e"),n(),i(63,"small"),r(64,"Eliminated"),n()(),i(65,"div",69)(66,"small",28),r(67,"No indicator - Still competing"),n()()()()()()),t&2){let e=c(2);o(4),w("",ke(5,2,e.selectedLeague)," League Overall Standings"),o(33),m("ngForOf",e.getOverallStandings())}}function Jn(t,a){if(t&1){let e=C();i(0,"div")(1,"div",11)(2,"div",12)(3,"div",13)(4,"h5",14),r(5,"League Standings"),n(),i(6,"div",15)(7,"div",16)(8,"button",17),I("click",function(){u(e);let s=c();return s.standingsViewType="division",f(s.onStandingsViewChange())}),_(9,"i",18),r(10,"By Division "),n(),i(11,"button",17),I("click",function(){u(e);let s=c();return s.standingsViewType="conference",f(s.onStandingsViewChange())}),_(12,"i",19),r(13,"By Conference "),n(),i(14,"button",17),I("click",function(){u(e);let s=c();return s.standingsViewType="overall",f(s.onStandingsViewChange())}),_(15,"i",20),r(16,"Overall "),n()(),i(17,"div",16)(18,"button",21),I("click",function(){u(e);let s=c();return s.selectedLeague="major",f(s.onLeagueChange())}),r(19," Major League "),n(),i(20,"button",21),I("click",function(){u(e);let s=c();return s.selectedLeague="minor",f(s.onLeagueChange())}),r(21," Minor League "),n()(),i(22,"div",16),g(23,An,3,0,"button",22),i(24,"button",23),I("click",function(){u(e);let s=c();return f(s.refreshStandings())}),_(25,"i",24),n()()()()()(),g(26,Gn,10,1,"div",25)(27,Vn,4,0,"div",26)(28,Hn,2,1,"div",10)(29,Yn,2,1,"div",10)(30,Zn,68,4,"div",10),i(31,"div",27)(32,"small",28),_(33,"i",29),r(34," Data cached for faster loading \u2022 "),i(35,"button",30),I("click",function(){u(e);let s=c();return f(s.clearCache())}),r(36,"Clear cache"),n()()()()}if(t&2){let e=c();o(8),G("btn-info",e.standingsViewType==="division")("btn-outline-info",e.standingsViewType!=="division"),o(3),G("btn-info",e.standingsViewType==="conference")("btn-outline-info",e.standingsViewType!=="conference"),o(3),G("btn-info",e.standingsViewType==="overall")("btn-outline-info",e.standingsViewType!=="overall"),o(4),G("btn-primary",e.selectedLeague==="major")("btn-outline-primary",e.selectedLeague!=="major"),o(2),G("btn-primary",e.selectedLeague==="minor")("btn-outline-primary",e.selectedLeague!=="minor"),o(3),m("ngIf",e.canManagePlayoffs),o(),m("disabled",e.loadingStandings),o(),G("fa-spin",e.loadingStandings),o(),m("ngIf",e.showPlayoffManager&&e.canManagePlayoffs),o(),m("ngIf",e.loadingStandings),o(),m("ngIf",e.standingsViewType==="division"&&!e.loadingStandings),o(),m("ngIf",e.standingsViewType==="conference"&&!e.loadingStandings),o(),m("ngIf",e.standingsViewType==="overall"&&!e.loadingStandings)}}function ea(t,a){if(t&1&&(i(0,"option",81),r(1),n()),t&2){let e=a.$implicit;m("value",e.id),o(),p(e.name)}}function ta(t,a){if(t&1&&(i(0,"div",37)(1,"div",82)(2,"div",83)(3,"div",12),_(4,"i",84),i(5,"h5",85),r(6,"Total Games"),n(),i(7,"h2",86),r(8),n()()()(),i(9,"div",82)(10,"div",83)(11,"div",12),_(12,"i",87),i(13,"h5",85),r(14,"Total Points"),n(),i(15,"h2",88),r(16),n(),i(17,"small",28),r(18),n()()()(),i(19,"div",82)(20,"div",83)(21,"div",12),_(22,"i",89),i(23,"h5",85),r(24,"Total Assists"),n(),i(25,"h2",90),r(26),n(),i(27,"small",28),r(28),n()()()(),i(29,"div",82)(30,"div",83)(31,"div",12),_(32,"i",91),i(33,"h5",85),r(34,"Total Rebounds"),n(),i(35,"h2",92),r(36),n(),i(37,"small",28),r(38),n()()()()()),t&2){let e=c(2);o(8),p(e.totalGames),o(8),p(e.totalPoints),o(2),w("Avg: ",e.avgPoints),o(8),p(e.totalAssists),o(2),w("Avg: ",e.avgAssists),o(8),p(e.totalRebounds),o(2),w("Avg: ",e.avgRebounds)}}function ia(t,a){if(t&1&&(i(0,"div",93)(1,"div",40)(2,"div",57)(3,"h6",14),r(4),n()(),i(5,"div",12)(6,"div",68)(7,"div",94)(8,"div",95)(9,"h6",28),r(10,"Games Played"),n(),i(11,"h4",86),r(12),n()()(),i(13,"div",94)(14,"div",95)(15,"h6",28),r(16,"Average Points per Game"),n(),i(17,"h4",88),r(18),n()()(),i(19,"div",94)(20,"div",95)(21,"h6",28),r(22,"Average Assists per Game"),n(),i(23,"h4",90),r(24),n()()()()()()()),t&2){let e=c(2);o(4),w("",e.selectedTeamName," Team Statistics"),o(8),p(e.totalGames),o(6),p(e.avgPoints),o(6),p(e.avgAssists)}}function na(t,a){if(t&1){let e=C();i(0,"div")(1,"div",11)(2,"div",57)(3,"h5",14),r(4,"Team Analytics"),n()(),i(5,"div",12)(6,"div",36)(7,"label",75),r(8,"Select Team"),n(),i(9,"select",76),S("ngModelChange",function(s){u(e);let d=c();return b(d.selectedTeamId,s)||(d.selectedTeamId=s),f(s)}),I("change",function(){u(e);let s=c();return f(s.onTeamSelect())}),i(10,"option",77),r(11,"-- Choose a Team --"),n(),g(12,ea,2,2,"option",78),n()(),g(13,ta,39,7,"div",79)(14,ia,25,4,"div",80),n()()()}if(t&2){let e=c();o(9),v("ngModel",e.selectedTeamId),o(3),m("ngForOf",e.teams),o(),m("ngIf",e.selectedTeamId),o(),m("ngIf",e.selectedTeamId)}}function aa(t,a){if(t&1&&(i(0,"option",81),r(1),n()),t&2){let e=a.$implicit;m("value",e.id),o(),p(e.name)}}function ra(t,a){if(t&1&&(i(0,"option",81),r(1),oe(2,"date"),n()),t&2){let e=a.$implicit;m("value",e.id),o(),Z(" ",!(e.date==null||e.date.toDate==null)&&e.date.toDate()?Ce(2,3,e.date.toDate(),"mediumDate"):e.date," vs ",e.opponent," ")}}function oa(t,a){if(t&1){let e=C();i(0,"div",36)(1,"label",102),r(2,"Select Game"),n(),i(3,"select",103),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.selectedExportGameId,s)||(d.selectedExportGameId=s),f(s)}),i(4,"option",77),r(5,"-- Choose a Game --"),n(),g(6,ra,3,6,"option",78),n()()}if(t&2){let e=c(2);o(3),v("ngModel",e.selectedExportGameId),o(3),m("ngForOf",e.exportGames)}}function sa(t,a){if(t&1){let e=C();i(0,"div")(1,"div",40)(2,"div",57)(3,"h5",14),r(4,"Export Game Data"),n()(),i(5,"div",12)(6,"div",36)(7,"label",96),r(8,"Select Team"),n(),i(9,"select",97),S("ngModelChange",function(s){u(e);let d=c();return b(d.selectedExportTeamId,s)||(d.selectedExportTeamId=s),f(s)}),I("change",function(){u(e);let s=c();return f(s.onExportTeamSelect())}),i(10,"option",77),r(11,"-- Choose a Team --"),n(),g(12,aa,2,2,"option",78),n()(),g(13,oa,7,2,"div",98),i(14,"div",99)(15,"button",100),I("click",function(){u(e);let s=c();return f(s.exportSelectedGameToCSV())}),_(16,"i",101),r(17,"Export Selected Game to CSV "),n()()()()()}if(t&2){let e=c();o(9),v("ngModel",e.selectedExportTeamId),o(3),m("ngForOf",e.teams),o(),m("ngIf",e.selectedExportTeamId),o(2),m("disabled",!e.selectedExportTeamId||!e.selectedExportGameId)}}var at=class t{currentView="standings";selectedLeague="major";standingsViewType="division";teams=[];filteredTeams=[];loadingStandings=!1;showPlayoffManager=!1;canManagePlayoffs=!1;conferences=[{name:"Mr. Hockey Conference",divisions:["Europe Division","Great Lakes Division","Atlantic Division"]},{name:"The Rocket Conference",divisions:["Northwest Division","Pacific Division","South Division"]}];selectedTeamId="";selectedTeamName="";totalGames=0;totalPoints=0;totalAssists=0;totalRebounds=0;avgPoints="0.0";avgAssists="0.0";avgRebounds="0.0";exportGames=[];selectedExportTeamId="";selectedExportGameId="";firestore=W(se);authService=W(Y);ngOnInit(){return E(this,null,function*(){this.authService.effectiveRoles.subscribe(a=>{this.canManagePlayoffs=a.some(e=>["developer","commissioner"].includes(e))}),yield this.loadTeams()})}loadTeams(){return E(this,null,function*(){this.loadingStandings=!0;try{let a=O(this.firestore,"teams"),e=yield A(a);this.teams=yield Promise.all(e.docs.map(l=>E(this,null,function*(){let s=l.data(),d=O(this.firestore,"games"),y=U(d,N("homeTeamId","==",l.id)),h=U(d,N("awayTeamId","==",l.id)),[x,T]=yield Promise.all([A(y),A(h)]),P=0,M=0,k=0,D=0,V=0,F=0;x.docs.forEach(me=>{let B=me.data();if(B.homeScore!==void 0&&B.awayScore!==void 0){F++;let j=B.homeScore||0,pe=B.awayScore||0;D+=j,V+=pe,j>pe?P++:B.period==="OT"||B.period==="SO"?k++:M++}}),T.docs.forEach(me=>{let B=me.data();if(B.homeScore!==void 0&&B.awayScore!==void 0){F++;let j=B.homeScore||0,pe=B.awayScore||0;D+=pe,V+=j,pe>j?P++:B.period==="OT"||B.period==="SO"?k++:M++}});let L=P*2+k,J=F>0?L/(F*2):0;return{id:l.id,name:`${s.city} ${s.mascot}`,league:s.league||"major",conference:s.conference||"",division:s.division||"",logoUrl:s.logoUrl,wins:P,losses:M,overtimeLosses:k,points:L,gamesPlayed:F,goalsFor:D,goalsAgainst:V,goalDifferential:D-V,pointPercentage:J,playoffStatus:s.playoffStatus}}))),this.filteredTeams=this.teams.filter(l=>l.league===this.selectedLeague)}catch(a){console.error("Error loading teams:",a)}finally{this.loadingStandings=!1}})}onLeagueChange(){return E(this,null,function*(){this.filteredTeams=this.teams.filter(a=>a.league===this.selectedLeague)})}onStandingsViewChange(){}refreshStandings(){return E(this,null,function*(){yield this.loadTeams()})}clearCache(){console.log("Cache cleared")}getStandingsForDivision(a,e){return this.filteredTeams.filter(l=>l.conference===a&&l.division===e).sort((l,s)=>s.points!==l.points?s.points-l.points:s.pointPercentage!==l.pointPercentage?s.pointPercentage-l.pointPercentage:s.goalDifferential-l.goalDifferential)}getStandingsForConference(a){return this.filteredTeams.filter(e=>e.conference===a).sort((e,l)=>l.points!==e.points?l.points-e.points:l.pointPercentage!==e.pointPercentage?l.pointPercentage-e.pointPercentage:l.goalDifferential-e.goalDifferential)}getOverallStandings(){return[...this.filteredTeams].sort((a,e)=>e.points!==a.points?e.points-a.points:e.pointPercentage!==a.pointPercentage?e.pointPercentage-a.pointPercentage:e.goalDifferential-a.goalDifferential)}getTeamPlayoffStatus(a){return this.teams.find(l=>l.id===a)?.playoffStatus||"none"}updateTeamPlayoffStatus(a,e){return E(this,null,function*(){try{let l=e==="none"?null:e;yield be(R(this.firestore,"teams",a),{playoffStatus:l});let s=this.teams.find(d=>d.id===a);s&&(s.playoffStatus=l||void 0)}catch(l){console.error("Error updating playoff status:",l)}})}getPlayoffStatusClass(a){if(!a.playoffStatus)return"";switch(a.playoffStatus){case"league":return"table-success";case"conference":return"table-info";case"division":return"table-warning";case"playoff":return"table-primary";case"eliminated":return"table-danger";default:return""}}getPlayoffStatusBadge(a){if(!a.playoffStatus)return null;switch(a.playoffStatus){case"league":return{text:"P",class:"badge bg-success"};case"conference":return{text:"z",class:"badge bg-info"};case"division":return{text:"y",class:"badge bg-warning"};case"playoff":return{text:"x",class:"badge bg-primary"};case"eliminated":return{text:"e",class:"badge bg-danger"};default:return null}}onTeamSelect(){return E(this,null,function*(){if(!this.selectedTeamId){this.resetAnalytics();return}let a=this.teams.find(e=>e.id===this.selectedTeamId);this.selectedTeamName=a?.name||"";try{let e=U(O(this.firestore,"games"),N("teamId","==",this.selectedTeamId)),s=(yield A(e)).docs.map(d=>d.data());this.calculateAnalytics(s)}catch(e){console.error("Error loading team analytics:",e)}})}calculateAnalytics(a){this.totalGames=a.length;let e=0,l=0,s=0;a.forEach(d=>{d.players.forEach(y=>{e+=y.points,l+=y.assists,s+=y.rebounds})}),this.totalPoints=e,this.totalAssists=l,this.totalRebounds=s,this.avgPoints=this.totalGames>0?(e/this.totalGames).toFixed(1):"0.0",this.avgAssists=this.totalGames>0?(l/this.totalGames).toFixed(1):"0.0",this.avgRebounds=this.totalGames>0?(s/this.totalGames).toFixed(1):"0.0"}resetAnalytics(){this.totalGames=0,this.totalPoints=0,this.totalAssists=0,this.totalRebounds=0,this.avgPoints="0.0",this.avgAssists="0.0",this.avgRebounds="0.0",this.selectedTeamName=""}onExportTeamSelect(){return E(this,null,function*(){if(!this.selectedExportTeamId){this.exportGames=[],this.selectedExportGameId="";return}try{let a=U(O(this.firestore,"games"),N("teamId","==",this.selectedExportTeamId),De("date","desc")),e=yield A(a);this.exportGames=e.docs.map(l=>K({id:l.id},l.data()))}catch(a){console.error("Error loading games for export:",a)}})}exportSelectedGameToCSV(){if(!this.selectedExportGameId)return;let a=this.exportGames.find(d=>d.id===this.selectedExportGameId);if(!a)return;let e=this.generateCSV(a),l=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=`game-${a.id}-${a.date?.toDate?.()?a.date.toDate().toISOString().split("T")[0]:"unknown"}.csv`;this.downloadCSV(e,s)}generateCSV(a){let e=["Player Name","Points","Assists","Rebounds"],l=a.players.map(d=>[d.name,d.points.toString(),d.assists.toString(),d.rebounds.toString()]);return[e.join(","),...l.map(d=>d.join(","))].join(`
`)}downloadCSV(a,e){let l=new Blob([a],{type:"text/csv;charset=utf-8;"}),s=window.URL.createObjectURL(l),d=document.createElement("a");d.href=s,d.download=e,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(s)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-analytics"]],decls:21,vars:9,consts:[[1,"container","mt-4"],[1,"page-title"],[1,"fas","fa-chart-line","me-2"],[1,"mb-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-trophy","me-1"],[1,"fas","fa-chart-line","me-1"],[1,"fas","fa-file-export","me-1"],[4,"ngIf"],[1,"card","mb-4"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap","gap-3"],[1,"mb-0"],[1,"d-flex","gap-3","align-items-center","flex-wrap"],[1,"btn-group"],[1,"btn","btn-sm",3,"click"],[1,"fas","fa-layer-group","me-1"],[1,"fas","fa-sitemap","me-1"],[1,"fas","fa-globe","me-1"],[1,"btn",3,"click"],["class","btn btn-outline-warning btn-sm","title","Manage playoff clinching status",3,"click",4,"ngIf"],["title","Refresh standings data",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"fas","fa-sync-alt"],["class","card mb-4 border-warning",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[1,"mt-4","text-center"],[1,"text-muted"],[1,"fas","fa-clock","me-1"],[1,"btn","btn-link","btn-sm","p-0",3,"click"],["title","Manage playoff clinching status",1,"btn","btn-outline-warning","btn-sm",3,"click"],[1,"fas","fa-cog","me-1"],[1,"card","mb-4","border-warning"],[1,"card-header","bg-warning","text-dark"],[1,"fas","fa-trophy","me-2"],[1,"mb-3"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card"],[1,"d-flex","align-items-center","mb-2"],["class","team-logo-small me-2",3,"src","alt",4,"ngIf"],[1,"form-select","form-select-sm",3,"change","value"],["value","none"],["value","league"],["value","conference"],["value","division"],["value","playoff"],["value","eliminated"],[1,"team-logo-small","me-2",3,"src","alt"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["class","mb-4",4,"ngFor","ngForOf"],["class","col-lg-4 mb-3",4,"ngFor","ngForOf"],[1,"col-lg-4","mb-3"],[1,"card-header"],[1,"table-responsive"],[1,"table","table-sm","mb-0"],[3,"class",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],["class","ms-1",3,"class",4,"ngIf"],[1,"ms-1"],[1,"card-header","bg-primary","text-white"],[1,"table","table-striped","mb-0"],[1,"card-header","bg-success","text-white"],[1,"card-footer","bg-light"],[1,"row","text-center"],[1,"col-md-2"],[1,"badge","bg-success","me-2"],[1,"badge","bg-info","me-2"],[1,"badge","bg-warning","me-2"],[1,"badge","bg-primary","me-2"],[1,"badge","bg-danger","me-2"],["for","teamSelect",1,"form-label"],["id","teamSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["class","mt-4",4,"ngIf"],[3,"value"],[1,"col-md-3"],[1,"card","text-center"],[1,"fas","fa-gamepad","fa-2x","text-primary","mb-2"],[1,"card-title"],[1,"text-primary"],[1,"fas","fa-bullseye","fa-2x","text-success","mb-2"],[1,"text-success"],[1,"fas","fa-hands-helping","fa-2x","text-info","mb-2"],[1,"text-info"],[1,"fas","fa-undo","fa-2x","text-warning","mb-2"],[1,"text-warning"],[1,"mt-4"],[1,"col-md-4"],[1,"border","rounded","p-3"],["for","exportTeamSelect",1,"form-label"],["id","exportTeamSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["class","mb-3",4,"ngIf"],[1,"text-center","mt-4"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-download","me-2"],["for","exportGameSelect",1,"form-label"],["id","exportGameSelect",1,"form-select",3,"ngModelChange","ngModel"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"h2",1),_(2,"i",2),r(3,"Stats and Standings "),n(),i(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),I("click",function(){return l.currentView="standings"}),_(8,"i",7),r(9," Standings "),n()(),i(10,"li",5)(11,"a",6),I("click",function(){return l.currentView="analytics"}),_(12,"i",8),r(13," Team Analytics "),n()(),i(14,"li",5)(15,"a",6),I("click",function(){return l.currentView="reports"}),_(16,"i",9),r(17," Export Reports "),n()()()(),g(18,Jn,37,29,"div",10)(19,na,15,4,"div",10)(20,sa,18,4,"div",10),n()),e&2&&(o(7),G("active",l.currentView==="standings"),o(4),G("active",l.currentView==="analytics"),o(4),G("active",l.currentView==="reports"),o(3),m("ngIf",l.currentView==="standings"),o(),m("ngIf",l.currentView==="analytics"),o(),m("ngIf",l.currentView==="reports"))},dependencies:[Q,ae,X,ie,Te,Ie,Pe,ee,te,qe,Ye],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;background-color:#fff;min-height:100vh;padding:2rem 0}.page-title[_ngcontent-%COMP%]{color:#495057;font-weight:600;margin-bottom:2rem;font-size:1.75rem}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6;margin-bottom:2rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#6c757d;font-weight:500;padding:1rem 1.5rem;border-radius:0;border-bottom:3px solid transparent;transition:all .2s ease}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border-color:transparent;color:#0d6efd;border-bottom-color:#0d6efd}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0d6efd;background-color:transparent;border-color:transparent;border-bottom-color:#0d6efd;font-weight:600}.team-logo-small[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain}.table-dark[_ngcontent-%COMP%]{background-color:#212529}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd) > td[_ngcontent-%COMP%]{background-color:#0000000d}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000013}.fw-semibold[_ngcontent-%COMP%]{font-weight:600}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:500}.card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.table-success[_ngcontent-%COMP%]{background-color:#1987541a!important}.table-warning[_ngcontent-%COMP%]{background-color:#ffc1071a!important}.table-danger[_ngcontent-%COMP%]{background-color:#dc35451a!important}.btn-info[_ngcontent-%COMP%]{background-color:#0dcaf0;border-color:#0dcaf0;color:#000}.btn-outline-info[_ngcontent-%COMP%]{color:#0dcaf0;border-color:#0dcaf0}.btn-outline-info[_ngcontent-%COMP%]:hover{background-color:#0dcaf0;border-color:#0dcaf0;color:#000}.border-warning[_ngcontent-%COMP%]{border-color:#ffc107!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.text-dark[_ngcontent-%COMP%]{color:#212529!important}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem;border-radius:.375rem;font-weight:600}.badge.bg-success[_ngcontent-%COMP%]{background-color:#198754!important;color:#fff!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important;color:#fff!important}.btn-outline-warning[_ngcontent-%COMP%]{color:#ffc107;border-color:#ffc107}.btn-outline-warning[_ngcontent-%COMP%]:hover{background-color:#ffc107;border-color:#ffc107;color:#000}@media (max-width: 768px){.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.btn-group[_ngcontent-%COMP%]{flex-wrap:wrap}.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem}.card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{margin-bottom:1rem}}.card-header.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#0d6efd,#6610f2)!important}.card-header.bg-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#198754,#20c997)!important}.card-header.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ffc107,#fd7e14)!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;text-transform:uppercase;font-size:.875rem;letter-spacing:.5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.fa-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fa-spin 2s infinite linear}@keyframes _ngcontent-%COMP%_fa-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.playoff-management-card[_ngcontent-%COMP%]{border-left:4px solid #ffc107}.playoff-status-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem}.team-status-card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.375rem;padding:1rem;background:#f8f9fa}.team-status-card[_ngcontent-%COMP%]:hover{background:#e9ecef;transition:background-color .2s ease}.form-select[_ngcontent-%COMP%]:focus{border-color:#86b7fe;box-shadow:0 0 0 .25rem #0d6efd40}.form-select-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.alert[_ngcontent-%COMP%]{border:none;border-radius:.5rem}.alert-info[_ngcontent-%COMP%]{background-color:#cff4fc;color:#055160;border-left:4px solid #0dcaf0}.alert-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#664d03;border-left:4px solid #ffc107}.alert-success[_ngcontent-%COMP%]{background-color:#d1e7dd;color:#0f5132;border-left:4px solid #198754}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-left:4px solid #dc3545}"]})};var vi=t=>({"table-success":t});function la(t,a){t&1&&(i(0,"div",3)(1,"div",4)(2,"span",5),r(3,"Loading..."),n()()())}function da(t,a){if(t&1&&(i(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),r(5),n()(),i(6,"div",11)(7,"h1",12),r(8),n(),i(9,"div",13),r(10),n(),i(11,"div",14),_(12,"i",15),r(13,"Pending Approval "),n()(),i(14,"div",16)(15,"div",17)(16,"div",18)(17,"div",19),r(18,"Age"),n(),i(19,"div",20),r(20),n()(),i(21,"div",18)(22,"div",19),r(23,"Height"),n(),i(24,"div",20),r(25),n()(),i(26,"div",18)(27,"div",19),r(28,"Weight"),n(),i(29,"div",20),r(30),n()(),i(31,"div",18)(32,"div",19),r(33,"Hand"),n(),i(34,"div",20),r(35),n()()()()()(),i(36,"div",21)(37,"div",22)(38,"div",23)(39,"h4"),_(40,"i",24),r(41,"Player Pending Approval"),n(),i(42,"p",25),r(43," Your player "),i(44,"strong"),r(45),n(),r(46," has been submitted for approval by league management. "),n(),i(47,"p",25)(48,"small",26),r(49),oe(50,"date"),_(51,"br"),r(52," This process typically takes 24-48 hours. You will be notified once your player has been approved. "),n()(),i(53,"div",27)(54,"div",28)(55,"h6"),r(56,"Player Details"),n(),i(57,"ul",29)(58,"li")(59,"strong"),r(60,"Position:"),n(),r(61),n(),i(62,"li")(63,"strong"),r(64,"Archetype:"),n(),r(65),n(),i(66,"li")(67,"strong"),r(68,"Jersey Number:"),n(),r(69),n(),i(70,"li")(71,"strong"),r(72,"Handedness:"),n(),r(73),n(),i(74,"li")(75,"strong"),r(76,"Height:"),n(),r(77),n(),i(78,"li")(79,"strong"),r(80,"Weight:"),n(),r(81),n()()(),i(82,"div",28)(83,"h6"),r(84,"Additional Info"),n(),i(85,"ul",29)(86,"li")(87,"strong"),r(88,"Origin:"),n(),r(89),n(),i(90,"li")(91,"strong"),r(92,"Fighting:"),n(),r(93),n(),i(94,"li")(95,"strong"),r(96,"Twitch:"),n(),r(97),n(),i(98,"li")(99,"strong"),r(100,"Referral:"),n(),r(101),n(),i(102,"li")(103,"strong"),r(104,"Invited By:"),n(),r(105),n()()()()()()()()),t&2){let e=c();o(5),Z(" ",e.pendingPlayer.firstName==null?null:e.pendingPlayer.firstName.charAt(0),"",e.pendingPlayer.lastName==null?null:e.pendingPlayer.lastName.charAt(0)," "),o(3),Z("",e.pendingPlayer.firstName," ",e.pendingPlayer.lastName),o(2),Fe(" ",e.pendingPlayer.position," \u2022 ",e.pendingPlayer.archetype," \u2022 #",e.pendingPlayer.jerseyNumber," "),o(10),p(e.pendingPlayer.age),o(5),w("",e.pendingPlayer.height,'"'),o(5),w("",e.pendingPlayer.weight," lbs"),o(5),p(e.pendingPlayer.handedness),o(10),Z("",e.pendingPlayer.firstName," ",e.pendingPlayer.lastName),o(4),w(" Submitted on ",Ce(50,25,e.pendingPlayer.submittedDate==null||e.pendingPlayer.submittedDate.toDate==null?null:e.pendingPlayer.submittedDate.toDate(),"medium")),o(12),w(" ",e.pendingPlayer.position),o(4),w(" ",e.pendingPlayer.archetype),o(4),w(" #",e.pendingPlayer.jerseyNumber),o(4),w(" ",e.pendingPlayer.handedness),o(4),w(" ",e.pendingPlayer.height,'"'),o(4),w(" ",e.pendingPlayer.weight," lbs"),o(8),w(" ",e.pendingPlayer.origin||"N/A"),o(4),w(" ",e.pendingPlayer.fight||"N/A"),o(4),w(" ",e.pendingPlayer.twitch||"N/A"),o(4),w(" ",e.pendingPlayer.referral||"N/A"),o(4),w(" ",e.pendingPlayer.invitedBy||"N/A")}}function ca(t,a){if(t&1&&_(0,"img",52),t&2){let e=c(3);m("src",e.teamLogo,z)("alt",e.teamName)}}function ma(t,a){if(t&1&&(i(0,"div",49),g(1,ca,1,2,"img",50),i(2,"span",51),r(3),n()()),t&2){let e=c(2);o(),m("ngIf",e.teamLogo),o(2),p(e.teamName)}}function pa(t,a){if(t&1&&(i(0,"th"),r(1),n()),t&2){let e=a.$implicit;o(),p(e)}}function ga(t,a){if(t&1&&(i(0,"span",61),r(1),n()),t&2){let e=c(4);o(),w(" +",e.getAttributeDelta()," ")}}function ua(t,a){if(t&1&&(i(0,"td",57)(1,"div",58)(2,"span",59),r(3),n(),g(4,ga,2,1,"span",60),n()()),t&2){let e=a.$implicit,l=c(3);m("ngClass",ut(3,vi,l.isAttributeAffected(e))),o(3),p(l.playerAttributes[e]||0),o(),m("ngIf",l.isAttributeAffected(e)&&!l.trainingProcessed)}}function fa(t,a){if(t&1&&(i(0,"div",53)(1,"table",54)(2,"thead")(3,"tr"),g(4,pa,2,1,"th",55),n()(),i(5,"tbody")(6,"tr"),g(7,ua,5,5,"td",56),n()()()()),t&2){let e=c(2);o(4),m("ngForOf",e.skaterAttributeOrder),o(3),m("ngForOf",e.skaterAttributeOrder)}}function _a(t,a){if(t&1&&(i(0,"th"),r(1),n()),t&2){let e=a.$implicit;o(),p(e)}}function ha(t,a){if(t&1&&(i(0,"span",61),r(1),n()),t&2){let e=c(4);o(),w(" +",e.getAttributeDelta()," ")}}function ya(t,a){if(t&1&&(i(0,"td",57)(1,"div",58)(2,"span",59),r(3),n(),g(4,ha,2,1,"span",60),n()()),t&2){let e=a.$implicit,l=c(3);m("ngClass",ut(3,vi,l.isAttributeAffected(e))),o(3),p(l.playerAttributes[e]||0),o(),m("ngIf",l.isAttributeAffected(e)&&!l.trainingProcessed)}}function xa(t,a){if(t&1&&(i(0,"div",53)(1,"table",54)(2,"thead")(3,"tr"),g(4,_a,2,1,"th",55),n()(),i(5,"tbody")(6,"tr"),g(7,ya,5,5,"td",56),n()()()()),t&2){let e=c(2);o(4),m("ngForOf",e.goalieAttributeOrder),o(3),m("ngForOf",e.goalieAttributeOrder)}}function va(t,a){if(t&1&&(i(0,"div",62)(1,"span",63),r(2,"Enhanced"),n(),i(3,"small")(4,"strong"),r(5),n(),r(6," will improve the highlighted attributes by "),i(7,"strong"),r(8),n()()()),t&2){let e=c(2);o(5),p(e.tempTrainingType),o(3),Z("",e.getAttributeDelta()>0?"+":"","",e.getAttributeDelta()," points")}}function ba(t,a){if(t&1&&(i(0,"div",62)(1,"span",64),r(2,"Applied"),n(),i(3,"small")(4,"strong"),r(5),n(),r(6," has been processed and applied to your player's attributes. "),n()()),t&2){let e=c(2);o(5),p(e.trainingType)}}function Sa(t,a){if(t&1&&(i(0,"div",23),_(1,"i",82),i(2,"strong"),r(3,"Training Submissions Closed"),n(),_(4,"br"),r(5),n()),t&2){let e=c(3);o(5),w(" Training submissions are currently closed for Week ",e.currentProgressionWeek,". Please wait for the next progression period to open. ")}}function wa(t,a){if(t&1&&(i(0,"div",83),_(1,"i",84),i(2,"strong"),r(3,"Training Processed"),n(),_(4,"br"),r(5),n()),t&2){let e=c(3);o(5),w(" Your training for Week ",e.currentProgressionWeek," has been processed and applied to your player. You cannot modify processed training. Please wait for the next week to submit new training. ")}}function Ca(t,a){if(t&1&&(i(0,"div",83),_(1,"i",84),i(2,"strong"),r(3,"Training Already Submitted"),n(),_(4,"br"),r(5),n()),t&2){let e=c(3);o(5),w(" You have already submitted training for Week ",e.currentProgressionWeek,". You can only submit one training per week. ")}}function Ea(t,a){t&1&&(i(0,"span",94),_(1,"i",95),r(2,"Locked "),n())}function Pa(t,a){if(t&1){let e=C();i(0,"div",85)(1,"div",86)(2,"div")(3,"h6",87),r(4),n(),i(5,"p",88)(6,"strong"),r(7,"Program:"),n(),r(8),n(),i(9,"p",89)(10,"strong"),r(11,"Status:"),n(),i(12,"span",90),r(13),oe(14,"titlecase"),n(),g(15,Ea,3,0,"span",91),n()(),i(16,"button",92),I("click",function(){u(e);let s=c(3);return f(s.trainingSubmitted=!1)}),_(17,"i",93),r(18),n()()()}if(t&2){let e=c(3);o(4),w("\u2705 Training Submitted for Week ",e.currentProgressionWeek),o(4),w(" ",e.trainingType),o(4),G("bg-warning",e.trainingStatus==="pending")("bg-success",e.trainingStatus==="processed"),o(),w(" ",ke(14,11,e.trainingStatus)," "),o(2),m("ngIf",e.trainingStatus==="processed"),o(),m("disabled",!e.canEditTraining())("title",e.trainingProcessed?"Cannot edit processed training":e.progressionsOpen?"Edit training":"Progressions are closed"),o(2),w(" ",e.trainingProcessed?"Locked":"Edit Training"," ")}}function Ta(t,a){if(t&1&&(i(0,"option",103),r(1),n()),t&2){let e=a.$implicit;m("value",e),o(),w(" ",e," ")}}function Ia(t,a){if(t&1){let e=C();i(0,"div",96)(1,"label",97),r(2),n(),i(3,"select",98),S("ngModelChange",function(s){u(e);let d=c(3);return b(d.tempTrainingType,s)||(d.tempTrainingType=s),f(s)}),I("change",function(){u(e);let s=c(3);return f(s.onTrainingChange())}),i(4,"option",99),r(5,"-- Choose Your Training --"),n(),g(6,Ta,2,2,"option",100),n(),i(7,"button",101),I("click",function(){u(e);let s=c(3);return f(s.submitTraining())}),_(8,"i",102),r(9),n()()}if(t&2){let e=c(3);o(2),w("Select Training Program for Week ",e.currentProgressionWeek),o(),v("ngModel",e.tempTrainingType),m("disabled",!e.progressionsOpen||e.trainingProcessed),o(3),m("ngForOf",e.trainingOptions),o(),m("disabled",!e.tempTrainingType||!e.progressionsOpen||e.trainingProcessed),o(2),w(" Submit Training for Week ",e.currentProgressionWeek," ")}}function Ma(t,a){if(t&1&&(i(0,"div",104),_(1,"i",105),r(2),n()),t&2){let e=c(3);o(2),w(" Secondary Position Progress: ",e.secondaryProgress,"/3 weeks completed ")}}function ka(t,a){if(t&1){let e=C();i(0,"div")(1,"div",65)(2,"div",66)(3,"div",67)(4,"h5",25),r(5,"Player Details"),n(),i(6,"div",65)(7,"div",68)(8,"div",19),r(9,"Call Name"),n(),i(10,"div",20),r(11),n()(),i(12,"div",68)(13,"div",19),r(14,"Origin"),n(),i(15,"div",20),r(16),n()(),i(17,"div",68)(18,"div",19),r(19,"Fighting"),n(),i(20,"div",20),r(21),n()(),i(22,"div",68)(23,"div",19),r(24,"Race"),n(),i(25,"div",20),r(26),n()(),i(27,"div",68)(28,"div",19),r(29,"Hair"),n(),i(30,"div",20),r(31),n()(),i(32,"div",68)(33,"div",19),r(34,"Beard"),n(),i(35,"div",20),r(36),n()(),i(37,"div",68)(38,"div",19),r(39,"Stick Tape"),n(),i(40,"div",20),r(41),n()(),i(42,"div",68)(43,"div",19),r(44,"Twitch"),n(),i(45,"div",20),r(46),n()(),i(47,"div",69)(48,"div",19),r(49,"Referral"),n(),i(50,"div",20),r(51),n()(),i(52,"div",70)(53,"div",19),r(54,"Invited By"),n(),i(55,"div",20),r(56),n()()(),i(57,"div",71)(58,"button",72),I("click",function(){u(e);let s=c(2);return f(s.showRetireModal=!0)}),_(59,"i",73),r(60,"Retire Player "),n()()()(),i(61,"div",66)(62,"div",74)(63,"h5",75),r(64),i(65,"span",76),r(66),n()(),g(67,Sa,6,1,"div",77)(68,wa,6,1,"div",78)(69,Ca,6,1,"div",78)(70,Pa,19,13,"div",79)(71,Ia,10,6,"div",80)(72,Ma,3,1,"div",81),n()()()()}if(t&2){let e=c(2);o(11),p(e.player.callName||"N/A"),o(5),p(e.player.origin||"N/A"),o(5),p(e.player.fightTendency||"N/A"),o(5),p(e.player.race||"N/A"),o(5),p(e.player.hair||"N/A"),o(5),p(e.player.beard||"N/A"),o(5),p(e.player.stickTapeColor||"N/A"),o(5),p(e.player.twitch||"N/A"),o(5),p(e.player.referralSource||"N/A"),o(5),p(e.player.invitedBy||"N/A"),o(8),w(" Weekly Training Program - Week ",e.currentProgressionWeek," "),o(),G("bg-success",e.progressionsOpen)("bg-danger",!e.progressionsOpen),o(),w(" ",e.progressionsOpen?"Open":"Closed"," "),o(),m("ngIf",!e.progressionsOpen),o(),m("ngIf",e.trainingProcessed),o(),m("ngIf",e.hasSubmittedThisWeek&&!e.trainingSubmitted&&!e.trainingProcessed),o(),m("ngIf",e.trainingSubmitted),o(),m("ngIf",!e.trainingSubmitted&&e.progressionsOpen&&!e.hasSubmittedThisWeek&&!e.trainingProcessed),o(),m("ngIf",e.trainingType==="Learn Secondary Position")}}function Oa(t,a){if(t&1&&_(0,"img",116),t&2){let e=c().$implicit;m("src",e.teamLogo,z)("alt",e.teamName)}}function Da(t,a){if(t&1&&(i(0,"div",112)(1,"div",113),g(2,Oa,1,2,"img",114),i(3,"div",115)(4,"h6",88),r(5),n(),i(6,"small",26),r(7),oe(8,"titlecase"),oe(9,"date"),n()()()()),t&2){let e=a.$implicit;o(2),m("ngIf",e.teamLogo),o(3),p(e.teamName),o(2),Z(" ",ke(8,4,e.action)," on ",Ce(9,6,e.joinDate,"mediumDate")," ")}}function Aa(t,a){t&1&&(i(0,"div",117),r(1," No team history available "),n())}function Ra(t,a){if(t&1&&_(0,"img",124),t&2){let e=c().$implicit;m("src",e.teamLogo,z)("alt",e.teamName)}}function Na(t,a){if(t&1&&(i(0,"p",125),r(1),n()),t&2){let e=c().$implicit;o(),p(e.details)}}function Ga(t,a){if(t&1&&(i(0,"div",118)(1,"div",119)(2,"div",115)(3,"div",113),g(4,Ra,1,2,"img",120),i(5,"div")(6,"h6",88),r(7),oe(8,"titlecase"),n(),i(9,"p",121),r(10),n()()(),i(11,"small",26),r(12),oe(13,"date"),n()(),i(14,"span",122),r(15),n()(),g(16,Na,2,1,"p",123),n()),t&2){let e=a.$implicit;o(4),m("ngIf",e.teamLogo),o(3),p(ke(8,6,e.action)),o(3),p(e.teamName),o(2),p(Ce(13,8,e.timestamp,"medium")),o(3),p(e.action),o(),m("ngIf",e.details)}}function Va(t,a){t&1&&(i(0,"div",117),r(1," No career history available "),n())}function La(t,a){if(t&1&&(i(0,"div")(1,"div",65)(2,"div",28)(3,"div",67)(4,"h5",25),_(5,"i",106),r(6,"Team History "),n(),g(7,Da,10,9,"div",107)(8,Aa,2,0,"div",108),n()(),i(9,"div",28)(10,"div",67)(11,"h5",25),_(12,"i",109),r(13,"Career Timeline "),n(),i(14,"div",110),g(15,Ga,17,11,"div",111),n(),g(16,Va,2,0,"div",108),n()()()()),t&2){let e=c(2);o(7),m("ngForOf",e.getTeamHistory()),o(),m("ngIf",e.getTeamHistory().length===0),o(7),m("ngForOf",e.playerHistory),o(),m("ngIf",e.playerHistory.length===0)}}function Wa(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),oe(3,"date"),n(),i(4,"td"),r(5),n(),i(6,"td"),r(7),n(),i(8,"td"),r(9),n(),i(10,"td"),r(11),n(),i(12,"td"),r(13),n(),i(14,"td"),r(15),n(),i(16,"td"),r(17),n(),i(18,"td"),r(19),n(),i(20,"td"),r(21),n()()),t&2){let e=a.$implicit;o(2),p(Ce(3,11,e.date,"shortDate")),o(3),p(e.teamName),o(2),Z("",e.isHome?"vs":"@"," ",e.opponent),o(2),p(e.goals||0),o(2),p(e.assists||0),o(2),p((e.goals||0)+(e.assists||0)),o(2),p(e.plusMinus||0),o(2),p(e.pim||0),o(2),p(e.hits||0),o(2),p(e.shots||0)}}function Fa(t,a){t&1&&(i(0,"div",117),r(1," No game stats available "),n())}function Ua(t,a){if(t&1&&(i(0,"div")(1,"div",126)(2,"h5",25),_(3,"i",127),r(4,"Career Totals "),n(),i(5,"div",128)(6,"div",129)(7,"div",18)(8,"div",19),r(9,"Games"),n(),i(10,"div",20),r(11),n()()(),i(12,"div",129)(13,"div",18)(14,"div",19),r(15,"Goals"),n(),i(16,"div",20),r(17),n()()(),i(18,"div",129)(19,"div",18)(20,"div",19),r(21,"Assists"),n(),i(22,"div",20),r(23),n()()(),i(24,"div",129)(25,"div",18)(26,"div",19),r(27,"Points"),n(),i(28,"div",20),r(29),n()()(),i(30,"div",129)(31,"div",18)(32,"div",19),r(33,"PIM"),n(),i(34,"div",20),r(35),n()()(),i(36,"div",129)(37,"div",18)(38,"div",19),r(39,"Hits"),n(),i(40,"div",20),r(41),n()()()()(),i(42,"div",67)(43,"h5",25),_(44,"i",130),r(45,"Game by Game Stats "),n(),i(46,"div",53)(47,"table",131)(48,"thead")(49,"tr")(50,"th"),r(51,"Date"),n(),i(52,"th"),r(53,"Team"),n(),i(54,"th"),r(55,"vs"),n(),i(56,"th"),r(57,"G"),n(),i(58,"th"),r(59,"A"),n(),i(60,"th"),r(61,"PTS"),n(),i(62,"th"),r(63,"+/-"),n(),i(64,"th"),r(65,"PIM"),n(),i(66,"th"),r(67,"Hits"),n(),i(68,"th"),r(69,"Shots"),n()()(),i(70,"tbody"),g(71,Wa,22,14,"tr",55),n()()(),g(72,Fa,2,0,"div",108),n()()),t&2){let e=c(2);o(11),p(e.getTotalStats().games),o(6),p(e.getTotalStats().goals),o(6),p(e.getTotalStats().assists),o(6),p(e.getTotalStats().points),o(6),p(e.getTotalStats().pim),o(6),p(e.getTotalStats().hits),o(30),m("ngForOf",e.gameStats),o(),m("ngIf",e.gameStats.length===0)}}function Ba(t,a){t&1&&(i(0,"span",134),_(1,"i",135),n())}function Ha(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),oe(3,"date"),n(),i(4,"td"),r(5),n(),i(6,"td")(7,"span",90),r(8),oe(9,"titlecase"),n(),g(10,Ba,2,0,"span",133),n(),i(11,"td"),r(12),n(),i(13,"td"),r(14),n()()),t&2){let e=a.$implicit;o(2),p(Ce(3,10,e.timestamp,"mediumDate")),o(3),p(e.training),o(2),G("bg-warning",e.status==="pending")("bg-success",e.status==="processed"),o(),w(" ",ke(9,13,e.status)," "),o(2),m("ngIf",e.status==="processed"),o(2),p(e.week||"N/A"),o(2),p(e.season||"N/A")}}function $a(t,a){t&1&&(i(0,"div",117),r(1," No training history available "),n())}function ja(t,a){if(t&1&&(i(0,"div")(1,"div",67)(2,"h5",25),_(3,"i",132),r(4,"Training History "),n(),i(5,"div",53)(6,"table",131)(7,"thead")(8,"tr")(9,"th"),r(10,"Date"),n(),i(11,"th"),r(12,"Training Program"),n(),i(13,"th"),r(14,"Status"),n(),i(15,"th"),r(16,"Week"),n(),i(17,"th"),r(18,"Season"),n()()(),i(19,"tbody"),g(20,Ha,15,15,"tr",55),n()()(),g(21,$a,2,0,"div",108),n()()),t&2){let e=c(2);o(20),m("ngForOf",e.trainingHistory),o(),m("ngIf",e.trainingHistory.length===0)}}function za(t,a){if(t&1){let e=C();i(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),r(5),n()(),i(6,"div",28)(7,"h1",12),r(8),n(),i(9,"div",13),r(10),n(),g(11,ma,4,2,"div",30),n(),i(12,"div",31)(13,"div",17)(14,"div",32)(15,"div",19),r(16,"Overall"),n(),i(17,"div",33)(18,"div",34)(19,"div",35),r(20),n()()()(),i(21,"div",18)(22,"div",19),r(23,"Age"),n(),i(24,"div",20),r(25),n()(),i(26,"div",18)(27,"div",19),r(28,"Height"),n(),i(29,"div",20),r(30),n()(),i(31,"div",18)(32,"div",19),r(33,"Weight"),n(),i(34,"div",20),r(35),n()(),i(36,"div",18)(37,"div",19),r(38,"Hand"),n(),i(39,"div",20),r(40),n()()()()()(),i(41,"div",36)(42,"h5",37),r(43," Player Attributes "),n(),g(44,fa,8,2,"div",38)(45,xa,8,2,"div",38)(46,va,9,3,"div",39)(47,ba,7,1,"div",39),n(),i(48,"div",40)(49,"ul",41)(50,"li",42)(51,"a",43),I("click",function(){u(e);let s=c();return f(s.onTabChange("overview"))}),_(52,"i",44),r(53," Overview "),n()(),i(54,"li",42)(55,"a",43),I("click",function(){u(e);let s=c();return f(s.onTabChange("history"))}),_(56,"i",45),r(57," Career History "),n()(),i(58,"li",42)(59,"a",43),I("click",function(){u(e);let s=c();return f(s.onTabChange("stats"))}),_(60,"i",46),r(61," Game Stats "),n()(),i(62,"li",42)(63,"a",43),I("click",function(){u(e);let s=c();return f(s.onTabChange("trainings"))}),_(64,"i",47),r(65," Training History "),n()()()(),g(66,ka,73,22,"div",48)(67,La,17,4,"div",48)(68,Ua,73,8,"div",48)(69,ja,22,2,"div",48),n()}if(t&2){let e=c();o(5),Z(" ",e.player.firstName==null?null:e.player.firstName.charAt(0),"",e.player.lastName==null?null:e.player.lastName.charAt(0)," "),o(3),Z("",e.player.firstName," ",e.player.lastName),o(2),Fe(" ",e.player.position," \u2022 ",e.player.archetype," \u2022 #",e.player.jerseyNumber," "),o(),m("ngIf",e.teamName),o(7),At("background","conic-gradient(#0d6efd 0deg "+(e.playerAttributes.OVERALL||50)*3.6+"deg, #e9ecef "+(e.playerAttributes.OVERALL||50)*3.6+"deg 360deg)"),o(2),w(" ",e.playerAttributes.OVERALL||50," "),o(5),p(e.player.age),o(5),w("",e.player.height,'"'),o(5),w("",e.player.weight," lbs"),o(5),p(e.player.handedness),o(4),m("ngIf",e.player.position!=="G"),o(),m("ngIf",e.player.position==="G"),o(),m("ngIf",e.tempTrainingType&&!e.trainingProcessed),o(),m("ngIf",e.trainingProcessed&&e.trainingType),o(4),G("active",e.currentView==="overview"),o(4),G("active",e.currentView==="history"),o(4),G("active",e.currentView==="stats"),o(4),G("active",e.currentView==="trainings"),o(3),m("ngIf",e.currentView==="overview"),o(),m("ngIf",e.currentView==="history"),o(),m("ngIf",e.currentView==="stats"),o(),m("ngIf",e.currentView==="trainings")}}function qa(t,a){if(t&1){let e=C();i(0,"div",136)(1,"div",137)(2,"div",138)(3,"div",139)(4,"h5",140),_(5,"i",141),r(6,"Retire Player "),n(),i(7,"button",142),I("click",function(){u(e);let s=c();return f(s.showRetireModal=!1)}),n()(),i(8,"div",143)(9,"div",23)(10,"strong"),r(11,"Warning:"),n(),r(12," This action cannot be undone. Your player will be permanently retired from the league. "),n(),i(13,"p"),r(14,"Are you sure you want to retire "),i(15,"strong"),r(16),n(),r(17,"?"),n(),i(18,"p"),r(19,"To confirm, please type "),i(20,"strong"),r(21,"RETIRE"),n(),r(22," in the box below:"),n(),i(23,"input",144),S("ngModelChange",function(s){u(e);let d=c();return b(d.retireConfirmation,s)||(d.retireConfirmation=s),f(s)}),n()(),i(24,"div",145)(25,"button",146),I("click",function(){u(e);let s=c();return f(s.showRetireModal=!1)}),r(26,"Cancel"),n(),i(27,"button",147),I("click",function(){u(e);let s=c();return f(s.retirePlayer())}),_(28,"i",148),r(29,"Retire Player "),n()()()()()}if(t&2){let e=c();o(16),Z("",e.player.firstName," ",e.player.lastName),o(7),v("ngModel",e.retireConfirmation),o(4),m("disabled",e.retireConfirmation!=="RETIRE")}}var rt=class t{firestore=W(se);auth=W(Qe);router=W(q);player=null;pendingPlayer=null;teamName="";teamLogo="";loading=!0;isPendingPlayer=!1;trainingType="";tempTrainingType="";trainingOptions=[];trainingSubmitted=!1;trainingStatus=null;trainingProcessed=!1;progressionsOpen=!0;currentProgressionWeek=1;hasSubmittedThisWeek=!1;secondaryProgress=0;existingTrainingId=null;playerAttributes={};skaterAttributeOrder=["SPEED","BODY CHK","ENDUR","PK CTRL","PASSING","SHT/PSS","SLAP PWR","SLAP ACC","WRI PWR","WRI ACC","AGILITY","STRENGTH","ACCEL","BALANCE","FACEOFF","DRBLTY","DEKE","AGGRE","POISE","HND EYE","SHT BLK","OFF AWR","DEF AWR","DISCIP","FIGHTING","STK CHK"];goalieAttributeOrder=["GLV LOW","GLV HIGH","STK LOW","STK HIGH","5 HOLE","SPEED","AGILITY","CONSIS","PK CTRL","ENDUR","BRK AWAY","RBD CTRL","RECOV","POISE","PASSING","ANGLES","PK PL FRQ","AGGRE","DRBLTY","VISION"];trainingMap={"Speed Skating":["SPEED","ACCEL","AGILITY"],"Distance Skating":["ENDUR","BALANCE","DRBLTY"],"Stick Handling":["PK CTRL","DEKE","HND EYE"],MMA:["BODY CHK","STRENGTH","AGGRE","FIGHTING"],Marksmanship:["WRI PWR","SLAP PWR","PASSING"],"Hit the Targets":["WRI ACC","SLAP ACC","POISE"],"Study Film":["OFF AWR","DEF AWR","DISCIP"],"Special Teams":["STK CHK","SHT BLK","FACEOFF"],"Learn Secondary Position":[],"Shots High":["GLV HIGH","STK HIGH","VISION"],"Shots Low":["GLV LOW","STK LOW","5 HOLE"],"Side to Sides":["SPEED","AGILITY","POISE"],"Puck Skills":["PK CTRL","PASSING","PK PL FRQ"],"Laps in Pads":["ENDUR","DRBLTY","AGGRE"],Positioning:["BRK AWAY","ANGLES"],"Under Pressure":["RBD CTRL","RECOV"]};playerHistory=[];gameStats=[];trainingHistory=[];currentView="overview";showRetireModal=!1;retireConfirmation="";teamCache=new Map;gameStatsCache=null;historyCache=null;weekChangeListener;ngOnInit(){return E(this,null,function*(){let a=this.auth.currentUser;if(!a){this.loading=!1;return}console.log("PlayerManager: Initializing for user:",a.uid),this.weekChangeListener=()=>{console.log("\u{1F504} Week change detected, refreshing progression settings..."),this.loadProgressionSettings()},window.addEventListener("weekChanged",this.weekChangeListener);try{let[e,l]=yield Promise.all([this.loadPlayerData(a.uid),this.loadProgressionSettings()]);e&&(yield this.initializePlayerData(e))}catch(e){console.error("Error initializing player manager:",e)}finally{this.loading=!1}})}ngOnDestroy(){this.weekChangeListener&&window.removeEventListener("weekChanged",this.weekChangeListener)}loadPlayerData(a){return E(this,null,function*(){console.log("\u{1F50D} Loading player data for user:",a);let[e,l]=yield Promise.all([A(U(O(this.firestore,"players"),N("userId","==",a),N("status","==","active"),ye(1))),A(U(O(this.firestore,"pendingPlayers"),N("userId","==",a),N("status","==","pending"),ye(1)))]);if(!e.empty){let s=e.docs[0].data();return s.id=e.docs[0].id,this.player=s,this.isPendingPlayer=!1,console.log("\u26A1 Active player found"),{type:"active",data:s}}if(!l.empty){let s=l.docs[0].data();return s.id=l.docs[0].id,this.pendingPlayer=s,this.isPendingPlayer=!0,console.log("\u23F3 Pending player found"),{type:"pending",data:s}}return console.log("\u274C No player found"),null})}initializePlayerData(a){return E(this,null,function*(){if(a.type==="pending")return;this.setTrainingOptions(this.player.position);let e=[this.loadPlayerAttributes(),this.loadProgressionData(),this.loadTeamData()];this.currentView==="history"&&e.push(this.loadPlayerHistory()),this.currentView==="stats"&&e.push(this.loadGameStats()),this.currentView==="trainings"&&e.push(this.loadTrainingHistory()),yield Promise.all(e)})}loadProgressionData(){return E(this,null,function*(){if(!this.player?.id)return;let[a,e]=yield Promise.all([A(U(O(this.firestore,`players/${this.player.id}/progressions`),N("training","==","Learn Secondary Position"))),A(U(O(this.firestore,`players/${this.player.id}/progressions`),N("week","==",this.currentProgressionWeek),N("season","==",new Date().getFullYear()),ye(1)))]);if(this.secondaryProgress=a.docs.length,!e.empty){let l=e.docs[0].data();this.hasSubmittedThisWeek=!0,this.trainingType=l.training,this.tempTrainingType=this.trainingType,this.trainingStatus=l.status||"pending",this.trainingProcessed=this.trainingStatus==="processed",this.trainingSubmitted=!0,this.existingTrainingId=e.docs[0].id}})}loadTeamData(){return E(this,null,function*(){if(!this.player?.id||this.player.teamId==="none")return;if(this.teamCache.has(this.player.teamId)){let l=this.teamCache.get(this.player.teamId);this.teamName=l.name,this.teamLogo=l.logo;return}let a=R(this.firestore,`teams/${this.player.teamId}`),e=yield $(a);if(e.exists()){let l=e.data(),s=`${l.city} ${l.mascot}`.trim(),d=l.logoUrl||"";this.teamCache.set(this.player.teamId,{name:s,logo:d}),this.teamName=s,this.teamLogo=d}})}loadGameStats(){return E(this,null,function*(){if(this.player?.id){if(this.gameStatsCache){this.gameStats=this.gameStatsCache;return}console.log("\u{1F4CA} Loading game stats..."),this.gameStats=[];try{let a=O(this.firestore,"teams"),e=yield A(a),l=[],s=new Map;for(let d of e.docs){let y=d.id,h=d.data(),x=R(this.firestore,`teams/${y}/roster/${this.player.id}`);if(!(yield $(x)).exists())continue;let P=`${h.city} ${h.mascot}`;l.push(this.loadTeamGamesForPlayer(y,P,s))}yield Promise.all(l),this.gameStats=Array.from(s.values()).sort((d,y)=>y.date.getTime()-d.date.getTime()),this.gameStatsCache=this.gameStats,console.log(`\u2705 Loaded ${this.gameStats.length} game stats`)}catch(a){console.error("Error loading game stats:",a)}}})}loadTeamGamesForPlayer(a,e,l){return E(this,null,function*(){let s=O(this.firestore,`teams/${a}/games`),d=yield A(s);for(let y of d.docs){let h=y.data(),x=h.homePlayerStats?.[this.player.id],T=h.awayPlayerStats?.[this.player.id];if(!x&&!T)continue;let P=x||T,M=!!x,k=M?h.awayTeamId:h.homeTeamId,D="Unknown Opponent";if(k&&this.teamCache.has(k))D=this.teamCache.get(k).name;else if(k){let F=R(this.firestore,`teams/${k}`),L=yield $(F);if(L.exists()){let J=L.data(),me=`${J.city} ${J.mascot}`;this.teamCache.set(k,{name:me,logo:J.logoUrl||""}),D=me}}let V=`${h.week}-${h.day}-${h.homeTeamId}-${h.awayTeamId}`;l.has(V)||l.set(V,{gameId:y.id,teamName:e,opponent:D,date:h.date?.toDate?.()||new Date,week:h.week,day:h.day,isHome:M,goals:P.goals||0,assists:P.assists||0,plusMinus:P.plusMinus||0,shots:P.shots||0,pim:P.pim||0,hits:P.hits||0,ppg:P.ppg||0,shg:P.shg||0,fot:P.fot||0,fow:P.fow||0})}})}loadPlayerHistory(){return E(this,null,function*(){if(!this.player?.id)return;if(this.historyCache){this.playerHistory=this.historyCache;return}console.log("\u{1F4DC} Loading player history...");let a=O(this.firestore,`players/${this.player.id}/history`),e=U(a,De("timestamp","desc"),ye(20)),l=yield A(e);this.playerHistory=yield Promise.all(l.docs.map(s=>E(this,null,function*(){let d=s.data(),y="Unknown Team",h="";if(d.teamId&&d.teamId!=="none")if(this.teamCache.has(d.teamId)){let x=this.teamCache.get(d.teamId);y=x.name,h=x.logo}else{let x=R(this.firestore,`teams/${d.teamId}`),T=yield $(x);if(T.exists()){let P=T.data();y=`${P.city} ${P.mascot}`,h=P.logoUrl||"",this.teamCache.set(d.teamId,{name:y,logo:h})}}return ge(K({id:s.id},d),{teamName:y,teamLogo:h,timestamp:d.timestamp?.toDate?.()||new Date(d.timestamp)})}))),this.historyCache=this.playerHistory,console.log(`\u2705 Loaded ${this.playerHistory.length} history entries`)})}loadPlayerAttributes(){return E(this,null,function*(){if(!this.player?.id)return;let a=R(this.firestore,`players/${this.player.id}/meta/attributes`),e=yield $(a);e.exists()&&(this.playerAttributes=e.data())})}loadTrainingHistory(){return E(this,null,function*(){if(!this.player?.id)return;let a=O(this.firestore,`players/${this.player.id}/progressions`),e=U(a,De("timestamp","desc"),ye(10)),l=yield A(e);this.trainingHistory=l.docs.map(s=>ge(K({id:s.id},s.data()),{timestamp:s.data().timestamp?.toDate?.()||new Date(s.data().timestamp)}))})}onTabChange(a){return E(this,null,function*(){switch(this.currentView=a,a){case"history":this.historyCache||(yield this.loadPlayerHistory());break;case"stats":this.gameStatsCache||(yield this.loadGameStats());break;case"trainings":this.trainingHistory.length===0&&(yield this.loadTrainingHistory());break}})}loadProgressionSettings(){return E(this,null,function*(){try{let a=R(this.firestore,"progressionSettings/config"),e=yield $(a),l=this.currentProgressionWeek;if(e.exists()){let s=e.data();this.progressionsOpen=s.open??!0,this.currentProgressionWeek=s.week??1}else this.progressionsOpen=!0,this.currentProgressionWeek=1;l!==this.currentProgressionWeek&&l!==0&&(console.log(`\u{1F4C5} Week changed from ${l} to ${this.currentProgressionWeek}`),yield this.handleWeekChange()),this.player?.id&&(yield this.checkCurrentWeekSubmission())}catch(a){console.error("Error loading progression settings:",a),this.progressionsOpen=!0,this.currentProgressionWeek=1}})}handleWeekChange(){return E(this,null,function*(){console.log("\u{1F504} Handling week change..."),this.tempTrainingType="",this.trainingType="",this.trainingSubmitted=!1,this.trainingStatus=null,this.trainingProcessed=!1,this.existingTrainingId=null,this.hasSubmittedThisWeek=!1,console.log("\u2705 Training selection cleared for new week")})}checkCurrentWeekSubmission(){return E(this,null,function*(){if(this.player?.id)try{let a=O(this.firestore,`players/${this.player.id}/progressions`),e=U(a,N("week","==",this.currentProgressionWeek),N("season","==",new Date().getFullYear()),ye(1)),l=yield A(e);if(l.empty)this.hasSubmittedThisWeek=!1,this.trainingSubmitted=!1,this.trainingProcessed=!1;else{let s=l.docs[0].data();this.hasSubmittedThisWeek=!0,this.trainingType=s.training,this.tempTrainingType=this.trainingType,this.trainingStatus=s.status||"pending",this.trainingProcessed=this.trainingStatus==="processed",this.trainingSubmitted=!0,this.existingTrainingId=l.docs[0].id}}catch(a){console.error("Error checking current week submission:",a)}})}setTrainingOptions(a){a==="G"?this.trainingOptions=["Shots High","Shots Low","Side to Sides","Puck Skills","Laps in Pads","Positioning","Under Pressure"]:(this.trainingOptions=["Speed Skating","Distance Skating","Stick Handling","MMA","Marksmanship","Hit the Targets","Study Film","Special Teams"],a!=="D"&&this.trainingOptions.push("Learn Secondary Position"))}onTrainingChange(){}isAttributeAffected(a){return this.tempTrainingType?(this.trainingMap[this.tempTrainingType]||[]).includes(a):!1}getAttributeDelta(){if(!this.player?.age)return 0;let a=this.player.age,e=this.currentProgressionWeek;return a<=26?e<=5?3:2:a<=29||a===30?1:a===31?-1:a===32||a===33?-2:-3}canEditTraining(){return!this.trainingProcessed&&this.progressionsOpen}submitTraining(){return E(this,null,function*(){if(!this.tempTrainingType||!this.player?.id||!this.player?.teamId)return;if(!this.progressionsOpen){alert("Training submissions are currently closed. Please wait for the next progression period to open.");return}if(this.trainingProcessed){alert("Your training has already been processed and cannot be modified. Please wait for the next week.");return}if(this.hasSubmittedThisWeek&&!this.existingTrainingId){alert(`You have already submitted training for Week ${this.currentProgressionWeek}. Please wait for the next week.`);return}let a=new Date().getFullYear(),e={training:this.tempTrainingType,timestamp:new Date,status:"pending",week:this.currentProgressionWeek,season:a},l=O(this.firestore,`players/${this.player.id}/progressions`),s=O(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression`);if(this.existingTrainingId){if(this.trainingProcessed){alert("Your training has already been processed and cannot be modified.");return}let d=R(this.firestore,`players/${this.player.id}/progressions/${this.existingTrainingId}`);yield be(d,e);let y=R(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression/${this.existingTrainingId}`);yield Ge(y,e)}else{let d=yield Oe(l,e);this.existingTrainingId=d.id;let y=R(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}/progression/${d.id}`);yield Ge(y,e)}this.trainingType=this.tempTrainingType,this.trainingStatus="pending",this.trainingProcessed=!1,this.hasSubmittedThisWeek=!0,this.trainingType==="Learn Secondary Position"&&(this.secondaryProgress++,this.secondaryProgress>=3&&alert("You have successfully learned your secondary position!")),this.trainingSubmitted=!0,yield this.loadTrainingHistory()})}retirePlayer(){return E(this,null,function*(){if(this.retireConfirmation!=="RETIRE"){alert('Please type "RETIRE" to confirm retirement');return}if(this.player?.id)try{let a=O(this.firestore,`players/${this.player.id}/history`);yield Oe(a,{action:"retired",teamId:this.player.teamId,timestamp:new Date,details:"Player announced retirement from professional hockey"});let e=R(this.firestore,`players/${this.player.id}`);if(yield be(e,{status:"retired",retiredDate:new Date,teamId:"retired"}),this.player.teamId&&this.player.teamId!=="none"){let l=R(this.firestore,`teams/${this.player.teamId}/roster/${this.player.id}`);yield be(l,{status:"retired",retiredDate:new Date})}this.showRetireModal=!1,this.player.status="retired",window.dispatchEvent(new CustomEvent("playerRetired")),alert("Your player has been retired. Thank you for your service to the league!")}catch(a){console.error("Error retiring player:",a),alert("Failed to retire player. Please try again.")}})}getTotalStats(){return this.gameStats.reduce((a,e)=>(a.games+=1,a.goals+=e.goals||0,a.assists+=e.assists||0,a.points+=(e.goals||0)+(e.assists||0),a.pim+=e.pim||0,a.hits+=e.hits||0,a.shots+=e.shots||0,a),{games:0,goals:0,assists:0,points:0,pim:0,hits:0,shots:0})}getTeamHistory(){let a=new Map;return this.playerHistory.forEach(e=>{(e.action==="signed"||e.action==="traded")&&a.set(e.teamId,{teamName:e.teamName,teamLogo:e.teamLogo,joinDate:e.timestamp,action:e.action})}),Array.from(a.values()).sort((e,l)=>l.joinDate.getTime()-e.joinDate.getTime())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-player-manager"]],decls:4,vars:4,consts:[["class","loading-container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["class","modal fade show","tabindex","-1","style","display: block; background: rgba(0,0,0,0.5);",4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"container","mt-4"],[1,"player-header"],[1,"row","align-items-center"],[1,"col-md-2","text-center"],[1,"player-avatar"],[1,"col-md-7"],[1,"player-name"],[1,"player-position"],[1,"team-badge","bg-warning","text-dark"],[1,"fas","fa-clock","me-2"],[1,"col-md-3"],[1,"stat-grid"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"card"],[1,"card-body","text-center"],[1,"alert","alert-warning"],[1,"fas","fa-hourglass-half","me-2"],[1,"mb-3"],[1,"text-muted"],[1,"row","mt-4"],[1,"col-md-6"],[1,"list-unstyled","text-start"],["class","team-display",4,"ngIf"],[1,"col-md-4"],[1,"stat-item","overall-rating"],[1,"overall-container"],[1,"circular-progress"],[1,"overall-value",2,"color","#0d6efd"],[1,"attributes-section-full"],[1,"attributes-title"],["class","table-responsive",4,"ngIf"],["class","training-legend",4,"ngIf"],[1,"mb-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-user","me-1"],[1,"fas","fa-history","me-1"],[1,"fas","fa-chart-line","me-1"],[1,"fas","fa-dumbbell","me-1"],[4,"ngIf"],[1,"team-display"],["class","team-logo-small",3,"src","alt",4,"ngIf"],[1,"team-name-text"],[1,"team-logo-small",3,"src","alt"],[1,"table-responsive"],[1,"table","table-bordered","attributes-table"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"attribute-cell"],[1,"attribute-value"],["class","training-impact",4,"ngIf"],[1,"training-impact"],[1,"training-legend"],[1,"legend-badge"],[1,"legend-badge","bg-success"],[1,"row"],[1,"col-lg-6"],[1,"stat-card"],[1,"col-6","mb-3"],[1,"col-12","mb-3"],[1,"col-12"],[1,"mt-4","pt-3","border-top"],[1,"btn","btn-danger","w-100",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],[1,"training-section"],[1,"training-title"],[1,"badge","ms-2"],["class","alert alert-warning",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","training-submitted",4,"ngIf"],["class","training-form",4,"ngIf"],["class","progress-indicator",4,"ngIf"],[1,"fas","fa-lock","me-2"],[1,"alert","alert-info"],[1,"fas","fa-check-circle","me-2"],[1,"training-submitted"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1","text-success"],[1,"mb-1"],[1,"mb-0"],[1,"badge"],["class","ms-2 text-success",4,"ngIf"],[1,"btn","btn-warning",3,"click","disabled","title"],[1,"fas","fa-edit","me-1"],[1,"ms-2","text-success"],[1,"fas","fa-lock","me-1"],[1,"training-form"],["for","trainingSelect",1,"form-label","fw-bold"],["name","training","id","trainingSelect",1,"form-select","mb-3",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-paper-plane","me-1"],[3,"value"],[1,"progress-indicator"],[1,"fas","fa-chart-line","me-2"],[1,"fas","fa-building","me-2"],["class","mb-3 p-3 border rounded team-history-item",4,"ngFor","ngForOf"],["class","text-muted text-center py-3",4,"ngIf"],[1,"fas","fa-timeline","me-2"],[1,"timeline"],["class","timeline-item mb-3 p-3 border-start border-3 border-primary",4,"ngFor","ngForOf"],[1,"mb-3","p-3","border","rounded","team-history-item"],[1,"d-flex","align-items-center","mb-2"],["class","team-logo-history me-3",3,"src","alt",4,"ngIf"],[1,"flex-grow-1"],[1,"team-logo-history","me-3",3,"src","alt"],[1,"text-muted","text-center","py-3"],[1,"timeline-item","mb-3","p-3","border-start","border-3","border-primary"],[1,"d-flex","justify-content-between","align-items-start"],["class","team-logo-timeline me-2",3,"src","alt",4,"ngIf"],[1,"mb-1","text-muted"],[1,"badge","bg-primary"],["class","mt-2 mb-0 small",4,"ngIf"],[1,"team-logo-timeline","me-2",3,"src","alt"],[1,"mt-2","mb-0","small"],[1,"stat-card","mb-4"],[1,"fas","fa-trophy","me-2"],[1,"row","text-center"],[1,"col-md-2"],[1,"fas","fa-list","me-2"],[1,"table","table-striped"],[1,"fas","fa-dumbbell","me-2"],["class","ms-1",4,"ngIf"],[1,"ms-1"],["title","Training has been processed and locked",1,"fas","fa-lock","text-success"],["tabindex","-1",1,"modal","fade","show",2,"display","block","background","rgba(0,0,0,0.5)"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],["type","text","placeholder","Type RETIRE to confirm",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-sign-out-alt","me-1"]],template:function(e,l){e&1&&g(0,la,4,0,"div",0)(1,da,106,28,"div",1)(2,za,70,31,"div",1)(3,qa,30,4,"div",2),e&2&&(m("ngIf",l.loading),o(),m("ngIf",!l.loading&&l.isPendingPlayer&&l.pendingPlayer),o(),m("ngIf",!l.loading&&!l.isPendingPlayer&&l.player&&(l.player==null?null:l.player.status)!=="retired"),o(),m("ngIf",l.showRetireModal))},dependencies:[Q,Vt,ae,X,ie,Te,Ie,re,Pe,ee,te,qe,Ye],styles:['.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:300px;flex-direction:column;gap:1rem}.player-header[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:2rem;margin-bottom:2rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.player-avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#0d6efd;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;color:#fff;font-weight:700;margin-bottom:1rem}.player-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#212529;margin-bottom:.5rem}.team-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;background:#f8f9fa;padding:.75rem 1rem;border-radius:8px;border:1px solid #dee2e6;margin-top:.5rem}.team-logo-small[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain;border-radius:4px}.team-logo-history[_ngcontent-%COMP%]{width:32px;height:32px;object-fit:contain;border-radius:4px;flex-shrink:0}.team-logo-timeline[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain;border-radius:4px;flex-shrink:0}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.stat-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:.75rem;background:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.circular-progress[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative}.circular-progress[_ngcontent-%COMP%]:before{content:"";position:absolute;width:46px;height:46px;border-radius:50%;background:#fff;z-index:1}.overall-value[_ngcontent-%COMP%]{position:relative;z-index:2;font-size:1.25rem;font-weight:700;color:#0d6efd}.training-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef}.attributes-section-full[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000001a;border:1px solid #e9ecef;margin-bottom:2rem}.attributes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;font-weight:600;text-align:center;padding:.75rem .5rem;font-size:.8rem;text-transform:uppercase;border:1px solid #dee2e6}.attributes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:.75rem .5rem;font-weight:600;border:1px solid #dee2e6}.training-impact[_ngcontent-%COMP%]{background:#198754;color:#fff;padding:.2rem .5rem;border-radius:12px;font-size:.7rem;font-weight:700}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#6c757d;font-weight:500;padding:1rem 1.5rem;border-radius:0;border-bottom:3px solid transparent}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0d6efd;background-color:transparent;border-color:transparent;border-bottom-color:#0d6efd;font-weight:600}@media (max-width: 768px){.player-header[_ngcontent-%COMP%]{padding:1.5rem}.stat-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.attributes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .attributes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem;font-size:.75rem}}']})};function Ya(t,a){t&1&&(i(0,"div",3)(1,"div",4)(2,"span",5),r(3,"Loading..."),n()(),i(4,"p",6),r(5,"Checking player status..."),n()())}function Ka(t,a){if(t&1){let e=C();i(0,"div",7)(1,"div",8)(2,"h4"),_(3,"i",9),r(4),n(),i(5,"p",10),r(6,"Your player has retired from professional hockey. Thank you for your service to the league!"),n(),i(7,"button",11),I("click",function(){u(e);let s=c();return f(s.createNewPlayer())}),_(8,"i",12),r(9,"Create New Player "),n()()()}if(t&2){let e=c();o(4),w("",e.retiredPlayerName," Has Retired")}}function Xa(t,a){if(t&1&&(i(0,"option",61),r(1),n()),t&2){let e=a.$implicit;m("value",e),o(),p(e)}}function Qa(t,a){if(t&1){let e=C();i(0,"div",21)(1,"label",22),r(2,"Archetype"),n(),i(3,"select",59),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.playerForm.archetype,s)||(d.playerForm.archetype=s),f(s)}),g(4,Xa,2,2,"option",60),n()()}if(t&2){let e=c(2);o(3),v("ngModel",e.playerForm.archetype),o(),m("ngForOf",e.filteredArchetypes)}}function Za(t,a){if(t&1){let e=C();i(0,"div")(1,"div",7)(2,"div",13)(3,"div",14)(4,"h4",15),_(5,"i",16),r(6,"Create Your Player "),n()(),i(7,"div",17)(8,"div",18),_(9,"i",19),i(10,"strong"),r(11,"Player Creation Process:"),n(),r(12," Your player will be submitted for approval by league management. Once approved, your player will be created with the appropriate attributes and you'll be able to start playing! "),n(),i(13,"form",20),I("ngSubmit",function(){u(e);let s=c();return f(s.createPlayer())}),i(14,"div",21)(15,"label",22),r(16,"First Name"),n(),i(17,"input",23),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.firstName,s)||(d.playerForm.firstName=s),f(s)}),n()(),i(18,"div",21)(19,"label",22),r(20,"Last Name"),n(),i(21,"input",24),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.lastName,s)||(d.playerForm.lastName=s),f(s)}),n()(),i(22,"div",25)(23,"label",22),r(24,"Play by Play Name"),n(),i(25,"input",26),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.gamertag,s)||(d.playerForm.gamertag=s),f(s)}),n()(),i(26,"div",21)(27,"label",22),r(28,"Position"),n(),i(29,"select",27),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.position,s)||(d.playerForm.position=s),f(s)}),I("change",function(){u(e);let s=c();return f(s.onPositionChange())}),i(30,"option",28),r(31,"Select Position"),n(),i(32,"option",29),r(33,"Left Wing"),n(),i(34,"option",30),r(35,"Center"),n(),i(36,"option",31),r(37,"Right Wing"),n(),i(38,"option",32),r(39,"Defense"),n(),i(40,"option",33),r(41,"Goalie"),n()()(),g(42,Qa,5,2,"div",34),i(43,"div",21)(44,"label",22),r(45,"Jersey Number"),n(),i(46,"input",35),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.jerseyNumber,s)||(d.playerForm.jerseyNumber=s),f(s)}),n()(),i(47,"div",21)(48,"label",22),r(49,"Handedness"),n(),i(50,"select",36),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.handedness,s)||(d.playerForm.handedness=s),f(s)}),i(51,"option",37),r(52,"Left"),n(),i(53,"option",38),r(54,"Right"),n()()(),i(55,"div",21)(56,"label",22),r(57,"Height (inches)"),n(),i(58,"input",39),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.height,s)||(d.playerForm.height=s),f(s)}),n()(),i(59,"div",21)(60,"label",22),r(61,"Weight (lbs)"),n(),i(62,"input",40),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.weight,s)||(d.playerForm.weight=s),f(s)}),n()(),i(63,"div",25)(64,"label",22),r(65,"Fighter Tendency"),n(),i(66,"select",41),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.fight,s)||(d.playerForm.fight=s),f(s)}),i(67,"option",42),r(68,"Never"),n(),i(69,"option",43),r(70,"Rarely"),n(),i(71,"option",44),r(72,"Sometimes"),n(),i(73,"option",45),r(74,"Often"),n()()(),i(75,"div",21)(76,"label",22),r(77,"Place of Origin"),n(),i(78,"input",46),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.origin,s)||(d.playerForm.origin=s),f(s)}),n()(),i(79,"div",21)(80,"label",22),r(81,"Hair Style / Color (1\u201373)"),n(),i(82,"input",47),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.hair,s)||(d.playerForm.hair=s),f(s)}),n()(),i(83,"div",25)(84,"label",22),r(85,"Beard"),n(),i(86,"input",48),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.beard,s)||(d.playerForm.beard=s),f(s)}),n()(),i(87,"div",25)(88,"label",22),r(89,"Stick Tape Color"),n(),i(90,"input",49),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.tape,s)||(d.playerForm.tape=s),f(s)}),n()(),i(91,"div",25)(92,"label",22),r(93,"Ethnicity"),n(),i(94,"select",50),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.ethnicity,s)||(d.playerForm.ethnicity=s),f(s)}),i(95,"option",51),r(96,"Caucasian"),n(),i(97,"option",52),r(98,"African-American"),n()()(),i(99,"div",25)(100,"label",22),r(101,"Twitch Name"),n(),i(102,"input",53),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.twitch,s)||(d.playerForm.twitch=s),f(s)}),n()(),i(103,"div",25)(104,"label",22),r(105,"How did you find us?"),n(),i(106,"input",54),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.referral,s)||(d.playerForm.referral=s),f(s)}),n()(),i(107,"div",25)(108,"label",22),r(109,"Who invited you (bonus)?"),n(),i(110,"input",55),S("ngModelChange",function(s){u(e);let d=c();return b(d.playerForm.invitedBy,s)||(d.playerForm.invitedBy=s),f(s)}),n()(),i(111,"div",56)(112,"button",57),_(113,"i",58),r(114,"Submit Player for Approval "),n()()()()()()()}if(t&2){let e=c();o(17),v("ngModel",e.playerForm.firstName),o(4),v("ngModel",e.playerForm.lastName),o(4),v("ngModel",e.playerForm.gamertag),o(4),v("ngModel",e.playerForm.position),o(13),m("ngIf",e.filteredArchetypes.length>0),o(4),v("ngModel",e.playerForm.jerseyNumber),o(4),v("ngModel",e.playerForm.handedness),o(8),v("ngModel",e.playerForm.height),o(4),v("ngModel",e.playerForm.weight),o(4),v("ngModel",e.playerForm.fight),o(12),v("ngModel",e.playerForm.origin),o(4),v("ngModel",e.playerForm.hair),o(4),v("ngModel",e.playerForm.beard),o(4),v("ngModel",e.playerForm.tape),o(4),v("ngModel",e.playerForm.ethnicity),o(8),v("ngModel",e.playerForm.twitch),o(4),v("ngModel",e.playerForm.referral),o(4),v("ngModel",e.playerForm.invitedBy)}}function Ja(t,a){t&1&&(i(0,"div"),_(1,"app-player-manager"),n())}var ot=class t{firestore=W(se);auth=W(Qe);router=W(q);hasActivePlayer=!1;hasRetiredPlayer=!1;hasPendingPlayer=!1;loading=!0;retiredPlayerName="";pendingPlayerName="";showCreateForm=!1;filteredArchetypes=[];retirementListener;approvalListener;playerForm={firstName:"",lastName:"",gamertag:"",position:"",archetype:"",jerseyNumber:0,handedness:"",height:72,weight:180,fight:"",origin:"",hair:"",beard:"",tape:"",ethnicity:"",twitch:"",referral:"",invitedBy:"",age:19};ngOnInit(){return E(this,null,function*(){let a=this.auth.currentUser;if(!a){this.loading=!1;return}this.retirementListener=()=>{console.log("\u{1F3C6} Player retirement event received, refreshing status..."),this.refreshPlayerStatus()},this.approvalListener=()=>{console.log("\u2705 Player approval event received, refreshing status..."),this.refreshPlayerStatus()},window.addEventListener("playerRetired",this.retirementListener),window.addEventListener("playerApproved",this.approvalListener),yield this.checkPlayerStatus(a.uid),this.loading=!1})}ngOnDestroy(){this.retirementListener&&window.removeEventListener("playerRetired",this.retirementListener),this.approvalListener&&window.removeEventListener("playerApproved",this.approvalListener)}checkPlayerStatus(a){return E(this,null,function*(){try{console.log("\u{1F50D} Checking player status for user:",a),this.resetAllStates();let[e,l,s]=yield Promise.all([A(U(O(this.firestore,"players"),N("userId","==",a),N("status","==","active"))),A(U(O(this.firestore,"players"),N("userId","==",a),N("status","==","retired"))),A(U(O(this.firestore,"pendingPlayers"),N("userId","==",a),N("status","==","pending")))]);if(console.log("\u{1F4CA} Query results:",{active:e.docs.length,retired:l.docs.length,pending:s.docs.length}),!e.empty){this.hasActivePlayer=!0,console.log("\u26A1 Active player found - showing player manager");return}if(!s.empty){let d=s.docs[0].data();this.hasPendingPlayer=!0,this.pendingPlayerName=`${d.firstName} ${d.lastName}`,console.log("\u23F3 Pending player found:",this.pendingPlayerName);return}if(!l.empty){let d=l.docs[0].data();this.hasRetiredPlayer=!0,this.retiredPlayerName=`${d.firstName} ${d.lastName}`,console.log("\u{1F3C6} Retired player found:",this.retiredPlayerName);return}console.log("\u2795 No player found, showing create form"),this.showCreateForm=!0}catch(e){console.error("\u274C Error checking player status:",e),this.showCreateForm=!0}})}resetAllStates(){this.hasActivePlayer=!1,this.hasRetiredPlayer=!1,this.hasPendingPlayer=!1,this.showCreateForm=!1,this.retiredPlayerName="",this.pendingPlayerName=""}refreshPlayerStatus(){return E(this,null,function*(){let a=this.auth.currentUser;a&&(console.log("\u{1F504} Manually refreshing player status..."),this.loading=!0,yield new Promise(e=>setTimeout(e,500)),yield this.checkPlayerStatus(a.uid),this.loading=!1)})}onPositionChange(){let a=this.playerForm.position;["LW","C","RW"].includes(a)?this.filteredArchetypes=["Playmaker","Sniper","2-Way Forward","Power Forward","Enforcer Forward","Grinder"]:a==="D"?this.filteredArchetypes=["Defensive Defense","Offensive Defense","2-Way Defense","Enforcer Defense"]:a==="G"?this.filteredArchetypes=["Hybrid","Butterfly","Standup"]:this.filteredArchetypes=[],this.playerForm.archetype=""}createPlayer(){return E(this,null,function*(){let a=this.auth.currentUser;if(a)try{console.log("\u{1F4DD} Creating pending player request...");let e=R(this.firestore,"progressionSettings/config"),l=yield $(e),s=l.exists()&&l.data().week||1,d=R(this.firestore,"leagueSettings/season"),y=yield $(d),h=y.exists()&&y.data().currentSeason||1,x=s<=5?20:19;yield Oe(O(this.firestore,"pendingPlayers"),ge(K({},this.playerForm),{userId:a.uid,status:"pending",submittedDate:new Date,userEmail:a.email,userDisplayName:a.displayName,age:x,draftClass:h})),console.log("\u2705 Pending player created successfully"),this.resetAllStates(),this.hasPendingPlayer=!0,this.pendingPlayerName=`${this.playerForm.firstName} ${this.playerForm.lastName}`,console.log("\u{1F3AF} Component state updated to show pending player:",this.pendingPlayerName),alert("Your player has been submitted for approval! You can now view your pending player below.")}catch(e){console.error("\u274C Error submitting player:",e),alert("Failed to submit player. Please try again.")}})}createNewPlayer(){console.log("\u2795 Creating new player - resetting form..."),this.playerForm={firstName:"",lastName:"",gamertag:"",position:"",archetype:"",jerseyNumber:0,handedness:"",height:72,weight:180,fight:"",origin:"",hair:"",beard:"",tape:"",ethnicity:"",twitch:"",referral:"",invitedBy:"",age:19},this.filteredArchetypes=[],this.resetAllStates(),this.showCreateForm=!0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-player"]],decls:4,vars:4,consts:[["class","loading-container",4,"ngIf"],["class","container mt-4",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"container","mt-4"],[1,"alert","alert-info","text-center"],[1,"fas","fa-medal","me-2"],[1,"mb-3"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fas","fa-plus","me-2"],[1,"card","shadow-lg"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-user-plus","me-2"],[1,"card-body"],[1,"alert","alert-info"],[1,"fas","fa-info-circle","me-2"],[1,"row","g-3",3,"ngSubmit"],[1,"col-md-6","mb-3"],[1,"form-label"],["type","text","name","firstName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","lastName","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],["type","text","name","gamertag",1,"form-control",3,"ngModelChange","ngModel"],["name","position","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","LW"],["value","C"],["value","RW"],["value","D"],["value","G"],["class","col-md-6 mb-3",4,"ngIf"],["type","number","name","jerseyNumber","min","0","max","99",1,"form-control",3,"ngModelChange","ngModel"],["name","handedness",1,"form-select",3,"ngModelChange","ngModel"],["value","Left"],["value","Right"],["type","number","name","height","min","67","max","81",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","weight","min","129","max","290",1,"form-control",3,"ngModelChange","ngModel"],["name","fight",1,"form-select",3,"ngModelChange","ngModel"],["value","Never"],["value","Rarely"],["value","Sometimes"],["value","Often"],["type","text","name","origin",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","hair",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","beard",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","tape",1,"form-control",3,"ngModelChange","ngModel"],["name","ethnicity",1,"form-select",3,"ngModelChange","ngModel"],["value","Caucasian"],["value","African-American"],["type","text","name","twitch",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","referral",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","invitedBy",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","submit",1,"btn","btn-primary","btn-lg","w-100"],[1,"fas","fa-paper-plane","me-2"],["name","archetype",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,l){e&1&&g(0,Ya,6,0,"div",0)(1,Ka,10,1,"div",1)(2,Za,115,18,"div",2)(3,Ja,2,0,"div",2),e&2&&(m("ngIf",l.loading),o(),m("ngIf",!l.loading&&l.hasRetiredPlayer&&!l.showCreateForm),o(),m("ngIf",!l.loading&&l.showCreateForm),o(),m("ngIf",!l.loading&&(l.hasActivePlayer||l.hasPendingPlayer)))},dependencies:[Q,ae,X,ie,he,Te,Ie,re,Re,Pe,ee,fe,Xe,Ne,Ke,te,_e,rt],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:300px;flex-direction:column;gap:1rem}.spinner-border[_ngcontent-%COMP%]{color:#0d6efd;width:3rem;height:3rem}.alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000001a}.alert-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7f3ff,#cff4fc);color:#055160;border-left:4px solid #0dcaf0}.alert-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#664d03;border-left:4px solid #ffc107}.alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;margin-bottom:1rem}.btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#0d6efd,#6610f2);border:none;box-shadow:0 4px 6px #0d6efd4d}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#0b5ed7,#5a0fc8);transform:translateY(-2px);box-shadow:0 6px 12px #0d6efd66}.btn-outline-primary[_ngcontent-%COMP%]{color:#0d6efd;border:2px solid #0d6efd;background:transparent}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#0d6efd;color:#fff;transform:translateY(-1px);box-shadow:0 4px 8px #0d6efd4d}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 2rem;font-size:1.1rem}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 8px 25px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#1a237e,#283593);color:#fff;border-bottom:none;padding:1.5rem}.card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;margin-bottom:.75rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #ced4da;padding:.75rem 1rem;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.fas[_ngcontent-%COMP%]{margin-right:.5rem}@media (max-width: 768px){.alert[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1.5rem}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem}.loading-container[_ngcontent-%COMP%]{height:200px}}.alert[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.container[_ngcontent-%COMP%]{max-width:800px}.row.g-3[_ngcontent-%COMP%]{--bs-gutter-x: 1.5rem;--bs-gutter-y: 1rem}.alert.alert-info[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:.95rem;line-height:1.6}.alert.alert-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}"]})};function er(t,a){t&1&&(i(0,"div",4)(1,"div",5)(2,"span",6),r(3,"Loading..."),n()()())}function tr(t,a){if(t&1){let e=C();i(0,"button",41),I("click",function(){u(e);let s=c(2);return f(s.toggleEdit())}),r(1),n()}if(t&2){let e=c(2);o(),w(" ",e.isEditing?"Save":"Edit"," ")}}function ir(t,a){if(t&1){let e=C();i(0,"button",45),I("click",function(){let s=u(e).$implicit,d=c(3);return f(d.updatePeriod(s))}),r(1),n()}if(t&2){let e=a.$implicit,l=c(3);G("active",l.currentPeriod===e),o(),w(" ",e," ")}}function nr(t,a){if(t&1&&(i(0,"div",42)(1,"div",43),g(2,ir,2,3,"button",44),n()()),t&2){let e=c(2);o(2),m("ngForOf",e.periods)}}function ar(t,a){if(t&1&&(i(0,"div",42)(1,"span",46),r(2),n()()),t&2){let e=c(2);o(2),p(e.currentPeriod)}}function rr(t,a){if(t&1){let e=C();i(0,"input",47),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayScore,s)||(d.awayScore=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.awayScore)}}function or(t,a){if(t&1&&(i(0,"span",48),r(1),n()),t&2){let e=c(2);o(),p(e.awayScore)}}function sr(t,a){if(t&1){let e=C();i(0,"input",47),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeScore,s)||(d.homeScore=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.homeScore)}}function lr(t,a){if(t&1&&(i(0,"span",48),r(1),n()),t&2){let e=c(2);o(),p(e.homeScore)}}function dr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.totalShots,s)||(d.awayStats.totalShots=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.awayStats.totalShots)}}function cr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.awayStats.totalShots)}}function mr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.totalShots,s)||(d.homeStats.totalShots=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.homeStats.totalShots)}}function pr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.homeStats.totalShots)}}function gr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.hits,s)||(d.awayStats.hits=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.awayStats.hits)}}function ur(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.awayStats.hits)}}function fr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.hits,s)||(d.homeStats.hits=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.homeStats.hits)}}function _r(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.homeStats.hits)}}function hr(t,a){if(t&1){let e=C();i(0,"div",50)(1,"input",51),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.timeOnAttack.minutes,s)||(d.awayStats.timeOnAttack.minutes=s),f(s)}),n(),i(2,"span"),r(3,":"),n(),i(4,"input",51),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.timeOnAttack.seconds,s)||(d.awayStats.timeOnAttack.seconds=s),f(s)}),n()()}if(t&2){let e=c(2);o(),v("ngModel",e.awayStats.timeOnAttack.minutes),o(3),v("ngModel",e.awayStats.timeOnAttack.seconds)}}function yr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.formatTime(e.awayStats.timeOnAttack.minutes,e.awayStats.timeOnAttack.seconds))}}function xr(t,a){if(t&1){let e=C();i(0,"div",50)(1,"input",51),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.timeOnAttack.minutes,s)||(d.homeStats.timeOnAttack.minutes=s),f(s)}),n(),i(2,"span"),r(3,":"),n(),i(4,"input",51),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.timeOnAttack.seconds,s)||(d.homeStats.timeOnAttack.seconds=s),f(s)}),n()()}if(t&2){let e=c(2);o(),v("ngModel",e.homeStats.timeOnAttack.minutes),o(3),v("ngModel",e.homeStats.timeOnAttack.seconds)}}function vr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.formatTime(e.homeStats.timeOnAttack.minutes,e.homeStats.timeOnAttack.seconds))}}function br(t,a){if(t&1){let e=C();i(0,"input",52),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.passingPercentage,s)||(d.awayStats.passingPercentage=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.awayStats.passingPercentage)}}function Sr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),w("",e.awayStats.passingPercentage,"%")}}function wr(t,a){if(t&1){let e=C();i(0,"input",52),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.passingPercentage,s)||(d.homeStats.passingPercentage=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.homeStats.passingPercentage)}}function Cr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),w("",e.homeStats.passingPercentage,"%")}}function Er(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.faceoffsWon,s)||(d.awayStats.faceoffsWon=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.awayStats.faceoffsWon)}}function Pr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.awayStats.faceoffsWon)}}function Tr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.faceoffsWon,s)||(d.homeStats.faceoffsWon=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.homeStats.faceoffsWon)}}function Ir(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.homeStats.faceoffsWon)}}function Mr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.penaltyMinutes,s)||(d.awayStats.penaltyMinutes=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.awayStats.penaltyMinutes)}}function kr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.awayStats.penaltyMinutes)}}function Or(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.penaltyMinutes,s)||(d.homeStats.penaltyMinutes=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.homeStats.penaltyMinutes)}}function Dr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.homeStats.penaltyMinutes)}}function Ar(t,a){if(t&1){let e=C();i(0,"div",53)(1,"input",54),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.powerplays.successful,s)||(d.awayStats.powerplays.successful=s),f(s)}),n(),i(2,"span"),r(3,"/"),n(),i(4,"input",54),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.powerplays.total,s)||(d.awayStats.powerplays.total=s),f(s)}),n()()}if(t&2){let e=c(2);o(),v("ngModel",e.awayStats.powerplays.successful),o(3),v("ngModel",e.awayStats.powerplays.total)}}function Rr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.formatPowerplays(e.awayStats.powerplays.successful,e.awayStats.powerplays.total))}}function Nr(t,a){if(t&1){let e=C();i(0,"div",53)(1,"input",54),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.powerplays.successful,s)||(d.homeStats.powerplays.successful=s),f(s)}),n(),i(2,"span"),r(3,"/"),n(),i(4,"input",54),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.powerplays.total,s)||(d.homeStats.powerplays.total=s),f(s)}),n()()}if(t&2){let e=c(2);o(),v("ngModel",e.homeStats.powerplays.successful),o(3),v("ngModel",e.homeStats.powerplays.total)}}function Gr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.formatPowerplays(e.homeStats.powerplays.successful,e.homeStats.powerplays.total))}}function Vr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.powerplayMinutes,s)||(d.awayStats.powerplayMinutes=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.awayStats.powerplayMinutes)}}function Lr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.awayStats.powerplayMinutes)}}function Wr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.powerplayMinutes,s)||(d.homeStats.powerplayMinutes=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.homeStats.powerplayMinutes)}}function Fr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.homeStats.powerplayMinutes)}}function Ur(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.awayStats.shorthandedGoals,s)||(d.awayStats.shorthandedGoals=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.awayStats.shorthandedGoals)}}function Br(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.awayStats.shorthandedGoals)}}function Hr(t,a){if(t&1){let e=C();i(0,"input",49),S("ngModelChange",function(s){u(e);let d=c(2);return b(d.homeStats.shorthandedGoals,s)||(d.homeStats.shorthandedGoals=s),f(s)}),n()}if(t&2){let e=c(2);v("ngModel",e.homeStats.shorthandedGoals)}}function $r(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c(2);o(),p(e.homeStats.shorthandedGoals)}}function jr(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.goals,s)||(d.goals=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.goals)}}function zr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.goals)}}function qr(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.assists,s)||(d.assists=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.assists)}}function Yr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.assists)}}function Kr(t,a){if(t&1){let e=C();i(0,"input",58),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.plusMinus,s)||(d.plusMinus=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.plusMinus)}}function Xr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.plusMinus)}}function Qr(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.shots,s)||(d.shots=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.shots)}}function Zr(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.shots)}}function Jr(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.pim,s)||(d.pim=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.pim)}}function eo(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.pim)}}function to(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.hits,s)||(d.hits=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.hits)}}function io(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.hits)}}function no(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.ppg,s)||(d.ppg=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.ppg)}}function ao(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.ppg)}}function ro(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.shg,s)||(d.shg=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.shg)}}function oo(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.shg)}}function so(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.fot,s)||(d.fot=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.fot)}}function lo(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.fot)}}function co(t,a){if(t&1){let e=C();i(0,"input",57),S("ngModelChange",function(s){u(e);let d=c().$implicit;return b(d.fow,s)||(d.fow=s),f(s)}),n()}if(t&2){let e=c().$implicit;v("ngModel",e.fow)}}function mo(t,a){if(t&1&&(i(0,"span"),r(1),n()),t&2){let e=c().$implicit;o(),p(e.fow)}}function po(t,a){if(t&1&&(i(0,"tr")(1,"td"),r(2),n(),i(3,"td"),r(4),n(),i(5,"td"),r(6),n(),i(7,"td"),g(8,jr,1,1,"input",55)(9,zr,2,1,"span",27),n(),i(10,"td"),g(11,qr,1,1,"input",55)(12,Yr,2,1,"span",27),n(),i(13,"td"),r(14),n(),i(15,"td"),g(16,Kr,1,1,"input",56)(17,Xr,2,1,"span",27),n(),i(18,"td"),g(19,Qr,1,1,"input",55)(20,Zr,2,1,"span",27),n(),i(21,"td"),r(22),n(),i(23,"td"),g(24,Jr,1,1,"input",55)(25,eo,2,1,"span",27),n(),i(26,"td"),g(27,to,1,1,"input",55)(28,io,2,1,"span",27),n(),i(29,"td"),g(30,no,1,1,"input",55)(31,ao,2,1,"span",27),n(),i(32,"td"),g(33,ro,1,1,"input",55)(34,oo,2,1,"span",27),n(),i(35,"td"),g(36,so,1,1,"input",55)(37,lo,2,1,"span",27),n(),i(38,"td"),g(39,co,1,1,"input",55)(40,mo,2,1,"span",27),n(),i(41,"td"),r(42),n()()),t&2){let e=a.$implicit,l=c(2);o(2),p(e.number),o(2),p(e.name),o(2),p(e.position),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),p(e.points),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),p(l.formatPercentage(e.shotPercentage)),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),m("ngIf",l.isEditing),o(),m("ngIf",!l.isEditing),o(2),p(l.formatPercentage(e.foPercentage))}}function go(t,a){if(t&1){let e=C();i(0,"div",7)(1,"div",8)(2,"div",9),g(3,tr,2,1,"button",10),i(4,"div",11),r(5),n(),g(6,nr,3,1,"div",12)(7,ar,3,1,"div",12),i(8,"div",13)(9,"div",14),_(10,"img",15),i(11,"span",16),r(12),n()(),i(13,"div",17),g(14,rr,1,1,"input",18)(15,or,2,1,"span",19),i(16,"span",20),r(17,"-"),n(),g(18,sr,1,1,"input",18)(19,lr,2,1,"span",19),n(),i(20,"div",14)(21,"span",16),r(22),n(),_(23,"img",15),n()()(),i(24,"div",21)(25,"h5",22),r(26,"Game Statistics"),n(),i(27,"div",23)(28,"div",24)(29,"div",25),g(30,dr,1,1,"input",26)(31,cr,2,1,"span",27),n(),i(32,"div",28),r(33,"TOTAL SHOTS"),n(),i(34,"div",29),g(35,mr,1,1,"input",26)(36,pr,2,1,"span",27),n()(),i(37,"div",24)(38,"div",25),g(39,gr,1,1,"input",26)(40,ur,2,1,"span",27),n(),i(41,"div",28),r(42,"HITS"),n(),i(43,"div",29),g(44,fr,1,1,"input",26)(45,_r,2,1,"span",27),n()(),i(46,"div",24)(47,"div",25),g(48,hr,5,2,"div",30)(49,yr,2,1,"span",27),n(),i(50,"div",28),r(51,"TIME ON ATTACK"),n(),i(52,"div",29),g(53,xr,5,2,"div",30)(54,vr,2,1,"span",27),n()(),i(55,"div",24)(56,"div",25),g(57,br,1,1,"input",31)(58,Sr,2,1,"span",27),n(),i(59,"div",28),r(60,"PASSING"),n(),i(61,"div",29),g(62,wr,1,1,"input",31)(63,Cr,2,1,"span",27),n()(),i(64,"div",24)(65,"div",25),g(66,Er,1,1,"input",26)(67,Pr,2,1,"span",27),n(),i(68,"div",28),r(69,"FACEOFFS WON"),n(),i(70,"div",29),g(71,Tr,1,1,"input",26)(72,Ir,2,1,"span",27),n()(),i(73,"div",24)(74,"div",25),g(75,Mr,1,1,"input",26)(76,kr,2,1,"span",27),n(),i(77,"div",28),r(78,"PENALTY MINUTES"),n(),i(79,"div",29),g(80,Or,1,1,"input",26)(81,Dr,2,1,"span",27),n()(),i(82,"div",24)(83,"div",25),g(84,Ar,5,2,"div",32)(85,Rr,2,1,"span",27),n(),i(86,"div",28),r(87,"POWERPLAYS"),n(),i(88,"div",29),g(89,Nr,5,2,"div",32)(90,Gr,2,1,"span",27),n()(),i(91,"div",24)(92,"div",25),g(93,Vr,1,1,"input",26)(94,Lr,2,1,"span",27),n(),i(95,"div",28),r(96,"POWERPLAY MINUTES"),n(),i(97,"div",29),g(98,Wr,1,1,"input",26)(99,Fr,2,1,"span",27),n()(),i(100,"div",24)(101,"div",25),g(102,Ur,1,1,"input",26)(103,Br,2,1,"span",27),n(),i(104,"div",28),r(105,"SHORTHANDED GOALS"),n(),i(106,"div",29),g(107,Hr,1,1,"input",26)(108,$r,2,1,"span",27),n()()()(),i(109,"div",33)(110,"div",7)(111,"div",34)(112,"h5",35),r(113,"Player Statistics"),n(),i(114,"div",36)(115,"button",37),I("click",function(){u(e);let s=c();return f(s.selectedTeamView="home")}),r(116),n(),i(117,"button",37),I("click",function(){u(e);let s=c();return f(s.selectedTeamView="away")}),r(118),n()()(),i(119,"div",8)(120,"div",38)(121,"table",39)(122,"thead")(123,"tr")(124,"th"),r(125,"#"),n(),i(126,"th"),r(127,"Player"),n(),i(128,"th"),r(129,"POS"),n(),i(130,"th"),r(131,"G"),n(),i(132,"th"),r(133,"A"),n(),i(134,"th"),r(135,"PTS"),n(),i(136,"th"),r(137,"+/-"),n(),i(138,"th"),r(139,"SHOTS"),n(),i(140,"th"),r(141,"S%"),n(),i(142,"th"),r(143,"PIM"),n(),i(144,"th"),r(145,"HITS"),n(),i(146,"th"),r(147,"PPG"),n(),i(148,"th"),r(149,"SHG"),n(),i(150,"th"),r(151,"FOT"),n(),i(152,"th"),r(153,"FOW"),n(),i(154,"th"),r(155,"FO%"),n()()(),i(156,"tbody"),g(157,po,43,26,"tr",40),n()()()()()()()()}if(t&2){let e=c();o(3),m("ngIf",e.canEditScores),o(2),Z("W",e.game.week," ",e.game.day),o(),m("ngIf",e.isEditing&&e.canEditScores),o(),m("ngIf",!e.isEditing),o(3),m("src",e.awayTeamLogo,z)("alt",e.awayTeamName),o(2),p(e.awayTeamName),o(2),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),p(e.homeTeamName),o(),m("src",e.homeTeamLogo,z)("alt",e.homeTeamName),o(7),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(3),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(4),m("ngIf",e.isEditing),o(),m("ngIf",!e.isEditing),o(7),G("btn-primary",e.selectedTeamView==="home")("btn-outline-primary",e.selectedTeamView==="away"),o(),w(" ",e.homeTeamName," "),o(),G("btn-primary",e.selectedTeamView==="away")("btn-outline-primary",e.selectedTeamView==="home"),o(),w(" ",e.awayTeamName," "),o(39),m("ngForOf",e.getDisplayPlayerStats())}}function uo(t,a){t&1&&(i(0,"div",59),r(1," Game not found "),n())}var st=class t{constructor(a,e,l){this.route=a;this.firestore=e;this.authService=l;this.gameId=this.route.snapshot.paramMap.get("gameId")||"",this.teamId=this.route.snapshot.paramMap.get("teamId")||""}gameId;teamId;game;loading=!0;awayTeamLogo="";awayTeamName="";homeTeamLogo="";homeTeamName="";awayScore=0;homeScore=0;canEditScores=!1;isEditing=!1;currentPeriod="1st";periods=["1st","2nd","3rd","OT","Final"];selectedTeamView="home";homeStats={totalShots:0,hits:0,timeOnAttack:{minutes:0,seconds:0},passingPercentage:0,faceoffsWon:0,penaltyMinutes:0,powerplays:{successful:0,total:0},powerplayMinutes:0,shorthandedGoals:0};awayStats={totalShots:0,hits:0,timeOnAttack:{minutes:0,seconds:0},passingPercentage:0,faceoffsWon:0,penaltyMinutes:0,powerplays:{successful:0,total:0},powerplayMinutes:0,shorthandedGoals:0};homePlayerStats=[];awayPlayerStats=[];ngOnInit(){return E(this,null,function*(){this.authService.effectiveRoles.subscribe(a=>{this.canEditScores=a.some(e=>["developer","commissioner","stats monkey","gm"].includes(e))}),yield this.loadGameData()})}loadGameData(){return E(this,null,function*(){if(this.gameId&&this.teamId){let a=R(this.firestore,`teams/${this.teamId}/games/${this.gameId}`),e=yield $(a);if(e.exists()){this.game=K({id:e.id},e.data()),this.awayScore=this.game.awayScore||0,this.homeScore=this.game.homeScore||0,this.currentPeriod=this.game.period||"1st",this.game.homeStats&&(this.homeStats=K(K({},this.homeStats),this.game.homeStats)),this.game.awayStats&&(this.awayStats=K(K({},this.awayStats),this.game.awayStats));let l=R(this.firestore,`teams/${this.game.homeTeamId}`),s=yield $(l);if(s.exists()){let h=s.data();this.homeTeamLogo=h.logoUrl||"",this.homeTeamName=h.mascot||""}let d=R(this.firestore,`teams/${this.game.awayTeamId}`),y=yield $(d);if(y.exists()){let h=y.data();this.awayTeamLogo=h.logoUrl||"",this.awayTeamName=h.mascot||""}yield this.loadPlayerStats()}}this.loading=!1})}loadPlayerStats(){return E(this,null,function*(){let a=O(this.firestore,`teams/${this.game.homeTeamId}/roster`),e=yield A(a);this.homePlayerStats=e.docs.map(d=>{let y=d.data(),h=this.game.homePlayerStats?.[d.id]||{},x=h.fow||0,T=h.fot||0;return{id:d.id,number:y.jerseyNumber||0,name:`${y.firstName} ${y.lastName}`,position:y.position||"",goals:h.goals||0,assists:h.assists||0,points:(h.goals||0)+(h.assists||0),plusMinus:h.plusMinus||0,shots:h.shots||0,shotPercentage:h.shots?(h.goals||0)/h.shots*100:0,pim:h.pim||0,hits:h.hits||0,ppg:h.ppg||0,shg:h.shg||0,fot:T,fow:x,foPercentage:T>0?x/T*100:0}}).sort((d,y)=>d.number-y.number);let l=O(this.firestore,`teams/${this.game.awayTeamId}/roster`),s=yield A(l);this.awayPlayerStats=s.docs.map(d=>{let y=d.data(),h=this.game.awayPlayerStats?.[d.id]||{},x=h.fow||0,T=h.fot||0;return{id:d.id,number:y.jerseyNumber||0,name:`${y.firstName} ${y.lastName}`,position:y.position||"",goals:h.goals||0,assists:h.assists||0,points:(h.goals||0)+(h.assists||0),plusMinus:h.plusMinus||0,shots:h.shots||0,shotPercentage:h.shots?(h.goals||0)/h.shots*100:0,pim:h.pim||0,hits:h.hits||0,ppg:h.ppg||0,shg:h.shg||0,fot:T,fow:x,foPercentage:T>0?x/T*100:0}}).sort((d,y)=>d.number-y.number)})}saveGameData(){return E(this,null,function*(){if(!this.game||!this.canEditScores)return;let a={homeScore:this.homeScore,awayScore:this.awayScore,period:this.currentPeriod,homeStats:this.homeStats,awayStats:this.awayStats,homePlayerStats:this.createPlayerStatsMap(this.homePlayerStats),awayPlayerStats:this.createPlayerStatsMap(this.awayPlayerStats)},e=R(this.firestore,`teams/${this.game.homeTeamId}/games/${this.gameId}`),l=R(this.firestore,`teams/${this.game.awayTeamId}/games/${this.gameId}`);yield Promise.all([be(e,a),be(l,a)]),yield this.loadGameData(),this.isEditing=!1})}createPlayerStatsMap(a){let e={};return a.forEach(l=>{e[l.id]={goals:l.goals,assists:l.assists,plusMinus:l.plusMinus,shots:l.shots,pim:l.pim,hits:l.hits,ppg:l.ppg,shg:l.shg,fot:l.fot,fow:l.fow}}),e}toggleEdit(){this.canEditScores&&(this.isEditing?this.saveGameData():this.isEditing=!0)}updatePeriod(a){return E(this,null,function*(){this.canEditScores&&(this.currentPeriod=a,yield this.saveGameData())})}formatTime(a,e){return`${a.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}formatPowerplays(a,e){return`${a}/${e}`}formatPercentage(a){return`${a.toFixed(1)}%`}getDisplayPlayerStats(){return this.selectedTeamView==="home"?this.homePlayerStats:this.awayPlayerStats}getDisplayTeamName(){return this.selectedTeamView==="home"?this.homeTeamName:this.awayTeamName}static \u0275fac=function(e){return new(e||t)(ne(Ft),ne(se),ne(Y))};static \u0275cmp=H({type:t,selectors:[["app-game-detail"]],decls:4,vars:3,consts:[[1,"container","mt-4"],["class","text-center",4,"ngIf"],["class","card",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"card"],[1,"card-body"],[1,"scoreboard"],["class","edit-button",3,"click",4,"ngIf"],[1,"game-info"],["class","period-indicator",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"team-section"],[1,"team-logo",3,"src","alt"],[1,"team-name"],[1,"score-section"],["type","number","class","score-input","min","0",3,"ngModel","ngModelChange",4,"ngIf"],["class","score-display",4,"ngIf"],[1,"score-divider"],[1,"game-stats","mt-4"],[1,"text-center","mb-4"],[1,"stats-grid"],[1,"stat-row"],[1,"away-stat"],["type","number","class","stat-input",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"stat-label"],[1,"home-stat"],["class","time-input-group",4,"ngIf"],["type","number","class","stat-input","min","0","max","100",3,"ngModel","ngModelChange",4,"ngIf"],["class","powerplay-input-group",4,"ngIf"],[1,"player-stats","mt-4"],[1,"card-header","bg-dark","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn-group"],[1,"btn",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"edit-button",3,"click"],[1,"period-indicator"],[1,"period-buttons"],["class","period-button",3,"active","click",4,"ngFor","ngForOf"],[1,"period-button",3,"click"],[1,"period-display"],["type","number","min","0",1,"score-input",3,"ngModelChange","ngModel"],[1,"score-display"],["type","number",1,"stat-input",3,"ngModelChange","ngModel"],[1,"time-input-group"],["type","number","min","0","max","59",1,"time-input",3,"ngModelChange","ngModel"],["type","number","min","0","max","100",1,"stat-input",3,"ngModelChange","ngModel"],[1,"powerplay-input-group"],["type","number","min","0",1,"powerplay-input",3,"ngModelChange","ngModel"],["type","number","class","form-control form-control-sm stat-input","min","0",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","class","form-control form-control-sm stat-input",3,"ngModel","ngModelChange",4,"ngIf"],["type","number","min","0",1,"form-control","form-control-sm","stat-input",3,"ngModelChange","ngModel"],["type","number",1,"form-control","form-control-sm","stat-input",3,"ngModelChange","ngModel"],[1,"alert","alert-warning"]],template:function(e,l){e&1&&(i(0,"div",0),g(1,er,4,0,"div",1)(2,go,158,62,"div",2)(3,uo,2,0,"div",3),n()),e&2&&(o(),m("ngIf",l.loading),o(),m("ngIf",!l.loading&&l.game),o(),m("ngIf",!l.loading&&!l.game))},dependencies:[Q,ae,X,ie,re,Re,ee,Ne,Ke,te],styles:[".scoreboard[_ngcontent-%COMP%]{background:#1a1a1a;color:#fff;padding:2rem;border-radius:10px;margin-bottom:2rem;position:relative}.period-indicator[_ngcontent-%COMP%]{position:absolute;top:1.5rem;left:50%;transform:translate(-50%);display:flex;flex-direction:column;align-items:center;gap:.5rem}.period-button[_ngcontent-%COMP%]{background:#333;border:none;color:#999;padding:.25rem .75rem;border-radius:4px;cursor:pointer}.period-button.active[_ngcontent-%COMP%]{background:#666;color:#fff}.team-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;min-width:200px;justify-content:center}.team-logo[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:contain;border-radius:50%}.score-input[_ngcontent-%COMP%]{width:80px;font-size:2.5rem;font-weight:700;background:transparent;border:2px solid #333;border-radius:8px;color:#fff;text-align:center;padding:.25rem}.score-display[_ngcontent-%COMP%]{width:80px;font-size:2.5rem;font-weight:700;text-align:center;color:#fff}.game-stats[_ngcontent-%COMP%]{background:#1a1a1a;color:#fff;padding:2rem;border-radius:10px}.stat-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1fr;align-items:center;gap:1rem;padding:.5rem;border-bottom:1px solid #333}.stat-input[_ngcontent-%COMP%]{width:50px;background:transparent;border:1px solid #444;color:#fff;padding:.25rem;text-align:center}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{color:#fff;font-size:.9rem}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#1a1a1a;border-color:#333;color:#999}.player-stats[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:#333;background:#1a1a1a;color:#fff}"]})};var lt=t=>()=>{let a=W(Y),e=W(q);return a.effectiveRoles.pipe(He(l=>l.some(d=>t.includes(d))?!0:(e.navigate(["/unauthorized"]),!1)))};var ce=()=>{let t=W(Y),a=W(q);return t.currentUser.pipe(He(e=>e?!0:(a.navigate(["/login"]),!1)))};var bi=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Ze,title:"Login"},{path:"dashboard",component:Je,title:"Dashboard",canActivate:[ce]},{path:"register",component:et,title:"Register"},{path:"verify-email",component:tt},{path:"forgot-password",component:it},{path:"analytics",component:at,title:"Stats and Standings",canActivate:[ce]},{path:"games",component:nt,title:"Games",canActivate:[ce]},{path:"games/:teamId/:gameId",component:st,title:"Game Details",canActivate:[ce]},{path:"teams",loadComponent:()=>import("./chunk-SV4QESKC.js").then(t=>t.Teams),title:"Teams",canActivate:[ce]},{path:"teams/:id",loadComponent:()=>import("./chunk-RYA6QQIU.js").then(t=>t.TeamDetail),title:"Team Details",canActivate:[ce]},{path:"player",component:ot,title:"Player",canActivate:[ce]},{path:"headquarters",loadComponent:()=>import("./chunk-OEOVUXXY.js").then(t=>t.Headquarters),title:"Headquarters",canActivate:[ce,lt(["developer","commissioner"])]},{path:"progression-tracker",loadComponent:()=>import("./chunk-5SOX6V2V.js").then(t=>t.ProgressionTracker),title:"Progression Tracker",canActivate:[ce,lt(["developer","commissioner","progression tracker"])]},{path:"draft",loadComponent:()=>import("./chunk-NRRWC3GM.js").then(t=>t.Draft),title:"Draft Central",canActivate:[ce,lt(["developer","commissioner","gm"])]},{path:"**",redirectTo:"/login"}];var Ti="firebasestorage.googleapis.com",fo="storageBucket",_o=2*60*1e3,ho=10*60*1e3;var xe=class t extends Kt{constructor(a,e,l=0){super(_t(a),`Firebase Storage: ${e} (${_t(a)})`),this.status_=l,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return _t(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},we=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(we||{});function _t(t){return"storage/"+t}function yo(){let t="An unknown error occurred, please check the error payload for server response.";return new xe(we.UNKNOWN,t)}function xo(){return new xe(we.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vo(){return new xe(we.CANCELED,"User canceled the upload/download.")}function bo(t){return new xe(we.INVALID_URL,"Invalid URL '"+t+"'.")}function So(t){return new xe(we.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Si(t){return new xe(we.INVALID_ARGUMENT,t)}function Ii(){return new xe(we.APP_DELETED,"The Firebase app was deleted.")}function wo(t){return new xe(we.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Se=class t{constructor(a,e){this.bucket=a,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,e){let l;try{l=t.makeFromUrl(a,e)}catch{return new t(a,"")}if(l.path==="")return l;throw So(a)}static makeFromUrl(a,e){let l=null,s="([A-Za-z0-9.\\-_]+)";function d(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}let y="(/(.*))?$",h=new RegExp("^gs://"+s+y,"i"),x={bucket:1,path:3};function T(j){j.path_=decodeURIComponent(j.path)}let P="v[A-Za-z0-9_]+",M=e.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",D=new RegExp(`^https?://${M}/${P}/b/${s}/o${k}`,"i"),V={bucket:1,path:3},F=e===Ti?"(?:storage.googleapis.com|storage.cloud.google.com)":e,L="([^?#]*)",J=new RegExp(`^https?://${F}/${s}/${L}`,"i"),B=[{regex:h,indices:x,postModify:d},{regex:D,indices:V,postModify:T},{regex:J,indices:{bucket:1,path:2},postModify:T}];for(let j=0;j<B.length;j++){let pe=B[j],mt=pe.regex.exec(a);if(mt){let Vi=mt[pe.indices.bucket],pt=mt[pe.indices.path];pt||(pt=""),l=new t(Vi,pt),pe.postModify(l);break}}if(l==null)throw bo(a);return l}},ht=class{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}};function Co(t,a,e){let l=1,s=null,d=null,y=!1,h=0;function x(){return h===2}let T=!1;function P(...L){T||(T=!0,a.apply(null,L))}function M(L){s=setTimeout(()=>{s=null,t(D,x())},L)}function k(){d&&clearTimeout(d)}function D(L,...J){if(T){k();return}if(L){k(),P.call(null,L,...J);return}if(x()||y){k(),P.call(null,L,...J);return}l<64&&(l*=2);let B;h===1?(h=2,B=0):B=(l+Math.random())*1e3,M(B)}let V=!1;function F(L){V||(V=!0,k(),!T&&(s!==null?(L||(h=2),clearTimeout(s),M(0)):L||(h=1)))}return M(0),d=setTimeout(()=>{y=!0,F(!0)},e),F}function Eo(t){t(!1)}function Po(t){return t!==void 0}function wi(t,a,e,l){if(l<a)throw Si(`Invalid value for '${t}'. Expected ${a} or greater.`);if(l>e)throw Si(`Invalid value for '${t}'. Expected ${e} or less.`)}function To(t){let a=encodeURIComponent,e="?";for(let l in t)if(t.hasOwnProperty(l)){let s=a(l)+"="+a(t[l]);e=e+s+"&"}return e=e.slice(0,-1),e}var yt=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(yt||{});function Io(t,a){let e=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,d=a.indexOf(t)!==-1;return e||s||d}var xt=class{constructor(a,e,l,s,d,y,h,x,T,P,M,k=!0,D=!1){this.url_=a,this.method_=e,this.headers_=l,this.body_=s,this.successCodes_=d,this.additionalRetryCodes_=y,this.callback_=h,this.errorCallback_=x,this.timeout_=T,this.progressCallback_=P,this.connectionFactory_=M,this.retry=k,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,F)=>{this.resolve_=V,this.reject_=F,this.start_()})}start_(){let a=(l,s)=>{if(s){l(!1,new Le(!1,null,!0));return}let d=this.connectionFactory_();this.pendingConnection_=d;let y=h=>{let x=h.loaded,T=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,T)};this.progressCallback_!==null&&d.addUploadProgressListener(y),d.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&d.removeUploadProgressListener(y),this.pendingConnection_=null;let h=d.getErrorCode()===yt.NO_ERROR,x=d.getStatus();if(!h||Io(x,this.additionalRetryCodes_)&&this.retry){let P=d.getErrorCode()===yt.ABORT;l(!1,new Le(!1,null,P));return}let T=this.successCodes_.indexOf(x)!==-1;l(!0,new Le(T,d))})},e=(l,s)=>{let d=this.resolve_,y=this.reject_,h=s.connection;if(s.wasSuccessCode)try{let x=this.callback_(h,h.getResponse());Po(x)?d(x):d()}catch(x){y(x)}else if(h!==null){let x=yo();x.serverResponse=h.getErrorText(),this.errorCallback_?y(this.errorCallback_(h,x)):y(x)}else if(s.canceled){let x=this.appDelete_?Ii():vo();y(x)}else{let x=xo();y(x)}};this.canceled_?e(!1,new Le(!1,null,!0)):this.backoffId_=Co(a,e,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,this.backoffId_!==null&&Eo(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Le=class{constructor(a,e,l){this.wasSuccessCode=a,this.connection=e,this.canceled=!!l}};function Mo(t,a){a!==null&&a.length>0&&(t.Authorization="Firebase "+a)}function ko(t,a){t["X-Firebase-Storage-Version"]="webjs/"+(a??"AppManager")}function Oo(t,a){a&&(t["X-Firebase-GMPID"]=a)}function Do(t,a){a!==null&&(t["X-Firebase-AppCheck"]=a)}function Ao(t,a,e,l,s,d,y=!0,h=!1){let x=To(t.urlParams),T=t.url+x,P=Object.assign({},t.headers);return Oo(P,a),Mo(P,e),ko(P,d),Do(P,l),new xt(T,t.method,P,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,y,h)}function Ro(t){if(t.length===0)return null;let a=t.lastIndexOf("/");return a===-1?"":t.slice(0,a)}function No(t){let a=t.lastIndexOf("/",t.length-2);return a===-1?t:t.slice(a+1)}var Yl=256*1024;var vt=class t{constructor(a,e){this._service=a,e instanceof Se?this._location=e:this._location=Se.makeFromUrl(e,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,e){return new t(a,e)}get root(){let a=new Se(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return No(this._location.path)}get storage(){return this._service}get parent(){let a=Ro(this._location.path);if(a===null)return null;let e=new Se(this._location.bucket,a);return new t(this._service,e)}_throwIfRoot(a){if(this._location.path==="")throw wo(a)}};function Ci(t,a){let e=a?.[fo];return e==null?null:Se.makeFromBucketSpec(e,t)}function Go(t,a,e,l={}){t.host=`${a}:${e}`;let s=jt(a);s&&(zt(`https://${t.host}/b`),Yt("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";let{mockUserToken:d}=l;d&&(t._overrideAuthToken=typeof d=="string"?d:qt(d,t.app.options.projectId))}var bt=class{constructor(a,e,l,s,d,y=!1){this.app=a,this._authProvider=e,this._appCheckProvider=l,this._url=s,this._firebaseVersion=d,this._isUsingEmulator=y,this._bucket=null,this._host=Ti,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_o,this._maxUploadRetryTime=ho,this._requests=new Set,s!=null?this._bucket=Se.makeFromBucketSpec(s,this._host):this._bucket=Ci(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._url!=null?this._bucket=Se.makeFromBucketSpec(this._url,a):this._bucket=Ci(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){wi("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){wi("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){return E(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let a=this._authProvider.getImmediate({optional:!0});if(a){let e=yield a.getToken();if(e!==null)return e.accessToken}return null})}_getAppCheckToken(){return E(this,null,function*(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let a=this._appCheckProvider.getImmediate({optional:!0});return a?(yield a.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new vt(this,a)}_makeRequest(a,e,l,s,d=!0){if(this._deleted)return new ht(Ii());{let y=Ao(a,this._appId,l,s,e,this._firebaseVersion,d,this._isUsingEmulator);return this._requests.add(y),y.getPromise().then(()=>this._requests.delete(y),()=>this._requests.delete(y)),y}}makeRequestWithTokens(a,e){return E(this,null,function*(){let[l,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(a,e,l,s).getPromise()})}},Ei="@firebase/storage",Pi="0.13.14";var Mi="storage";function ki(t=ii(),a){t=Xt(t);let l=Jt(t,Mi).getImmediate({identifier:a}),s=$t("storage");return s&&Oi(l,...s),l}function Oi(t,a,e,l={}){Go(t,a,e,l)}function Vo(t,{instanceIdentifier:a}){let e=t.getProvider("app").getImmediate(),l=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new bt(e,l,s,a,ti)}function Lo(){Zt(new Qt(Mi,Vo,"PUBLIC").setMultipleInstances(!0)),Ue(Ei,Pi,""),Ue(Ei,Pi,"esm2017")}Lo();var Be=class{constructor(a){return a}},Di="storage",St=class{constructor(){return ri(Di)}};var wt=new Et("angularfire2.storage-instances");function Wo(t,a){let e=ai(Di,t,a);return e&&new Be(e)}function Fo(t){return(a,e)=>{let l=a.runOutsideAngular(()=>t(e));return new Be(l)}}var Uo={provide:St,deps:[[new We,wt]]},Bo={provide:Be,useFactory:Wo,deps:[[new We,wt],li]};function Ai(t,...a){return Ue("angularfire",ni.full,"gcs"),Pt([Bo,Uo,{provide:wt,useFactory:Fo(t),multi:!0,deps:[Mt,Tt,oi,di,[new We,gi],[new We,pi],...a]}])}var Ri=si(ki,!0);var Ni={production:!0,firebase:{apiKey:"AIzaSyBSJztG4qQ9ddB24kYd3UHV0n1bnyLImO8",authDomain:"gohls-3033e.firebaseapp.com",projectId:"gohls-3033e",storageBucket:"gohls-3033e.firebasestorage.app",messagingSenderId:"1043263476189",appId:"1:1043263476189:web:18604bd169a5a513e22634"}};var Ho=Ni.firebase,Gi={providers:[Gt({eventCoalescing:!0}),Bt(bi),ci(()=>mi(Ho)),ui(()=>fi()),_i(()=>yi()),Ai(()=>Ri())]};function $o(t,a){t&1&&(i(0,"li",8)(1,"a",18),r(2,"Draft"),n()())}function jo(t,a){t&1&&(i(0,"li",8)(1,"a",19),r(2,"Headquarters"),n()())}function zo(t,a){t&1&&(i(0,"li",8)(1,"a",20),r(2,"Progressions"),n()())}function qo(t,a){if(t&1&&(i(0,"option",26),r(1),n()),t&2){let e=a.$implicit;m("value",e),o(),p(e)}}function Yo(t,a){if(t&1){let e=C();i(0,"div",21)(1,"label",22),r(2,"View as:"),n(),i(3,"select",23),I("change",function(s){u(e);let d=c(2);return f(d.onRoleChange(s))}),i(4,"option",24),r(5,"Developer"),n(),g(6,qo,2,2,"option",25),n()()}if(t&2){let e=c(2);o(6),m("ngForOf",e.allRoles)}}function Ko(t,a){if(t&1){let e=C();i(0,"nav",1)(1,"div",2)(2,"a",3),r(3,"GOHLS"),n(),i(4,"button",4),_(5,"span",5),n(),i(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),r(10,"Dashboard"),n()(),i(11,"li",8)(12,"a",10),r(13,"Teams"),n()(),i(14,"li",8)(15,"a",11),r(16,"Games"),n()(),i(17,"li",8)(18,"a",12),r(19,"Stats and Standings"),n()(),i(20,"li",8)(21,"a",13),r(22,"Player"),n()(),g(23,$o,3,0,"li",14)(24,jo,3,0,"li",14)(25,zo,3,0,"li",14),n(),g(26,Yo,7,1,"div",15),i(27,"div",16)(28,"button",17),I("click",function(){u(e);let s=c();return f(s.logout())}),r(29,"Logout"),n()()()()()}if(t&2){let e=c();o(23),m("ngIf",e.viewAsRoles.includes("developer")||e.viewAsRoles.includes("commissioner")||e.viewAsRoles.includes("gm")),o(),m("ngIf",e.viewAsRoles.includes("developer")||e.viewAsRoles.includes("commissioner")),o(),m("ngIf",e.canSeeProgression),o(),m("ngIf",e.isDeveloper)}}var dt=class t{constructor(a,e){this.authService=a;this.router=e}isDeveloper=!1;isLoggedIn=!1;viewAsRoles=[];allRoles=["viewer","commissioner","gm","stats monkey","finance officer","progression tracker"];rolesSub;viewAsSub;userSub;allowedRolesForProgression=["developer","commissioner","progression tracker"];canSeeProgression=!1;ngOnInit(){this.userSub=this.authService.currentUser.subscribe(a=>{this.isLoggedIn=!!a}),this.rolesSub=this.authService.currentRoles.subscribe(a=>{this.isDeveloper=a.includes("developer")}),this.viewAsSub=this.authService.effectiveRoles.subscribe(a=>{this.viewAsRoles=a,this.canSeeProgression=a.some(e=>this.allowedRolesForProgression.includes(e))})}onRoleChange(a){let e=a.target.value;this.authService.setViewAsRole(e==="real"?null:e)}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}ngOnDestroy(){this.userSub?.unsubscribe(),this.rolesSub?.unsubscribe(),this.viewAsSub?.unsubscribe()}static \u0275fac=function(e){return new(e||t)(ne(Y),ne(q))};static \u0275cmp=H({type:t,selectors:[["app-navbar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-light bg-light px-3",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light","px-3"],[1,"container-fluid"],["routerLink","/dashboard",1,"navbar-brand","fw-bold"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/dashboard",1,"nav-link"],["routerLink","/teams",1,"nav-link"],["routerLink","/games",1,"nav-link"],["routerLink","/analytics",1,"nav-link"],["routerLink","/player",1,"nav-link"],["class","nav-item",4,"ngIf"],["class","d-flex align-items-center me-3",4,"ngIf"],[1,"d-flex"],[1,"btn","btn-outline-danger",3,"click"],["routerLink","/draft",1,"nav-link"],["routerLink","/headquarters",1,"nav-link"],["routerLink","/progression-tracker",1,"nav-link"],[1,"d-flex","align-items-center","me-3"],[1,"me-2","mb-0"],[1,"form-select",3,"change"],["value","real"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,l){e&1&&g(0,Ko,30,4,"nav",0),e&2&&m("ngIf",l.isLoggedIn)},dependencies:[Q,ae,X,ue,Ee],encapsulation:2})};function Xo(t,a){t&1&&_(0,"app-navbar")}var ct=class t{showNavbar=!0;router=W(q);title="GOHLS";constructor(){this.router.events.pipe(Ct(a=>a instanceof Wt)).subscribe(a=>{let e=["/login","/register","/forgot-password"];this.showNavbar=!e.includes(a.urlAfterRedirects)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(e,l){e&1&&(g(0,Xo,1,0,"app-navbar",0),_(1,"router-outlet")),e&2&&m("ngIf",l.showNavbar)},dependencies:[Ut,Q,X,dt],encapsulation:2})};Lt(ct,Gi).catch(t=>console.error(t));
