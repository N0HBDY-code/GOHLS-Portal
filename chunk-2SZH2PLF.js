import{a as _e}from"./chunk-I2AGJTL5.js";import{a as ve}from"./chunk-EUKHQLGO.js";import{$b as oe,$c as ye,Ba as X,Ea as _,Jc as Q,Kc as pe,Lb as Z,Lc as he,Mb as ee,Nc as W,Ob as te,Oc as C,Pa as c,Pb as ie,Pc as Y,Q as L,Qa as i,Qc as w,Ra as n,Rc as R,Sa as g,Sc as P,Ub as ne,V as u,Vb as ae,Vc as fe,W as p,Wb as re,Wc as I,Xc as D,Ya as E,Yc as k,Za as f,Zb as se,Zc as N,_a as m,_c as J,a as q,ac as le,b as $,bb as z,bc as de,c as y,cc as ce,db as s,dc as me,eb as b,ec as ge,fb as h,gb as V,gc as ue,ib as v,jb as x,kb as S,pb as O,ra as l,rb as A}from"./chunk-JMQVBRUG.js";function be(d,t){if(d&1&&(i(0,"tr")(1,"td")(2,"span",73),s(3),n()(),i(4,"td"),s(5),O(6,"date"),n(),i(7,"td"),s(8),n(),i(9,"td")(10,"span",73),s(11),n()()()),d&2){let e=t.$implicit,a=m();l(2),z("bg-success",e.season===a.currentLeagueSeason)("bg-secondary",e.season!==a.currentLeagueSeason),l(),h(" Season ",e.season," "),l(2),b(A(6,12,e.startDate==null||e.startDate.toDate==null?null:e.startDate.toDate(),"mediumDate")),l(3),b(e.playerCount||0),l(2),z("bg-success",e.season===a.currentLeagueSeason)("bg-secondary",e.season!==a.currentLeagueSeason),l(),h(" ",e.season===a.currentLeagueSeason?"Active":"Completed"," ")}}function Ce(d,t){d&1&&(i(0,"div",74),g(1,"div",75),i(2,"p"),s(3,"Loading pending players..."),n()())}function Ee(d,t){d&1&&(i(0,"div",76),g(1,"i",77),i(2,"p"),s(3,"No players awaiting approval"),n()())}function Pe(d,t){if(d&1){let e=E();i(0,"div",78)(1,"div",7)(2,"div",79)(3,"div",8)(4,"h5",80),s(5),n(),i(6,"p",81),s(7),n(),i(8,"small",52),s(9),O(10,"date"),n(),i(11,"div",82)(12,"small",52),s(13),n()()(),i(14,"div",34)(15,"div",83)(16,"div",84)(17,"small",52),s(18,"Age"),n(),i(19,"div",85),s(20),n()(),i(21,"div",84)(22,"small",52),s(23,"Height"),n(),i(24,"div",85),s(25),n()(),i(26,"div",84)(27,"small",52),s(28,"Weight"),n(),i(29,"div",85),s(30),n()()(),i(31,"div",86)(32,"span",87),s(33),n()()(),i(34,"div",88)(35,"div",89)(36,"button",90),f("click",function(){let r=u(e).$implicit,o=m();return p(o.approvePlayer(r))}),g(37,"i",91),s(38,"Approve "),n(),i(39,"button",92),f("click",function(){let r=u(e).$implicit,o=m();return p(o.rejectPlayer(r))}),g(40,"i",93),s(41,"Reject "),n(),i(42,"button",94),f("click",function(){let r=u(e).$implicit,o=m();return p(o.editPlayer(r))}),g(43,"i",95),s(44,"Edit "),n()()()()()()}if(d&2){let e=t.$implicit,a=m();l(5),V("",e.firstName," ",e.lastName),l(2),V("",e.position," \u2022 ",e.archetype),l(2),h("Submitted: ",A(10,13,e.submittedDate==null||e.submittedDate.toDate==null?null:e.submittedDate.toDate(),"medium")),l(4),h("By: ",e.userDisplayName||e.userEmail),l(7),b(e.age),l(5),h("",e.height,'"'),l(5),b(e.weight),l(3),h("Draft Class: Season ",e.draftClass||a.currentLeagueSeason),l(3),c("disabled",a.loading),l(3),c("disabled",a.loading),l(3),c("disabled",a.loading)}}function Te(d,t){d&1&&(i(0,"div",74),g(1,"div",96),i(2,"p"),s(3,"Loading new players..."),n()())}function Me(d,t){d&1&&(i(0,"div",76),g(1,"i",77),i(2,"p"),s(3,"No new players awaiting assignment"),n()())}function Ie(d,t){if(d&1&&(i(0,"option",104),s(1),n()),d&2){let e=t.$implicit;c("value",e.id),l(),h(" ",e.name," ")}}function Ne(d,t){if(d&1&&(i(0,"option",104),s(1),n()),d&2){let e=t.$implicit;c("value",e.id),l(),h(" ",e.name," ")}}function Re(d,t){if(d&1){let e=E();i(0,"div",97)(1,"div",7)(2,"div",79)(3,"div",8)(4,"h5",80),s(5),n(),i(6,"p",81),s(7),n(),i(8,"small",52),s(9),O(10,"date"),n()(),i(11,"div",34)(12,"div",83)(13,"div",84)(14,"small",52),s(15,"Age"),n(),i(16,"div",85),s(17),n()(),i(18,"div",84)(19,"small",52),s(20,"Height"),n(),i(21,"div",85),s(22),n()(),i(23,"div",84)(24,"small",52),s(25,"Weight"),n(),i(26,"div",85),s(27),n()()()(),i(28,"div",34)(29,"select",98),S("ngModelChange",function(r){let o=u(e).$implicit;return x(o.selectedTeamId,r)||(o.selectedTeamId=r),p(r)}),i(30,"option",99),s(31,"Select Team"),n(),i(32,"optgroup",100),_(33,Ie,2,2,"option",101),n(),i(34,"optgroup",102),_(35,Ne,2,2,"option",101),n()()(),i(36,"div",103)(37,"button",49),f("click",function(){let r=u(e).$implicit,o=m();return p(o.assignPlayerToTeam(r))}),g(38,"i",91),s(39,"Assign "),n()()()()()}if(d&2){let e=t.$implicit,a=m();l(5),V("",e.firstName," ",e.lastName),l(2),V("",e.position," \u2022 ",e.archetype),l(2),h("Created: ",A(10,12,e.createdDate==null||e.createdDate.toDate==null?null:e.createdDate.toDate(),"medium")),l(8),b(e.age),l(5),h("",e.height,'"'),l(5),b(e.weight),l(2),v("ngModel",e.selectedTeamId),l(4),c("ngForOf",a.majorLeagueTeams),l(2),c("ngForOf",a.minorLeagueTeams),l(2),c("disabled",!e.selectedTeamId||a.loading)}}function De(d,t){d&1&&g(0,"span",105)}function ke(d,t){if(d&1){let e=E();i(0,"div",108),f("click",function(){let r=u(e).$implicit,o=m(2);return p(o.selectUserFromSearch(r))}),i(1,"div",109)(2,"div",110),s(3),n(),i(4,"div")(5,"div",85),s(6),n()()()()}if(d&2){let e=t.$implicit;l(3),h(" ",e.displayName.charAt(0)||"U"," "),l(3),b(e.displayName)}}function He(d,t){if(d&1&&(i(0,"div",106),_(1,ke,7,2,"div",107),n()),d&2){let e=m();l(),c("ngForOf",e.searchResults)}}function qe(d,t){if(d&1&&(i(0,"div",111),s(1),n()),d&2){let e=m();l(),b(e.error)}}function Ve(d,t){if(d&1&&(i(0,"div",112),s(1),n()),d&2){let e=m();l(),b(e.success)}}function We(d,t){if(d&1){let e=E();i(0,"span",119),s(1),i(2,"button",120),f("click",function(){let r=u(e).$implicit,o=m(2);return p(o.removeRole(r))}),s(3," \xD7 "),n()()}if(d&2){let e=t.$implicit,a=m(2);l(),h(" ",e," "),l(),c("disabled",a.loading)}}function Fe(d,t){if(d&1&&(i(0,"option",121),s(1),n()),d&2){let e=t.$implicit,a=m(2);c("value",e)("disabled",a.selectedUser.roles.includes(e)),l(),h(" ",e," ")}}function Le(d,t){if(d&1){let e=E();i(0,"div",113)(1,"div",7)(2,"h6"),s(3),n(),i(4,"div",114)(5,"strong"),s(6,"Current Roles:"),n(),i(7,"div",115),_(8,We,4,2,"span",116),n()(),i(9,"div",51)(10,"div",62)(11,"select",117),S("ngModelChange",function(r){u(e);let o=m();return x(o.selectedRole,r)||(o.selectedRole=r),p(r)}),i(12,"option",99),s(13,"Select role to add..."),n(),_(14,Fe,2,3,"option",118),n(),i(15,"button",90),f("click",function(){u(e);let r=m();return p(r.addRole())}),s(16," Add Role "),n()()()()()}if(d&2){let e=m();l(3),h("User: ",e.selectedUser.displayName),l(5),c("ngForOf",e.selectedUser.roles),l(3),v("ngModel",e.selectedRole),c("disabled",e.loading),l(3),c("ngForOf",e.availableRoles),l(),c("disabled",!e.selectedRole||e.loading)}}function Oe(d,t){d&1&&(i(0,"div",74),g(1,"div",122),i(2,"p"),s(3,"Loading trades..."),n()())}function Ae(d,t){d&1&&(i(0,"div",76),s(1," No trades pending approval "),n())}function Ue(d,t){if(d&1&&(i(0,"li"),s(1),n()),d&2){let e=t.$implicit,a=m(2);l(),h(" ",a.getPlayerName(e)," ")}}function Ge(d,t){if(d&1&&(i(0,"li"),s(1),n()),d&2){let e=t.$implicit,a=m(2);l(),h(" ",a.getPlayerName(e)," ")}}function Be(d,t){if(d&1){let e=E();i(0,"div",123)(1,"div",7)(2,"h5",124),s(3,"Trade Proposal"),n(),i(4,"div",1)(5,"div",125)(6,"h6"),s(7),n(),i(8,"ul",126),_(9,Ue,2,1,"li",31),n()(),i(10,"div",125)(11,"h6"),s(12),n(),i(13,"ul",126),_(14,Ge,2,1,"li",31),n()()(),i(15,"div",127)(16,"button",90),f("click",function(){let r=u(e).$implicit,o=m();return p(o.approveTrade(r))}),s(17," Approve Trade "),n(),i(18,"button",92),f("click",function(){let r=u(e).$implicit,o=m();return p(o.denyTrade(r))}),s(19," Deny Trade "),n()()()()}if(d&2){let e=t.$implicit,a=m();l(7),h("",a.getTeamName(e.fromTeamId)," offers:"),l(2),c("ngForOf",e.playersOffered),l(3),h("",a.getTeamName(e.toTeamId)," offers:"),l(2),c("ngForOf",e.playersRequested),l(2),c("disabled",a.loading),l(2),c("disabled",a.loading)}}function je(d,t){d&1&&g(0,"span",105)}function $e(d,t){d&1&&g(0,"i",154)}function ze(d,t){if(d&1){let e=E();i(0,"div",128)(1,"div",129)(2,"div",130)(3,"div",131)(4,"h5",132),g(5,"i",24),s(6,"Season Rollover Confirmation "),n(),i(7,"button",133),f("click",function(){u(e);let r=m();return p(r.showSeasonRolloverModal=!1)}),n()(),i(8,"div",134)(9,"div",111)(10,"h5"),g(11,"i",135),s(12,"Critical Action Warning"),n(),i(13,"p",5)(14,"strong"),s(15,"This action cannot be undone!"),n(),s(16," You are about to advance the league from "),i(17,"strong"),s(18),n(),s(19," to "),i(20,"strong"),s(21),n(),s(22,". "),n()(),i(23,"h6"),s(24,"What will happen during season rollover:"),n(),i(25,"ul",136)(26,"li",137),g(27,"i",138),i(28,"strong"),s(29),n()(),i(30,"li",137),g(31,"i",139),i(32,"strong"),s(33),n()(),i(34,"li",137),g(35,"i",140),i(36,"strong"),s(37),n()(),i(38,"li",137),g(39,"i",141),i(40,"strong"),s(41),n()(),i(42,"li",137),g(43,"i",142),i(44,"strong"),s(45,"Season history will be recorded for future reference"),n()()(),i(46,"div",143)(47,"h6"),g(48,"i",144),s(49,"Draft Class Impact"),n(),i(50,"p",16),s(51," Player ages are important for the draft class system. After rollover: "),n(),i(52,"ul",5)(53,"li")(54,"strong"),s(55,"18-year-olds:"),n(),s(56," Youngest draft class, highest potential"),n(),i(57,"li")(58,"strong"),s(59,"19-year-olds:"),n(),s(60," Standard draft class"),n(),i(61,"li")(62,"strong"),s(63,"20+ years:"),n(),s(64," Veteran players, established in the league"),n()()(),i(65,"div",145)(66,"input",146),S("ngModelChange",function(r){u(e);let o=m();return x(o.rolloverConfirmed,r)||(o.rolloverConfirmed=r),p(r)}),n(),i(67,"label",147)(68,"strong"),s(69),n()()(),i(70,"div",114)(71,"label",148)(72,"strong"),s(73,'Type "ADVANCE SEASON" to confirm:'),n()(),i(74,"input",149),S("ngModelChange",function(r){u(e);let o=m();return x(o.rolloverConfirmationText,r)||(o.rolloverConfirmationText=r),p(r)}),n()()(),i(75,"div",150)(76,"button",151),f("click",function(){u(e);let r=m();return p(r.showSeasonRolloverModal=!1)}),s(77,"Cancel"),n(),i(78,"button",152),f("click",function(){u(e);let r=m();return p(r.executeSeasonRollover())}),_(79,je,1,0,"span",65)(80,$e,1,0,"i",153),s(81),n()()()()()}if(d&2){let e=m();l(18),h("Season ",e.currentLeagueSeason),l(3),h("Season ",e.currentLeagueSeason+1),l(8),h("All ",e.draftClassCounts.total," active players will age by 1 year"),l(4),h("",e.draftClassCounts.age18," players will move from 18 to 19 years old"),l(4),h("",e.draftClassCounts.age19," players will move from 19 to 20+ years old"),l(4),h("League season will advance to Season ",e.currentLeagueSeason+1),l(25),v("ngModel",e.rolloverConfirmed),l(3),h("I understand this action cannot be undone and will affect all ",e.draftClassCounts.total," players in the league"),l(5),v("ngModel",e.rolloverConfirmationText),l(4),c("disabled",!e.rolloverConfirmed||e.rolloverConfirmationText!=="ADVANCE SEASON"||e.seasonRolloverInProgress),l(),c("ngIf",e.seasonRolloverInProgress),l(),c("ngIf",!e.seasonRolloverInProgress),l(),h(" ",e.seasonRolloverInProgress?"Processing Season Rollover...":"Advance to Season "+(e.currentLeagueSeason+1)," ")}}function Qe(d,t){if(d&1&&(i(0,"option",104),s(1),n()),d&2){let e=t.$implicit;c("value",e),l(),b(e)}}function Ye(d,t){if(d&1){let e=E();i(0,"div",159)(1,"div",125)(2,"label",148),s(3,"First Name"),n(),i(4,"input",160),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.firstName,r)||(o.editingPlayer.firstName=r),p(r)}),n()(),i(5,"div",125)(6,"label",148),s(7,"Last Name"),n(),i(8,"input",160),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.lastName,r)||(o.editingPlayer.lastName=r),p(r)}),n()(),i(9,"div",8)(10,"label",148),s(11,"Position"),n(),i(12,"select",161),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.position,r)||(o.editingPlayer.position=r),p(r)}),f("change",function(){u(e);let r=m(2);return p(r.onEditPositionChange())}),i(13,"option",162),s(14,"Left Wing"),n(),i(15,"option",163),s(16,"Center"),n(),i(17,"option",164),s(18,"Right Wing"),n(),i(19,"option",165),s(20,"Defense"),n(),i(21,"option",166),s(22,"Goalie"),n()()(),i(23,"div",8)(24,"label",148),s(25,"Archetype"),n(),i(26,"select",98),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.archetype,r)||(o.editingPlayer.archetype=r),p(r)}),_(27,Qe,2,2,"option",101),n()(),i(28,"div",8)(29,"label",148),s(30,"Age"),n(),i(31,"input",167),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.age,r)||(o.editingPlayer.age=r),p(r)}),n()(),i(32,"div",8)(33,"label",148),s(34,"Jersey Number"),n(),i(35,"input",168),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.jerseyNumber,r)||(o.editingPlayer.jerseyNumber=r),p(r)}),n()(),i(36,"div",8)(37,"label",148),s(38,"Height (inches)"),n(),i(39,"input",169),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.height,r)||(o.editingPlayer.height=r),p(r)}),n()(),i(40,"div",8)(41,"label",148),s(42,"Weight (lbs)"),n(),i(43,"input",170),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.weight,r)||(o.editingPlayer.weight=r),p(r)}),n()(),i(44,"div",125)(45,"label",148),s(46,"Draft Class Season"),n(),i(47,"input",171),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.draftClass,r)||(o.editingPlayer.draftClass=r),p(r)}),n(),i(48,"small",172),s(49," This determines which draft class the player will be part of. "),n()(),i(50,"div",125)(51,"label",148),s(52,"Handedness"),n(),i(53,"select",98),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.editingPlayer.handedness,r)||(o.editingPlayer.handedness=r),p(r)}),i(54,"option",173),s(55,"Left"),n(),i(56,"option",174),s(57,"Right"),n()()()()}if(d&2){let e=m(2);l(4),v("ngModel",e.editingPlayer.firstName),l(4),v("ngModel",e.editingPlayer.lastName),l(4),v("ngModel",e.editingPlayer.position),l(14),v("ngModel",e.editingPlayer.archetype),l(),c("ngForOf",e.editArchetypes),l(4),v("ngModel",e.editingPlayer.age),l(4),v("ngModel",e.editingPlayer.jerseyNumber),l(4),v("ngModel",e.editingPlayer.height),l(4),v("ngModel",e.editingPlayer.weight),l(4),v("ngModel",e.editingPlayer.draftClass),l(6),v("ngModel",e.editingPlayer.handedness)}}function Je(d,t){if(d&1){let e=E();i(0,"div",128)(1,"div",129)(2,"div",130)(3,"div",155)(4,"h5",132),g(5,"i",156),s(6,"Edit Player "),n(),i(7,"button",133),f("click",function(){u(e);let r=m();return p(r.showEditPlayerModal=!1)}),n()(),i(8,"div",134),_(9,Ye,58,11,"div",157),n(),i(10,"div",150)(11,"button",151),f("click",function(){u(e);let r=m();return p(r.showEditPlayerModal=!1)}),s(12,"Cancel"),n(),i(13,"button",158),f("click",function(){u(e);let r=m();return p(r.savePlayerEdit())}),g(14,"i",50),s(15,"Save Changes "),n()()()()()}if(d&2){let e=m();l(9),c("ngIf",e.editingPlayer),l(4),c("disabled",e.loading)}}function Ke(d,t){if(d&1&&(i(0,"option",104),s(1),n()),d&2){let e=t.$implicit;c("value",e.id),l(),h(" ",e.name," ")}}function Xe(d,t){if(d&1){let e=E();i(0,"div")(1,"div",143),g(2,"i",144),i(3,"strong"),s(4,"Team-Specific GM Role:"),n(),s(5),n(),i(6,"div",114)(7,"h6"),s(8),n()(),i(9,"div",114)(10,"label",148),g(11,"i",180),s(12,"Select Team to Manage "),n(),i(13,"select",98),S("ngModelChange",function(r){u(e);let o=m(2);return x(o.selectedTeamForGm,r)||(o.selectedTeamForGm=r),p(r)}),i(14,"option",99),s(15,"-- Choose a Team --"),n(),_(16,Ke,2,2,"option",101),n()(),i(17,"div",181),g(18,"i",24),i(19,"strong"),s(20,"Note:"),n(),s(21," GM roles are team-specific. This user will only be able to manage the selected team's roster, trades, and contracts. "),n()()}if(d&2){let e=m(2);l(5),h(" This will give ",e.selectedUserForGm.displayName," management permissions for only the selected team. "),l(3),h("User: ",e.selectedUserForGm.displayName),l(5),v("ngModel",e.selectedTeamForGm),l(3),c("ngForOf",e.allTeamsSorted)}}function Ze(d,t){d&1&&g(0,"span",105)}function et(d,t){d&1&&g(0,"i",182)}function tt(d,t){if(d&1){let e=E();i(0,"div",128)(1,"div",175)(2,"div",130)(3,"div",176)(4,"h5",132),g(5,"i",177),s(6,"Assign GM Role "),n(),i(7,"button",133),f("click",function(){u(e);let r=m();return p(r.showGmRoleModal=!1)}),n()(),i(8,"div",134),_(9,Xe,22,4,"div",178),n(),i(10,"div",150)(11,"button",151),f("click",function(){u(e);let r=m();return p(r.showGmRoleModal=!1)}),s(12,"Cancel"),n(),i(13,"button",158),f("click",function(){u(e);let r=m();return p(r.assignGmRole())}),_(14,Ze,1,0,"span",65)(15,et,1,0,"i",179),s(16,"Assign GM Role "),n()()()()()}if(d&2){let e=m();l(9),c("ngIf",e.selectedUserForGm),l(4),c("disabled",!e.selectedTeamForGm||e.loading),l(),c("ngIf",e.loading),l(),c("ngIf",!e.loading)}}var xe=class d{firestore=L(he);tradeService=L(_e);authService=L(ye);currentLeagueSeason=1;seasonHistory=[];draftClassCounts={age18:0,age19:0,age20Plus:0,total:0};showSeasonRolloverModal=!1;rolloverConfirmed=!1;rolloverConfirmationText="";seasonRolloverInProgress=!1;currentSeason=1;currentWeek=1;currentDay="D1";searchUsername="";selectedUser=null;selectedRole="";loading=!1;error="";success="";pendingTrades=[];loadingTrades=!1;playerCache=new Map;teamCache=new Map;newPlayers=[];loadingNewPlayers=!1;majorLeagueTeams=[];minorLeagueTeams=[];pendingPlayers=[];loadingPendingPlayers=!1;showEditPlayerModal=!1;editingPlayer=null;editArchetypes=[];canManagePlayoffs=!1;isDeveloper=!1;availableRoles=["viewer","developer","commissioner","gm","stats monkey","finance officer","progression tracker"];searchResults=[];showSearchResults=!1;showGmRoleModal=!1;selectedUserForGm=null;selectedTeamForGm="";allTeams=[];ngOnInit(){return y(this,null,function*(){this.authService.effectiveRoles.subscribe(t=>{this.canManagePlayoffs=t.some(e=>["developer","commissioner"].includes(e)),this.isDeveloper=t.includes("developer")}),yield Promise.all([this.loadSeasonManagement(),this.loadScheduleSettings(),this.loadPendingTrades(),this.loadNewPlayers(),this.loadTeams(),this.loadPendingPlayers(),this.loadAllTeams()])})}loadSeasonManagement(){return y(this,null,function*(){try{let t=w(this.firestore,"leagueSettings/season"),e=yield R(t);e.exists()?this.currentLeagueSeason=e.data().currentSeason||1:(yield D(t,{currentSeason:1,createdDate:new Date}),this.currentLeagueSeason=1),yield this.loadSeasonHistory(),yield this.loadDraftClassCounts()}catch(t){console.error("Error loading season management:",t)}})}loadSeasonHistory(){return y(this,null,function*(){try{let t=C(this.firestore,"seasonHistory"),e=I(t,fe("season","desc")),a=yield P(e);this.seasonHistory=a.docs.map(r=>({season:r.data().season,startDate:r.data().startDate,playerCount:r.data().playerCount,status:r.data().season===this.currentLeagueSeason?"active":"completed"}))}catch(t){console.error("Error loading season history:",t)}})}loadDraftClassCounts(){return y(this,null,function*(){try{let t=C(this.firestore,"players"),e=I(t,N("status","==","active")),a=yield P(e),r=0,o=0,T=0;a.docs.forEach(M=>{let H=M.data().age||19;H===18?r++:H===19?o++:T++}),this.draftClassCounts={age18:r,age19:o,age20Plus:T,total:r+o+T}}catch(t){console.error("Error loading draft class counts:",t)}})}executeSeasonRollover(){return y(this,null,function*(){if(!(!this.rolloverConfirmed||this.rolloverConfirmationText!=="ADVANCE SEASON")){this.seasonRolloverInProgress=!0;try{console.log(`\u{1F3C6} Starting season rollover from Season ${this.currentLeagueSeason} to Season ${this.currentLeagueSeason+1}`);let t=J(this.firestore),e=w(this.firestore,`seasonHistory/season${this.currentLeagueSeason}`);t.set(e,{season:this.currentLeagueSeason,startDate:new Date,playerCount:this.draftClassCounts.total,status:"completed"});let a=this.currentLeagueSeason+1,r=w(this.firestore,"leagueSettings/season");t.update(r,{currentSeason:a,lastRolloverDate:new Date,previousSeason:this.currentLeagueSeason}),yield t.commit();let o=C(this.firestore,"players"),T=I(o,N("status","==","active")),M=yield P(T);console.log(`\u{1F465} Aging ${M.docs.length} active players...`);let H=[],K=500;for(let F=0;F<M.docs.length;F+=K){let U=J(this.firestore);M.docs.slice(F,F+K).forEach(G=>{let B=G.data().age||19,j=B+1;U.update(G.ref,{age:j,lastAgedSeason:a});let we=w(C(this.firestore,`players/${G.id}/history`));U.set(we,{action:"aged",previousAge:B,newAge:j,season:a,timestamp:new Date,details:`Player aged from ${B} to ${j} during Season ${a} rollover`})}),H.push(U.commit())}yield Promise.all(H);let Se=w(this.firestore,`seasonHistory/season${a}`);yield D(Se,{season:a,startDate:new Date,playerCount:this.draftClassCounts.total,status:"active"}),yield W(C(this.firestore,"draftClasses"),{season:a,status:"upcoming",createdAt:new Date}),this.currentLeagueSeason=a,yield Promise.all([this.loadSeasonHistory(),this.loadDraftClassCounts()]),this.showSeasonRolloverModal=!1,this.rolloverConfirmed=!1,this.rolloverConfirmationText="",this.success=`Season rollover completed successfully! Welcome to Season ${a}. All players have been aged by 1 year.`,setTimeout(()=>this.success="",5e3),console.log(`\u2705 Season rollover completed successfully to Season ${a}`)}catch(t){console.error("\u274C Error during season rollover:",t),this.error="Failed to complete season rollover. Please try again or contact support.",setTimeout(()=>this.error="",5e3)}finally{this.seasonRolloverInProgress=!1}}})}loadScheduleSettings(){return y(this,null,function*(){try{let t=w(this.firestore,"gameScheduleSettings/current"),e=yield R(t);if(e.exists()){let a=e.data();this.currentSeason=a.season||1,this.currentWeek=a.week||1,this.currentDay=a.day||"D1"}}catch(t){console.error("Error loading schedule settings:",t)}})}updateScheduleSettings(){return y(this,null,function*(){this.loading=!0;try{let t=w(this.firestore,"gameScheduleSettings/current");yield D(t,{season:this.currentSeason,week:this.currentWeek,day:this.currentDay,lastUpdated:new Date}),this.success="Schedule settings updated successfully",setTimeout(()=>this.success="",3e3)}catch(t){console.error("Error updating schedule settings:",t),this.error="Failed to update schedule settings",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}})}loadNewPlayers(){return y(this,null,function*(){this.loadingNewPlayers=!0;try{let t=C(this.firestore,"players"),e=I(t,N("teamId","==","none"),N("status","==","active")),a=yield P(e);this.newPlayers=a.docs.map(r=>$(q({id:r.id},r.data()),{selectedTeamId:""}))}finally{this.loadingNewPlayers=!1}})}loadPendingPlayers(){return y(this,null,function*(){this.loadingPendingPlayers=!0;try{let t=C(this.firestore,"pendingPlayers"),e=I(t,N("status","==","pending")),a=yield P(e);this.pendingPlayers=a.docs.map(r=>{let o=r.data();return{id:r.id,firstName:o.firstName,lastName:o.lastName,position:o.position,archetype:o.archetype,age:o.age,height:o.height,weight:o.weight,jerseyNumber:o.jerseyNumber,handedness:o.handedness,userId:o.userId,userEmail:o.userEmail,userDisplayName:o.userDisplayName,submittedDate:o.submittedDate,status:o.status,draftClass:o.draftClass,fight:o.fight,origin:o.origin,hair:o.hair,beard:o.beard,tape:o.tape,ethnicity:o.ethnicity,twitch:o.twitch,referral:o.referral,invitedBy:o.invitedBy,gamertag:o.gamertag}})}finally{this.loadingPendingPlayers=!1}})}loadTeams(){return y(this,null,function*(){let t=C(this.firestore,"teams"),a=(yield P(t)).docs.map(r=>{let o=r.data();return{id:r.id,name:`${o.city} ${o.mascot}`,city:o.city,mascot:o.mascot,league:o.league||"major",conference:o.conference,division:o.division}});this.majorLeagueTeams=a.filter(r=>r.league==="major"||!r.league),this.minorLeagueTeams=a.filter(r=>r.league==="minor")})}assignPlayerToTeam(t){return y(this,null,function*(){if(t.selectedTeamId){this.loading=!0;try{let e=w(this.firestore,`players/${t.id}`);yield k(e,{teamId:t.selectedTeamId});let a=w(this.firestore,`teams/${t.selectedTeamId}/roster/${t.id}`);yield D(a,{firstName:t.firstName,lastName:t.lastName,position:t.position,archetype:t.archetype,jerseyNumber:t.jerseyNumber,age:t.age,height:t.height,weight:t.weight,handedness:t.handedness,teamId:t.selectedTeamId}),yield W(C(this.firestore,`players/${t.id}/history`),{action:"signed",teamId:t.selectedTeamId,timestamp:new Date,details:"Assigned to team by league management"}),this.newPlayers=this.newPlayers.filter(r=>r.id!==t.id),this.success=`${t.firstName} ${t.lastName} has been assigned to their team!`,setTimeout(()=>this.success="",3e3)}catch(e){console.error("Error assigning player:",e),this.error="Failed to assign player to team",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}}})}approvePlayer(t){return y(this,null,function*(){this.loading=!0;try{let e=w(this.firestore,"leagueSettings/season"),a=yield R(e),r=a.exists()?a.data().currentSeason:1,o=yield W(C(this.firestore,"players"),{firstName:t.firstName,lastName:t.lastName,position:t.position,archetype:t.archetype,jerseyNumber:t.jerseyNumber,age:t.age,height:t.height,weight:t.weight,handedness:t.handedness,userId:t.userId,teamId:"none",status:"active",createdDate:new Date,draftClass:t.draftClass||r,draftStatus:"eligible",fightTendency:t.fight,origin:t.origin,hair:t.hair,beard:t.beard,stickTapeColor:t.tape,race:t.ethnicity,twitch:t.twitch,referralSource:t.referral,invitedBy:t.invitedBy,gamertag:t.gamertag}),T=w(this.firestore,`players/${o.id}/meta/attributes`);yield D(T,ve(t.position)),yield W(C(this.firestore,`players/${o.id}/history`),{action:"created",teamId:"none",timestamp:new Date,details:"Player approved and entered the league"}),yield Y(w(this.firestore,`pendingPlayers/${t.id}`)),this.pendingPlayers=this.pendingPlayers.filter(M=>M.id!==t.id),this.success=`${t.firstName} ${t.lastName} has been approved and created!`,setTimeout(()=>this.success="",3e3),window.dispatchEvent(new CustomEvent("playerApproved"))}catch(e){console.error("Error approving player:",e),this.error="Failed to approve player",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}})}rejectPlayer(t){return y(this,null,function*(){if(confirm(`Are you sure you want to reject ${t.firstName} ${t.lastName}'s player request?`)){this.loading=!0;try{yield Y(w(this.firestore,`pendingPlayers/${t.id}`)),this.pendingPlayers=this.pendingPlayers.filter(e=>e.id!==t.id),this.success=`${t.firstName} ${t.lastName}'s player request has been rejected.`,setTimeout(()=>this.success="",3e3)}catch(e){console.error("Error rejecting player:",e),this.error="Failed to reject player",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}}})}editPlayer(t){this.editingPlayer=q({},t),this.onEditPositionChange(),this.showEditPlayerModal=!0}onEditPositionChange(){if(!this.editingPlayer)return;let t=this.editingPlayer.position;["LW","C","RW"].includes(t)?this.editArchetypes=["Playmaker","Sniper","2-Way Forward","Power Forward","Enforcer Forward","Grinder"]:t==="D"?this.editArchetypes=["Defensive Defense","Offensive Defense","2-Way Defense","Enforcer Defense"]:t==="G"?this.editArchetypes=["Hybrid","Butterfly","Standup"]:this.editArchetypes=[]}savePlayerEdit(){return y(this,null,function*(){if(this.editingPlayer){this.loading=!0;try{let t=w(this.firestore,`pendingPlayers/${this.editingPlayer.id}`);yield k(t,{firstName:this.editingPlayer.firstName,lastName:this.editingPlayer.lastName,position:this.editingPlayer.position,archetype:this.editingPlayer.archetype,jerseyNumber:this.editingPlayer.jerseyNumber,age:this.editingPlayer.age,height:this.editingPlayer.height,weight:this.editingPlayer.weight,handedness:this.editingPlayer.handedness,draftClass:this.editingPlayer.draftClass});let e=this.pendingPlayers.findIndex(a=>a.id===this.editingPlayer?.id);e!==-1&&(this.pendingPlayers[e]=q({},this.editingPlayer)),this.success=`${this.editingPlayer.firstName} ${this.editingPlayer.lastName}'s information has been updated.`,setTimeout(()=>this.success="",3e3),this.showEditPlayerModal=!1,this.editingPlayer=null}catch(t){console.error("Error updating player:",t),this.error="Failed to update player",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}}})}loadPendingTrades(){return y(this,null,function*(){this.loadingTrades=!0;try{this.pendingTrades=yield this.tradeService.getPendingTradeApprovals();let t=new Set,e=new Set;this.pendingTrades.forEach(a=>{t.add(a.fromTeamId),t.add(a.toTeamId),a.playersOffered.forEach(r=>e.add(r)),a.playersRequested.forEach(r=>e.add(r))});for(let a of t){let r=yield R(w(this.firestore,`teams/${a}`));if(r.exists()){let o=r.data();this.teamCache.set(a,`${o.city} ${o.mascot}`)}}for(let a of e){let r=yield R(w(this.firestore,`players/${a}`));if(r.exists()){let o=r.data();this.playerCache.set(a,`${o.firstName} ${o.lastName}`)}}}finally{this.loadingTrades=!1}})}getTeamName(t){return this.teamCache.get(t)||"Unknown Team"}getPlayerName(t){return this.playerCache.get(t)||"Unknown Player"}approveTrade(t){return y(this,null,function*(){this.loading=!0;try{yield this.tradeService.approveTrade(t),yield this.loadPendingTrades(),this.success="Trade approved successfully",setTimeout(()=>this.success="",3e3)}catch(e){console.error("Error approving trade:",e),this.error="Failed to approve trade",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}})}denyTrade(t){return y(this,null,function*(){this.loading=!0;try{yield this.tradeService.denyTrade(t),yield this.loadPendingTrades(),this.success="Trade denied successfully",setTimeout(()=>this.success="",3e3)}catch(e){console.error("Error denying trade:",e),this.error="Failed to deny trade",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}})}onSearchInput(){return y(this,null,function*(){if(this.searchUsername.trim().length<2){this.searchResults=[],this.showSearchResults=!1;return}try{let t=C(this.firestore,"users"),e=yield P(t);this.searchResults=e.docs.map(a=>({uid:a.id,displayName:a.data().displayName||"",email:a.data().email||"",roles:a.data().roles||[]})).filter(a=>a.displayName?.toLowerCase().includes(this.searchUsername.toLowerCase())||a.email?.toLowerCase().includes(this.searchUsername.toLowerCase())).slice(0,5),this.showSearchResults=this.searchResults.length>0}catch(t){console.error("Error searching users:",t)}})}selectUserFromSearch(t){this.selectedUser=t,this.searchUsername=t.displayName,this.showSearchResults=!1,this.searchResults=[]}searchUser(){return y(this,null,function*(){if(!this.searchUsername.trim()){this.error="Please enter a username";return}this.loading=!0,this.error="",this.success="",this.selectedUser=null;try{let t=C(this.firestore,"users"),e=I(t,N("displayName","==",this.searchUsername)),a=yield P(e);if(a.empty){this.error="User not found";return}let r=a.docs[0];this.selectedUser=$(q({uid:r.id},r.data()),{roles:r.data().roles||[]})}catch(t){console.error("Error searching user:",t),this.error="Error searching for user"}finally{this.loading=!1}})}addRole(){return y(this,null,function*(){if(!(!this.selectedUser||!this.selectedRole)){if(this.selectedRole==="gm"){this.selectedUserForGm=this.selectedUser,this.showGmRoleModal=!0,this.selectedRole="";return}this.loading=!0,this.error="",this.success="";try{let t=w(this.firestore,"users",this.selectedUser.uid);yield k(t,{roles:Q(this.selectedRole)}),this.selectedUser.roles.push(this.selectedRole),this.selectedRole="",this.success="Role added successfully",setTimeout(()=>this.success="",3e3)}catch(t){console.error("Error adding role:",t),this.error="Failed to add role",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}}})}removeRole(t){return y(this,null,function*(){if(this.selectedUser){this.loading=!0,this.error="",this.success="";try{let e=w(this.firestore,"users",this.selectedUser.uid);yield k(e,{roles:pe(t)}),this.selectedUser.roles=this.selectedUser.roles.filter(a=>a!==t),this.success="Role removed successfully",setTimeout(()=>this.success="",3e3)}catch(e){console.error("Error removing role:",e),this.error="Failed to remove role",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}}})}loadAllTeams(){return y(this,null,function*(){try{let t=C(this.firestore,"teams"),e=yield P(t);this.allTeams=e.docs.map(a=>{let r=a.data();return{id:a.id,name:`${r.city} ${r.mascot}`,city:r.city,mascot:r.mascot,league:r.league||"major",conference:r.conference,division:r.division}})}catch(t){console.error("Error loading all teams:",t)}})}assignGmRole(){return y(this,null,function*(){if(!(!this.selectedUserForGm||!this.selectedTeamForGm)){this.loading=!0;try{let t=w(this.firestore,"users",this.selectedUserForGm.uid),e=`gm:${this.selectedTeamForGm}`;yield k(t,{roles:Q(e)}),this.success=`GM role assigned successfully to ${this.selectedUserForGm.displayName}`,setTimeout(()=>this.success="",3e3),this.showGmRoleModal=!1,this.selectedUserForGm=null,this.selectedTeamForGm=""}catch(t){console.error("Error assigning GM role:",t),this.error="Failed to assign GM role",setTimeout(()=>this.error="",3e3)}finally{this.loading=!1}}})}get majorLeagueTeamsFiltered(){return this.allTeams.filter(t=>(t.league||"")==="major")}get minorLeagueTeamsFiltered(){return this.allTeams.filter(t=>(t.league||"")==="minor")}get allTeamsSorted(){return[...this.allTeams].sort((t,e)=>t.name.localeCompare(e.name))}formatRoleDisplay(t){if(t.startsWith("gm:")){let e=t.split(":")[1];return`GM - ${this.getTeamName(e)}`}return t}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=X({type:d,selectors:[["app-headquarters"]],decls:166,vars:33,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-md-12"],[1,"card","mb-4"],[1,"card-header","bg-success","text-white"],[1,"mb-0"],[1,"fas","fa-trophy","me-2"],[1,"card-body"],[1,"col-md-4"],[1,"card","border-primary"],[1,"card-header","bg-primary","text-white"],[1,"card-body","text-center"],[1,"display-4","text-primary","mb-2"],[1,"text-muted","mb-0"],[1,"card","border-warning"],[1,"card-header","bg-warning","text-dark"],[1,"mb-2"],[1,"badge","bg-success","ms-1"],[1,"badge","bg-info","ms-1"],[1,"badge","bg-secondary","ms-1"],[1,"badge","bg-primary","ms-1"],[1,"card","border-danger"],[1,"card-header","bg-danger","text-white"],[1,"alert","alert-warning","mb-3"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"btn","btn-danger","w-100",3,"click","disabled"],[1,"fas","fa-forward","me-2"],[1,"mt-4"],[1,"fas","fa-history","me-2"],[1,"table-responsive"],[1,"table","table-sm"],[4,"ngFor","ngForOf"],[1,"card-header","bg-info","text-white"],[1,"fas","fa-calendar-alt","me-2"],[1,"col-md-3"],["for","currentSeason",1,"form-label"],["type","number","id","currentSeason","min","1",1,"form-control",3,"ngModelChange","change","ngModel"],["for","currentWeek",1,"form-label"],["type","number","id","currentWeek","min","1",1,"form-control",3,"ngModelChange","change","ngModel"],["for","currentDay",1,"form-label"],["id","currentDay",1,"form-select",3,"ngModelChange","change","ngModel"],["value","D1"],["value","D2"],["value","D3"],["value","D4"],["value","D5"],["value","D6"],["value","D7"],[1,"col-md-3","d-flex","align-items-end"],[1,"btn","btn-success","w-100",3,"click","disabled"],[1,"fas","fa-save","me-1"],[1,"mt-3"],[1,"text-muted"],[1,"fas","fa-info-circle","me-1"],[1,"fas","fa-user-check","me-2"],["class","text-center",4,"ngIf"],["class","text-center text-muted",4,"ngIf"],["class","card mb-3 border-info",4,"ngFor","ngForOf"],[1,"fas","fa-user-plus","me-2"],[1,"badge","bg-dark","ms-2"],["class","card mb-3 border-warning",4,"ngFor","ngForOf"],[1,"position-relative","mb-3"],[1,"input-group"],["type","text","placeholder","Enter username or email",1,"form-control",3,"ngModelChange","input","ngModel","disabled"],[1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","search-results",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","card mt-3",4,"ngIf"],[1,"card"],["class","card mb-3",4,"ngFor","ngForOf"],["class","modal fade show","tabindex","-1","style","display: block; background: rgba(0,0,0,0.5);",4,"ngIf"],[1,"badge"],[1,"text-center"],[1,"spinner-border","text-info"],[1,"text-center","text-muted"],[1,"fas","fa-check-circle","fa-3x","mb-3"],[1,"card","mb-3","border-info"],[1,"row","align-items-center"],[1,"mb-1"],[1,"text-muted","mb-1"],[1,"mt-1"],[1,"row","text-center"],[1,"col-4"],[1,"fw-bold"],[1,"mt-2","text-center"],[1,"badge","bg-info"],[1,"col-md-5","text-end"],[1,"btn-group"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-check","me-1"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-times","me-1"],[1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-edit","me-1"],[1,"spinner-border","text-warning"],[1,"card","mb-3","border-warning"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["label","Major League"],[3,"value",4,"ngFor","ngForOf"],["label","Minor League"],[1,"col-md-2"],[3,"value"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"search-results"],["class","search-result-item",3,"click",4,"ngFor","ngForOf"],[1,"search-result-item",3,"click"],[1,"d-flex","align-items-center"],[1,"user-avatar-small","me-2"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"card","mt-3"],[1,"mb-3"],[1,"mt-2"],["class","badge bg-secondary me-2 mb-2",4,"ngFor","ngForOf"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"badge","bg-secondary","me-2","mb-2"],[1,"btn","btn-sm","text-white","ms-1",3,"click","disabled"],[3,"value","disabled"],[1,"spinner-border","text-primary"],[1,"card","mb-3"],[1,"card-title"],[1,"col-md-6"],[1,"list-unstyled"],[1,"mt-3","d-flex","gap-2"],["tabindex","-1",1,"modal","fade","show",2,"display","block","background","rgba(0,0,0,0.5)"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"fas","fa-warning","me-2"],[1,"list-group","list-group-flush","mb-3"],[1,"list-group-item"],[1,"fas","fa-birthday-cake","text-primary","me-2"],[1,"fas","fa-users","text-info","me-2"],[1,"fas","fa-graduation-cap","text-success","me-2"],[1,"fas","fa-trophy","text-warning","me-2"],[1,"fas","fa-history","text-secondary","me-2"],[1,"alert","alert-info"],[1,"fas","fa-info-circle","me-2"],[1,"form-check","mb-3"],["type","checkbox","id","confirmRollover",1,"form-check-input",3,"ngModelChange","ngModel"],["for","confirmRollover",1,"form-check-label"],[1,"form-label"],["type","text","placeholder","Type ADVANCE SEASON to confirm",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["class","fas fa-forward me-1",4,"ngIf"],[1,"fas","fa-forward","me-1"],[1,"modal-header","bg-info","text-white"],[1,"fas","fa-edit","me-2"],["class","row g-3",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"row","g-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","LW"],["value","C"],["value","RW"],["value","D"],["value","G"],["type","number","min","18","max","40",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0","max","99",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","67","max","81",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","129","max","290",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-text","text-muted"],["value","Left"],["value","Right"],[1,"modal-dialog"],[1,"modal-header","bg-primary","text-white"],[1,"fas","fa-user-tie","me-2"],[4,"ngIf"],["class","fas fa-user-tie me-1",4,"ngIf"],[1,"fas","fa-users","me-1"],[1,"alert","alert-warning"],[1,"fas","fa-user-tie","me-1"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),g(6,"i",6),s(7,"Season Management System "),n()(),i(8,"div",7)(9,"div",1)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h6",5),s(14,"Current League Season"),n()(),i(15,"div",11)(16,"h2",12),s(17),n(),i(18,"p",13),s(19,"Active Season"),n()()()(),i(20,"div",8)(21,"div",14)(22,"div",15)(23,"h6",5),s(24,"Draft Class System"),n()(),i(25,"div",7)(26,"div",16)(27,"strong"),s(28,"18-year-olds:"),n(),i(29,"span",17),s(30),n()(),i(31,"div",16)(32,"strong"),s(33,"19-year-olds:"),n(),i(34,"span",18),s(35),n()(),i(36,"div",16)(37,"strong"),s(38,"20+ years:"),n(),i(39,"span",19),s(40),n()(),g(41,"hr"),i(42,"div")(43,"strong"),s(44,"Total Active Players:"),n(),i(45,"span",20),s(46),n()()()()(),i(47,"div",8)(48,"div",21)(49,"div",22)(50,"h6",5),s(51,"Season Rollover"),n()(),i(52,"div",7)(53,"div",23),g(54,"i",24),i(55,"strong"),s(56,"Warning:"),n(),s(57," This will age all players by 1 year and advance the league season. "),n(),i(58,"button",25),f("click",function(){return a.showSeasonRolloverModal=!0}),g(59,"i",26),s(60),n()()()()(),i(61,"div",27)(62,"h6"),g(63,"i",28),s(64,"Season History "),n(),i(65,"div",29)(66,"table",30)(67,"thead")(68,"tr")(69,"th"),s(70,"Season"),n(),i(71,"th"),s(72,"Start Date"),n(),i(73,"th"),s(74,"Players at Start"),n(),i(75,"th"),s(76,"Status"),n()()(),i(77,"tbody"),_(78,be,12,15,"tr",31),n()()()()()(),i(79,"div",3)(80,"div",32)(81,"h4",5),g(82,"i",33),s(83,"Game Schedule Settings "),n()(),i(84,"div",7)(85,"div",1)(86,"div",34)(87,"label",35),s(88,"Current Season"),n(),i(89,"input",36),S("ngModelChange",function(o){return x(a.currentSeason,o)||(a.currentSeason=o),o}),f("change",function(){return a.updateScheduleSettings()}),n()(),i(90,"div",34)(91,"label",37),s(92,"Current Week"),n(),i(93,"input",38),S("ngModelChange",function(o){return x(a.currentWeek,o)||(a.currentWeek=o),o}),f("change",function(){return a.updateScheduleSettings()}),n()(),i(94,"div",34)(95,"label",39),s(96,"Current Day"),n(),i(97,"select",40),S("ngModelChange",function(o){return x(a.currentDay,o)||(a.currentDay=o),o}),f("change",function(){return a.updateScheduleSettings()}),i(98,"option",41),s(99,"Day 1"),n(),i(100,"option",42),s(101,"Day 2"),n(),i(102,"option",43),s(103,"Day 3"),n(),i(104,"option",44),s(105,"Day 4"),n(),i(106,"option",45),s(107,"Day 5"),n(),i(108,"option",46),s(109,"Day 6"),n(),i(110,"option",47),s(111,"Day 7"),n()()(),i(112,"div",48)(113,"button",49),f("click",function(){return a.updateScheduleSettings()}),g(114,"i",50),s(115,"Update Schedule "),n()()(),i(116,"div",51)(117,"small",52),g(118,"i",53),s(119," These settings control what games appear on the dashboard and affect the current season display throughout the application. "),n()()()(),i(120,"div",3)(121,"div",32)(122,"h4",5),g(123,"i",54),s(124,"Player Approval System "),n()(),i(125,"div",7),_(126,Ce,4,0,"div",55)(127,Ee,4,0,"div",56)(128,Pe,45,16,"div",57),n()(),i(129,"div",3)(130,"div",15)(131,"h4",5),g(132,"i",58),s(133,"New Players Awaiting Assignment "),i(134,"span",59),s(135),n()()(),i(136,"div",7),_(137,Te,4,0,"div",55)(138,Me,4,0,"div",56)(139,Re,40,15,"div",60),n()(),i(140,"div",3)(141,"div",10)(142,"h4",5),s(143,"Role Management"),n()(),i(144,"div",7)(145,"div",61)(146,"div",62)(147,"input",63),S("ngModelChange",function(o){return x(a.searchUsername,o)||(a.searchUsername=o),o}),f("input",function(){return a.onSearchInput()}),n(),i(148,"button",64),f("click",function(){return a.searchUser()}),_(149,De,1,0,"span",65),s(150," Search "),n()(),_(151,He,2,1,"div",66),n(),_(152,qe,2,1,"div",67)(153,Ve,2,1,"div",68)(154,Le,17,6,"div",69),n()(),i(155,"div",70)(156,"div",10)(157,"h4",5),s(158,"Trade Approvals"),n()(),i(159,"div",7),_(160,Oe,4,0,"div",55)(161,Ae,2,0,"div",56)(162,Be,20,6,"div",71),n()()()()(),_(163,ze,82,13,"div",72)(164,Je,16,2,"div",72)(165,tt,17,4,"div",72)),e&2&&(l(17),b(a.currentLeagueSeason),l(13),b(a.draftClassCounts.age18),l(5),b(a.draftClassCounts.age19),l(5),b(a.draftClassCounts.age20Plus),l(6),b(a.draftClassCounts.total),l(12),c("disabled",a.seasonRolloverInProgress),l(2),h(" ",a.seasonRolloverInProgress?"Processing...":"Advance to Season "+(a.currentLeagueSeason+1)," "),l(18),c("ngForOf",a.seasonHistory),l(11),v("ngModel",a.currentSeason),l(4),v("ngModel",a.currentWeek),l(4),v("ngModel",a.currentDay),l(16),c("disabled",a.loading),l(13),c("ngIf",a.loadingPendingPlayers),l(),c("ngIf",!a.loadingPendingPlayers&&a.pendingPlayers.length===0),l(),c("ngForOf",a.pendingPlayers),l(7),b(a.newPlayers.length),l(2),c("ngIf",a.loadingNewPlayers),l(),c("ngIf",!a.loadingNewPlayers&&a.newPlayers.length===0),l(),c("ngForOf",a.newPlayers),l(8),v("ngModel",a.searchUsername),c("disabled",a.loading),l(),c("disabled",a.loading),l(),c("ngIf",a.loading),l(2),c("ngIf",a.showSearchResults),l(),c("ngIf",a.error),l(),c("ngIf",a.success),l(),c("ngIf",a.selectedUser),l(6),c("ngIf",a.loadingTrades),l(),c("ngIf",!a.loadingTrades&&a.pendingTrades.length===0),l(),c("ngForOf",a.pendingTrades),l(),c("ngIf",a.showSeasonRolloverModal),l(),c("ngIf",a.showEditPlayerModal),l(),c("ngIf",a.showGmRoleModal))},dependencies:[ie,Z,ee,ue,de,ce,ae,oe,ne,le,re,ge,me,se,te],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;background:#fff;min-height:100vh;padding:2rem 0}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:8px;box-shadow:0 2px 4px #0000000d;color:#495057;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border-bottom:1px solid #dee2e6;border-radius:8px 8px 0 0;padding:1rem}.card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-weight:600;color:#495057}.card-body[_ngcontent-%COMP%]{padding:1.5rem;background:#fff}.card-header.bg-success[_ngcontent-%COMP%]{background:#e8f5e8!important;color:#2e7d32!important}.card-header.bg-info[_ngcontent-%COMP%]{background:#e3f2fd!important;color:#1976d2!important}.card-header.bg-warning[_ngcontent-%COMP%]{background:#fff3e0!important;color:#f57c00!important}.card-header.bg-primary[_ngcontent-%COMP%]{background:#e3f2fd!important;color:#1976d2!important}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .6rem;border-radius:4px;font-weight:500}.btn[_ngcontent-%COMP%]{border-radius:4px;font-weight:500;padding:.375rem .75rem;border:1px solid transparent;font-size:.875rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #ced4da;padding:.5rem .75rem;font-size:.9rem;background:#fff;color:#495057}.alert[_ngcontent-%COMP%]{border:none;border-radius:6px;padding:.75rem 1rem}.modal-content[_ngcontent-%COMP%]{border-radius:8px;border:none;box-shadow:0 10px 30px #00000026}.search-results[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #dee2e6;border-top:none;border-radius:0 0 .375rem .375rem;box-shadow:0 4px 6px #0000001a;z-index:1000;max-height:200px;overflow-y:auto}.search-result-item[_ngcontent-%COMP%]{padding:.75rem;cursor:pointer;border-bottom:1px solid #f8f9fa;transition:background-color .2s ease}.search-result-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.search-result-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.user-avatar-small[_ngcontent-%COMP%]{width:32px;height:32px;background:#6c757d;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;color:#fff;font-weight:700}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem}}"]})};export{xe as Headquarters};
